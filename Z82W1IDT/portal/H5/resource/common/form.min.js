jQuery.extend({par2Json:function(e,c){var h={},g=e.split("&"),l=decodeURIComponent,b,f;jQuery.each(g,function(d,m){m=m.split("=");b=l(m[0]);f=m[1];h[b]=c||!h[b]?f:[].concat(h[b]).concat(f)});return h},json2Par:function(h,g){var d,b=[],c,f=encodeURIComponent;for(c in h){d=h[c]=="undefined";$.each(d?c:h[c],function(l,e){b.push("&",f(c),"=",(l!=c||!d)?f(l):"")})}if(!g){b.shift();g=""}return g+b.join("")},obj2Str:function(e){var c=[];if(typeof e=="string"||e==null){return e}if(typeof e=="object"){if(!e.sort){c[0]="{";for(var b in e){var d=HTMLEncode(jQuery.obj2Str(e[b]));c[c.length]='"'+b+'"';c[c.length]=":";c[c.length]='"'+d+'"';c[c.length]=","}c[c.length-1]="}"}else{c[0]="[";for(var b=0;b<e.length;b++){c[c.length]=jQuery.obj2Str(e[b]);c[c.length]=","}c[c.length-1]="]"}return c.join("")}return e.toString()},json2Str:function(d){if(d==undefined){return""}var c=[];if(typeof d=="string"){return'"'+d.replace(/([\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'}if(typeof d=="object"){if(!d.sort){for(var b in d){c.push('"'+b+'":'+jQuery.json2Str(d[b]))}if(navigator.userAgent.indexOf("MSIE 9.0")<0&&!!document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(d.toString)){c.push("toString:"+d.toString.toString())}c="{"+c.join()+"}"}else{for(var b=0;b<d.length;b++){c.push(jQuery.json2Str(d[b]))}c="["+c.join()+"]"}return c}return d.toString().replace(/\"\:/g,'":""')},jQueryValues:function(c){var b=[];for(var d in c){b.push(c[d])}return b}});(function(b){var c=b(document).data("func",{});b.smartMenu=b.noop;b.fn.smartMenu=function(g,d){var m=b("body"),h={name:"",offsetX:2,offsetY:2,textLimit:6,beforeShow:b.noop,afterShow:b.noop};var l=b.extend(h,d||{});var f=function(q){var s=q||g,p=q?Math.random().toString():l.name,u="",t="",r="smart_menu_";if(b.isArray(s)&&s.length){u='<div id="smartMenu_'+p+'" class="'+r+'box"><div class="'+r+'body"><ul class="'+r+'ul">';b.each(s,function(w,v){if(w){u=u+'<li class="'+r+'li_separate">&nbsp;</li>'}if(b.isArray(v)){b.each(v,function(y,C){var D=C.text,B="",x="",A=Math.random().toString().replace(".","");var z=C.isReadOnly;if(D){if(D.length>l.textLimit){D=D.slice(0,l.textLimit)+"…";x=' title="'+C.text+'"'}if(b.isArray(C.data)&&C.data.length){B='<li class="'+r+'li" data-hover="true">'+f(C.data)+'<a href="javascript:" class="'+r+'a"'+x+' data-key="'+A+'"><i class="'+r+'triangle"></i>'+D+"</a></li>"}else{if(z=="true"){B='<li class="'+r+'li" disabled="disabled"><p class="'+r+'a" style="color:#aaa;">'+D+"</p></li>"}else{B='<li class="'+r+'li"><a href="javascript:" class="'+r+'a"'+x+' data-key="'+A+'">'+D+"</a></li>"}}u+=B;var E=c.data("func");E[A]=C.func;c.data("func",E)}})}});u=u+"</ul></div></div>"}return u},e=function(){var p="#smartMenu_",r="smart_menu_",q=b(p+l.name);if(!q.size()){b("body").append(f());b(p+l.name+" a").bind("click",function(){var s=b(this).attr("data-key"),t=c.data("func")[s];if(b.isFunction(t)){t.call(c.data("trigger"))}b.smartMenu.hide();return false});b(p+l.name+" li").each(function(){var s=b(this).attr("data-hover"),t=r+"li_hover";b(this).hover(function(){var u=b(this).siblings("."+t);u.removeClass(t).children("."+r+"box").hide();u.children("."+r+"a").removeClass(r+"a_hover");if(s){b(this).addClass(t).children("."+r+"box").show();b(this).children("."+r+"a").addClass(r+"a_hover")}})});return b(p+l.name)}return q};b(this).each(function(){this.oncontextmenu=function(r){if(b.isFunction(l.beforeShow)){l.beforeShow.call(this)}r=r||window.event;r.cancelBubble=true;if(r.stopPropagation){r.stopPropagation()}b.smartMenu.hide();var q=c.scrollTop();var p=e();if(p){p.css({display:"block",left:r.clientX+l.offsetX,top:r.clientY+q+l.offsetY});c.data("target",p);c.data("trigger",this);if(b.isFunction(l.afterShow)){l.afterShow.call(this)}return false}}});if(!m.data("bind")){m.bind("click",b.smartMenu.hide).data("bind",true)}};b.extend(b.smartMenu,{hide:function(){var d=c.data("target");if(d&&d.css("display")==="block"){d.hide()}},remove:function(){var d=c.data("target");if(d){d.remove()}}})})(jQuery);
/*! jQuery UI - v1.9.2 - 2013-07-12
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.sortable.js, jquery.ui.button.js, jquery.ui.dialog.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(g,c){function b(m,s){var p,l,q,e=m.nodeName.toLowerCase();return"area"===e?(p=m.parentNode,l=p.name,!m.href||!l||p.nodeName.toLowerCase()!=="map"?!1:(q=g("img[usemap=#"+l+"]")[0],!!q&&d(q))):(/input|select|textarea|button|object/.test(e)?!m.disabled:"a"===e?m.href||s:s)&&d(m)}function d(e){return g.expr.filters.visible(e)&&!g(e).parents().andSelf().filter(function(){return g.css(this,"visibility")==="hidden"}).length}var h=0,f=/^ui-id-\d+$/;g.ui=g.ui||{};if(g.ui.version){return}g.extend(g.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),g.fn.extend({_focus:g.fn.focus,focus:function(e,l){return typeof e=="number"?this.each(function(){var m=this;setTimeout(function(){g(m).focus(),l&&l.call(m)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return g.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?e=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(g.css(this,"position"))&&/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0):e=this.parents().filter(function(){return/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?g(document):e},zIndex:function(p){if(p!==c){return this.css("zIndex",p)}if(this.length){var m=g(this[0]),e,l;while(m.length&&m[0]!==document){e=m.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){l=parseInt(m.css("zIndex"),10);if(!isNaN(l)&&l!==0){return l}}m=m.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++h)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&g(this).removeAttr("id")})}}),g.extend(g.expr[":"],{data:g.expr.createPseudo?g.expr.createPseudo(function(e){return function(l){return !!g.data(l,e)}}):function(e,m,l){return !!g.data(e,l[3])},focusable:function(e){return b(e,!isNaN(g.attr(e,"tabindex")))},tabbable:function(e){var m=g.attr(e,"tabindex"),l=isNaN(m);return(l||m>=0)&&b(e,!l)}}),g(function(){var e=document.body,l=e.appendChild(l=document.createElement("div"));l.offsetHeight,g.extend(l.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),g.support.minHeight=l.offsetHeight===100,g.support.selectstart="onselectstart" in l,e.removeChild(l).style.display="none"}),g("<a>").outerWidth(1).jquery||g.each(["Width","Height"],function(t,p){function e(u,x,w,v){return g.each(l,function(){x-=parseFloat(g.css(u,"padding"+this))||0,w&&(x-=parseFloat(g.css(u,"border"+this+"Width"))||0),v&&(x-=parseFloat(g.css(u,"margin"+this))||0)}),x}var l=p==="Width"?["Left","Right"]:["Top","Bottom"],m=p.toLowerCase(),q={innerWidth:g.fn.innerWidth,innerHeight:g.fn.innerHeight,outerWidth:g.fn.outerWidth,outerHeight:g.fn.outerHeight};g.fn["inner"+p]=function(r){return r===c?q["inner"+p].call(this):this.each(function(){g(this).css(m,e(this,r)+"px")})},g.fn["outer"+p]=function(r,s){return typeof r!="number"?q["outer"+p].call(this,r):this.each(function(){g(this).css(m,e(this,r,!0,s)+"px")})}}),g("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(g.fn.removeData=function(e){return function(l){return arguments.length?e.call(this,g.camelCase(l)):e.call(this)}}(g.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];g.ui.ie=e.length?!0:!1,g.ui.ie6=parseFloat(e[1],10)===6}(),g.fn.extend({disableSelection:function(){return this.bind((g.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(l){l.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),g.extend(g.ui,{plugin:{add:function(l,q,p){var e,m=g.ui[l].prototype;for(e in p){m.plugins[e]=m.plugins[e]||[],m.plugins[e].push([q,p[e]])}},call:function(q,m,s){var p,l=q.plugins[m];if(!l||!q.element[0].parentNode||q.element[0].parentNode.nodeType===11){return}for(p=0;p<l.length;p++){q.options[l[p][0]]&&l[p][1].apply(q.element,s)}}},contains:g.contains,hasScroll:function(l,p){if(g(l).css("overflow")==="hidden"){return !1}var m=p&&p==="left"?"scrollLeft":"scrollTop",e=!1;return l[m]>0?!0:(l[m]=1,e=l[m]>0,l[m]=0,e)},isOverAxis:function(m,l,p){return m>l&&m<l+p},isOver:function(l,u,p,e,m,q){return g.ui.isOverAxis(l,p,m)&&g.ui.isOverAxis(u,e,q)}})})(jQuery);(function(f,c){var g=0,d=Array.prototype.slice,b=f.cleanData;f.cleanData=function(e){for(var m=0,l;(l=e[m])!=null;m++){try{f(l).triggerHandler("remove")}catch(h){}}b(e)},f.widget=function(m,w,q){var l,p,v,h,e=m.split(".")[0];m=m.split(".")[1],l=e+"-"+m,q||(q=w,w=f.Widget),f.expr[":"][l.toLowerCase()]=function(r){return !!f.data(r,l)},f[e]=f[e]||{},p=f[e][m],v=f[e][m]=function(s,r){if(!this._createWidget){return new v(s,r)}arguments.length&&this._createWidget(s,r)},f.extend(v,p,{version:q.version,_proto:f.extend({},q),_childConstructors:[]}),h=new w,h.options=f.widget.extend({},h.options),f.each(q,function(s,r){f.isFunction(r)&&(q[s]=function(){var u=function(){return w.prototype[s].apply(this,arguments)},t=function(x){return w.prototype[s].apply(this,x)};return function(){var x=this._super,z=this._superApply,y;return this._super=u,this._superApply=t,y=r.apply(this,arguments),this._super=x,this._superApply=z,y}}())}),v.prototype=f.widget.extend(h,{widgetEventPrefix:p?h.widgetEventPrefix:m},q,{constructor:v,namespace:e,widgetName:m,widgetBaseClass:l,widgetFullName:l}),p?(f.each(p._childConstructors,function(s,x){var u=x.prototype;f.widget(u.namespace+"."+u.widgetName,v,x._proto)}),delete p._childConstructors):w._childConstructors.push(v),f.widget.bridge(m,v)},f.widget.extend=function(q){var l=d.call(arguments,1),m=0,p=l.length,h,e;for(;m<p;m++){for(h in l[m]){e=l[m][h],l[m].hasOwnProperty(h)&&e!==c&&(f.isPlainObject(e)?q[h]=f.isPlainObject(q[h])?f.widget.extend({},q[h],e):f.widget.extend({},e):q[h]=e)}}return q},f.widget.bridge=function(l,e){var h=e.prototype.widgetFullName||l;f.fn[l]=function(r){var p=typeof r=="string",m=d.call(arguments,1),q=this;return r=!p&&m.length?f.widget.extend.apply(null,[r].concat(m)):r,p?this.each(function(){var t,s=f.data(this,h);if(!s){return f.error("cannot call methods on "+l+" prior to initialization; attempted to call method '"+r+"'")}if(!f.isFunction(s[r])||r.charAt(0)==="_"){return f.error("no such method '"+r+"' for "+l+" widget instance")}t=s[r].apply(s,m);if(t!==s&&t!==c){return q=t&&t.jquery?q.pushStack(t.get()):t,!1}}):this.each(function(){var s=f.data(this,h);s?s.option(r||{})._init():f.data(this,h,new e(r,this))}),q}},f.Widget=function(){},f.Widget._childConstructors=[],f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,h){h=f(h||this.defaultElement||this)[0],this.element=f(h),this.uuid=g++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=f.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=f(),this.hoverable=f(),this.focusable=f(),h!==this&&(f.data(h,this.widgetName,this),f.data(h,this.widgetFullName,this),this._on(!0,this.element,{remove:function(l){l.target===h&&this.destroy()}}),this.document=f(h.style?h.ownerDocument:h.document||h),this.window=f(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:f.noop,_getCreateEventData:f.noop,_create:f.noop,_init:f.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(f.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:f.noop,widget:function(){return this.element},option:function(q,m){var h=q,l,p,e;if(arguments.length===0){return f.widget.extend({},this.options)}if(typeof q=="string"){h={},l=q.split("."),q=l.shift();if(l.length){p=h[q]=f.widget.extend({},this.options[q]);for(e=0;e<l.length-1;e++){p[l[e]]=p[l[e]]||{},p=p[l[e]]}q=l.pop();if(m===c){return p[q]===c?null:p[q]}p[q]=m}else{if(m===c){return this.options[q]===c?null:this.options[q]}h[q]=m}}return this._setOptions(h),this},_setOptions:function(l){var h;for(h in l){this._setOption(h,l[h])}return this},_setOption:function(l,h){return this.options[l]=h,l==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!h).attr("aria-disabled",h),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(h,p,m){var e,l=this;typeof h!="boolean"&&(m=p,p=h,h=!1),m?(p=e=f(p),this.bindings=this.bindings.add(p)):(m=p,p=this.element,e=this.widget()),f.each(m,function(v,x){function t(){if(!h&&(l.options.disabled===!0||f(this).hasClass("ui-state-disabled"))){return}return(typeof x=="string"?l[x]:x).apply(l,arguments)}typeof x!="string"&&(t.guid=x.guid=x.guid||t.guid||f.guid++);var s=v.match(/^(\w+)\s*(.*)$/),w=s[1]+l.eventNamespace,q=s[2];q?e.delegate(q,w,t):p.bind(w,t)})},_off:function(l,h){h=(h||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,l.unbind(h).undelegate(h)},_delay:function(m,h){function p(){return(typeof m=="string"?l[m]:m).apply(l,arguments)}var l=this;return setTimeout(p,h||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(h){f(h.currentTarget).addClass("ui-state-hover")},mouseleave:function(h){f(h.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(h){f(h.currentTarget).addClass("ui-state-focus")},focusout:function(h){f(h.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(h,q,m){var e,l,p=this.options[h];m=m||{},q=f.Event(q),q.type=(h===this.widgetEventPrefix?h:this.widgetEventPrefix+h).toLowerCase(),q.target=this.element[0],l=q.originalEvent;if(l){for(e in l){e in q||(q[e]=l[e])}}return this.element.trigger(q,m),!(f.isFunction(p)&&p.apply(this.element[0],[q].concat(m))===!1||q.isDefaultPrevented())}},f.each({show:"fadeIn",hide:"fadeOut"},function(e,h){f.Widget.prototype["_"+e]=function(q,m,p){typeof m=="string"&&(m={effect:m});var t,l=m?m===!0||typeof m=="number"?h:m.effect||h:e;m=m||{},typeof m=="number"&&(m={duration:m}),t=!f.isEmptyObject(m),m.complete=p,m.delay&&q.delay(m.delay),t&&f.effects&&(f.effects.effect[l]||f.uiBackCompat!==!1&&f.effects[l])?q[e](m):l!==e&&q[l]?q[l](m.duration,m.easing,p):q.queue(function(r){f(this)[e](),p&&p.call(q[0]),r()})}}),f.uiBackCompat!==!1&&(f.Widget.prototype._getCreateOptions=function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(c,b){var d=!1;c(document).mouseup(function(f){d=!1}),c.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(f){return e._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(!0===c.data(f.target,e.widgetName+".preventClickEvent")){return c.removeData(f.target,e.widgetName+".preventClickEvent"),f.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(f){if(d){return}this._mouseStarted&&this._mouseUp(f),this._mouseDownEvent=f;var h=this,e=f.which===1,g=typeof this.options.cancel=="string"&&f.target.nodeName?c(f.target).closest(this.options.cancel).length:!1;if(!e||g||!this._mouseCapture(f)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){h.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=this._mouseStart(f)!==!1;if(!this._mouseStarted){return f.preventDefault(),!0}}return !0===c.data(f.target,this.widgetName+".preventClickEvent")&&c.removeData(f.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(l){return h._mouseMove(l)},this._mouseUpDelegate=function(l){return h._mouseUp(l)},c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),f.preventDefault(),d=!0,!0},_mouseMove:function(e){return !c.ui.ie||document.documentMode>=9||!!e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&c.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(f){return Math.max(Math.abs(this._mouseDownEvent.pageX-f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance},_mouseDelayMet:function(f){return this.mouseDelayMet},_mouseStart:function(f){},_mouseDrag:function(f){},_mouseStop:function(f){},_mouseCapture:function(f){return !0}})})(jQuery);(function(y,C){function w(f,c,h){return[parseInt(f[0],10)*(q.test(f[0])?c/100:1),parseInt(f[1],10)*(q.test(f[1])?h/100:1)]}function d(c,e){return parseInt(y.css(c,e),10)||0}y.ui=y.ui||{};var m,b=Math.max,v=Math.abs,D=Math.round,g=/left|center|right/,B=/top|center|bottom/,A=/[\+\-]\d+%?/,x=/^\w+/,q=/%$/,z=y.fn.position;y.position={scrollbarWidth:function(){if(m!==C){return m}var f,c,e=y("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),h=e.children()[0];return y("body").append(e),f=h.offsetWidth,e.css("overflow","scroll"),c=h.offsetWidth,f===c&&(c=e[0].clientWidth),e.remove(),m=f-c},getScrollInfo:function(e){var l=e.isWindow?"":e.element.css("overflow-x"),h=e.isWindow?"":e.element.css("overflow-y"),c=l==="scroll"||l==="auto"&&e.width<e.element[0].scrollWidth,f=h==="scroll"||h==="auto"&&e.height<e.element[0].scrollHeight;return{width:c?y.position.scrollbarWidth():0,height:f?y.position.scrollbarWidth():0}},getWithinInfo:function(c){var f=y(c||window),e=y.isWindow(f[0]);return{element:f,isWindow:e,offset:f.offset()||{left:0,top:0},scrollLeft:f.scrollLeft(),scrollTop:f.scrollTop(),width:e?f.width():f.outerWidth(),height:e?f.height():f.outerHeight()}}},y.fn.position=function(H){if(!H||!H.of){return z.apply(this,arguments)}H=y.extend({},H);var c,f,r,G,e,p=y(H.of),u=y.position.getWithinInfo(H.within),s=y.position.getScrollInfo(u),F=p[0],I=(H.collision||"flip").split(" "),h={};return F.nodeType===9?(f=p.width(),r=p.height(),G={top:0,left:0}):y.isWindow(F)?(f=p.width(),r=p.height(),G={top:p.scrollTop(),left:p.scrollLeft()}):F.preventDefault?(H.at="left top",f=r=0,G={top:F.pageY,left:F.pageX}):(f=p.outerWidth(),r=p.outerHeight(),G=p.offset()),e=y.extend({},G),y.each(["my","at"],function(){var t=(H[this]||"").split(" "),E,l;t.length===1&&(t=g.test(t[0])?t.concat(["center"]):B.test(t[0])?["center"].concat(t):["center","center"]),t[0]=g.test(t[0])?t[0]:"center",t[1]=B.test(t[1])?t[1]:"center",E=A.exec(t[0]),l=A.exec(t[1]),h[this]=[E?E[0]:0,l?l[0]:0],H[this]=[x.exec(t[0])[0],x.exec(t[1])[0]]}),I.length===1&&(I[1]=I[0]),H.at[0]==="right"?e.left+=f:H.at[0]==="center"&&(e.left+=f/2),H.at[1]==="bottom"?e.top+=r:H.at[1]==="center"&&(e.top+=r/2),c=w(h.at,f,r),e.left+=c[0],e.top+=c[1],this.each(function(){var t,R,O=y(this),K=O.outerWidth(),M=O.outerHeight(),Q=d(this,"marginLeft"),P=d(this,"marginTop"),J=K+Q+d(this,"marginRight")+s.width,L=M+P+d(this,"marginBottom")+s.height,l=y.extend({},e),E=w(h.my,O.outerWidth(),O.outerHeight());H.my[0]==="right"?l.left-=K:H.my[0]==="center"&&(l.left-=K/2),H.my[1]==="bottom"?l.top-=M:H.my[1]==="center"&&(l.top-=M/2),l.left+=E[0],l.top+=E[1],y.support.offsetFractions||(l.left=D(l.left),l.top=D(l.top)),t={marginLeft:Q,marginTop:P},y.each(["left","top"],function(S,N){y.ui.position[I[S]]&&y.ui.position[I[S]][N](l,{targetWidth:f,targetHeight:r,elemWidth:K,elemHeight:M,collisionPosition:t,collisionWidth:J,collisionHeight:L,offset:[c[0]+E[0],c[1]+E[1]],my:H.my,at:H.at,within:u,elem:O})}),y.fn.bgiframe&&O.bgiframe(),H.using&&(R=function(U){var W=G.left-l.left,T=W+f-K,V=G.top-l.top,N=V+r-M,S={target:{element:p,left:G.left,top:G.top,width:f,height:r},element:{element:O,left:l.left,top:l.top,width:K,height:M},horizontal:T<0?"left":W>0?"right":"center",vertical:N<0?"top":V>0?"bottom":"middle"};f<K&&v(W+T)<f&&(S.horizontal="center"),r<M&&v(V+N)<r&&(S.vertical="middle"),b(v(W),v(T))>b(v(V),v(N))?S.important="horizontal":S.important="vertical",H.using.call(this,U,S)}),O.offset(y.extend(l,{using:R}))})},y.ui.position={fit:{left:function(r,G){var h=G.within,l=h.isWindow?h.scrollLeft:h.offset.left,H=h.width,c=r.left-G.collisionPosition.marginLeft,F=l-c,E=c+G.collisionWidth-H-l,p;G.collisionWidth>H?F>0&&E<=0?(p=r.left+F+G.collisionWidth-H-l,r.left+=F-p):E>0&&F<=0?r.left=l:F>E?r.left=l+H-G.collisionWidth:r.left=l:F>0?r.left+=F:E>0?r.left-=E:r.left=b(r.left-c,r.left)},top:function(r,G){var h=G.within,l=h.isWindow?h.scrollTop:h.offset.top,H=G.within.height,c=r.top-G.collisionPosition.marginTop,F=l-c,E=c+G.collisionHeight-H-l,p;G.collisionHeight>H?F>0&&E<=0?(p=r.top+F+G.collisionHeight-H-l,r.top+=F-p):E>0&&F<=0?r.top=l:F>E?r.top=l+H-G.collisionHeight:r.top=l:F>0?r.top+=F:E>0?r.top-=E:r.top=b(r.top-c,r.top)}},flip:{left:function(L,Q){var H=Q.within,E=H.offset.left+H.scrollLeft,R=H.width,G=H.isWindow?H.scrollLeft:H.offset.left,P=L.left-Q.collisionPosition.marginLeft,O=P-G,K=P+Q.collisionWidth-R-G,I=Q.my[0]==="left"?-Q.elemWidth:Q.my[0]==="right"?Q.elemWidth:0,N=Q.at[0]==="left"?Q.targetWidth:Q.at[0]==="right"?-Q.targetWidth:0,J=-2*Q.offset[0],F,M;if(O<0){F=L.left+I+N+J+Q.collisionWidth-R-E;if(F<0||F<v(O)){L.left+=I+N+J}}else{if(K>0){M=L.left-Q.collisionPosition.marginLeft+I+N+J-G;if(M>0||v(M)<K){L.left+=I+N+J}}}},top:function(L,R){var H=R.within,E=H.offset.top+H.scrollTop,S=H.height,G=H.isWindow?H.scrollTop:H.offset.top,Q=L.top-R.collisionPosition.marginTop,O=Q-G,K=Q+R.collisionHeight-S-G,I=R.my[1]==="top",N=I?-R.elemHeight:R.my[1]==="bottom"?R.elemHeight:0,J=R.at[1]==="top"?R.targetHeight:R.at[1]==="bottom"?-R.targetHeight:0,F=-2*R.offset[1],M,P;O<0?(P=L.top+N+J+F+R.collisionHeight-S-E,L.top+N+J+F>O&&(P<0||P<v(O))&&(L.top+=N+J+F)):K>0&&(M=L.top-R.collisionPosition.marginTop+N+J+F-G,L.top+N+J+F>K&&(M>0||v(M)<K)&&(L.top+=N+J+F))}},flipfit:{left:function(){y.ui.position.flip.left.apply(this,arguments),y.ui.position.fit.left.apply(this,arguments)},top:function(){y.ui.position.flip.top.apply(this,arguments),y.ui.position.fit.top.apply(this,arguments)}}},function(){var f,E,l,e,h,p=document.getElementsByTagName("body")[0],c=document.createElement("div");f=document.createElement(p?"div":"body"),l={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},p&&y.extend(l,{position:"absolute",left:"-1000px",top:"-1000px"});for(h in l){f.style[h]=l[h]}f.appendChild(c),E=p||document.documentElement,E.insertBefore(f,E.firstChild),c.style.cssText="position: absolute; left: 10.7432222px;",e=y(c).offset().left,y.support.offsetFractions=e>10&&e<11,f.innerHTML="",E.removeChild(f)}(),y.uiBackCompat!==!1&&function(c){var f=c.fn.position;c.fn.position=function(l){if(!l||!l.offset){return f.call(this,l)}var e=l.offset.split(" "),h=l.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),h.length===1&&(/left|center|right/.test(h[0])?h[1]="center":(h[1]=h[0],h[0]="center")),f.call(this,c.extend(l,{at:h[0]+e[0]+" "+h[1]+e[1],offset:C}))}}(jQuery)})(jQuery);(function(c,b){c.widget("ui.draggable",c.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(d){var e=this.options;return this.helper||e.disabled||c(d.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(d),this.handle?(c(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(c(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(d){var e=this.options;return this.helper=this._createHelper(d),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),c.ui.ddmanager&&(c.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),this._trigger("start",d)===!1?(this._clear(),!1):(this._cacheHelperProportions(),c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,d),this._mouseDrag(d,!0),c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,d),!0)},_mouseDrag:function(d,f){this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute");if(!f){var e=this._uiHash();if(this._trigger("drag",d,e)===!1){return this._mouseUp({}),!1}this.position=e.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return c.ui.ddmanager&&c.ui.ddmanager.drag(this,d),!1},_mouseStop:function(e){var h=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(h=c.ui.ddmanager.drop(this,e)),this.dropped&&(h=this.dropped,this.dropped=!1);var g=this.element[0],d=!1;while(g&&(g=g.parentNode)){g==document&&(d=!0)}if(!d&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!h||this.options.revert=="valid"&&h||this.options.revert===!0||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,h)){var f=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",e)!==!1&&f._clear()})}else{this._trigger("stop",e)!==!1&&this._clear()}return !1},_mouseUp:function(d){return c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,d),c.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(d){var e=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;return c(this.options.handle,this.element).find("*").andSelf().each(function(){this==d.target&&(e=!0)}),e},_createHelper:function(d){var f=this.options,e=c.isFunction(f.helper)?c(f.helper.apply(this.element[0],[d])):f.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo(f.appendTo=="parent"?this.element[0].parentNode:f.appendTo),e[0]!=this.element[0]&&!/(fixed|absolute)/.test(e.css("position"))&&e.css("position","absolute"),e},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),c.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left" in d&&(this.offset.click.left=d.left+this.margins.left),"right" in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top" in d&&(this.offset.click.top=d.top+this.margins.top),"bottom" in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.ui.ie){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=this.element.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;e.containment=="parent"&&(e.containment=this.helper[0].parentNode);if(e.containment=="document"||e.containment=="window"){this.containment=[e.containment=="document"?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e.containment=="document"?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(e.containment=="document"?0:c(window).scrollLeft())+c(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e.containment=="document"?0:c(window).scrollTop())+(c(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(e.containment)&&e.containment.constructor!=Array){var h=c(e.containment),g=h[0];if(!g){return}var d=h.offset(),f=c(g).css("overflow")!="hidden";this.containment=[(parseInt(c(g).css("borderLeftWidth"),10)||0)+(parseInt(c(g).css("paddingLeft"),10)||0),(parseInt(c(g).css("borderTopWidth"),10)||0)+(parseInt(c(g).css("paddingTop"),10)||0),(f?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(c(g).css("borderLeftWidth"),10)||0)-(parseInt(c(g).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(c(g).css("borderTopWidth"),10)||0)-(parseInt(c(g).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=h}else{e.containment.constructor==Array&&(this.containment=e.containment)}},_convertPositionTo:function(e,l){l||(l=this.position);var g=e=="absolute"?1:-1,d=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(f[0].tagName);return{top:l.top+this.offset.relative.top*g+this.offset.parent.top*g-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:f.scrollTop())*g,left:l.left+this.offset.relative.left*g+this.offset.parent.left*g-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:f.scrollLeft())*g}},_generatePosition:function(w){var g=this.options,d=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,m=/(html|body)/i.test(d[0].tagName),x=w.pageX,e=w.pageY;if(this.originalPosition){var v;if(this.containment){if(this.relative_container){var q=this.relative_container.offset();v=[this.containment[0]+q.left,this.containment[1]+q.top,this.containment[2]+q.left,this.containment[3]+q.top]}else{v=this.containment}w.pageX-this.offset.click.left<v[0]&&(x=v[0]+this.offset.click.left),w.pageY-this.offset.click.top<v[1]&&(e=v[1]+this.offset.click.top),w.pageX-this.offset.click.left>v[2]&&(x=v[2]+this.offset.click.left),w.pageY-this.offset.click.top>v[3]&&(e=v[3]+this.offset.click.top)}if(g.grid){var p=g.grid[1]?this.originalPageY+Math.round((e-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY;e=v?p-this.offset.click.top<v[1]||p-this.offset.click.top>v[3]?p-this.offset.click.top<v[1]?p+g.grid[1]:p-g.grid[1]:p:p;var h=g.grid[0]?this.originalPageX+Math.round((x-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX;x=v?h-this.offset.click.left<v[0]||h-this.offset.click.left>v[2]?h-this.offset.click.left<v[0]?h+g.grid[0]:h-g.grid[0]:h:h}}return{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():m?0:d.scrollTop()),left:x-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():m?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(d,f,e){return e=e||this._uiHash(),c.ui.plugin.call(this,d,[f,e]),d=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),c.Widget.prototype._trigger.call(this,d,f,e)},plugins:{},_uiHash:function(d){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),c.ui.plugin.add("draggable","connectToSortable",{start:function(e,h){var g=c(this).data("draggable"),d=g.options,f=c.extend({},h,{item:g.element});g.sortables=[],c(d.connectToSortable).each(function(){var l=c.data(this,"sortable");l&&!l.options.disabled&&(g.sortables.push({instance:l,shouldRevert:l.options.revert}),l.refreshPositions(),l._trigger("activate",e,f))})},stop:function(e,g){var f=c(this).data("draggable"),d=c.extend({},g,{item:f.element});c.each(f.sortables,function(){this.instance.isOver?(this.instance.isOver=0,f.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,f.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,d))})},drag:function(e,h){var g=c(this).data("draggable"),d=this,f=function(y){var p=this.offset.click.top,l=this.offset.click.left,q=this.positionAbs.top,z=this.positionAbs.left,m=y.height,x=y.width,w=y.top,v=y.left;return c.ui.isOver(q+p,z+l,w,v,m,x)};c.each(g.sortables,function(m){var p=!1,l=this;this.instance.positionAbs=g.positionAbs,this.instance.helperProportions=g.helperProportions,this.instance.offset.click=g.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(p=!0,c.each(g.sortables,function(){return this.instance.positionAbs=g.positionAbs,this.instance.helperProportions=g.helperProportions,this.instance.offset.click=g.offset.click,this!=l&&this.instance._intersectsWith(this.instance.containerCache)&&c.ui.contains(l.instance.element[0],this.instance.element[0])&&(p=!1),p})),p?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(d).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return h.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=g.offset.click.top,this.instance.offset.click.left=g.offset.click.left,this.instance.offset.parent.left-=g.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=g.offset.parent.top-this.instance.offset.parent.top,g._trigger("toSortable",e),g.dropped=this.instance.element,g.currentItem=g.element,this.instance.fromOutside=g),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),g._trigger("fromSortable",e),g.dropped=!1)})}}),c.ui.plugin.add("draggable","cursor",{start:function(e,g){var f=c("body"),d=c(this).data("draggable").options;f.css("cursor")&&(d._cursor=f.css("cursor")),f.css("cursor",d.cursor)},stop:function(d,f){var e=c(this).data("draggable").options;e._cursor&&c("body").css("cursor",e._cursor)}}),c.ui.plugin.add("draggable","opacity",{start:function(e,g){var f=c(g.helper),d=c(this).data("draggable").options;f.css("opacity")&&(d._opacity=f.css("opacity")),f.css("opacity",d.opacity)},stop:function(d,f){var e=c(this).data("draggable").options;e._opacity&&c(f.helper).css("opacity",e._opacity)}}),c.ui.plugin.add("draggable","scroll",{start:function(d,f){var e=c(this).data("draggable");e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e,h){var g=c(this).data("draggable"),d=g.options,f=!1;if(g.scrollParent[0]!=document&&g.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!="x"){g.overflowOffset.top+g.scrollParent[0].offsetHeight-e.pageY<d.scrollSensitivity?g.scrollParent[0].scrollTop=f=g.scrollParent[0].scrollTop+d.scrollSpeed:e.pageY-g.overflowOffset.top<d.scrollSensitivity&&(g.scrollParent[0].scrollTop=f=g.scrollParent[0].scrollTop-d.scrollSpeed)}if(!d.axis||d.axis!="y"){g.overflowOffset.left+g.scrollParent[0].offsetWidth-e.pageX<d.scrollSensitivity?g.scrollParent[0].scrollLeft=f=g.scrollParent[0].scrollLeft+d.scrollSpeed:e.pageX-g.overflowOffset.left<d.scrollSensitivity&&(g.scrollParent[0].scrollLeft=f=g.scrollParent[0].scrollLeft-d.scrollSpeed)}}else{if(!d.axis||d.axis!="x"){e.pageY-c(document).scrollTop()<d.scrollSensitivity?f=c(document).scrollTop(c(document).scrollTop()-d.scrollSpeed):c(window).height()-(e.pageY-c(document).scrollTop())<d.scrollSensitivity&&(f=c(document).scrollTop(c(document).scrollTop()+d.scrollSpeed))}if(!d.axis||d.axis!="y"){e.pageX-c(document).scrollLeft()<d.scrollSensitivity?f=c(document).scrollLeft(c(document).scrollLeft()-d.scrollSpeed):c(window).width()-(e.pageX-c(document).scrollLeft())<d.scrollSensitivity&&(f=c(document).scrollLeft(c(document).scrollLeft()+d.scrollSpeed))}}f!==!1&&c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(g,e)}}),c.ui.plugin.add("draggable","snap",{start:function(e,g){var f=c(this).data("draggable"),d=f.options;f.snapElements=[],c(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var h=c(this),l=h.offset();this!=f.element[0]&&f.snapElements.push({item:this,width:h.outerWidth(),height:h.outerHeight(),top:l.top,left:l.left})})},drag:function(x,D){var A=c(this).data("draggable"),G=A.options,z=G.snapTolerance,C=D.offset.left,w=C+A.helperProportions.width,N=D.offset.top,J=N+A.helperProportions.height;for(var F=A.snapElements.length-1;F>=0;F--){var L=A.snapElements[F].left,H=L+A.snapElements[F].width,B=A.snapElements[F].top,K=B+A.snapElements[F].height;if(!(L-z<C&&C<H+z&&B-z<N&&N<K+z||L-z<C&&C<H+z&&B-z<J&&J<K+z||L-z<w&&w<H+z&&B-z<N&&N<K+z||L-z<w&&w<H+z&&B-z<J&&J<K+z)){A.snapElements[F].snapping&&A.options.snap.release&&A.options.snap.release.call(A.element,x,c.extend(A._uiHash(),{snapItem:A.snapElements[F].item})),A.snapElements[F].snapping=!1;continue}if(G.snapMode!="inner"){var q=Math.abs(B-J)<=z,E=Math.abs(K-N)<=z,I=Math.abs(L-w)<=z,e=Math.abs(H-C)<=z;q&&(D.position.top=A._convertPositionTo("relative",{top:B-A.helperProportions.height,left:0}).top-A.margins.top),E&&(D.position.top=A._convertPositionTo("relative",{top:K,left:0}).top-A.margins.top),I&&(D.position.left=A._convertPositionTo("relative",{top:0,left:L-A.helperProportions.width}).left-A.margins.left),e&&(D.position.left=A._convertPositionTo("relative",{top:0,left:H}).left-A.margins.left)}var M=q||E||I||e;if(G.snapMode!="outer"){var q=Math.abs(B-N)<=z,E=Math.abs(K-J)<=z,I=Math.abs(L-C)<=z,e=Math.abs(H-w)<=z;q&&(D.position.top=A._convertPositionTo("relative",{top:B,left:0}).top-A.margins.top),E&&(D.position.top=A._convertPositionTo("relative",{top:K-A.helperProportions.height,left:0}).top-A.margins.top),I&&(D.position.left=A._convertPositionTo("relative",{top:0,left:L}).left-A.margins.left),e&&(D.position.left=A._convertPositionTo("relative",{top:0,left:H-A.helperProportions.width}).left-A.margins.left)}!A.snapElements[F].snapping&&(q||E||I||e||M)&&A.options.snap.snap&&A.options.snap.snap.call(A.element,x,c.extend(A._uiHash(),{snapItem:A.snapElements[F].item})),A.snapElements[F].snapping=q||E||I||e||M}}}),c.ui.plugin.add("draggable","stack",{start:function(e,h){var g=c(this).data("draggable").options,d=c.makeArray(c(g.stack)).sort(function(l,m){return(parseInt(c(l).css("zIndex"),10)||0)-(parseInt(c(m).css("zIndex"),10)||0)});if(!d.length){return}var f=parseInt(d[0].style.zIndex)||0;c(d).each(function(l){this.style.zIndex=f+l}),this[0].style.zIndex=f+d.length}}),c.ui.plugin.add("draggable","zIndex",{start:function(e,g){var f=c(g.helper),d=c(this).data("draggable").options;f.css("zIndex")&&(d._zIndex=f.css("zIndex")),f.css("zIndex",d.zIndex)},stop:function(d,f){var e=c(this).data("draggable").options;e._zIndex&&c(f.helper).css("zIndex",e._zIndex)}})})(jQuery);(function(d,b){d.widget("ui.resizable",d.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var h=this,q=this.options;this.element.addClass("ui-resizable"),d.extend(this,{_aspectRatio:!!q.aspectRatio,aspectRatio:q.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:q.helper||q.ghost||q.animate?q.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(d('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=q.handles||(d(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var m=this.handles.split(",");this.handles={};for(var g=0;g<m.length;g++){var l=d.trim(m[g]),p="ui-resizable-"+l,e=d('<div class="ui-resizable-handle '+p+'"></div>');e.css({zIndex:q.zIndex}),"se"==l&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[l]=".ui-resizable-"+l,this.element.append(e)}}this._renderAxis=function(v){v=v||this.element;for(var y in this.handles){this.handles[y].constructor==String&&(this.handles[y]=d(this.handles[y],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var x=d(this.handles[y],this.element),u=0;u=/sw|ne|nw|se|n|s/.test(y)?x.outerHeight():x.outerWidth();var w=["padding",/ne|nw|n/.test(y)?"Top":/se|sw|s/.test(y)?"Bottom":/^e$/.test(y)?"Right":"Left"].join("");v.css(w,u),this._proportionallyResize()}if(!d(this.handles[y]).length){continue}}},this._renderAxis(this.element),this._handles=d(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!h.resizing){if(this.className){var r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}h.axis=r&&r[1]?r[1]:"se"}}),q.autoHide&&(this._handles.hide(),d(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(q.disabled){return}d(this).removeClass("ui-resizable-autohide"),h._handles.show()}).mouseleave(function(){if(q.disabled){return}h.resizing||(d(this).addClass("ui-resizable-autohide"),h._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(h){d(h).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var g=this.element;this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g),g.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var h=!1;for(var g in this.handles){d(this.handles[g])[0]==e.target&&(h=!0)}return !this.options.disabled&&h},_mouseStart:function(l){var p=this.options,h=this.element.position(),m=this.element;this.resizing=!0,this.documentScroll={top:d(document).scrollTop(),left:d(document).scrollLeft()},(m.is(".ui-draggable")||/absolute/.test(m.css("position")))&&m.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy();var q=f(this.helper.css("left")),g=f(this.helper.css("top"));p.containment&&(q+=d(p.containment).scrollLeft()||0,g+=d(p.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:q,top:g},this.size=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalSize=this._helper?{width:m.outerWidth(),height:m.outerHeight()}:{width:m.width(),height:m.height()},this.originalPosition={left:q,top:g},this.sizeDiff={width:m.outerWidth()-m.width(),height:m.outerHeight()-m.height()},this.originalMousePosition={left:l.pageX,top:l.pageY},this.aspectRatio=typeof p.aspectRatio=="number"?p.aspectRatio:this.originalSize.width/this.originalSize.height||1;var e=d(".ui-resizable-"+this.axis).css("cursor");return d("body").css("cursor",e=="auto"?this.axis+"-resize":e),m.addClass("ui-resizable-resizing"),this._propagate("start",l),!0},_mouseDrag:function(w){var z=this.helper,m=this.options,g={},q=this,A=this.originalMousePosition,h=this.axis,y=w.pageX-A.left||0,x=w.pageY-A.top||0,v=this._change[h];if(!v){return !1}var p=v.apply(this,[w,y,x]);this._updateVirtualBoundaries(w.shiftKey);if(this._aspectRatio||w.shiftKey){p=this._updateRatio(p,w)}return p=this._respectSize(p,w),this._propagate("resize",w),z.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(p),this._trigger("resize",w,this.ui()),!1},_mouseStop:function(x){this.resizing=!1;var h=this.options,e=this;if(this._helper){var p=this._proportionallyResizeElements,y=p.length&&/textarea/i.test(p[0].nodeName),g=y&&d.ui.hasScroll(p[0],"left")?0:e.sizeDiff.height,w=y?0:e.sizeDiff.width,v={width:e.helper.width()-w,height:e.helper.height()-g},q=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,m=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;h.animate||this.element.css(d.extend(v,{top:m,left:q})),e.helper.height(e.size.height),e.helper.width(e.size.width),this._helper&&!h.animate&&this._proportionallyResize()}return d("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",x),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(p){var l=this.options,r,h,m,q,g;g={minWidth:c(l.minWidth)?l.minWidth:0,maxWidth:c(l.maxWidth)?l.maxWidth:Infinity,minHeight:c(l.minHeight)?l.minHeight:0,maxHeight:c(l.maxHeight)?l.maxHeight:Infinity};if(this._aspectRatio||p){r=g.minHeight*this.aspectRatio,m=g.minWidth/this.aspectRatio,h=g.maxHeight*this.aspectRatio,q=g.maxWidth/this.aspectRatio,r>g.minWidth&&(g.minWidth=r),m>g.minHeight&&(g.minHeight=m),h<g.maxWidth&&(g.maxWidth=h),q<g.maxHeight&&(g.maxHeight=q)}this._vBoundaries=g},_updateCache:function(h){var g=this.options;this.offset=this.helper.offset(),c(h.left)&&(this.position.left=h.left),c(h.top)&&(this.position.top=h.top),c(h.height)&&(this.size.height=h.height),c(h.width)&&(this.size.width=h.width)},_updateRatio:function(m,h){var q=this.options,g=this.position,l=this.size,p=this.axis;return c(m.height)?m.width=m.height*this.aspectRatio:c(m.width)&&(m.height=m.width/this.aspectRatio),p=="sw"&&(m.left=g.left+(l.width-m.width),m.top=null),p=="nw"&&(m.top=g.top+(l.height-m.height),m.left=g.left+(l.width-m.width)),m},_respectSize:function(z,F){var q=this.helper,w=this._vBoundaries,G=this._aspectRatio||F.shiftKey,m=this.axis,E=c(z.width)&&w.maxWidth&&w.maxWidth<z.width,C=c(z.height)&&w.maxHeight&&w.maxHeight<z.height,y=c(z.width)&&w.minWidth&&w.minWidth>z.width,r=c(z.height)&&w.minHeight&&w.minHeight>z.height;y&&(z.width=w.minWidth),r&&(z.height=w.minHeight),E&&(z.width=w.maxWidth),C&&(z.height=w.maxHeight);var B=this.originalPosition.left+this.originalSize.width,x=this.position.top+this.size.height,g=/sw|nw|w/.test(m),A=/nw|ne|n/.test(m);y&&g&&(z.left=B-w.minWidth),E&&g&&(z.left=B-w.maxWidth),r&&A&&(z.top=x-w.minHeight),C&&A&&(z.top=x-w.maxHeight);var D=!z.width&&!z.height;return D&&!z.left&&z.top?z.top=null:D&&!z.top&&z.left&&(z.left=null),z},_proportionallyResize:function(){var g=this.options;if(!this._proportionallyResizeElements.length){return}var p=this.helper||this.element;for(var l=0;l<this._proportionallyResizeElements.length;l++){var e=this._proportionallyResizeElements[l];if(!this.borderDif){var h=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],m=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=d.map(h,function(u,q){var v=parseInt(u,10)||0,s=parseInt(m[q],10)||0;return v+s})}e.css({height:p.height()-this.borderDif[0]-this.borderDif[2]||0,width:p.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var g=this.element,l=this.options;this.elementOffset=g.offset();if(this._helper){this.helper=this.helper||d('<div style="overflow:hidden;"></div>');var h=d.ui.ie6?1:0,e=d.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-h+"px",top:this.elementOffset.top-h+"px",zIndex:++l.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(h,g,l){return{width:this.originalSize.width+g}},w:function(p,h,q){var m=this.options,g=this.originalSize,l=this.originalPosition;return{left:l.left+h,width:g.width-h}},n:function(p,h,q){var m=this.options,g=this.originalSize,l=this.originalPosition;return{top:l.top+q,height:g.height-q}},s:function(h,g,l){return{height:this.originalSize.height+l}},se:function(e,h,g){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,h,g]))},sw:function(e,h,g){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,h,g]))},ne:function(e,h,g){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,h,g]))},nw:function(e,h,g){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,h,g]))}},_propagate:function(e,g){d.ui.plugin.call(this,e,[g,this.ui()]),e!="resize"&&this._trigger(e,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),d.ui.plugin.add("resizable","alsoResize",{start:function(g,m){var l=d(this).data("resizable"),e=l.options,h=function(p){d(p).each(function(){var q=d(this);q.data("resizable-alsoresize",{width:parseInt(q.width(),10),height:parseInt(q.height(),10),left:parseInt(q.css("left"),10),top:parseInt(q.css("top"),10)})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],h(e.alsoResize)):d.each(e.alsoResize,function(p){h(p)}):h(e.alsoResize)},resize:function(l,v){var p=d(this).data("resizable"),h=p.options,m=p.originalSize,q=p.originalPosition,g={height:p.size.height-m.height||0,width:p.size.width-m.width||0,top:p.position.top-q.top||0,left:p.position.left-q.left||0},e=function(s,u){d(s).each(function(){var w=d(this),r=d(this).data("resizable-alsoresize"),x={},y=u&&u.length?u:w.parents(v.originalElement[0]).length?["width","height"]:["width","height","top","left"];d.each(y,function(A,z){var B=(r[z]||0)+(g[z]||0);B&&B>=0&&(x[z]=B||null)}),w.css(x)})};typeof h.alsoResize=="object"&&!h.alsoResize.nodeType?d.each(h.alsoResize,function(s,r){e(s,r)}):e(h.alsoResize)},stop:function(e,g){d(this).removeData("resizable-alsoresize")}}),d.ui.plugin.add("resizable","animate",{stop:function(y,h){var e=d(this).data("resizable"),p=e.options,z=e._proportionallyResizeElements,g=z.length&&/textarea/i.test(z[0].nodeName),x=g&&d.ui.hasScroll(z[0],"left")?0:e.sizeDiff.height,w=g?0:e.sizeDiff.width,q={width:e.size.width-w,height:e.size.height-x},m=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,v=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(d.extend(q,v&&m?{top:v,left:m}:{}),{duration:p.animateDuration,easing:p.animateEasing,step:function(){var l={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};z&&z.length&&d(z[0]).css({width:l.width,height:l.height}),e._updateCache(l),e._propagate("resize",y)}})}}),d.ui.plugin.add("resizable","containment",{start:function(E,e){var w=d(this).data("resizable"),F=w.options,m=w.element,D=F.containment,B=D instanceof d?D.get(0):/parent/.test(D)?m.parent().get(0):D;if(!B){return}w.containerElement=d(B);if(/document/.test(D)||D==document){w.containerOffset={left:0,top:0},w.containerPosition={left:0,top:0},w.parentData={element:d(document),left:0,top:0,width:d(document).width(),height:d(document).height()||document.body.parentNode.scrollHeight}}else{var y=d(B),q=[];d(["Top","Right","Left","Bottom"]).each(function(l,h){q[l]=f(y.css("padding"+h))}),w.containerOffset=y.offset(),w.containerPosition=y.position(),w.containerSize={height:y.innerHeight()-q[3],width:y.innerWidth()-q[1]};var A=w.containerOffset,x=w.containerSize.height,g=w.containerSize.width,z=d.ui.hasScroll(B,"left")?B.scrollWidth:g,C=d.ui.hasScroll(B)?B.scrollHeight:x;w.parentData={element:B,left:A.left,top:A.top,width:z,height:C}}},resize:function(F,q){var e=d(this).data("resizable"),x=e.options,G=e.containerSize,m=e.containerOffset,E=e.size,C=e.position,z=e._aspectRatio||F.shiftKey,w={top:0,left:0},B=e.containerElement;B[0]!=document&&/static/.test(B.css("position"))&&(w=m),C.left<(e._helper?m.left:0)&&(e.size.width=e.size.width+(e._helper?e.position.left-m.left:e.position.left-w.left),z&&(e.size.height=e.size.width/e.aspectRatio),e.position.left=x.helper?m.left:0),C.top<(e._helper?m.top:0)&&(e.size.height=e.size.height+(e._helper?e.position.top-m.top:e.position.top),z&&(e.size.width=e.size.height*e.aspectRatio),e.position.top=e._helper?m.top:0),e.offset.left=e.parentData.left+e.position.left,e.offset.top=e.parentData.top+e.position.top;var y=Math.abs((e._helper?e.offset.left-w.left:e.offset.left-w.left)+e.sizeDiff.width),g=Math.abs((e._helper?e.offset.top-w.top:e.offset.top-m.top)+e.sizeDiff.height),A=e.containerElement.get(0)==e.element.parent().get(0),D=/relative|absolute/.test(e.containerElement.css("position"));A&&D&&(y-=e.parentData.left),y+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-y,z&&(e.size.height=e.size.width/e.aspectRatio)),g+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-g,z&&(e.size.width=e.size.height*e.aspectRatio))},stop:function(A,m){var e=d(this).data("resizable"),q=e.options,B=e.position,g=e.containerOffset,z=e.containerPosition,y=e.containerElement,w=d(e.helper),p=w.offset(),x=w.outerWidth()-e.sizeDiff.width,v=w.outerHeight()-e.sizeDiff.height;e._helper&&!q.animate&&/relative/.test(y.css("position"))&&d(this).css({left:p.left-z.left-g.left,width:x,height:v}),e._helper&&!q.animate&&/static/.test(y.css("position"))&&d(this).css({left:p.left-z.left-g.left,width:x,height:v})}}),d.ui.plugin.add("resizable","ghost",{start:function(g,m){var l=d(this).data("resizable"),e=l.options,h=l.size;l.ghost=l.originalElement.clone(),l.ghost.css({opacity:0.25,display:"block",position:"relative",height:h.height,width:h.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),l.ghost.appendTo(l.helper)},resize:function(g,l){var h=d(this).data("resizable"),e=h.options;h.ghost&&h.ghost.css({position:"relative",height:h.size.height,width:h.size.width})},stop:function(g,l){var h=d(this).data("resizable"),e=h.options;h.ghost&&h.helper&&h.helper.get(0).removeChild(h.ghost.get(0))}}),d.ui.plugin.add("resizable","grid",{resize:function(y,h){var e=d(this).data("resizable"),p=e.options,z=e.size,g=e.originalSize,x=e.originalPosition,w=e.axis,q=p._aspectRatio||y.shiftKey;p.grid=typeof p.grid=="number"?[p.grid,p.grid]:p.grid;var m=Math.round((z.width-g.width)/(p.grid[0]||1))*(p.grid[0]||1),v=Math.round((z.height-g.height)/(p.grid[1]||1))*(p.grid[1]||1);/^(se|s|e)$/.test(w)?(e.size.width=g.width+m,e.size.height=g.height+v):/^(ne)$/.test(w)?(e.size.width=g.width+m,e.size.height=g.height+v,e.position.top=x.top-v):/^(sw)$/.test(w)?(e.size.width=g.width+m,e.size.height=g.height+v,e.position.left=x.left-m):(e.size.width=g.width+m,e.size.height=g.height+v,e.position.top=x.top-v,e.position.left=x.left-m)}});var f=function(g){return parseInt(g,10)||0},c=function(g){return !isNaN(parseInt(g,10))}})(jQuery);(function(c,b){c.widget("ui.sortable",c.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var d=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?d.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--){this.items[d].item.removeData(this.widgetName+"-item")}return this},_setOption:function(d,e){d==="disabled"?(this.options[d]=e,this.widget().toggleClass("ui-sortable-disabled",!!e)):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,l){var g=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(e);var d=null,f=c(e.target).parents().each(function(){if(c.data(this,g.widgetName+"-item")==g){return d=c(this),!1}});c.data(e.target,g.widgetName+"-item")==g&&(d=c(e.target));if(!d){return !1}if(this.options.handle&&!l){var h=!1;c(this.options.handle,d).find("*").andSelf().each(function(){this==e.target&&(h=!0)});if(!h){return !1}}return this.currentItem=d,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,h,g){var d=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),d.containment&&this._setContainment(),d.cursor&&(c("body").css("cursor")&&(this._storedCursor=c("body").css("cursor")),c("body").css("cursor",d.cursor)),d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity)),d.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",d.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!g){for(var f=this.containers.length-1;f>=0;f--){this.containers[f]._trigger("activate",e,this._uiHash(this))}}return c.ui.ddmanager&&(c.ui.ddmanager.current=this),c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(f){this.position=this._generatePosition(f),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var m=this.options,h=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-f.pageY<m.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+m.scrollSpeed:f.pageY-this.overflowOffset.top<m.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-m.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-f.pageX<m.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+m.scrollSpeed:f.pageX-this.overflowOffset.left<m.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-m.scrollSpeed)):(f.pageY-c(document).scrollTop()<m.scrollSensitivity?h=c(document).scrollTop(c(document).scrollTop()-m.scrollSpeed):c(window).height()-(f.pageY-c(document).scrollTop())<m.scrollSensitivity&&(h=c(document).scrollTop(c(document).scrollTop()+m.scrollSpeed)),f.pageX-c(document).scrollLeft()<m.scrollSensitivity?h=c(document).scrollLeft(c(document).scrollLeft()-m.scrollSpeed):c(window).width()-(f.pageX-c(document).scrollLeft())<m.scrollSensitivity&&(h=c(document).scrollLeft(c(document).scrollLeft()+m.scrollSpeed))),h!==!1&&c.ui.ddmanager&&!m.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,f)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var e=this.items.length-1;e>=0;e--){var g=this.items[e],l=g.item[0],d=this._intersectsWithPointer(g);if(!d){continue}if(g.instance!==this.currentContainer){continue}if(l!=this.currentItem[0]&&this.placeholder[d==1?"next":"prev"]()[0]!=l&&!c.contains(this.placeholder[0],l)&&(this.options.type=="semi-dynamic"?!c.contains(this.element[0],l):!0)){this.direction=d==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(g)){break}this._rearrange(f,g),this._trigger("change",f,this._uiHash());break}}return this._contactContainers(f),c.ui.ddmanager&&c.ui.ddmanager.drag(this,f),this._trigger("sort",f,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,g){if(!e){return}c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,e);if(this.options.revert){var f=this,d=this.placeholder.offset();this.reverting=!0,c(this.helper).animate({left:d.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(e)})}else{this._clear(e,g)}return !1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(d){var f=this._getItemsAsjQuery(d&&d.connected),e=[];return d=d||{},c(f).each(function(){var g=(c(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[-=_](.+)/);g&&e.push((d.key||g[1]+"[]")+"="+(d.key&&d.expression?g[1]:g[2]))}),!e.length&&d.key&&e.push(d.key+"="),e.join("&")},toArray:function(d){var f=this._getItemsAsjQuery(d&&d.connected),e=[];return d=d||{},f.each(function(){e.push(c(d.item||this).attr(d.attribute||"id")||"")}),e},_intersectsWith:function(v){var z=this.positionAbs.left,h=z+this.helperProportions.width,d=this.positionAbs.top,p=d+this.helperProportions.height,A=v.left,g=A+v.width,y=v.top,x=y+v.height,q=this.offset.click.top,m=this.offset.click.left,w=d+q>y&&d+q<x&&z+m>A&&z+m<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>v[this.floating?"width":"height"]?w:A<z+this.helperProportions.width/2&&h-this.helperProportions.width/2<g&&y<d+this.helperProportions.height/2&&p-this.helperProportions.height/2<x},_intersectsWithPointer:function(e){var l=this.options.axis==="x"||c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),g=this.options.axis==="y"||c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),d=l&&g,f=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return d?this.floating?h&&h=="right"||f=="down"?2:1:f&&(f=="down"?2:1):!1},_intersectsWithSides:function(e){var h=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),g=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),d=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&g||f=="left"&&!g:d&&(d=="down"&&h||d=="up"&&!h)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!=0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!=0&&(d>0?"right":"left")},refresh:function(d){return this._refreshItems(d),this.refreshPositions(),this},_connectWith:function(){var d=this.options;return d.connectWith.constructor==String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(g){var p=[],l=[],f=this._connectWith();if(f&&g){for(var h=f.length-1;h>=0;h--){var m=c(f[h]);for(var e=m.length-1;e>=0;e--){var d=c.data(m[e],this.widgetName);d&&d!=this&&!d.options.disabled&&l.push([c.isFunction(d.options.items)?d.options.items.call(d.element):c(d.options.items,d.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),d])}}}l.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var h=l.length-1;h>=0;h--){l[h][0].each(function(){p.push(this)})}return c(p)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=c.grep(this.items,function(f){for(var g=0;g<d.length;g++){if(d[g]==f.item[0]){return !1}}return !0})},_refreshItems:function(z){this.items=[],this.containers=[this];var g=this.items,d=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],z,{item:this.currentItem}):c(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready){for(var A=p.length-1;A>=0;A--){var e=c(p[A]);for(var y=e.length-1;y>=0;y--){var x=c.data(e[y],this.widgetName);x&&x!=this&&!x.options.disabled&&(d.push([c.isFunction(x.options.items)?x.options.items.call(x.element[0],z,{item:this.currentItem}):c(x.options.items,x.element),x]),this.containers.push(x))}}}for(var A=d.length-1;A>=0;A--){var v=d[A][1],m=d[A][0];for(var y=0,w=m.length;y<w;y++){var q=c(m[y]);q.data(this.widgetName+"-item",v),g.push({item:q,instance:v,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var h=this.items.length-1;h>=0;h--){var g=this.items[h];if(g.instance!=this.currentContainer&&this.currentContainer&&g.item[0]!=this.currentItem[0]){continue}var d=this.options.toleranceElement?c(this.options.toleranceElement,g.item):g.item;e||(g.width=d.outerWidth(),g.height=d.outerHeight());var f=d.offset();g.left=f.left,g.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var h=this.containers.length-1;h>=0;h--){var f=this.containers[h].element.offset();this.containers[h].containerCache.left=f.left,this.containers[h].containerCache.top=f.top,this.containers[h].containerCache.width=this.containers[h].element.outerWidth(),this.containers[h].containerCache.height=this.containers[h].element.outerHeight()}}return this},_createPlaceholder:function(d){d=d||this;var f=d.options;if(!f.placeholder||f.placeholder.constructor==String){var e=f.placeholder;f.placeholder={element:function(){var g=c(document.createElement(d.currentItem[0].nodeName)).addClass(e||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(g.style.visibility="hidden"),g},update:function(h,g){if(e&&!f.forcePlaceholderSize){return}g.height()||g.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),g.width()||g.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10))}}}d.placeholder=c(f.placeholder.element.call(d.element,d.currentItem)),d.currentItem.after(d.placeholder),f.placeholder.update(d,d.placeholder)},_contactContainers:function(z){var g=null,d=null;for(var p=this.containers.length-1;p>=0;p--){if(c.contains(this.currentItem[0],this.containers[p].element[0])){continue}if(this._intersectsWith(this.containers[p].containerCache)){if(g&&c.contains(this.containers[p].element[0],g.element[0])){continue}g=this.containers[p],d=p}else{this.containers[p].containerCache.over&&(this.containers[p]._trigger("out",z,this._uiHash(this)),this.containers[p].containerCache.over=0)}}if(!g){return}if(this.containers.length===1){this.containers[d]._trigger("over",z,this._uiHash(this)),this.containers[d].containerCache.over=1}else{var A=10000,e=null,y=this.containers[d].floating?"left":"top",x=this.containers[d].floating?"width":"height",v=this.positionAbs[y]+this.offset.click[y];for(var m=this.items.length-1;m>=0;m--){if(!c.contains(this.containers[d].element[0],this.items[m].item[0])){continue}if(this.items[m].item[0]==this.currentItem[0]){continue}var w=this.items[m].item.offset()[y],q=!1;Math.abs(w-v)>Math.abs(w+this.items[m][x]-v)&&(q=!0,w+=this.items[m][x]),Math.abs(w-v)<A&&(A=Math.abs(w-v),e=this.items[m],this.direction=q?"up":"down")}if(!e&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[d],e?this._rearrange(z,e,null,!0):this._rearrange(z,null,this.containers[d].element,!0),this._trigger("change",z,this._uiHash()),this.containers[d]._trigger("change",z,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",z,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(d){var f=this.options,e=c.isFunction(f.helper)?c(f.helper.apply(this.element[0],[d,this.currentItem])):f.helper=="clone"?this.currentItem.clone():this.currentItem;return e.parents("body").length||c(f.appendTo!="parent"?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0]),e[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(e[0].style.width==""||f.forceHelperSize)&&e.width(this.currentItem.width()),(e[0].style.height==""||f.forceHelperSize)&&e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" ")),c.isArray(d)&&(d={left:+d[0],top:+d[1]||0}),"left" in d&&(this.offset.click.left=d.left+this.margins.left),"right" in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left),"top" in d&&(this.offset.click.top=d.top+this.margins.top),"bottom" in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.ui.ie){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;e.containment=="parent"&&(e.containment=this.helper[0].parentNode);if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(c(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(e.containment)){var g=c(e.containment)[0],f=c(e.containment).offset(),d=c(g).css("overflow")!="hidden";this.containment=[f.left+(parseInt(c(g).css("borderLeftWidth"),10)||0)+(parseInt(c(g).css("paddingLeft"),10)||0)-this.margins.left,f.top+(parseInt(c(g).css("borderTopWidth"),10)||0)+(parseInt(c(g).css("paddingTop"),10)||0)-this.margins.top,f.left+(d?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(c(g).css("borderLeftWidth"),10)||0)-(parseInt(c(g).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,f.top+(d?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(c(g).css("borderTopWidth"),10)||0)-(parseInt(c(g).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,l){l||(l=this.position);var g=e=="absolute"?1:-1,d=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(f[0].tagName);return{top:l.top+this.offset.relative.top*g+this.offset.parent.top*g-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:f.scrollTop())*g,left:l.left+this.offset.relative.left*g+this.offset.parent.left*g-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:f.scrollLeft())*g}},_generatePosition:function(g){var p=this.options,l=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(l[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var h=g.pageX,m=g.pageY;if(this.originalPosition){this.containment&&(g.pageX-this.offset.click.left<this.containment[0]&&(h=this.containment[0]+this.offset.click.left),g.pageY-this.offset.click.top<this.containment[1]&&(m=this.containment[1]+this.offset.click.top),g.pageX-this.offset.click.left>this.containment[2]&&(h=this.containment[2]+this.offset.click.left),g.pageY-this.offset.click.top>this.containment[3]&&(m=this.containment[3]+this.offset.click.top));if(p.grid){var e=this.originalPageY+Math.round((m-this.originalPageY)/p.grid[1])*p.grid[1];m=this.containment?e-this.offset.click.top<this.containment[1]||e-this.offset.click.top>this.containment[3]?e-this.offset.click.top<this.containment[1]?e+p.grid[1]:e-p.grid[1]:e:e;var d=this.originalPageX+Math.round((h-this.originalPageX)/p.grid[0])*p.grid[0];h=this.containment?d-this.offset.click.left<this.containment[0]||d-this.offset.click.left>this.containment[2]?d-this.offset.click.left<this.containment[0]?d+p.grid[0]:d-p.grid[0]:d:d}}return{top:m-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:l.scrollTop()),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:l.scrollLeft())}},_rearrange:function(h,f,l,g){l?l[0].appendChild(this.placeholder[0]):f.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?f.item[0]:f.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var d=this.counter;this._delay(function(){d==this.counter&&this.refreshPositions(!g)})},_clear:function(e,g){this.reverting=!1;var f=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var d in this._storedCSS){if(this._storedCSS[d]=="auto"||this._storedCSS[d]=="static"){this._storedCSS[d]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!g&&f.push(function(h){this._trigger("receive",h,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!g&&f.push(function(h){this._trigger("update",h,this._uiHash())}),this!==this.currentContainer&&(g||(f.push(function(h){this._trigger("remove",h,this._uiHash())}),f.push(function(h){return function(l){h._trigger("receive",l,this._uiHash(this))}}.call(this,this.currentContainer)),f.push(function(h){return function(l){h._trigger("update",l,this._uiHash(this))}}.call(this,this.currentContainer))));for(var d=this.containers.length-1;d>=0;d--){g||f.push(function(h){return function(l){h._trigger("deactivate",l,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over&&(f.push(function(h){return function(l){h._trigger("out",l,this._uiHash(this))}}.call(this,this.containers[d])),this.containers[d].containerCache.over=0)}this._storedCursor&&c("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!g){this._trigger("beforeStop",e,this._uiHash());for(var d=0;d<f.length;d++){f[d].call(this,e)}this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}g||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!g){for(var d=0;d<f.length;d++){f[d].call(this,e)}this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){c.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(d){var e=d||this;return{helper:e.helper,placeholder:e.placeholder||c([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:d?d.element:null}}})})(jQuery);(function(p,w){var d,b,h,x,c="ui-button ui-widget ui-state-default ui-corner-all",v="ui-state-hover ui-state-active ",q="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var e=p(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},g=function(f){var s=f.name,l=f.form,e=p([]);return s&&(l?e=p(l).find("[name='"+s+"']"):e=p("[name='"+s+"']",f.ownerDocument).filter(function(){return !this.form})),e};p.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var l=this,f=this.options,e=this.type==="checkbox"||this.type==="radio",s=e?"":"ui-state-active",r="ui-state-focus";f.label===null&&(f.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(f.disabled){return}this===d&&p(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(f.disabled){return}p(this).removeClass(s)}).bind("click"+this.eventNamespace,function(t){f.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){l.buttonElement.addClass(r)}).bind("blur"+this.eventNamespace,function(){l.buttonElement.removeClass(r)}),e&&(this.element.bind("change"+this.eventNamespace,function(){if(x){return}l.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){if(f.disabled){return}x=!1,b=t.pageX,h=t.pageY}).bind("mouseup"+this.eventNamespace,function(t){if(f.disabled){return}if(b!==t.pageX||h!==t.pageY){x=!0}})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(f.disabled||x){return !1}p(this).toggleClass("ui-state-active"),l.buttonElement.attr("aria-pressed",l.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(f.disabled||x){return !1}p(this).addClass("ui-state-active"),l.buttonElement.attr("aria-pressed","true");var t=l.element[0];g(t).not(t).map(function(){return p(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(f.disabled){return !1}p(this).addClass("ui-state-active"),d=this,l.document.one("mouseup",function(){d=null})}).bind("mouseup"+this.eventNamespace,function(){if(f.disabled){return !1}p(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(u){if(f.disabled){return !1}(u.keyCode===p.ui.keyCode.SPACE||u.keyCode===p.ui.keyCode.ENTER)&&p(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){p(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(u){u.keyCode===p.ui.keyCode.SPACE&&p(this).click()})),this._setOption("disabled",f.disabled),this._resetButton()},_determineButtonType:function(){var l,f,r;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(l=this.element.parents().last(),f="label[for='"+this.element.attr("id")+"']",this.buttonElement=l.find(f),this.buttonElement.length||(l=l.length?l.siblings():this.element.siblings(),this.buttonElement=l.filter(f),this.buttonElement.length||(this.buttonElement=l.find(f))),this.element.addClass("ui-helper-hidden-accessible"),r=this.element.is(":checked"),r&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",r)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(c+" "+v+" "+q).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(l,f){this._super(l,f);if(l==="disabled"){f?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),this.type==="radio"?g(this.element[0]).each(function(){p(this).is(":checked")?p(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):p(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var f=this.buttonElement.removeClass(q),y=p("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(f.empty()).text(),u=this.options.icons,e=u.primary&&u.secondary,l=[];u.primary||u.secondary?(this.options.text&&l.push("ui-button-text-icon"+(e?"s":u.primary?"-primary":"-secondary")),u.primary&&f.prepend("<span class='ui-button-icon-primary ui-icon "+u.primary+"'></span>"),u.secondary&&f.append("<span class='ui-button-icon-secondary ui-icon "+u.secondary+"'></span>"),this.options.text||(l.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||f.attr("title",p.trim(y)))):l.push("ui-button-text-only"),f.addClass(l.join(" "))}}),p.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(l,f){l==="disabled"&&this.buttons.button("option",l,f),this._super(l,f)},refresh:function(){var e=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return p(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return p(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(f,c){var g="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},b={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};f.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var h=f(this).css(e).offset().top;h<0&&f(this).css("top",e.top-h)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var m=this,q=this.options,l=q.title||"&#160;",p,w,h,e,v;p=(this.uiDialog=f("<div>")).addClass(g+q.dialogClass).css({display:"none",outline:0,zIndex:q.zIndex}).attr("tabIndex",-1).keydown(function(r){q.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===f.ui.keyCode.ESCAPE&&(m.close(r),r.preventDefault())}).mousedown(function(r){m.moveToTop(!1,r)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(p),w=(this.uiDialogTitlebar=f("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){p.focus()}).prependTo(p),h=f("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(r){r.preventDefault(),m.close(r)}).appendTo(w),(this.uiDialogTitlebarCloseText=f("<span>")).addClass("ui-icon ui-icon-closethick").text(q.closeText).appendTo(h),e=f("<span>").uniqueId().addClass("ui-dialog-title").html(l).prependTo(w),v=(this.uiDialogButtonPane=f("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix").css("text-align","center"),(this.uiButtonSet=f("<div>")).appendTo(v),p.attr({role:"dialog","aria-labelledby":e.attr("id")}),w.find("*").add(w).disableSelection(),this._hoverable(h),this._focusable(h),q.draggable&&f.fn.draggable&&this._makeDraggable(),q.resizable&&f.fn.resizable&&this._makeResizable(),this._createButtons(q.buttons),this._isOpen=!1,f.fn.bgiframe&&p.bgiframe(),this._on(p,{keydown:function(s){if(!q.modal||s.keyCode!==f.ui.keyCode.TAB){return}var x=f(":tabbable",p),r=x.filter(":first"),u=x.filter(":last");if(s.target===u[0]&&!s.shiftKey){return r.focus(1),!1}if(s.target===r[0]&&s.shiftKey){return u.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var l,h=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),l=h.parent.children().eq(h.index),l.length&&l[0]!==this.element[0]?l.before(this.element):h.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(h){var m=this,l,e;if(!this._isOpen){return}if(!1===this._trigger("beforeClose",h)){return}return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){m._trigger("close",h)}):(this.uiDialog.hide(),this._trigger("close",h)),f.ui.dialog.overlay.resize(),this.options.modal&&(l=0,f(".ui-dialog").each(function(){this!==m.uiDialog[0]&&(e=f(this).css("z-index"),isNaN(e)||(l=Math.max(l,e)))}),f.ui.dialog.maxZ=l),this},isOpen:function(){return this._isOpen},moveToTop:function(h,m){var l=this.options,e;return l.modal&&!h||!l.stack&&!l.modal?this._trigger("focus",m):(l.zIndex>f.ui.dialog.maxZ&&(f.ui.dialog.maxZ=l.zIndex),this.overlay&&(f.ui.dialog.maxZ+=1,f.ui.dialog.overlay.maxZ=f.ui.dialog.maxZ,this.overlay.$el.css("z-index",f.ui.dialog.overlay.maxZ)),e={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},f.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",f.ui.dialog.maxZ),this.element.attr(e),this._trigger("focus",m),this)},open:function(){if(this._isOpen){return}var e,l=this.options,h=this.uiDialog;return this._size(),this._position(l.position),h.show(l.show),this.overlay=l.modal?new f.ui.dialog.overlay(this):null,this.moveToTop(!0),e=this.element.find(":tabbable"),e.length||(e=this.uiDialogButtonPane.find(":tabbable"),e.length||(e=h)),e.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(e){var l=this,h=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof e=="object"&&e!==null&&f.each(e,function(){return !(h=!0)}),h?(f.each(e,function(p,u){var m,q;u=f.isFunction(u)?{click:u,text:p}:u,u=f.extend({type:"button"},u),q=u.click,u.click=function(){q.apply(l.element[0],arguments)},m=f("<button></button>",u).appendTo(l.uiButtonSet),f.fn.button&&m.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function h(m){return{position:m.position,offset:m.offset}}var e=this,l=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(p,m){f(this).addClass("ui-dialog-dragging"),e._trigger("dragStart",p,h(m))},drag:function(m,p){e._trigger("drag",m,h(p))},stop:function(m,p){l.position=[p.position.left-e.document.scrollLeft(),p.position.top-e.document.scrollTop()],f(this).removeClass("ui-dialog-dragging"),e._trigger("dragStop",m,h(p)),f.ui.dialog.overlay.resize()}})},_makeResizable:function(q){function e(r){return{originalPosition:r.originalPosition,originalSize:r.originalSize,position:r.position,size:r.size}}q=q===c?this.options.resizable:q;var m=this,h=this.options,l=this.uiDialog.css("position"),p=typeof q=="string"?q:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:p,start:function(r,s){f(this).addClass("ui-dialog-resizing"),m._trigger("resizeStart",r,e(s))},resize:function(s,r){m._trigger("resize",s,e(r))},stop:function(r,s){f(this).removeClass("ui-dialog-resizing"),h.height=f(this).height(),h.width=f(this).width(),m._trigger("resizeStop",r,e(s)),f.ui.dialog.overlay.resize()}}).css("position",l).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var h=this.options;return h.height==="auto"?h.minHeight:Math.min(h.minHeight,h.height)},_position:function(h){var m=[],l=[0,0],e;if(h){if(typeof h=="string"||typeof h=="object"&&"0" in h){m=h.split?h.split(" "):[h[0],h[1]],m.length===1&&(m[1]=m[0]),f.each(["left","top"],function(q,p){+m[q]===m[q]&&(l[q]=m[q],m[q]=p)}),h={my:m[0]+(l[0]<0?l[0]:"+"+l[0])+" "+m[1]+(l[1]<0?l[1]:"+"+l[1]),at:m.join(" ")}}h=f.extend({},f.ui.dialog.prototype.options.position,h)}else{h=f.ui.dialog.prototype.options.position}e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(h),e||this.uiDialog.hide()},_setOptions:function(e){var m=this,h={},l=!1;f.each(e,function(q,p){m._setOption(q,p),q in d&&(l=!0),q in b&&(h[q]=p)}),l&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",h)},_setOption:function(h,m){var e,l,p=this.uiDialog;switch(h){case"buttons":this._createButtons(m);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+m);break;case"dialogClass":p.removeClass(this.options.dialogClass).addClass(g+m);break;case"disabled":m?p.addClass("ui-dialog-disabled"):p.removeClass("ui-dialog-disabled");break;case"draggable":e=p.is(":data(draggable)"),e&&!m&&p.draggable("destroy"),!e&&m&&this._makeDraggable();break;case"position":this._position(m);break;case"resizable":l=p.is(":data(resizable)"),l&&!m&&p.resizable("destroy"),l&&typeof m=="string"&&p.resizable("option","handles",m),!l&&m!==!1&&this._makeResizable(m);break;case"title":f(".ui-dialog-title",this.uiDialogTitlebar).html(""+(m||"&#160;"))}this._super(h,m)},_size:function(){var h,p,m,e=this.options,l=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),e.minWidth>e.width&&(e.width=e.minWidth),h=this.uiDialog.css({height:"auto",width:e.width}).outerHeight(),p=Math.max(0,e.minHeight-h),e.height==="auto"?f.support.minHeight?this.element.css({minHeight:p,height:"auto"}):(this.uiDialog.show(),m=this.element.css("height","auto").height(),l||this.uiDialog.hide(),this.element.height(Math.max(m,p))):this.element.height(Math.max(e.height-h,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),f.extend(f.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(l){var h=l.attr("id");return h||(this.uuid+=1,h=this.uuid),"ui-dialog-title-"+h},overlay:function(e){this.$el=f.ui.dialog.overlay.create(e)}}),f.extend(f.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:f.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(h){return h+".dialog-overlay"}).join(" "),create:function(e){this.instances.length===0&&(setTimeout(function(){f.ui.dialog.overlay.instances.length&&f(document).bind(f.ui.dialog.overlay.events,function(l){if(f(l.target).zIndex()<f.ui.dialog.overlay.maxZ){return !1}})},1),f(window).bind("resize.dialog-overlay",f.ui.dialog.overlay.resize));var h=this.oldInstances.pop()||f("<div>").addClass("ui-widget-overlay");return f(document).bind("keydown.dialog-overlay",function(m){var l=f.ui.dialog.overlay.instances;l.length!==0&&l[l.length-1]===h&&e.options.closeOnEscape&&!m.isDefaultPrevented()&&m.keyCode&&m.keyCode===f.ui.keyCode.ESCAPE&&(e.close(m),m.preventDefault())}),h.appendTo(document.body).css({width:this.width(),height:this.height()}),f.fn.bgiframe&&h.bgiframe(),this.instances.push(h),h},destroy:function(e){var l=f.inArray(e,this.instances),h=0;l!==-1&&this.oldInstances.push(this.instances.splice(l,1)[0]),this.instances.length===0&&f([document,window]).unbind(".dialog-overlay"),e.height(0).width(0).remove(),f.each(this.instances,function(){h=Math.max(h,this.css("z-index"))}),this.maxZ=h},height:function(){var e,h;return f.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),h=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<h?f(window).height()+"px":e+"px"):f(document).height()+"px"},width:function(){var e,h;return f.ui.ie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),h=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<h?f(window).width()+"px":e+"px"):f(document).width()+"px"},resize:function(){var e=f([]);f.each(f.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:f.ui.dialog.overlay.width(),height:f.ui.dialog.overlay.height()})}}),f.extend(f.ui.dialog.overlay.prototype,{destroy:function(){f.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/*!
 * jQuery Form Plugin
 * version: 2.52 (07-DEC-2010)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
;(function(c){c.fn.ajaxSubmit=function(y){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof y=="function"){y={success:y}}var l=this.attr("action");var e=(typeof l==="string")?c.trim(l):"";if(e){e=(e.match(/^([^#]+)/)||[])[1]}e=e||window.location.href||"";y=c.extend(true,{url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},y);var z={};this.trigger("form-pre-serialize",[this,y,z]);if(z.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(y.beforeSerialize&&y.beforeSerialize(this,y)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g,u,s=this.formToArray(y.semantic);if(y.data){y.extraData=y.data;for(g in y.data){if(y.data[g] instanceof Array){for(var m in y.data[g]){s.push({name:g,value:y.data[g][m]})}}else{u=y.data[g];u=c.isFunction(u)?u():u;s.push({name:g,value:u})}}}if(y.beforeSubmit&&y.beforeSubmit(s,this,y)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[s,this,y,z]);if(z.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var d=c.param(s);if(y.type.toUpperCase()=="GET"){y.url+=(y.url.indexOf("?")>=0?"&":"?")+d;y.data=null}else{y.data=d}var x=this,r=[];if(y.resetForm){r.push(function(){x.resetForm()})}if(y.clearForm){r.push(function(){x.clearForm()})}if(!y.dataType&&y.target){var w=y.success||function(){};r.push(function(v){var q=y.replaceTarget?"replaceWith":"html";c(y.target)[q](v).each(w,arguments)})}else{if(y.success){r.push(y.success)}}y.success=function(C,v,D){var B=y.context||y;for(var A=0,q=r.length;A<q;A++){r[A].apply(B,[C,v,D||x,x])}};var h=c("input:file",this).length>0;var f="multipart/form-data";var p=(x.attr("enctype")==f||x.attr("encoding")==f);if(y.iframe!==false&&(h||y.iframe||p)){if(y.closeKeepAlive){c.get(y.closeKeepAlive,t)}else{t()}}else{c.ajax(y)}this.trigger("form-submit-notify",[this,y]);return this;function t(){var q=x[0];if(c(":input[name=submit],:input[id=submit]",q).length){alert('Error: Form elements must not have name or id of "submit".');return}var E=c.extend(true,{},c.ajaxSettings,y);E.context=E.context||E;var H="jqFormIO"+(new Date().getTime()),C="_"+H;window[C]=function(){var Q=v.data("form-plugin-onload");if(Q){Q();window[C]=undefined;try{delete window[C]}catch(R){}}};var v=c('<iframe id="'+H+'" name="'+H+'" src="'+E.iframeSrc+'" onload="window[\'_\'+this.id]()" />');var D=v[0];v.css({position:"absolute",top:"-1000px",left:"-1000px"});var A={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;v.attr("src",E.iframeSrc)}};var M=E.global;if(M&&!c.active++){c.event.trigger("ajaxStart")}if(M){c.event.trigger("ajaxSend",[A,E])}if(E.beforeSend&&E.beforeSend.call(E.context,A,E)===false){if(E.global){c.active--}return}if(A.aborted){return}var I=false;var L=0;var B=q.clk;if(B){var J=B.name;if(J&&!B.disabled){E.extraData=E.extraData||{};E.extraData[J]=B.value;if(B.type=="image"){E.extraData[J+".x"]=q.clk_x;E.extraData[J+".y"]=q.clk_y}}}function K(){var S=x.attr("target"),Q=x.attr("action");q.setAttribute("target",H);if(q.getAttribute("method")!="POST"){q.setAttribute("method","POST")}if(q.getAttribute("action")!=E.url){q.setAttribute("action",E.url)}if(!E.skipEncodingOverride){x.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(E.timeout){setTimeout(function(){L=true;G()},E.timeout)}var R=[];try{if(E.extraData){for(var T in E.extraData){R.push(c('<input type="hidden" name="'+T+'" value="'+E.extraData[T]+'" />').appendTo(q)[0])}}v.appendTo("body");v.data("form-plugin-onload",G);q.submit()}finally{q.setAttribute("action",Q);if(S){q.setAttribute("target",S)}else{x.removeAttr("target")}c(R).remove()}}if(E.forceSync){K()}else{setTimeout(K,10)}var O,P,N=50;function G(){if(I){return}v.removeData("form-plugin-onload");var S=true;try{if(L){throw"timeout"}P=D.contentWindow?D.contentWindow.document:D.contentDocument?D.contentDocument:D.document;var W=E.dataType=="xml"||P.XMLDocument||c.isXMLDoc(P);b("isXml="+W);if(!W&&window.opera&&(P.body==null||P.body.innerHTML=="")){if(--N){b("requeing onLoad callback, DOM not available");setTimeout(G,250);return}}I=true;A.responseText=P.documentElement?P.documentElement.innerHTML:null;A.responseXML=P.XMLDocument?P.XMLDocument:P;A.getResponseHeader=function(Y){var X={"content-type":E.dataType};return X[Y]};var V=/(json|script)/.test(E.dataType);if(V||E.textarea){var R=P.getElementsByTagName("textarea")[0];if(R){A.responseText=R.value}else{if(V){var U=P.getElementsByTagName("pre")[0];var Q=P.getElementsByTagName("body")[0];if(U){A.responseText=U.textContent}else{if(Q){A.responseText=Q.innerHTML}}}}}else{if(E.dataType=="xml"&&!A.responseXML&&A.responseText!=null){A.responseXML=F(A.responseText)}}O=c.httpData(A,E.dataType)}catch(T){b("error caught:",T);S=false;A.error=T;c.handleError(E,A,"error",T)}if(A.aborted){b("upload aborted");S=false}if(S){E.success.call(E.context,O,"success",A);if(M){c.event.trigger("ajaxSuccess",[A,E])}}if(M){c.event.trigger("ajaxComplete",[A,E])}if(M&&!--c.active){c.event.trigger("ajaxStop")}if(E.complete){E.complete.call(E.context,A,S?"success":"error")}setTimeout(function(){v.removeData("form-plugin-onload");v.remove();A.responseXML=null},100)}function F(Q,R){if(window.ActiveXObject){R=new ActiveXObject("Microsoft.XMLDOM");R.async="false";R.loadXML(Q)}else{R=(new DOMParser()).parseFromString(Q,"text/xml")}return(R&&R.documentElement&&R.documentElement.tagName!="parsererror")?R:null}}};c.fn.ajaxForm=function(d){if(this.length===0){var e={s:this.selector,c:this.context};if(!c.isReady&&e.s){b("DOM not ready, queuing ajaxForm");c(function(){c(e.s,e.c).ajaxForm(d)});return this}b("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();c(this).ajaxSubmit(d)}}).bind("click.form-plugin",function(m){var l=m.target;var g=c(l);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}l=f[0]}var h=this;h.clk=l;if(l.type=="image"){if(m.offsetX!=undefined){h.clk_x=m.offsetX;h.clk_y=m.offsetY}else{if(typeof c.fn.offset=="function"){var p=g.offset();h.clk_x=m.pageX-p.left;h.clk_y=m.pageY-p.top}else{h.clk_x=m.pageX-l.offsetLeft;h.clk_y=m.pageY-l.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(t){var s=[];if(this.length===0){return s}var e=this[0];var h=t?e.getElementsByTagName("*"):e.elements;if(!h){return s}var m,l,g,u,f,q,d;for(m=0,q=h.length;m<q;m++){f=h[m];g=f.name;if(!g){continue}if(t&&e.clk&&f.type=="image"){if(!f.disabled&&e.clk==f){s.push({name:g,value:c(f).val()});s.push({name:g+".x",value:e.clk_x},{name:g+".y",value:e.clk_y})}continue}u=c.fieldValue(f,true);if(u&&u.constructor==Array){for(l=0,d=u.length;l<d;l++){s.push({name:g,value:u[l]})}}else{if(u!==null&&typeof u!="undefined"){s.push({name:g,value:u})}}}if(!t&&e.clk){var p=c(e.clk),r=p[0];g=r.name;if(g&&!r.disabled&&r.type=="image"){s.push({name:g,value:p.val()});s.push({name:g+".x",value:e.clk_x},{name:g+".y",value:e.clk_y})}}return s};c.fn.formSerialize=function(d){return c.param(this.formToArray(d))};c.fn.fieldSerialize=function(e){var d=[];this.each(function(){var l=this.name;if(!l){return}var g=c.fieldValue(this,e);if(g&&g.constructor==Array){for(var h=0,f=g.length;h<f;h++){d.push({name:l,value:g[h]})}}else{if(g!==null&&typeof g!="undefined"){d.push({name:this.name,value:g})}}});return c.param(d)};c.fn.fieldValue=function(l){for(var h=[],f=0,d=this.length;f<d;f++){var g=this[f];var e=c.fieldValue(g,l);if(e===null||typeof e=="undefined"||(e.constructor==Array&&!e.length)){continue}e.constructor==Array?c.merge(h,e):h.push(e)}return h};c.fieldValue=function(d,m){var f=d.name,u=d.type,w=d.tagName.toLowerCase();if(m===undefined){m=true}if(m&&(!f||d.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!d.checked||(u=="submit"||u=="image")&&d.form&&d.form.clk!=d||w=="select"&&d.selectedIndex==-1)){return null}if(w=="select"){var p=d.selectedIndex;if(p<0){return null}var r=[],e=d.options;var h=(u=="select-one");var q=(h?p+1:e.length);for(var g=(h?p:0);g<q;g++){var l=e[g];if(l.selected){var s=l.value;if(!s){s=(l.attributes&&l.attributes.value&&!(l.attributes.value.specified))?l.text:l.value}if(h){return s}r.push(s)}}return r}return c(d).val()};c.fn.clearForm=function(){return this.each(function(){c("input,select,textarea",this).clearFields()})};c.fn.clearFields=c.fn.clearInputs=function(){return this.each(function(){var e=this.type,d=this.tagName.toLowerCase();if(e=="text"||e=="password"||d=="textarea"){this.value=""}else{if(e=="checkbox"||e=="radio"){this.checked=false}else{if(d=="select"){this.selectedIndex=-1}}}})};c.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};c.fn.enable=function(d){if(d===undefined){d=true}return this.each(function(){this.disabled=!d})};c.fn.selected=function(d){if(d===undefined){d=true}return this.each(function(){var e=this.type;if(e=="checkbox"||e=="radio"){this.checked=d}else{if(this.tagName.toLowerCase()=="option"){var f=c(this).parent("select");if(d&&f[0]&&f[0].type=="select-one"){f.find("option").selected(false)}this.selected=d}}})};function b(){if(c.fn.ajaxSubmit.debug){var d="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(d)}else{if(window.opera&&window.opera.postError){window.opera.postError(d)}}}}})(jQuery);
/*!
 * artDialog iframeTools
 * Date: 2011-11-25 13:54
 * http://code.google.com/p/artdialog/
 * (c) 2009-2011 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://creativecommons.org/licenses/LGPL/2.1/
 */
;(function(h,q,b,g){var r,m,e,c="@ARTDIALOG.DATA",d="@ARTDIALOG.OPEN",f="@ARTDIALOG.OPENER",l=q.name=q.name||"@ARTDIALOG.WINNAME"+ +new Date,p=q.VBArray&&!q.XMLHttpRequest;h(function(){!q.jQuery&&document.compatMode==="BackCompat"&&alert('artDialog Error: document.compatMode === "BackCompat"')});var s=b.top=function(){var t=q,u=function(v){try{var x=q[v].document;x.getElementsByTagName}catch(w){return false}return q[v].artDialog&&x.getElementsByTagName("frameset").length===0};if(u("top")){t=q.top}else{if(u("parent")){t=q.parent}}return t}();b.parent=s;r=s.artDialog;e=function(){return r.defaults.zIndex};b.data=function(u,v){var w=b.top,t=w[c]||{};w[c]=t;if(v!==g){t[u]=v}else{return t[u]}return t};b.removeData=function(u){var t=b.top[c];if(t&&t[u]){delete t[u]}};b.through=m=function(){var t=r.apply(this,arguments);if(s!==q){b.list[t.config.id]=t}return t};s!==q&&h(q).bind("unload",function(){var v=b.list,t;for(var u in v){if(v[u]){t=v[u].config;if(t){t.duration=0}v[u].close()}}});b.open=function(y,w,G){w=w||{};var v=w.width==g?"auto":w.width,C=w.height==g?"auto":w.height;var F,L,x,D,B,E,K,M,z,H=b.top,u="position:absolute;left:-9999em;top:-9999em;border:none 0;background:transparent",I="width:100%;height:100%;border:none 0";if(G===false){var t=+new Date,O=y.replace(/([?&])_=[^&]*/,"$1_="+t);y=O+((O===y)?(/\?/.test(y)?"&":"?")+"_="+t:"")}var A=function(){var Q,S,T=L.content.find(".aui_loading"),P=F.config;x.addClass("aui_state_full");T&&T.hide();try{M=B.contentWindow;K=h(M.document);z=M.document.body}catch(R){B.style.cssText=I;P.follow?F.follow(P.follow):F.position(P.left,P.top);w.init&&w.init.call(F,M,H);w.init=null;return}Q=P.width==="auto"?K.width()+(p?0:parseInt(h(z).css("marginLeft"))):P.width;S=P.height==="auto"?K.height():P.height;setTimeout(function(){B.style.cssText=I},0);P.follow?F.follow(P.follow):F.position(P.left,P.top);w.init&&w.init.call(F,M,H);w.init=null};var N={zIndex:e(),init:function(){F=this;L=F.DOM;D=L.main;x=L.content;B=F.iframe=H.document.createElement("iframe");B.src=y;B.name="Open"+F.config.id;B.style.cssText=u;B.setAttribute("frameborder",0,0);B.setAttribute("allowTransparency",true);E=h(B);F.content().appendChild(B);M=B.contentWindow;try{M.name=B.name;b.data(B.name+d,F);b.data(B.name+f,q)}catch(P){}E.bind("load",A)},close:function(Q){E.css("display","none").unbind("load",A);if(w.close&&w.close.call(this,Q,H)===false){return false}x.removeClass("aui_state_full");E[0].src="about:blank";E.remove();try{b.removeData(B.name+d);b.removeData(B.name+f)}catch(P){}jQuery("iframe[artDialogHide=true]").css("display","");h("iframe").each(function(){var R=h(this);if(R.attr("id")&&R.contents()){R.contents().find("iframe[artDialogHide=true]").css("display","")}});jQuery("#editmain_right[artDialogHide=true]").css("display","")}};if(typeof w.ok==="function"){N.ok=function(){return w.ok.call(F,B.contentWindow,H)}}if(typeof w.cancel==="function"){N.cancel=function(){return w.cancel.call(F,B.contentWindow,H)}}delete w.content;for(var J in w){if(N[J]===g){N[J]=w[J]}}return m(N)};b.open.api=b.data(l+d);b.opener=b.data(l+f)||q;b.open.origin=b.opener;b.close=function(){var t=b.data(l+d);t&&t.close();return false};s!=q&&h(document).bind("mousedown",function(){var t=b.open.api;t&&t.zIndex()});b.getOpenApi=function(){var t=q;while(t){if(t.artDialog.open.api){return t.artDialog.open.api}else{if(t==q.top){break}}t=t.parent}return null};b.load=function(w,v,t){t=t||false;var y=v||{};var u={zIndex:e(),init:function(A){var B=this,z=B.config;h.ajax({url:w,success:function(C){B.content(C);y.init&&y.init.call(B,A)},cache:t})}};delete v.content;for(var x in y){if(u[x]===g){u[x]=y[x]}}return m(u)};b.alert=function(t,u){return m({id:"Alert",zIndex:e(),icon:"warning",fixed:true,lock:true,content:t,ok:true,close:u})};b.confirm=function(t,v,u){return m({id:"Confirm",zIndex:e(),icon:"question",fixed:true,lock:true,opacity:0.1,content:t,ok:function(w){return v.call(this,w)},cancel:function(w){return u&&u.call(this,w)}})};b.prompt=function(v,y,u,w,x){w=w||"";var t;return m({id:"Prompt",zIndex:e(),title:x,fixed:true,lock:true,opacity:0.1,content:['<div style="margin-bottom:5px;font-size:12px">',v,"</div>","<div>",'<textarea style="width:100%;height:50px;padding:6px 4px">',w,"</textarea>","</div>"].join(""),init:function(){textarea=this.DOM.content.find("textarea")[0];textarea.select();textarea.focus()},ok:function(z){if(u&&textarea.value==""){alert(v);return false}else{return y&&y.call(this,textarea.value,z)}},cancel:true})};b.tips=function(t,u){return m({id:"Tips",zIndex:e(),title:false,cancel:false,fixed:true,lock:false}).content('<div style="padding: 0 1em;">'+t+"</div>").time(u||1.5)};h(function(){var v=b.dragEvent;if(!v){return}var y=h(q),x=h(document),z=p?"absolute":"fixed",w=v.prototype,t=document.createElement("div"),u=t.style;u.cssText="display:none;position:"+z+";left:0;top:0;width:100%;height:100%;cursor:move;filter:alpha(opacity=0);opacity:0;background:#FFF";document.body.appendChild(t);w._start=w.start;w._end=w.end;w.start=function(){var C=b.focus.DOM,A=C.main[0],B=C.content[0].getElementsByTagName("iframe")[0];w._start.apply(this,arguments);u.display="block";u.zIndex=b.defaults.zIndex+3;if(z==="absolute"){u.width=y.width()+"px";u.height=y.height()+"px";u.left=x.scrollLeft()+"px";u.top=x.scrollTop()+"px"}if(B&&A.offsetWidth*A.offsetHeight>307200){A.style.visibility="hidden"}};w.end=function(){var A=b.focus;w._end.apply(this,arguments);u.display="none";if(A){A.DOM.main[0].style.visibility="visible"}}})})(this.art||this.jQuery,this,this.artDialog);var OBPM=jQuery;(function(b){OBPM.dialog={opts:{args:{},content:"",title:"",button:null,ok:null,cancel:null,init:null,close:null,okVal:"\u786E\u5B9A",cancelVal:"\u53D6\u6D88",width:"",height:"",minWidth:96,minHeight:32,padding:"20px 25px",skin:"",icon:"",time:null,esc:true,focus:true,show:true,follow:null,path:"",lock:true,background:"#000",opacity:0.5,duration:300,fixed:false,left:"50%",top:"38.2%",zIndex:1987,resize:true,drag:true},show:function(c){if(!c.args){c.args={}}if(c.maximization==true){c.height=b(top.window).height()-55;c.width=b(top.window).width()-10}if(c.width&&c.width>0){c.width=c.width+"";c.width=(c.width.indexOf("%")>0&&c.width.indexOf("px")>0)?c.width:(c.width+"px")}if(c.height&&c.height>0){c.height=c.height+"";c.height=(c.width.indexOf("%")>0&&c.width.indexOf("px")>0)?c.height:(c.height+"px")}for(var d in c){this.opts[d]=c[d];if(d=="isResetSize"){this.opts.resize=c[d]}}if(c.close){this.opts.close=c.close}artDialog.data("args",this.opts.args);artDialog.open(this.opts.url,this.opts,false);this.hideWord()},hideWord:function(){jQuery("iframe[type=word]").each(function(){if(jQuery(this).css("display")!="none"){jQuery(this).attr("artDialogHide","true").css("display","none")}});jQuery("iframe").contents().find("iframe[type=word]").each(function(){if(jQuery(this).css("display")!="none"){jQuery(this).attr("artDialogHide","true").css("display","none")}});jQuery("#editmain_right").attr("artDialogHide","true").css("display","none")},doReturn:function(c){var d=artDialog.getOpenApi();d.close(c)},doExit:function(c){var d=artDialog.getOpenApi();d.close()},doClear:function(){var c=artDialog.getOpenApi();c.close("")},doClearUpload:function(){var c=artDialog.getOpenApi();c.close("clear")},getArgs:function(){return artDialog.data("args")},resize:function(f,c){var e=artDialog.getOpenApi();if(e){var d=e.config.resize;if(!d){return}var g=top.window.document.body.clientHeight;if((g-50)<c){c=g-50}e.size(f,c);e._winResize()}}}})(jQuery);(function($){$.fn.layout=function(opts){var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"};var options={name:"",scrollToBookmarkOnLoad:true,defaults:{applyDefaultStyles:false,closable:true,resizable:true,slidable:true,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:true,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:false,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:false,initHidden:false},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:200,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}};var effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}};var config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:10000,animation:10000},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"hidden"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"0px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}};var state={id:Math.floor(Math.random()*10000),container:{},north:{},south:{},east:{},west:{},center:{}};var altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"};var isStr=function(o){if(typeof o=="string"){return true}else{if(typeof o=="object"){try{var match=o.constructor.toString().match(/string/i);return(match!==null)}catch(e){}}}return false};var str=function(o){if(typeof o=="string"||isStr(o)){return $.trim(o)}else{return o}};var min=function(x,y){return Math.min(x,y)};var max=function(x,y){return Math.max(x,y)};var transformData=function(d){var json={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};d=d||{};if(d.effects||d.defaults||d.north||d.south||d.west||d.east||d.center){json=$.extend(json,d)}else{$.each(d,function(key,val){a=key.split("__");json[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=val})}return json};var setFlowCallback=function(action,pane,param){var cb=action+","+pane+","+(param?1:0),cP,cbPane;$.each(c.borderPanes.split(","),function(i,p){if(c[p].isMoving){bindCallback(p);return false}});function bindCallback(p,test){cP=c[p];if(!cP.doCallback){cP.doCallback=true;cP.callback=cb}else{cpPane=cP.callback.split(",")[1];if(cpPane!=p&&cpPane!=pane){bindCallback(cpPane,true)}}}};var execFlowCallback=function(pane){var cP=c[pane];c.isLayoutBusy=false;delete cP.isMoving;if(!cP.doCallback||!cP.callback){return}cP.doCallback=false;var cb=cP.callback.split(","),param=(cb[2]>0?true:false);if(cb[0]=="open"){open(cb[1],param)}else{if(cb[0]=="close"){close(cb[1],param)}}if(!cP.doCallback){cP.callback=null}};var execUserCallback=function(pane,v_fn){if(!v_fn){return}var fn;try{if(typeof v_fn=="function"){fn=v_fn}else{if(typeof v_fn!="string"){return}else{if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if(typeof fn=="function"&&args.length>1){return fn(args[1])}}else{fn=eval(v_fn)}}}if(typeof fn=="function"){return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}}catch(ex){}};var cssNum=function($E,prop){var val=0,hidden=false,visibility="";if(!$.browser.msie){if($.css($E[0],"display",true)=="none"){hidden=true;visibility=$.css($E[0],"visibility",true);$E.css({display:"block",visibility:"hidden"})}}val=parseInt($.css($E[0],prop,true),10)||0;if(hidden){$E.css({display:"none"});if(visibility&&visibility!="hidden"){$E.css({visibility:visibility})}}return val};var cssW=function(e,outerWidth){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerWidth<=0){return 0}else{if(!(outerWidth>0)){outerWidth=isStr(e)?getPaneSize(e):$E.outerWidth()}}if(!$.boxModel){return outerWidth}else{return outerWidth-cssNum($E,"paddingLeft")-cssNum($E,"paddingRight")-($.css($E[0],"borderLeftStyle",true)=="none"?0:cssNum($E,"borderLeftWidth"))-($.css($E[0],"borderRightStyle",true)=="none"?0:cssNum($E,"borderRightWidth"))}};var cssH=function(e,outerHeight){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerHeight<=0){return 0}else{if(!(outerHeight>0)){outerHeight=(isStr(e))?getPaneSize(e):$E.outerHeight()}}if(!$.boxModel){return outerHeight}else{return outerHeight-cssNum($E,"paddingTop")-cssNum($E,"paddingBottom")-($.css($E[0],"borderTopStyle",true)=="none"?0:cssNum($E,"borderTopWidth"))-($.css($E[0],"borderBottomStyle",true)=="none"?0:cssNum($E,"borderBottomWidth"))}};var cssSize=function(pane,outerSize){if(c[pane].dir=="horz"){return cssH(pane,outerSize)}else{return cssW(pane,outerSize)}};var getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp}else{if(c[pane].dir=="horz"){return $P.outerHeight()+oSp}else{return $P.outerWidth()+oSp}}}};var setPaneMinMaxSizes=function(pane){var d=cDims,edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$altPane=$Ps[altSide[pane]],paneSpacing=o.spacing_open,altPaneSpacing=options[altSide[pane]].spacing_open,altPaneSize=(!$altPane?0:(dir=="horz"?$altPane.outerHeight():$altPane.outerWidth())),containerSize=(dir=="horz"?d.innerHeight:d.innerWidth),limitSize=containerSize-paneSpacing-altPaneSize-altPaneSpacing,minSize=s.minSize||0,maxSize=Math.min(s.maxSize||9999,limitSize),minPos,maxPos;switch(pane){case"north":minPos=d.offsetTop+minSize;maxPos=d.offsetTop+maxSize;break;case"west":minPos=d.offsetLeft+minSize;maxPos=d.offsetLeft+maxSize;break;case"south":minPos=d.offsetTop+d.innerHeight-maxSize;maxPos=d.offsetTop+d.innerHeight-minSize;break;case"east":minPos=d.offsetLeft+d.innerWidth-maxSize;maxPos=d.offsetLeft+d.innerWidth-minSize;break}$.extend(s,{minSize:minSize,maxSize:maxSize,minPosition:minPos,maxPosition:maxPos})};var getPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};with(d){width=cDims.innerWidth-left-right;height=cDims.innerHeight-bottom-top;top+=cDims.top;bottom+=cDims.bottom;left+=cDims.left;right+=cDims.right}return d};var getElemDims=function($E){var d={},e,b,p;$.each("Left,Right,Top,Bottom".split(","),function(){e=str(this);b=d["border"+e]=cssNum($E,"border"+e+"Width");p=d["padding"+e]=cssNum($E,"padding"+e);d["offset"+e]=b+p;if($E==$Container){d[e.toLowerCase()]=($.boxModel?p:0)}});d.innerWidth=d.outerWidth=$E.outerWidth();d.innerHeight=d.outerHeight=$E.outerHeight();if($.boxModel){d.innerWidth-=(d.offsetLeft+d.offsetRight);d.innerHeight-=(d.offsetTop+d.offsetBottom)}return d};var setTimer=function(pane,action,fn,ms){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){return}else{Timers[name]=setTimeout(fn,ms)}};var clearTimer=function(pane,action){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){clearTimeout(Timers[name]);delete Timers[name];return true}else{return false}};var create=function(){initOptions();initContainer();initPanes();initHandles();initResizable();sizeContent("all");if(options.scrollToBookmarkOnLoad){with(self.location){if(hash){replace(hash)}}}initHotkeys();$(window).resize(function(){var timerID="timerLayout_"+state.id;if(window[timerID]){clearTimeout(window[timerID])}window[timerID]=null;if(true||$.browser.msie){window[timerID]=setTimeout(resizeAll,100)}else{resizeAll()}})};var initContainer=function(){try{if($Container[0].tagName=="BODY"){$("html").css({height:"100%",overflow:"hidden"});$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"})}else{var CSS={overflow:"hidden"},p=$Container.css("position"),h=$Container.css("height");if(!$Container.hasClass("ui-layout-pane")){if(!p||"fixed,absolute,relative".indexOf(p)<0){CSS.position="relative"}if(!h||h=="auto"){CSS.height="100%"}}$Container.css(CSS)}}catch(ex){}cDims=state.container=getElemDims($Container)};var initHotkeys=function(){$.each(c.borderPanes.split(","),function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).keydown(keyDown);return false}})};var initOptions=function(){opts=transformData(opts);if(opts.effects){$.extend(effects,opts.effects);delete opts.effects}$.each("name,scrollToBookmarkOnLoad".split(","),function(idx,key){if(opts[key]!==undefined){options[key]=opts[key]}else{if(opts.defaults[key]!==undefined){options[key]=opts.defaults[key];delete opts.defaults[key]}}});$.each("paneSelector,resizerCursor,customHotkey".split(","),function(idx,key){delete opts.defaults[key]});$.extend(options.defaults,opts.defaults);c.center=$.extend(true,{},c.defaults,c.center);$.extend(options.center,opts.center);var o_Center=$.extend(true,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(idx,key){options.center[key]=o_Center[key]});var defs=options.defaults;$.each(c.borderPanes.split(","),function(i,pane){c[pane]=$.extend(true,{},c.defaults,c[pane]);o=options[pane]=$.extend(true,{},options.defaults,options[pane],opts.defaults,opts[pane]);if(!o.paneClass){o.paneClass=defaults.paneClass}if(!o.resizerClass){o.resizerClass=defaults.resizerClass}if(!o.togglerClass){o.togglerClass=defaults.togglerClass}$.each(["_open","_close",""],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n;o[sName]=opts[pane][sName]||opts[pane].fxName||opts.defaults[sName]||opts.defaults.fxName||o[sName]||o.fxName||defs[sName]||defs.fxName||"none";var fxName=o[sName];if(fxName=="none"||!$.effects||!$.effects[fxName]||(!effects[fxName]&&!o[sSettings]&&!o.fxSettings)){fxName=o[sName]="none"}var fx=effects[fxName]||{},fx_all=fx.all||{},fx_pane=fx[pane]||{};o[sSettings]=$.extend({},fx_all,fx_pane,defs.fxSettings||{},defs[sSettings]||{},o.fxSettings,o[sSettings],opts.defaults.fxSettings,opts.defaults[sSettings]||{},opts[pane].fxSettings,opts[pane][sSettings]||{});o[sSpeed]=opts[pane][sSpeed]||opts[pane].fxSpeed||opts.defaults[sSpeed]||opts.defaults.fxSpeed||o[sSpeed]||o[sSettings].duration||o.fxSpeed||o.fxSettings.duration||defs.fxSpeed||defs.fxSettings.duration||fx_pane.duration||fx_all.duration||"normal"})})};var initPanes=function(){$.each(c.allPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],fx=s.fx,dir=c[pane].dir,size=o.size=="auto"||isNaN(o.size)?0:o.size,minSize=o.minSize||1,maxSize=o.maxSize||9999,spacing=o.spacing_open||0,sel=o.paneSelector,isIE6=($.browser.msie&&$.browser.version<7),CSS={},$P,$C;$Cs[pane]=false;if(sel.substr(0,1)==="#"){$P=$Ps[pane]=$Container.find(sel+":first")}else{$P=$Ps[pane]=$Container.children(sel+":first");if(!$P.length){$P=$Ps[pane]=$Container.children("form:first").children(sel+":first")}}if(!$P.length){$Ps[pane]=false;return true}$P.attr("pane",pane).addClass(o.paneClass+" "+o.paneClass+"-"+pane);if(pane!="center"){s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;s.noRoom=false;c[pane].pins=[]}CSS=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[pane].cssReq);if(o.applyDefaultStyles){$.extend(CSS,c.defaults.cssDef,c[pane].cssDef)}$P.css(CSS);CSS={};switch(pane){case"north":CSS.top=cDims.top;CSS.left=cDims.left;CSS.right=cDims.right;break;case"south":CSS.bottom=cDims.bottom;CSS.left=cDims.left;CSS.right=cDims.right;break;case"west":CSS.left=cDims.left;break;case"east":CSS.right=cDims.right;break;case"center":}if(dir=="horz"){if(size===0||size=="auto"){$P.css({height:"auto"});size=$P.outerHeight()}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerHeight-spacing);CSS.height=max(1,cssH(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.height+1);$P.css(CSS)}else{if(dir=="vert"){if(size===0||size=="auto"){$P.css({width:"auto","float":"left"});size=$P.outerWidth();$P.css({"float":"none"})}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerWidth-spacing);CSS.width=max(1,cssW(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.width+1);$P.css(CSS);sizeMidPanes(pane,null,true)}else{if(pane=="center"){$P.css(CSS);sizeMidPanes("center",null,true)}}}if(o.initClosed&&o.closable){$P.hide().addClass("closed");s.isClosed=true}else{if(o.initHidden||o.initClosed){hide(pane,true);s.isHidden=true}else{$P.addClass("open")}}if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow)}if(o.contentSelector){$C=$Cs[pane]=$P.children(o.contentSelector+":first");if(!$C.length){$Cs[pane]=false;return true}$C.css(c.content.cssReq);if(o.applyDefaultStyles){$C.css(c.content.cssDef)}$P.css({overflow:"hidden"})}})};var initHandles=function(){$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],rClass=o.resizerClass,tClass=o.togglerClass,$P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P||(!o.closable&&!o.resizable)){return}var edge=c[pane].edge,isOpen=$P.is(":visible"),spacing=(isOpen?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(isOpen?"-open":"-closed"),$R,$T;$R=$Rs[pane]=$("<span></span>");if(isOpen&&o.resizable){}else{if(!isOpen&&o.slidable){$R.attr("title",o.sliderTip).css("cursor",o.sliderCursor)}}$R.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"")).attr("resizer",pane).css(c.resizers.cssReq).css(edge,cDims[edge]+getPaneSize(pane)).addClass(rClass+" "+rClass+_pane+" "+rClass+_state+" "+rClass+_pane+_state).appendTo($Container);if(o.applyDefaultStyles){$R.css(c.resizers.cssDef)}if(o.closable){$T=$Ts[pane]=$("<div></div>");$T.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"")).css(c.togglers.cssReq).attr("title",(isOpen?o.togglerTip_open:o.togglerTip_closed)).click(function(evt){toggle(pane);evt.stopPropagation()}).mouseover(function(evt){evt.stopPropagation()}).addClass(tClass+" "+tClass+_pane+" "+tClass+_state+" "+tClass+_pane+_state).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").addClass("content content-open").css("display",s.isClosed?"none":"block").appendTo($T)}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").addClass("content content-closed").css("display",s.isClosed?"block":"none").appendTo($T)}if(o.applyDefaultStyles){$T.css(c.togglers.cssDef)}if(!isOpen){bindStartSlidingEvent(pane,true)}}});sizeHandles("all",true)};var initResizable=function(){var draggingAvailable=(typeof $.fn.draggable=="function"),minPosition,maxPosition,edge;$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var rClass=o.resizerClass,dragClass=rClass+"-drag",dragPaneClass=rClass+"-"+pane+"-drag",draggingClass=rClass+"-dragging",draggingPaneClass=rClass+"-"+pane+"-dragging",draggingClassSet=false,$P=$Ps[pane],$R=$Rs[pane];if(!s.isClosed){$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor)}$R.bind("mousedown",function(){$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#000",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px",top:0,left:0}).appendTo(this.parentNode)})});$R.bind("mouseup",function(){$("div.ui-layout-mask").remove()});$R.draggable({containment:$Container[0],axis:(c[pane].dir=="horz"?"y":"x"),delay:200,distance:1,helper:"clone",opacity:o.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(e,ui){if(false===execUserCallback(pane,o.onresize_start)){return false}s.isResizing=true;clearTimer(pane,"closeSlider");$R.addClass(dragClass+" "+dragPaneClass);draggingClassSet=false;var resizerWidth=(pane=="east"||pane=="south"?o.spacing_open:0);setPaneMinMaxSizes(pane);s.minPosition-=resizerWidth;s.maxPosition-=resizerWidth;edge=(c[pane].dir=="horz"?"top":"left");$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(e,ui){if(!draggingClassSet){$(".ui-draggable-dragging").addClass(draggingClass+" "+draggingPaneClass).children().css("visibility","hidden");draggingClassSet=true;if(s.isSliding){$Ps[pane].css("zIndex",c.zIndex.sliding)}}if(ui.position[edge]<s.minPosition){ui.position[edge]=s.minPosition}else{if(ui.position[edge]>s.maxPosition){ui.position[edge]=s.maxPosition}}},stop:function(e,ui){var dragPos=ui.position,resizerPos,newSize;$R.removeClass(dragClass+" "+dragPaneClass);switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=cDims.outerHeight-dragPos.top-$R.outerHeight();break;case"east":resizerPos=cDims.outerWidth-dragPos.left-$R.outerWidth();break}newSize=resizerPos-cDims[c[pane].edge];sizePane(pane,newSize);$("div.ui-layout-mask").remove();s.isResizing=false}})})};var hide=function(pane,onInit){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden){return}if(false===execUserCallback(pane,o.onhide_start)){return}s.isSliding=false;if($R){$R.hide()}if(onInit||s.isClosed){s.isClosed=true;s.isHidden=true;$P.hide();sizeMidPanes(c[pane].dir=="horz"?"all":"center");execUserCallback(pane,o.onhide_end||o.onhide)}else{s.isHiding=true;close(pane,false)}};var show=function(pane,openPane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden){return}if(false===execUserCallback(pane,o.onshow_start)){return}s.isSliding=false;s.isShowing=true;if($R&&o.spacing_open>0){$R.show()}if(openPane===false){close(pane,true)}else{open(pane)}};var toggle=function(pane){var s=state[pane];if(s.isHidden){show(pane)}else{if(s.isClosed){open(pane)}else{close(pane)}}};var close=function(pane,force,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",isShowing=s.isShowing,isHiding=s.isHiding;delete s.isShowing;delete s.isHiding;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!force&&s.isClosed&&!isShowing){return}}if(c.isLayoutBusy){setFlowCallback("close",pane,force);return}if(!isShowing&&false===execUserCallback(pane,o.onclose_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;s.isClosed=true;if(isHiding){s.isHidden=true}else{if(isShowing){s.isHidden=false}}syncPinBtns(pane,false);if(!s.isSliding){sizeMidPanes(c[pane].dir=="horz"?"all":"center")}if($R){$R.css(edge,cDims[edge]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable){$R.draggable("disable").css("cursor","default").attr("title","")}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.togglerTip_closed)}sizeHandles()}if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(!s.isClosed){return}close_2()})}else{$P.hide();close_2()}function close_2(){bindStartSlidingEvent(pane,true);if(!isShowing){execUserCallback(pane,o.onclose_end||o.onclose)}if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}if(isHiding){execUserCallback(pane,o.onhide_end||o.onhide)}execFlowCallback(pane)}};var open=function(pane,slide,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding",isShowing=s.isShowing;delete s.isShowing;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!s.isClosed&&!s.isSliding){return}}if(s.isHidden&&!isShowing){show(pane,true);return}if(c.isLayoutBusy){setFlowCallback("open",pane,slide);return}if(false===execUserCallback(pane,o.onopen_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;if(s.isSliding&&!slide){bindStopSlidingEvents(pane,false)}s.isClosed=false;if(isShowing){s.isHidden=false}setPaneMinMaxSizes(pane);if(s.size>s.maxSize){$P.css(c[pane].sizeType,max(1,cssSize(pane,s.maxSize)))}bindStartSlidingEvent(pane,false);if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isClosed){return}open_2()})}else{$P.show();open_2()}function open_2(){if(!s.isSliding){sizeMidPanes(c[pane].dir=="vert"?"center":"all")}if($R){$R.css(edge,cDims[edge]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open).addClass(!s.isSliding?"":rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip)}else{$R.css("cursor","default")}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open)}sizeHandles("all")}sizeContent(pane);syncPinBtns(pane,!s.isSliding);execUserCallback(pane,o.onopen_end||o.onopen);if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}execFlowCallback(pane)}};var lockPaneForFX=function(pane,doLock){var $P=$Ps[pane];if(doLock){$P.css({zIndex:c.zIndex.animation});if(pane=="south"){$P.css({top:cDims.top+cDims.innerHeight-$P.outerHeight()})}else{if(pane=="east"){$P.css({left:cDims.left+cDims.innerWidth-$P.outerWidth()})}}}else{if(!state[pane].isSliding){$P.css({zIndex:c.zIndex.pane_normal})}if(pane=="south"){$P.css({top:"auto"})}else{if(pane=="east"){$P.css({left:"auto"})}}}};var bindStartSlidingEvent=function(pane,enable){var o=options[pane],$R=$Rs[pane],trigger=o.slideTrigger_open;if(!$R||!o.slidable){return}if(trigger!="click"&&trigger!="dblclick"&&trigger!="mouseover"){trigger="click"}$R[enable?"bind":"unbind"](trigger,slideOpen).css("cursor",(enable?o.sliderCursor:"default")).attr("title",(enable?o.sliderTip:""))};var bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],trigger=o.slideTrigger_close,action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;clearTimer(pane,"closeSlider");$P.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.pane_normal)});$R.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.resizer_normal)});if(trigger!="click"&&trigger!="mouseout"){trigger="mouseout"}if(enable){$P.bind(trigger,slideClosed);$R.bind(trigger,slideClosed);if(trigger="mouseout"){$P.bind("mouseover",cancelMouseOut);$R.bind("mouseover",cancelMouseOut)}}else{$P.unbind(trigger);$R.unbind(trigger);if(trigger="mouseout"){$P.unbind("mouseover");$R.unbind("mouseover");clearTimer(pane,"closeSlider")}}function cancelMouseOut(evt){clearTimer(pane,"closeSlider");evt.stopPropagation()}};var slideOpen=function(){var pane=$(this).attr("resizer");if(state[pane].isClosed){bindStopSlidingEvents(pane,true);open(pane,true)}};var slideClosed=function(){var $E=$(this),pane=$E.attr("pane")||$E.attr("resizer"),o=options[pane],s=state[pane];if(s.isClosed||s.isResizing){return}else{if(o.slideTrigger_close=="click"){close_NOW()}else{setTimer(pane,"closeSlider",close_NOW,300)}}function close_NOW(){bindStopSlidingEvents(pane,false);if(!s.isClosed){close(pane)}}};var sizePane=function(pane,size){var edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];setPaneMinMaxSizes(pane);s.minSize=max(s.minSize,o.minSize);if(o.maxSize>0){s.maxSize=min(s.maxSize,o.maxSize)}size=max(size,s.minSize);size=min(size,s.maxSize);s.size=size;$R.css(edge,size+cDims[edge]);$P.css(c[pane].sizeType,max(1,cssSize(pane,size)));if(!s.isSliding){sizeMidPanes(dir=="horz"?"all":"center")}sizeHandles();sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)};var sizeMidPanes=function(panes,overrideDims,onInit){if(!panes||panes=="all"){panes="east,west,center"}var d=getPaneDims();if(overrideDims){$.extend(d,overrideDims)}$.each(panes.split(","),function(){if(!$Ps[this]){return}var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],hasRoom=true,CSS={};if(pane=="center"){d=getPaneDims();CSS=$.extend({},d);CSS.width=max(1,cssW(pane,CSS.width));if(CSS.width>100000){if(parent.document.body){CSS.width=$(parent.document.body).width()-CSS.left-2}}CSS.height=max(1,cssH(pane,CSS.height));hasRoom=(CSS.width>1&&CSS.height>1);if($.browser.msie&&(!$.boxModel||$.browser.version<7)){if($Ps.north){$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)})}if($Ps.south){$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)})}}}else{CSS.top=d.top;CSS.bottom=d.bottom;CSS.height=max(1,cssH(pane,d.height));hasRoom=(CSS.height>1)}if(hasRoom){$P.css(CSS);if(s.noRoom){s.noRoom=false;if(s.isHidden){return}else{show(pane,!s.isClosed)}}if(!onInit){sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)}}else{if(!s.noRoom){s.noRoom=true;if(s.isHidden){return}if(onInit){$P.hide();if($R){$R.hide()}}else{hide(pane)}}}})};var sizeContent=function(panes){if(!panes||panes=="all"){panes=c.allPanes}$.each(panes.split(","),function(){if(!$Cs[this]){return}var pane=str(this),ignore=options[pane].contentIgnoreSelector,$P=$Ps[pane],$C=$Cs[pane],e_C=$C[0],height=cssH($P);$P.children().each(function(){if(this==e_C){return}var $E=$(this);if(!ignore||!$E.is(ignore)){height-=$E.outerHeight()}});if(height>0){height=cssH($C,height)}if(height<1){$C.hide()}else{$C.css({height:height}).show()}})};var sizeHandles=function(panes,onInit){if(!panes||panes=="all"){panes=c.borderPanes}$.each(panes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane];if(!$P||!$R||(!o.resizable&&!o.closable)){return}var dir=c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,offset,CSS={};if(spacing==0){$R.hide();return}else{if(!s.noRoom&&!s.isHidden){$R.show()}}if(dir=="horz"){paneLen=$P.outerWidth();$R.css({width:max(1,cssW($R,paneLen)),height:max(1,cssH($R,spacing)),left:cssNum($P,"left")})}else{paneLen=$P.outerHeight();$R.css({height:max(1,cssH($R,paneLen)),width:max(1,cssW($R,spacing)),top:cDims.top+getPaneSize("north",true)})}if($T){if(togLen==0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return}else{$T.show()}if(!(togLen>0)||togLen=="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(typeof togAlign=="string"){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=Math.floor((paneLen-togLen)/2)}}else{var x=parseInt(togAlign);if(togAlign>=0){offset=x}else{offset=paneLen-togLen+x}}}var $TC_o=(o.togglerContent_open?$T.children(".content-open"):false),$TC_c=(o.togglerContent_closed?$T.children(".content-closed"):false),$TC=(s.isClosed?$TC_c:$TC_o);if($TC_o){$TC_o.css("display",s.isClosed?"none":"block")}if($TC_c){$TC_c.css("display",s.isClosed?"block":"none")}if(dir=="horz"){var width=cssW($T,togLen);$T.css({width:max(0,width),height:max(1,cssH($T,spacing)),left:offset});if($TC){$TC.css("marginLeft",Math.floor((width-$TC.outerWidth())/2))}}else{var height=cssH($T,togLen);$T.css({height:max(0,height),width:max(1,cssW($T,spacing)),top:offset});if($TC){$TC.css("marginTop",Math.floor((height-$TC.outerHeight())/2))}}}if(onInit&&o.initHidden){$R.hide();if($T){$T.hide()}}})};var resizeAll=function(){var oldW=cDims.innerWidth,oldH=cDims.innerHeight;cDims=state.container=getElemDims($Container);var checkH=(cDims.innerHeight<oldH),checkW=(cDims.innerWidth<oldW),s,dir;if(checkH||checkW){$.each(["south","north","east","west"],function(i,pane){s=state[pane];dir=c[pane].dir;if(!s.isClosed&&((checkH&&dir=="horz")||(checkW&&dir=="vert"))){setPaneMinMaxSizes(pane);if(s.size>s.maxSize){sizePane(pane,s.maxSize)}}})}sizeMidPanes("all");sizeHandles("all")};function keyDown(evt){if(!evt){return true}var code=evt.keyCode;if(code<33){return true}var PANE={38:"north",40:"south",37:"west",39:"east"},isCursorKey=(code>=37&&code<=40),ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,pane=false,s,o,k,m,el;if(!CTRL&&!SHIFT){return true}else{if(isCursorKey&&options[PANE[code]].enableCursorHotkey){pane=PANE[code]}else{$.each(c.borderPanes.split(","),function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code==(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}})}}if(!pane){return true}o=options[pane];s=state[pane];if(!o.enableCursorHotkey||s.isHidden||!$Ps[pane]){return true}el=evt.target||evt.srcElement;if(el&&SHIFT&&isCursorKey&&(el.tagName=="TEXTAREA"||(el.tagName=="INPUT"&&(code==37||code==39)))){return true}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).attr("pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane];if(s.cssSaved){resetOverflow(pane)}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:(c.zIndex.pane_normal+1)},css={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){css.overflow=of;newCSS.overflow="visible"}if(ofX&&ofX!="visible"&&ofX!="auto"){css.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&ofY!="visible"&&ofY!="auto"){css.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=css;$P.css(newCSS);$.each(c.allPanes.split(","),function(i,p){if(p!=pane){resetOverflow(p)}})}function resetOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).hasClass("ui-layout-pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",c.zIndex.pane_normal)}$P.css(CSS);s.cssSaved=false}function getBtn(selector,pane,action){var $E=$(selector),err="Error Adding Button \n\nInvalid ";if(!$E.length){alert(err+"selector: "+selector)}else{if(c.borderPanes.indexOf(pane)==-1){alert(err+"pane: "+pane)}else{var btn=options[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane);return $E}}return false}function addToggleBtn(selector,pane){var $E=getBtn(selector,pane,"toggle");if($E){$E.attr("title",state[pane].isClosed?"Open":"Close").click(function(evt){toggle(pane);evt.stopPropagation()})}}function addOpenBtn(selector,pane){var $E=getBtn(selector,pane,"open");if($E){$E.attr("title","Open").click(function(evt){open(pane);evt.stopPropagation()})}}function addCloseBtn(selector,pane){var $E=getBtn(selector,pane,"close");if($E){$E.attr("title","Close").click(function(evt){close(pane);evt.stopPropagation()})}}function addPinBtn(selector,pane){var $E=getBtn(selector,pane,"pin");if($E){var s=state[pane];$E.click(function(evt){setPinState($(this),pane,(s.isSliding||s.isClosed));if(s.isSliding||s.isClosed){open(pane)}else{close(pane)}evt.stopPropagation()});setPinState($E,pane,(!s.isClosed&&!s.isSliding));c[pane].pins.push(selector)}}function syncPinBtns(pane,doPin){$.each(c[pane].pins,function(i,selector){setPinState($(selector),pane,doPin)})}function setPinState($Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin==(updown=="down")){return}var root=options[pane].buttonClass,class1=root+"-pin",class2=class1+"-"+pane,UP1=class1+"-up",UP2=class2+"-up",DN1=class1+"-down",DN2=class2+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?"Un-Pin":"Pin").removeClass(doPin?UP1:DN1).removeClass(doPin?UP2:DN2).addClass(doPin?DN1:UP1).addClass(doPin?DN2:UP2)}var $Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;create();return{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var ie=document.all?1:0;var wx=screen.availWidth+"px";var wy=screen.availHeight+"px";var refreshTickets=[];function doExit(){window.close()}function doEmpty(){window.returnValue="";window.close()}function trim(b){return b.replace(/^\s*/,"").replace(/\s*$/,"")}function showViewDialog(h,g,b,d){wx="640px";wy="480px";var c=contextPath+"/portal/share/dynaform/view/dialogFram.jsp?_viewid="+g;c+="&className="+d;var e=window.showModalDialog(c,h,"font-size:9pt;dialogWidth:"+wx+";dialogHeight:"+wy+";status:no;scroll=no;");var f=document.getElementById(b);if(f){if(e){f.value=e.id}else{f.value=""}dy_view_refresh()}}function showWordDialog(r,b,p,u,t,h,s,e,g,f,c,d){wx="900px";wy="600px";var q=document.getElementById(h);var m=document.getElementById("application").value;b=contextPath+b;if(s=="3"||s==3){OBPM.dialog.show({width:1200,height:600,url:b,args:{itemValue:q.value},title:r,close:function(v){var w="";if(v){w=v.itemValue}if(q&&w!=""){q.value=w}}})}else{var l=window.showModalDialog(b,p,"font-size:9pt;dialogWidth:"+wx+";dialogHeight:"+wy+";status:no;scroll=no;");if(q){if(l){q.value=l}else{q.value=""}doc.frames.main_iframe.frames.detail.dy_view_refresh("")}}}function showWordDialogWithView(q,m,t,r,h,s,e,g,f,c,d){wx="900px";wy="600px";var p=document.getElementById(h);var l=document.getElementById("application").value;var b=contextPath+"/portal/dynaform/document/newword.action?_docid="+t+"&type=word&_fieldname="+h+"&_opentype="+s+"&_displayType="+e+"&saveable="+g+"&application="+l+"&isOnlyRead="+f+"&signature="+c+"&isSignature="+d;if(p==null){b+="&filename="+r}else{b+="&filename="+p.value}OBPM.dialog.show({width:900,height:600,url:b,args:{itemValue:p.value},title:q,close:function(){}});event.stopPropagation()}function showViewDialogField(r,m,p,q,f,d,l,e,h,g){var b=contextPath+"/portal/share/dynaform/view/dialogTemp.jsp";b+="?_viewid="+p;b+="&datetime="+new Date().getTime();b+="&"+jQuery.param(f,true);if(e==null||e==""&&g==false){b+="&_defaultSize=true"}var c=640;var s=400;e=e.replace(/(^\s*)|(\s*$)/g,"");if(e.length>0){c=e}h=h.replace(/(^\s*)|(\s*$)/g,"");if(h.length>0){s=h}OBPM.dialog.show({width:c,height:s,url:b,args:{html:new String(m),parent:window},maximization:g,title:r,close:function(t){var u=t;if(l!=17&&l!=16){if(f.selectOne=="false"||f.selectOne==false){getDialogValue(q,u)}else{getDialogSelectValue(q,u)}}else{getDialogValue(q,u)}}})}function getDialogSelectValue(l,h){var l=HTMLDencode(l);var g=l.split(";");if(h!=undefined){for(var d=0;d<g.length;d++){var r=g[d].split(":");var q=r[0];var b=r[1];var c=h;var e=document.getElementsByName(b);if(e.length>0&&e[0].tagName.toUpperCase()=="SELECT"){if(!isOptionExisted(e[0],c)){var p=document.createElement("OPTION");p.text="";p.value=c;e[0].add(p)}selectOne(e[0],c);DWREngine.setAsync(false);jQuery(e[0]).change()}else{if(e.length>0&&(e[0].type.toUpperCase()=="RADIO"||e[0].type.toUpperCase()=="CHECKBOX")){for(n=0;e.length>n;n++){var m=c.split(";");if(m.indexOf(e[n].value)!=-1){e[n].checked=true}else{e[n].checked=false}}}else{var f=jQuery(e).attr("isRefreshOnChanged");f=(f=="true");if(e.length==0){e.value=c}else{e[0].value=c}if(f){DWREngine.setAsync(false);dy_refresh(b)}}}}return true}else{return false}}function getDialogValue(mappStr,rtn){if(!mappStr){return false}var isOptionExisted=function(oSel,selectedText){for(var i=0;i<oSel.options.length;i++){if(oSel.options[i].text==selectedText){return true}}return false};var selectOne=function(oSel,selectedText){for(n=0;oSel.options.length>n;n++){if(selectedText==oSel.options[n].text){oSel.options[n].selected=true;return true}}return false};var conversionVal=function(valStr){var reg=/&nbsp;/g;var reg1=/%&0000/g;var reg2=/%&0001/g;var reg3=/%23/g;valStr=valStr.replace(reg,"");valStr=valStr.replace(reg1,"\r");valStr=valStr.replace(reg2,"\n");valStr=valStr.replace(reg3,"#");if(valStr=="&nbsp"){valStr=""}valStr=valStr.replace(/(^\s*)|(\s*$)/g,"");return valStr};var conversionJSONVal=function(valStr){if(valStr!=null&&valStr!="null"&&valStr!=null&&valStr!=""){var json="";try{json=JSON.parse(valStr)}catch(e){try{var jsonArray=new Array();var strs=new Array();strs=valStr.split(";");for(var index=0;index<strs.length;index++){try{json=JSON.parse(strs[index]);for(var arr in json){jsonArray.push(json[arr])}}catch(e){}}valStr=JSON.stringify(jsonArray)}catch(e){valStr=""}}}return valStr};var getShowValFromValStr=function(valStr){if(valStr!=null&&valStr!="null"&&valStr!=null&&valStr!=""){if(valStr.indexOf("[{")>=0){var _valStr=valStr.substring(1,valStr.length-1);var json="";try{json=JSON.parse(_valStr);valStr=json.key}catch(e){}}}return valStr};var setFieldVal=function(fldName,valStr){var fields=document.getElementsByName(fldName);if(!fields||fields.length==0){console.error("视图选择框映射字段'"+fldName+"'不存在！");return false}var _tagName=fields[0].tagName.toUpperCase();var _type=fields[0].type.toUpperCase();var _fieldtype=fields[0].getAttribute("fieldtype");if(_tagName=="SELECT"&&_fieldtype!="DepartmentField"&&_fieldtype!="SelectAboutField"){var isSelect=selectOne(fields[0],valStr);if(!isSelect){$(fields[0]).val(valStr);valStr=$(fields[0]).find("option[value='"+valStr+"']").text()}var fldShow=document.getElementById(fldName+"_show");if(fldShow){fldShow.innerText=valStr}DWREngine.setAsync(false);jQuery(fields[0]).change()}else{if(_fieldtype=="SelectAboutField"){var vals=valStr.split(";");var oSel=fields[0];var $_sx=$("#"+fldName+"ms2side__sx");var $_dx=$("#"+fldName+"ms2side__dx");for(var i=0;oSel.options.length>i;i++){if(oSel.options[i].selected==true){oSel.options[i].selected=false}}$_sx.html(oSel.innerHTML);$_dx.html("");for(j=0;j<vals.length;j++){var selectedText=vals[j];for(n=0;oSel.options.length>n;n++){if(selectedText==oSel.options[n].text){var selectedVal=oSel.options[n].value;oSel.options[n].selected=true;$_sx.find("option[value='"+selectedVal+"']").clone(true).appendTo($_dx);$_sx.find("option[value='"+selectedVal+"']").remove()}}}}else{if((_type=="RADIO"||_type=="CHECKBOX")){for(n=0;fields.length>n;n++){var vals=valStr.split(";");for(j=0;j<vals.length;j++){if(vals[j]==fields[n].value||vals[j]==$(fields[n]).next().text()){fields[n].checked=true;break}else{fields[n].checked=false}}}}else{if((_fieldtype=="AttachmentUploadField"||_fieldtype=="ImageUploadField")){valStr=conversionJSONVal(valStr);fields[0].value=valStr;var $field=jQuery(fields[0]);$field.next().next("table").remove();$field.next("span[moduletype='uploadFileRefresh']").attr("value",valStr);$field.next("span[moduleType='uploadFileRefresh']").obpmUploadField()}else{if(_fieldtype=="UserField"){if(valStr!=null&&valStr!=""){var userStr=eval("("+valStr+")");var rtnValue=fields[0].id;var rtnText=rtnValue+"_text";$("#"+rtnValue).val(userStr[0].value);$("#"+rtnText).val(userStr[0].key);$("#"+rtnText).append(userStr[0].key);var fldShow=document.getElementById(fldName+"_show");if(fldShow){fldShow.innerText=userStr[0].key}}}else{if(_fieldtype=="DepartmentField"){if(valStr!=null&&valStr!=""){var userStr=eval("("+valStr+")");var rtnValue=fields[0].id;var rtnText=rtnValue+"_text";$("#"+rtnValue).val(userStr[0].value);$("#"+rtnText).append(userStr[0].key);$("#"+rtnText).attr("value",userStr[0].key);var fldShow=document.getElementById(fldName+"_show");if(fldShow){fldShow.innerText=userStr[0].key}}}else{if(_fieldtype=="DateField"){fields[0].value=valStr;var fldShow=document.getElementById(fldName+"_show");if(fldShow){fldShow.innerText=valStr}}else{if(_fieldtype=="TreeDepartmentField"){if(valStr!=null&&valStr!=""){var userStr=eval("("+valStr+")");var rtnValue=fields[0].id;var rtnText=rtnValue+"_text";$("#"+rtnValue).val(userStr[0].value);$("#"+rtnText).val(userStr[0].key);var fldShow=document.getElementById(fldName+"_show");if(fldShow){fldShow.innerText=userStr[0].key}}}else{if(_fieldtype=="SuggestField"){if(valStr!=null&&valStr!=""){var suggestStr=eval("("+valStr+")");if(suggestStr.value==null){suggestStr.value=""}if(suggestStr.key==null){suggestStr.key=""}fields[0].value=suggestStr.value;var fldShow=document.getElementById(fldName+"_show");if(fldShow){fldShow.value=suggestStr.key}var fldShow=document.getElementById(fldName+"_show1");if(fldShow){fldShow.innerText=suggestStr.key}}}else{valStr=getShowValFromValStr(valStr);if(_tagName=="TEXTAREA"){fields[0].value=HTMLDencode(valStr)}else{fields[0].value=valStr}if(_type=="HIDDEN"||_tagName=="TEXTAREA"||_tagName=="INPUT"){var fldShow=document.getElementById(fldName+"_show");if(fldShow){if(_tagName=="TEXTAREA"){fldShow.innerText=HTMLDencode(valStr)}else{if(_tagName=="INPUT"&&_fieldtype!="SuggestField"){fldShow.innerText=valStr}else{fldShow.value=valStr}}}}var isRefreshOnChanged=jQuery(fields).attr("isRefreshOnChanged");isRefreshOnChanged=(isRefreshOnChanged=="true");if(isRefreshOnChanged){DWREngine.setAsync(false);dy_refresh(jQuery(fields).attr("id"))}}}}}}}}}}};mappStr=HTMLDencode(mappStr);var mapps=mappStr.split(";");if(rtn==""){for(var i=0;i<mapps.length;i++){var rel=mapps[i].split(":");var fldName=rel[1];setFieldVal(fldName,"")}return false}rtn=eval("("+rtn+")");var rtnObj={};for(var i in rtn){var tem=rtn[i];for(var o in tem){rtnObj[o]=rtnObj[o]?(rtnObj[o]+";"+tem[o]):tem[o]}}for(var i=0;i<mapps.length;i++){var rel=mapps[i].split(":");var colName=rel[0];var fldName=rel[1];var valStr="";valStr=rtnObj[colName];valStr=HTMLDencode(valStr);valStr=conversionVal(valStr);setFieldVal(fldName,valStr)}}function selectAll(b,d,e){wx="600px";wy="400px";var c=contextPath+"/core/department/select.action";var m="";if(b!=null&&b!=""){b=b.replace("(","");b=b.replace(")","");b=b.replace("{","");b=b.replace("}","");var f=b.split(";");for(var g=0;g<f.length;g++){var l=f[g].split("|");if(l!=null&&l[0]!=""){m=m+l[0]+";"}}}c=c+"?SELECTEDID="+m;if(d!=null&&d){c=c+"&MULTISELECT=TRUE"}if(e!=null&&e){c=c+"&SELECTCHILD=TRUE"}var h=showframe("",c);return h}function showfrontframe(f){var h=f.title;var d=f.url;var g=f.w?f.w:300;var c=f.h?f.h:400;var b=new Object();b.title=h;b.url=d;b.windowObj=f.windowObj;var e=contextPath+"/portal/share/frame.jsp?title="+h;OBPM.dialog.show({width:g,height:c,url:e,args:b,title:h,close:function(l){var m=l;f.callback(m)}})}function showframe(h,c,f){var g=window.location.pathname;var e=g.lastIndexOf("/");var d=g.lastIndexOf("\\");var l=Math.max(e,d);c.title=h;if(c.url!=null){if(!(c.url.indexOf("/")==0||c.url.indexOf("\\")==0)){c.url=g.substring(0,l)+"/"+c.url}}else{if(!(c.indexOf("/")==0||c.indexOf("\\")==0)){c=g.substring(0,l)+"/"+c}}var b=new Object();b.title=h;b.url=c;b.window=this.window;if(!f){return parent.showModalDialog(contextPath+"/portal/share/frame.jsp?title="+h,b,"resizable=yes;help=no;status=no;font-size:9pt;dialogWidth:"+wx+";dialogHeight:"+wy+";status:no;scroll:no;")}else{showFrameByDiv(b.url,b.title)}}function closeParentDiv(){var b=window.frames.FrameContent;var c=window.parent.frames.FrameContent_dialog;if(b){try{if(window.document.getElementById("FrameContent")){window.document.getElementById("FrameContent").style.display="none";window.document.getElementById("closeWindow_DIV").style.display="none";window.document.getElementById("PopWindows").style.display="none";window.document.getElementById("dbody").style.height="100%";window.document.getElementById("PopWindows").style.height="0px"}b.closePopWindows()}catch(d){}}if(c){c.closePopWindows()}}function addParam(c,b,d){if(c!=null&&b!=null){if(c.indexOf("?")==-1){c=c+"?"+b+"="+d}else{c=c+"&"+b+"="+d}}return c}function getSelectedValue(b){if(b!=null&&b.options.length>0){return b.options[b.selectedIndex].value}return""}function selectOne(b,c,d){if(b!=null){for(i=0;i<b.options.length;++i){if(b.options[i].value==c){b.selectedIndex=i;if(d){d(b)}break}}}}function setCheck(b,c){for(i=0;i<b.length;++i){if(typeof(c)=="object"){b[i].checked=(c.indexOf(b[i].value)>=0)}else{b[i].checked=b[i].value==c}}}function putToValuesMap(e,b,c){var d=document.getElementsByName(b)[0];if(d){e[b]=c}}function selectOrg(f,l,d,c,h,p,m,e){wx="500px";wy="500px";var b=contextPath+"/framework/selectOrg.do?x=";if(f!=null){b=b+"&FieldID="+f.value}if(l!=null){b=b+"&FieldName="+l.value}if(d!=null&&d){b=b+"&MultiSelect=true"}if(c!=null){b=b+"&ShowLayer="+c}if(h!=null){b=b+"&SelectLayer="+h}if(p!=null){b=b+"&DLayer="+p}if(m!=null){b=b+"&GLayer="+m}if(e!=null){b=b+"&ULayer="+e}var g=showframe("????",b);return(g==null?"":g)}function HTMLEncode(c){var b;do{b=c;c=c.replace(/&/g,"@amp;");c=c.replace(/"/g,"@quot;");c=c.replace(/</g,"@lt;");c=c.replace(/>/g,"@gt;");c=c.replace(/'/g,"@#146;");c=c.replace(/\ /g,"@nbsp;");c=c.replace(/\r/g,"&#10;");c=c.replace(/\n/g,"&#13;")}while(b!=c);return c}function HTMLDencode(c){var b;if(c){do{b=c;c=c.replace("@amp;","&");c=c.replace("@quot;",'"');c=c.replace("@lt;","<");c=c.replace("@gt;",">");c=c.replace("@#146;","'");c=c.replace("@nbsp;"," ");c=c.replace("&nbsp;"," ");c=c.replace("&#10;","\r");c=c.replace("&#13;","\n")}while(b!=c);return c}else{return""}}function characterDencode(c){var b;if(c){do{b=c;c=c.replace("@amp;","&");c=c.replace("@quot;",'"');c=c.replace("@lt;","<");c=c.replace("@gt;",">");c=c.replace("@#146;","&apos;");c=c.replace("@nbsp;"," ");c=c.replace("&nbsp;"," ");c=c.replace("&#10;","\r");c=c.replace("&#13;","\n")}while(b!=c);return c}else{return""}}function sortTable(d){var b=document.getElementsByName("_sortCol")[0];var c=b.value;changeStatus(c,d);if(isSubGridView){subGridView.renderGridViewSort()}else{document.forms[0].submit()}}function changeStatus(d,e){var c=document.getElementsByName("_sortStatus")[0];var b=document.getElementsByName("_sortCol")[0];if(d!=e&&d.toUpperCase()!=e.toUpperCase()){c.value="ASC";b.value=e}else{if(c.value=="ASC"){c.value="DESC";b.value=e}else{c.value="ASC";b.value=e}}}function doAlert(b){if(b){alert(b);if(isCloseDialog&&isCloseDialog=="true"){OBPM.dialog.doExit()}}}function doConfirm(c,b){if(c){if(confirm(c)){if(b){makeAllFieldAble();document.forms[0].action=b;document.forms[0].submit()}}}}function makeAllFieldAble(d){if(!d){d=document.forms[0].elements}for(var c=0;c<d.length;c++){var b=d[c];if(b.disabled==true){b.disabled=false}}}var fontColor="";function toggleButton(f){var d=false;var e=document.getElementsByName(f);for(var b=0,c=e.length;b<c;b++){if(e[b].getAttribute("isLoad")=="false"){d=true}else{e[b].setAttribute("isLoad","false");e[b].style.color="gray"}}return d}function recoveryButSta(e){var d=document.getElementsByName(e);for(var b=0,c=d.length;b<c;b++){d[b].setAttribute("isLoad","");d[b].style.color=""}}var Validations={"great-than":function(c,e,d){var b=Validations["is-positive-number"];if(b(c)){return new Number(c)>d.value}return false},"equal-great-than":function(c,e,d){var b=Validations["is-positive-number"];if(b(c)){return new Number(c)>=d.value}return false},"is-positive-number":function(b){return/^\d+\.*\d*$/.test(b)},"required-one":function(b,c){return jQuery.each(c,function(e,d){if(!!d){return d}})},required:function(b){if(b&&b!="0"){return true}return false}};function doValidate(b){var l="";for(var g=0;g<b.length;g++){var f=b[g];var e=document.getElementsByName(f.fieldName);var c=Validations[f.type];var h=false;if(e&&e.length>1){h=c(jQuery(e[0]).val(),e)}else{h=c(jQuery(e[0]).val(),e,f.args)}if(!h){l+=f.msg+", "}}if(b&&b.length>0){l=l.substring(0,l.lastIndexOf(","))}var d="error";if(l){alert(l);return false}return true}function showDialogByDiv(f,d,e,b,c){if(!e||e==""){e="800"}OBPM.dialog.show({width:e,height:b,url:d,args:{},title:f,close:function(g){var h=g;if(c){document.forms[0].submit()}}})}var fieldsTemp={};var divsTemp={};function getCheckedListStr(b){var d=null;var c=document.getElementsByName(b);if(c&&c.length>0){if(c[0].type=="checkbox"||c[0].type=="radio"){d="";for(i=0;i<c.length;i++){if(c[i].checked&&c[i].value){d+=c[i].value+";"}}d=d.substring(0,d.lastIndexOf(";"))}else{d=c[0].value}}return d}function ev_getValue(g){var e=null;try{var f=fieldsTemp[g];f=addField2Temp(g);if(f){if(f.type=="radio"||f.type=="checkbox"){e=getCheckedListStr(g)}else{if(f.type=="select-multiple"){var b="";for(var d=0;d<f.length;d++){if(f[d].selected){b+=f[d].value+";"}}e=b.substring(0,b.lastIndexOf(";"))}else{e=f.value}}}}catch(c){alert("util.js(ev_getValue)."+g+": "+c.message)}return e}function addField2Temp(c){var b=document.getElementsByName(c);if(b){fieldsTemp[c]=b[0]}return fieldsTemp[c]}function refreshField(divid,fieldName,fieldHTML,isDecode){try{refreshTickets.push(divid);console.log(refreshTickets);var d=document.getElementById(divid);if($("#"+divid).is(":visible")){var $divid=$("#"+divid).addClass("refreshItem");var spanHeight=$("#"+divid).css("display","block").height();$divid.height(spanHeight)}if(d){var regExp=/<script.*>(.*)<\/script>/gi;if(isDecode==true){fieldHTML=HTMLDencode(fieldHTML)}d.innerHTML=fieldHTML;if(regExp.test(fieldHTML)){eval(RegExp.$1)}addField2Temp(fieldName)}refreshTickets.splice($.inArray(divid,refreshTickets),1);console.log(refreshTickets)}catch(ex){}}function getCookie(d){var c=document.cookie;var e=c.indexOf(d);if(e!=-1){e+=d.length+1;var b=c.indexOf(";",e);if(b==-1){b=c.length}return unescape(c.substring(e,b))}return null}function hiddenDocumentFieldIncludeIframe(){jQuery("iframe").each(function(){try{if(jQuery(this).attr("src").indexOf("newword")>-1||jQuery(this).attr("src").indexOf("baidumap")>-1){jQuery(this).css("visibility","hidden")}}catch(b){return}})}function showDocumentFieldIncludeIframe(){jQuery("iframe").each(function(){if(jQuery(this).attr("src")!=undefined&&jQuery(this).attr("src")!="undefined"){if(jQuery(this).attr("src").indexOf("newword")>-1||jQuery(this).attr("src").indexOf("baidumap")>-1){jQuery(this).css("visibility","visible")}}})}function getBrowser(){var f=navigator.userAgent.toLowerCase();var c=/(msie\s|trident.*rv:)(\d+)\.0/,e=/(firefox)\/([\w.]+)/,b=/(chrome)\/([\w.]+)/,g=/version\/([\w.]+).*(safari)/;var d=c.exec(f);if(d!=null){return"ie"+d[2]}var d=e.exec(f);if(d!=null){return"firefox"}var d=b.exec(f);if(d!=null){return"chrome"}var d=g.exec(f);if(d!=null){return"safari"}if(d==null){return""}}function URLDecode(b){if(!b){return""}b=b.replace(/&gt;/g,">");b=b.replace(/&lt;/g,"<");b=b.replace(/&amp;/g,"&");return b}var listAction="";var actionMode="<ww:property value=\"params.getParameterAsString('actionMode')\"/>";window.onload=function(){if(document.forms[0]){var b=document.forms[0].action;b=b.substring(b.indexOf(contextPath));if(b==contextPath+"/core/user/treelist.action"){try{var l=window.parent.document.getElementById("selectnode").value;var c=window.parent.document.getElementById("name").value;var f=window.parent.document.getElementById("loginno").value;var g=window.parent.document.getElementById("roleid").value;var h="?departid="+l+"&sm_userRoleSets.roleId="+g;if(orderBy!=null&&orderBy!=""){var d=document.getElementsByName("_orderby")[0];if(d&&d.value==orderBy){}else{h=h+"&_orderby=orderByNo&&_orderby=id"}}listAction=document.forms[0].action+h}catch(q){}}else{if(b==contextPath+"/core/department/departmentlist.action"){try{var r=window.parent.document.getElementById("selectnode").value;var m=window.parent.document.getElementById("departname").value;listAction=document.forms[0].action+"?sm_superior.id=&sm_name="+m}catch(q){}}else{if(b==contextPath+"/core/domain/list.action"){try{var p=document.getElementById("usersId").value;listAction=document.forms[0].action+"?t_users.id="+p}catch(q){}}else{if(b==contextPath+"/portal/dynaform/work/workList.action"){listAction=document.forms[0].action+"?actionMode="+actionMode}else{listAction=document.forms[0].action}}}}}};function selectAll(d,f){var g=document.getElementsByName("_selects");if(g==null){return}if(g.length!=null){for(var e=0;e<g.length;++e){g[e].checked=d&&!(g[e].disabled)}}else{g.checked=d}}function selectAllByField(d,g){var f=document.getElementsByName(g);if(f==null){return}if(f.length!=null){for(var e=0;e<f.length;++e){f[e].checked=d&&!(f[e].disabled)}}else{f.checked=d}}function showFirstPage(c){if(c==null){c=document.forms}if(isNaN(parseInt(c[0]._currpage.value))||isNaN(parseInt(c[0]._pagelines.value))||isNaN(parseInt(c[0]._rowcount.value))){return}var b=Math.ceil(parseInt(c[0]._rowcount.value)/parseInt(c[0]._pagelines.value));if(b>1){if(listAction){c[0].action=listAction}c[0]._currpage.value=1;c[0].submit()}}function showPreviousPage(c){if(c==null){c=document.forms}if(isNaN(parseInt(c[0]._currpage.value))||isNaN(parseInt(c[0]._pagelines.value))||isNaN(parseInt(c[0]._rowcount.value))){return}var b=parseInt(c[0]._currpage.value);if(b>1){if(listAction){c[0].action=listAction}c[0]._currpage.value=b-1;c[0].submit()}}function showNextPage(d){if(d==null){d=document.forms}if(isNaN(parseInt(d[0]._currpage.value))||isNaN(parseInt(d[0]._pagelines.value))||isNaN(parseInt(d[0]._rowcount.value))){return}var b=parseInt(d[0]._currpage.value);var c=Math.ceil(parseInt(d[0]._rowcount.value)/parseInt(d[0]._pagelines.value));if(c>1&&c>b){if(listAction){d[0].action=listAction}d[0]._currpage.value=b+1;d[0].submit()}}function showLastPage(c){if(c==null){c=document.forms}if(isNaN(parseInt(c[0]._currpage.value))||isNaN(parseInt(c[0]._pagelines.value))||isNaN(parseInt(c[0]._rowcount.value))){return}var b=Math.ceil(parseInt(c[0]._rowcount.value)/parseInt(c[0]._pagelines.value));if(b>0){if(listAction){c[0].action=listAction}c[0]._currpage.value=b;c[0].submit()}}function jumpPage(){if(isNaN(parseInt(document.forms[0]._currpage.value))||isNaN(parseInt(document.forms[0]._pagelines.value))||isNaN(parseInt(document.forms[0]._jumppage.value))||isNaN(parseInt(document.forms[0]._rowcount.value))){return}var b=parseInt(document.forms[0]._jumppage.value);var d=parseInt(document.forms[0]._pageCount.value);var c=Math.ceil(parseInt(document.forms[0]._rowcount.value)/parseInt(document.forms[0]._pagelines.value));if(b>d||b<=0||isNaN(b)){alert(" 输入参数有误!");return}if(c>1&&c>=b){if(listAction){document.forms[0].action=listAction}document.forms[0]._currpage.value=b;document.forms[0].submit()}}function enterJump(){jQuery("input[name='_jumppage']").keydown(function(){if(event.keyCode==13){jumpPage();return false}})}function showCirculatorFirstPage(b){listAction=contextPath+"/portal/workflow/storage/runtime/workList.action?actionMode=circulator";showFirstPage(b)}function showCirculatorPreviousPage(b){listAction=contextPath+"/portal/workflow/storage/runtime/workList.action?actionMode=circulator";showPreviousPage(b)}function showCirculatorNextPage(b){listAction=contextPath+"/portal/workflow/storage/runtime/workList.action?actionMode=circulator";showNextPage(b)}function showCirculatorLastPage(b){listAction=contextPath+"/portal/workflow/storage/runtime/workList.action?actionMode=circulator";showLastPage(b)}function jumpPageCirculator(){listAction=contextPath+"/portal/workflow/storage/runtime/workList.action?actionMode=circulator";jumpPage()}function resetPage(b){if(b==null){b=document.formList}b[0]._currpage.value="1"}function resetForm(b){if(b==null){b=document.formList}b[0]._orderby.value="";b[0]._desc.value="";b[0]._currpage.value="1"}function resetAll(){var d=document.forms[0].elements;for(var c=0;c<d.length;c++){var b=d[c].name;if((b.indexOf("sm_")>-1)||(b.indexOf("d_")>-1)||(b.indexOf("s_")>-1)){d[c].value=""}}}function resetQuery(c){var b;if(c){b=document.getElementsByName(c)[0]}else{b=document.getElementsByName("sm_name")[0]}b.value=""}function isSelectedOne(d,f){var g=document.getElementsByName(d);var b=false;if(g&&g.length>0){for(var e=0;e<g.length;e++){if(g[e].checked){b=true;break}}}if(!b){alert(f);return false}return true}function cssListTable(){jQuery("#contentTable tr").css("background-color","white");jQuery("#contentTable tr:even").css("background-color","#EEF0F2");jQuery("#contentTable tr").mouseover(function(){jQuery(this).addClass("mouseontr")}).mouseout(function(){jQuery(this).removeClass("mouseontr")})}if(!String.prototype.localeCompare){String.prototype.localeCompare=function(b){if(this<b){return -1}else{if(this>b){return 1}else{return 0}}}}function objectEval(text){return eval("("+text+")")}function testEquals(h,f,d){if(d>10){return true}if(f==null){if(h!=null){return"expected: null, actual non-null: "+dwr.util.toDescriptiveString(h)}return true}if(h==null){if(f!=null){return"actual: null, expected non-null: "+dwr.util.toDescriptiveString(f)}return true}if(typeof f=="object"){if(!(typeof h=="object")){return"expected object, actual not an object"}var g=0;for(var b in h){if(typeof h[b]!="function"||typeof f[b]!="function"){var c=testEquals(h[b],f[b],d+1);if(typeof c!="boolean"||!c){return"element '"+b+"' does not match: "+c}}g++}var l=0;for(b in f){l++}if(g!=l){return"expected object size = "+l+", actual object size = "+g}return true}if(h!=f){return"expected = "+f+" (type="+typeof f+"), actual = "+h+" (type="+typeof h+")"}if(f instanceof Array){if(!(h instanceof Array)){return"expected array, actual not an array"}if(h.length!=f.length){return"expected array length = "+f.length+", actual array length = "+h.length}for(var e=0;e<h.length;e++){var m=testEquals(h[e],f[e],d+1);if(typeof m!="boolean"||!m){return"element "+e+" does not match: "+m}}return true}return true}jQuery.fn.pagination=function(b,c){c=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:true,next_show_always:true,callback:function(){return false}},c||{});return this.each(function(){function g(){return Math.ceil(b/c.items_per_page)}function l(){var q=Math.ceil(c.num_display_entries/2);var r=g();var p=r-c.num_display_entries;var s=h>q?Math.max(Math.min(h-q,p),0):0;var m=h>q?Math.min(h+q,r):Math.min(c.num_display_entries,r);return[s,m]}function f(p,m){h=p;d();var q=c.callback(p,e);if(!q){if(m.stopPropagation){m.stopPropagation()}else{m.cancelBubble=true}}return q}function d(){e.empty();var p=l();var t=g();var u=function(v){return function(w){return f(v,w)}};var s=function(v,w){v=v<0?0:(v<t?v:t-1);w=jQuery.extend({text:v+1,classes:""},w||{});if(v==h){var x=jQuery("<span class='current'>"+(w.text)+"</span>")}else{var x=jQuery("<a>"+(w.text)+"</a>").bind("click",u(v)).attr("href",c.link_to.replace(/__id__/,v))}if(w.classes){x.addClass(w.classes)}e.append(x)};if(c.prev_text&&(h>0||c.prev_show_always)){s(h-1,{text:c.prev_text,classes:"prev"})}if(p[0]>0&&c.num_edge_entries>0){var m=Math.min(c.num_edge_entries,p[0]);for(var q=0;q<m;q++){s(q)}if(c.num_edge_entries<p[0]&&c.ellipse_text){jQuery("<span>"+c.ellipse_text+"</span>").appendTo(e)}}for(var q=p[0];q<p[1];q++){s(q)}if(p[1]<t&&c.num_edge_entries>0){if(t-c.num_edge_entries>p[1]&&c.ellipse_text){jQuery("<span>"+c.ellipse_text+"</span>").appendTo(e)}var r=Math.max(t-c.num_edge_entries,p[1]);for(var q=r;q<t;q++){s(q)}}if(c.next_text&&(h<t-1||c.next_show_always)){s(h+1,{text:c.next_text,classes:"next"})}}var h=c.current_page;b=(!b||b<0)?1:b;c.items_per_page=(!c.items_per_page||c.items_per_page<0)?1:c.items_per_page;var e=jQuery(this);this.selectPage=function(m){f(m)};this.prevPage=function(){if(h>0){f(h-1);return true}else{return false}};this.nextPage=function(){if(h<g()-1){f(h+1);return true}else{return false}};d();c.callback(h,this)})};
/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
;if("undefined"==typeof jQuery){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(d){var c=d.fn.jquery.split(" ")[0].split(".");if(c[0]<2&&c[1]<9||1==c[0]&&9==c[1]&&c[2]<1){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}}(jQuery),+function(d){function c(){var f=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var g in e){if(void 0!==f.style[g]){return{end:e[g]}}}return !1}d.fn.emulateTransitionEnd=function(f){var l=!1,h=this;d(this).one("bsTransitionEnd",function(){l=!0});var g=function(){l||d(h).trigger(d.support.transition.end)};return setTimeout(g,f),this},d(function(){d.support.transition=c(),d.support.transition&&(d.event.special.bsTransitionEnd={bindType:d.support.transition.end,delegateType:d.support.transition.end,handle:function(e){return d(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(g){function f(c){return this.each(function(){var d=g(this),b=d.data("bs.alert");b||d.data("bs.alert",b=new l(this)),"string"==typeof c&&b[c].call(d)})}var m='[data-dismiss="alert"]',l=function(c){g(c).on("click",m,this.close)};l.VERSION="3.3.4",l.TRANSITION_DURATION=150,l.prototype.close=function(d){function s(){p.detach().trigger("closed.bs.alert").remove()}var r=g(this),q=r.attr("data-target");q||(q=r.attr("href"),q=q&&q.replace(/.*(?=#[^\s]*$)/,""));var p=g(q);d&&d.preventDefault(),p.length||(p=r.closest(".alert")),p.trigger(d=g.Event("close.bs.alert")),d.isDefaultPrevented()||(p.removeClass("in"),g.support.transition&&p.hasClass("fade")?p.one("bsTransitionEnd",s).emulateTransitionEnd(l.TRANSITION_DURATION):s())};var h=g.fn.alert;g.fn.alert=f,g.fn.alert.Constructor=l,g.fn.alert.noConflict=function(){return g.fn.alert=h,this},g(document).on("click.bs.alert.data-api",m,l.prototype.close)}(jQuery),+function(f){function e(c){return this.each(function(){var m=f(this),l=m.data("bs.button"),b="object"==typeof c&&c;l||m.data("bs.button",l=new h(this,b)),"toggle"==c?l.toggle():c&&l.setState(c)})}var h=function(c,l){this.$element=f(c),this.options=f.extend({},h.DEFAULTS,l),this.isLoading=!1};h.VERSION="3.3.4",h.DEFAULTS={loadingText:"loading..."},h.prototype.setState=function(l){var r="disabled",q=this.$element,p=q.is("input")?"val":"html",m=q.data();l+="Text",null==m.resetText&&q.data("resetText",q[p]()),setTimeout(f.proxy(function(){q[p](null==m[l]?this.options[l]:m[l]),"loadingText"==l?(this.isLoading=!0,q.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,q.removeClass(r).removeAttr(r))},this),0)},h.prototype.toggle=function(){var l=!0,d=this.$element.closest('[data-toggle="buttons"]');if(d.length){var m=this.$element.find("input");"radio"==m.prop("type")&&(m.prop("checked")&&this.$element.hasClass("active")?l=!1:d.find(".active").removeClass("active")),l&&m.prop("checked",!this.$element.hasClass("active")).trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"))}l&&this.$element.toggleClass("active")};var g=f.fn.button;f.fn.button=e,f.fn.button.Constructor=h,f.fn.button.noConflict=function(){return f.fn.button=g,this},f(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(l){var b=f(l.target);b.hasClass("btn")||(b=b.closest(".btn")),e.call(b,"toggle"),l.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(c){f(c.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(c.type))})}(jQuery),+function(g){function f(c){return this.each(function(){var r=g(this),q=r.data("bs.carousel"),p=g.extend({},m.DEFAULTS,r.data(),"object"==typeof c&&c),b="string"==typeof c?c:p.slide;q||r.data("bs.carousel",q=new m(this,p)),"number"==typeof c?q.to(c):b?q[b]():p.interval&&q.pause().cycle()})}var m=function(d,e){this.$element=g(d),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",g.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart" in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",g.proxy(this.pause,this)).on("mouseleave.bs.carousel",g.proxy(this.cycle,this))};m.VERSION="3.3.4",m.TRANSITION_DURATION=600,m.DEFAULTS={interval:5000,pause:"hover",wrap:!0,keyboard:!0},m.prototype.keydown=function(b){if(!/input|textarea/i.test(b.target.tagName)){switch(b.which){case 37:this.prev();break;case 39:this.next();break;default:return}b.preventDefault()}},m.prototype.cycle=function(c){return c||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(g.proxy(this.next,this),this.options.interval)),this},m.prototype.getItemIndex=function(b){return this.$items=b.parent().children(".item"),this.$items.index(b||this.$active)},m.prototype.getItemForDirection=function(q,p){var u=this.getItemIndex(p),t="prev"==q&&0===u||"next"==q&&u==this.$items.length-1;if(t&&!this.options.wrap){return p}var s="prev"==q?-1:1,r=(u+s)%this.$items.length;return this.$items.eq(r)},m.prototype.to=function(e){var d=this,p=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){d.to(e)}):p==e?this.pause().cycle():this.slide(e>p?"next":"prev",this.$items.eq(e))},m.prototype.pause=function(c){return c||(this.paused=!0),this.$element.find(".next, .prev").length&&g.support.transition&&(this.$element.trigger(g.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},m.prototype.next=function(){return this.sliding?void 0:this.slide("next")},m.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},m.prototype.slide=function(y,x){var w=this.$element.find(".item.active"),v=x||this.getItemForDirection(y,w),u=this.interval,t="next"==y?"left":"right",s=this;if(v.hasClass("active")){return this.sliding=!1}var r=v[0],q=g.Event("slide.bs.carousel",{relatedTarget:r,direction:t});if(this.$element.trigger(q),!q.isDefaultPrevented()){if(this.sliding=!0,u&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=g(this.$indicators.children()[this.getItemIndex(v)]);p&&p.addClass("active")}var c=g.Event("slid.bs.carousel",{relatedTarget:r,direction:t});return g.support.transition&&this.$element.hasClass("slide")?(v.addClass(y),v[0].offsetWidth,w.addClass(t),v.addClass(t),w.one("bsTransitionEnd",function(){v.removeClass([y,t].join(" ")).addClass("active"),w.removeClass(["active",t].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(c)},0)}).emulateTransitionEnd(m.TRANSITION_DURATION)):(w.removeClass("active"),v.addClass("active"),this.sliding=!1,this.$element.trigger(c)),u&&this.cycle(),this}};var l=g.fn.carousel;g.fn.carousel=f,g.fn.carousel.Constructor=m,g.fn.carousel.noConflict=function(){return g.fn.carousel=l,this};var h=function(t){var s,r=g(this),q=g(r.attr("data-target")||(s=r.attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,""));if(q.hasClass("carousel")){var p=g.extend({},q.data(),r.data()),b=r.attr("data-slide-to");b&&(p.interval=!1),f.call(q,p),b&&q.data("bs.carousel").to(b),t.preventDefault()}};g(document).on("click.bs.carousel.data-api","[data-slide]",h).on("click.bs.carousel.data-api","[data-slide-to]",h),g(window).on("load",function(){g('[data-ride="carousel"]').each(function(){var b=g(this);f.call(b,b.data())})})}(jQuery),+function(g){function f(e){var q,p=e.attr("data-target")||(q=e.attr("href"))&&q.replace(/.*(?=#[^\s]+$)/,"");return g(p)}function m(c){return this.each(function(){var p=g(this),d=p.data("bs.collapse"),b=g.extend({},l.DEFAULTS,p.data(),"object"==typeof c&&c);!d&&b.toggle&&/show|hide/.test(c)&&(b.toggle=!1),d||p.data("bs.collapse",d=new l(this,b)),"string"==typeof c&&d[c]()})}var l=function(d,e){this.$element=g(d),this.options=g.extend({},l.DEFAULTS,e),this.$trigger=g('[data-toggle="collapse"][href="#'+d.id+'"],[data-toggle="collapse"][data-target="#'+d.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};l.VERSION="3.3.4",l.TRANSITION_DURATION=350,l.DEFAULTS={toggle:!0},l.prototype.dimension=function(){var b=this.$element.hasClass("width");return b?"width":"height"},l.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(c=s.data("bs.collapse"),c&&c.transitioning))){var r=g.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){s&&s.length&&(m.call(s,"hide"),c||s.data("bs.collapse",null));var q=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[q](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var p=function(){this.$element.removeClass("collapsing").addClass("collapse in")[q](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!g.support.transition){return p.call(this)}var d=g.camelCase(["scroll",q].join("-"));this.$element.one("bsTransitionEnd",g.proxy(p,this)).emulateTransitionEnd(l.TRANSITION_DURATION)[q](this.$element[0][d])}}}},l.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var d=g.Event("hide.bs.collapse");if(this.$element.trigger(d),!d.isDefaultPrevented()){var q=this.dimension();this.$element[q](this.$element[q]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var p=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return g.support.transition?void this.$element[q](0).one("bsTransitionEnd",g.proxy(p,this)).emulateTransitionEnd(l.TRANSITION_DURATION):p.call(this)}}},l.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},l.prototype.getParent=function(){return g(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(g.proxy(function(q,p){var b=g(p);this.addAriaAndCollapsedClass(f(b),b)},this)).end()},l.prototype.addAriaAndCollapsedClass=function(e,d){var p=e.hasClass("in");e.attr("aria-expanded",p),d.toggleClass("collapsed",!p).attr("aria-expanded",p)};var h=g.fn.collapse;g.fn.collapse=m,g.fn.collapse.Constructor=l,g.fn.collapse.noConflict=function(){return g.fn.collapse=h,this},g(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var q=g(this);q.attr("data-target")||r.preventDefault();var p=f(q),c=p.data("bs.collapse"),b=c?"toggle":q.data();m.call(p,b)})}(jQuery),+function(m){function l(c){c&&3===c.which||(m(s).remove(),m(r).each(function(){var h=m(this),g=u(h),b={relatedTarget:this};g.hasClass("open")&&(g.trigger(c=m.Event("hide.bs.dropdown",b)),c.isDefaultPrevented()||(h.attr("aria-expanded","false"),g.removeClass("open").trigger("hidden.bs.dropdown",b)))}))}function u(e){var g=e.attr("data-target");g||(g=e.attr("href"),g=g&&/#[A-Za-z]/.test(g)&&g.replace(/.*(?=#[^\s]*$)/,""));var f=g&&m(g);return f&&f.length?f:e.parent()}function t(c){return this.each(function(){var e=m(this),b=e.data("bs.dropdown");b||e.data("bs.dropdown",b=new q(this)),"string"==typeof c&&b[c].call(e)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',q=function(c){m(c).on("click.bs.dropdown",this.toggle)};q.VERSION="3.3.4",q.prototype.toggle=function(x){var w=m(this);if(!w.is(".disabled, :disabled")){var v=u(w),c=v.hasClass("open");if(l(),!c){"ontouchstart" in document.documentElement&&!v.closest(".navbar-nav").length&&m('<div class="dropdown-backdrop"/>').insertAfter(m(this)).on("click",l);var b={relatedTarget:this};if(v.trigger(x=m.Event("show.bs.dropdown",b)),x.isDefaultPrevented()){return}w.trigger("focus").attr("aria-expanded","true"),v.toggleClass("open").trigger("shown.bs.dropdown",b)}return !1}},q.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var z=m(this);if(c.preventDefault(),c.stopPropagation(),!z.is(".disabled, :disabled")){var y=u(z),x=y.hasClass("open");if(!x&&27!=c.which||x&&27==c.which){return 27==c.which&&y.find(r).trigger("focus"),z.trigger("click")}var w=" li:not(.disabled):visible a",v=y.find('[role="menu"]'+w+', [role="listbox"]'+w);if(v.length){var f=v.index(c.target);38==c.which&&f>0&&f--,40==c.which&&f<v.length-1&&f++,~f||(f=0),v.eq(f).trigger("focus")}}}};var p=m.fn.dropdown;m.fn.dropdown=t,m.fn.dropdown.Constructor=q,m.fn.dropdown.noConflict=function(){return m.fn.dropdown=p,this},m(document).on("click.bs.dropdown.data-api",l).on("click.bs.dropdown.data-api",".dropdown form",function(b){b.stopPropagation()}).on("click.bs.dropdown.data-api",r,q.prototype.toggle).on("keydown.bs.dropdown.data-api",r,q.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',q.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',q.prototype.keydown)}(jQuery),+function(f){function e(c,l){return this.each(function(){var m=f(this),d=m.data("bs.modal"),b=f.extend({},h.DEFAULTS,m.data(),"object"==typeof c&&c);d||m.data("bs.modal",d=new h(this,b)),"string"==typeof c?d[c](l):b.show&&d.show(l)})}var h=function(d,l){this.options=l,this.$body=f(document.body),this.$element=f(d),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,f.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};h.VERSION="3.3.4",h.TRANSITION_DURATION=300,h.BACKDROP_TRANSITION_DURATION=150,h.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},h.prototype.toggle=function(b){return this.isShown?this.hide():this.show(b)},h.prototype.show=function(c){var m=this,l=f.Event("show.bs.modal",{relatedTarget:c});this.$element.trigger(l),this.isShown||l.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',f.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){m.$element.one("mouseup.dismiss.bs.modal",function(d){f(d.target).is(m.$element)&&(m.ignoreBackdropClick=!0)})}),this.backdrop(function(){var d=f.support.transition&&m.$element.hasClass("fade");m.$element.parent().length||m.$element.appendTo(m.$body),m.$element.show().scrollTop(0),m.adjustDialog(),d&&m.$element[0].offsetWidth,m.$element.addClass("in").attr("aria-hidden",!1),m.enforceFocus();var b=f.Event("shown.bs.modal",{relatedTarget:c});d?m.$dialog.one("bsTransitionEnd",function(){m.$element.trigger("focus").trigger(b)}).emulateTransitionEnd(h.TRANSITION_DURATION):m.$element.trigger("focus").trigger(b)}))},h.prototype.hide=function(c){c&&c.preventDefault(),c=f.Event("hide.bs.modal"),this.$element.trigger(c),this.isShown&&!c.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),f(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),f.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",f.proxy(this.hideModal,this)).emulateTransitionEnd(h.TRANSITION_DURATION):this.hideModal())},h.prototype.enforceFocus=function(){f(document).off("focusin.bs.modal").on("focusin.bs.modal",f.proxy(function(b){this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.trigger("focus")},this))},h.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",f.proxy(function(b){27==b.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},h.prototype.resize=function(){this.isShown?f(window).on("resize.bs.modal",f.proxy(this.handleUpdate,this)):f(window).off("resize.bs.modal")},h.prototype.hideModal=function(){var b=this;this.$element.hide(),this.backdrop(function(){b.$body.removeClass("modal-open"),b.resetAdjustments(),b.resetScrollbar(),b.$element.trigger("hidden.bs.modal")})},h.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},h.prototype.backdrop=function(c){var q=this,p=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var m=f.support.transition&&p;if(this.$backdrop=f('<div class="modal-backdrop '+p+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",f.proxy(function(b){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (b.target===b.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),m&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!c){return}m?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(h.BACKDROP_TRANSITION_DURATION):c()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var l=function(){q.removeBackdrop(),c&&c()};f.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",l).emulateTransitionEnd(h.BACKDROP_TRANSITION_DURATION):l()}else{c&&c()}}},h.prototype.handleUpdate=function(){this.adjustDialog()},h.prototype.adjustDialog=function(){var b=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&b?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!b?this.scrollbarWidth:""})},h.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},h.prototype.checkScrollbar=function(){var d=window.innerWidth;if(!d){var c=document.documentElement.getBoundingClientRect();d=c.right-Math.abs(c.left)}this.bodyIsOverflowing=document.body.clientWidth<d,this.scrollbarWidth=this.measureScrollbar()},h.prototype.setScrollbar=function(){var b=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",b+this.scrollbarWidth)},h.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},h.prototype.measureScrollbar=function(){var d=document.createElement("div");d.className="modal-scrollbar-measure",this.$body.append(d);var c=d.offsetWidth-d.clientWidth;return this.$body[0].removeChild(d),c};var g=f.fn.modal;f.fn.modal=e,f.fn.modal.Constructor=h,f.fn.modal.noConflict=function(){return f.fn.modal=g,this},f(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(q){var p=f(this),m=p.attr("href"),l=f(p.attr("data-target")||m&&m.replace(/.*(?=#[^\s]+$)/,"")),b=l.data("bs.modal")?"toggle":f.extend({remote:!/#/.test(m)&&m},l.data(),p.data());p.is("a")&&q.preventDefault(),l.one("show.bs.modal",function(c){c.isDefaultPrevented()||l.one("hidden.bs.modal",function(){p.is(":visible")&&p.trigger("focus")})}),e.call(l,b,this)})}(jQuery),+function(f){function e(c){return this.each(function(){var m=f(this),l=m.data("bs.tooltip"),b="object"==typeof c&&c;(l||!/destroy|hide/.test(c))&&(l||m.data("bs.tooltip",l=new h(this,b)),"string"==typeof c&&l[c]())})}var h=function(d,c){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",d,c)};h.VERSION="3.3.4",h.TRANSITION_DURATION=150,h.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},h.prototype.init=function(l,u,t){if(this.enabled=!0,this.type=l,this.$element=f(u),this.options=this.getOptions(t),this.$viewport=this.options.viewport&&f(this.options.viewport.selector||this.options.viewport),this.$element[0] instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}for(var s=this.options.trigger.split(" "),r=s.length;r--;){var q=s[r];if("click"==q){this.$element.on("click."+this.type,this.options.selector,f.proxy(this.toggle,this))}else{if("manual"!=q){var p="hover"==q?"mouseenter":"focusin",m="hover"==q?"mouseleave":"focusout";this.$element.on(p+"."+this.type,this.options.selector,f.proxy(this.enter,this)),this.$element.on(m+"."+this.type,this.options.selector,f.proxy(this.leave,this))}}}this.options.selector?this._options=f.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},h.prototype.getDefaults=function(){return h.DEFAULTS},h.prototype.getOptions=function(c){return c=f.extend({},this.getDefaults(),this.$element.data(),c),c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay}),c},h.prototype.getDelegateOptions=function(){var d={},l=this.getDefaults();return this._options&&f.each(this._options,function(b,c){l[b]!=c&&(d[b]=c)}),d},h.prototype.enter=function(d){var l=d instanceof this.constructor?d:f(d.currentTarget).data("bs."+this.type);return l&&l.$tip&&l.$tip.is(":visible")?void (l.hoverState="in"):(l||(l=new this.constructor(d.currentTarget,this.getDelegateOptions()),f(d.currentTarget).data("bs."+this.type,l)),clearTimeout(l.timeout),l.hoverState="in",l.options.delay&&l.options.delay.show?void (l.timeout=setTimeout(function(){"in"==l.hoverState&&l.show()},l.options.delay.show)):l.show())},h.prototype.leave=function(d){var l=d instanceof this.constructor?d:f(d.currentTarget).data("bs."+this.type);return l||(l=new this.constructor(d.currentTarget,this.getDelegateOptions()),f(d.currentTarget).data("bs."+this.type,l)),clearTimeout(l.timeout),l.hoverState="out",l.options.delay&&l.options.delay.hide?void (l.timeout=setTimeout(function(){"out"==l.hoverState&&l.hide()},l.options.delay.hide)):l.hide()},h.prototype.show=function(){var G=f.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(G);var F=f.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(G.isDefaultPrevented()||!F){return}var E=this,D=this.tip(),C=this.getUID(this.type);this.setContent(),D.attr("id",C),this.$element.attr("aria-describedby",C),this.options.animation&&D.addClass("fade");var B="function"==typeof this.options.placement?this.options.placement.call(this,D[0],this.$element[0]):this.options.placement,A=/\s?auto?\s?/i,z=A.test(B);z&&(B=B.replace(A,"")||"top"),D.detach().css({top:0,left:0,display:"block"}).addClass(B).data("bs."+this.type,this),this.options.container?D.appendTo(this.options.container):D.insertAfter(this.$element);var y=this.getPosition(),x=D[0].offsetWidth,w=D[0].offsetHeight;if(z){var v=B,u=this.options.container?f(this.options.container):this.$element.parent(),t=this.getPosition(u);B="bottom"==B&&y.bottom+w>t.bottom?"top":"top"==B&&y.top-w<t.top?"bottom":"right"==B&&y.right+x>t.width?"left":"left"==B&&y.left-x<t.left?"right":B,D.removeClass(v).addClass(B)}var s=this.getCalculatedOffset(B,y,x,w);this.applyPlacement(s,B);var c=function(){var b=E.hoverState;E.$element.trigger("shown.bs."+E.type),E.hoverState=null,"out"==b&&E.leave(E)};f.support.transition&&this.$tip.hasClass("fade")?D.one("bsTransitionEnd",c).emulateTransitionEnd(h.TRANSITION_DURATION):c()}},h.prototype.applyPlacement=function(B,A){var z=this.tip(),y=z[0].offsetWidth,x=z[0].offsetHeight,w=parseInt(z.css("margin-top"),10),v=parseInt(z.css("margin-left"),10);isNaN(w)&&(w=0),isNaN(v)&&(v=0),B.top=B.top+w,B.left=B.left+v,f.offset.setOffset(z[0],f.extend({using:function(b){z.css({top:Math.round(b.top),left:Math.round(b.left)})}},B),0),z.addClass("in");var u=z[0].offsetWidth,t=z[0].offsetHeight;"top"==A&&t!=x&&(B.top=B.top+x-t);var s=this.getViewportAdjustedDelta(A,B,u,t);s.left?B.left+=s.left:B.top+=s.top;var r=/top|bottom/.test(A),q=r?2*s.left-y+u:2*s.top-x+t,p=r?"offsetWidth":"offsetHeight";z.offset(B),this.replaceArrow(q,z[0][p],r)},h.prototype.replaceArrow=function(l,d,m){this.arrow().css(m?"left":"top",50*(1-l/d)+"%").css(m?"top":"left","")},h.prototype.setContent=function(){var d=this.tip(),c=this.getTitle();d.find(".tooltip-inner")[this.options.html?"html":"text"](c),d.removeClass("fade in top bottom left right")},h.prototype.hide=function(c){function q(){"in"!=p.hoverState&&m.detach(),p.$element.removeAttr("aria-describedby").trigger("hidden.bs."+p.type),c&&c()}var p=this,m=f(this.$tip),l=f.Event("hide.bs."+this.type);return this.$element.trigger(l),l.isDefaultPrevented()?void 0:(m.removeClass("in"),f.support.transition&&m.hasClass("fade")?m.one("bsTransitionEnd",q).emulateTransitionEnd(h.TRANSITION_DURATION):q(),this.hoverState=null,this)},h.prototype.fixTitle=function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").attr("title","")},h.prototype.hasContent=function(){return this.getTitle()},h.prototype.getPosition=function(l){l=l||this.$element;var t=l[0],s="BODY"==t.tagName,r=t.getBoundingClientRect();null==r.width&&(r=f.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var q=s?{top:0,left:0}:l.offset(),p={scroll:s?document.documentElement.scrollTop||document.body.scrollTop:l.scrollTop()},m=s?{width:f(window).width(),height:f(window).height()}:null;return f.extend({},r,p,m,q)},h.prototype.getCalculatedOffset=function(m,l,q,p){return"bottom"==m?{top:l.top+l.height,left:l.left+l.width/2-q/2}:"top"==m?{top:l.top-p,left:l.left+l.width/2-q/2}:"left"==m?{top:l.top+l.height/2-p/2,left:l.left-q}:{top:l.top+l.height/2-p/2,left:l.left+l.width}},h.prototype.getViewportAdjustedDelta=function(x,w,v,u){var t={top:0,left:0};if(!this.$viewport){return t}var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(x)){var q=w.top-s-r.scroll,p=w.top+s-r.scroll+u;q<r.top?t.top=r.top-q:p>r.top+r.height&&(t.top=r.top+r.height-p)}else{var m=w.left-s,l=w.left+s+v;m<r.left?t.left=r.left-m:l>r.width&&(t.left=r.left+r.width-l)}return t},h.prototype.getTitle=function(){var l,d=this.$element,m=this.options;return l=d.attr("data-original-title")||("function"==typeof m.title?m.title.call(d[0]):m.title)},h.prototype.getUID=function(b){do{b+=~~(1000000*Math.random())}while(document.getElementById(b));return b},h.prototype.tip=function(){return this.$tip=this.$tip||f(this.options.template)},h.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},h.prototype.enable=function(){this.enabled=!0},h.prototype.disable=function(){this.enabled=!1},h.prototype.toggleEnabled=function(){this.enabled=!this.enabled},h.prototype.toggle=function(d){var l=this;d&&(l=f(d.currentTarget).data("bs."+this.type),l||(l=new this.constructor(d.currentTarget,this.getDelegateOptions()),f(d.currentTarget).data("bs."+this.type,l))),l.tip().hasClass("in")?l.leave(l):l.enter(l)},h.prototype.destroy=function(){var b=this;clearTimeout(this.timeout),this.hide(function(){b.$element.off("."+b.type).removeData("bs."+b.type)})};var g=f.fn.tooltip;f.fn.tooltip=e,f.fn.tooltip.Constructor=h,f.fn.tooltip.noConflict=function(){return f.fn.tooltip=g,this}}(jQuery),+function(f){function e(c){return this.each(function(){var m=f(this),l=m.data("bs.popover"),b="object"==typeof c&&c;(l||!/destroy|hide/.test(c))&&(l||m.data("bs.popover",l=new h(this,b)),"string"==typeof c&&l[c]())})}var h=function(d,c){this.init("popover",d,c)};if(!f.fn.tooltip){throw new Error("Popover requires tooltip.js")}h.VERSION="3.3.4",h.DEFAULTS=f.extend({},f.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),h.prototype=f.extend({},f.fn.tooltip.Constructor.prototype),h.prototype.constructor=h,h.prototype.getDefaults=function(){return h.DEFAULTS},h.prototype.setContent=function(){var l=this.tip(),d=this.getTitle(),m=this.getContent();l.find(".popover-title")[this.options.html?"html":"text"](d),l.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof m?"html":"append":"text"](m),l.removeClass("fade top bottom left right in"),l.find(".popover-title").html()||l.find(".popover-title").hide()},h.prototype.hasContent=function(){return this.getTitle()||this.getContent()},h.prototype.getContent=function(){var d=this.$element,c=this.options;return d.attr("data-content")||("function"==typeof c.content?c.content.call(d[0]):c.content)},h.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var g=f.fn.popover;f.fn.popover=e,f.fn.popover.Constructor=h,f.fn.popover.noConflict=function(){return f.fn.popover=g,this}}(jQuery),+function(f){function e(l,b){this.$body=f(document.body),this.$scrollElement=f(f(l).is(document.body)?window:l),this.options=f.extend({},e.DEFAULTS,b),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",f.proxy(this.process,this)),this.refresh(),this.process()}function h(b){return this.each(function(){var m=f(this),l=m.data("bs.scrollspy"),c="object"==typeof b&&b;l||m.data("bs.scrollspy",l=new e(this,c)),"string"==typeof b&&l[b]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var l=this,p="offset",m=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),f.isWindow(this.$scrollElement[0])||(p="position",m=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var c=f(this),q=c.data("target")||c.attr("href"),d=/^#./.test(q)&&f(q);return d&&d.length&&d.is(":visible")&&[[d[p]().top+m,q]]||null}).sort(function(d,c){return d[0]-c[0]}).each(function(){l.offsets.push(this[0]),l.targets.push(this[1])})},e.prototype.process=function(){var m,l=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),s=this.options.offset+t-this.$scrollElement.height(),r=this.offsets,q=this.targets,p=this.activeTarget;if(this.scrollHeight!=t&&this.refresh(),l>=s){return p!=(m=q[q.length-1])&&this.activate(m)}if(p&&l<r[0]){return this.activeTarget=null,this.clear()}for(m=r.length;m--;){p!=q[m]&&l>=r[m]&&(void 0===r[m+1]||l<r[m+1])&&this.activate(q[m])}},e.prototype.activate=function(l){this.activeTarget=l,this.clear();var p=this.selector+'[data-target="'+l+'"],'+this.selector+'[href="'+l+'"]',m=f(p).parents("li").addClass("active");m.parent(".dropdown-menu").length&&(m=m.closest("li.dropdown").addClass("active")),m.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){f(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var g=f.fn.scrollspy;f.fn.scrollspy=h,f.fn.scrollspy.Constructor=e,f.fn.scrollspy.noConflict=function(){return f.fn.scrollspy=g,this},f(window).on("load.bs.scrollspy.data-api",function(){f('[data-spy="scroll"]').each(function(){var c=f(this);h.call(c,c.data())})})}(jQuery),+function(g){function f(c){return this.each(function(){var p=g(this),b=p.data("bs.tab");b||p.data("bs.tab",b=new m(this)),"string"==typeof c&&b[c]()})}var m=function(c){this.element=g(c)};m.VERSION="3.3.4",m.TRANSITION_DURATION=150,m.prototype.show=function(){var p=this.element,v=p.closest("ul:not(.dropdown-menu)"),u=p.data("target");if(u||(u=p.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,"")),!p.parent("li").hasClass("active")){var t=v.find(".active:last a"),s=g.Event("hide.bs.tab",{relatedTarget:p[0]}),r=g.Event("show.bs.tab",{relatedTarget:t[0]});if(t.trigger(s),p.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var q=g(u);this.activate(p.closest("li"),v),this.activate(q,q.parent(),function(){t.trigger({type:"hidden.bs.tab",relatedTarget:p[0]}),p.trigger({type:"shown.bs.tab",relatedTarget:t[0]})})}}},m.prototype.activate=function(c,t,s){function r(){q.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),c.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),p?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade"),c.parent(".dropdown-menu").length&&c.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var q=t.find("> .active"),p=s&&g.support.transition&&(q.length&&q.hasClass("fade")||!!t.find("> .fade").length);q.length&&p?q.one("bsTransitionEnd",r).emulateTransitionEnd(m.TRANSITION_DURATION):r(),q.removeClass("in")};var l=g.fn.tab;g.fn.tab=f,g.fn.tab.Constructor=m,g.fn.tab.noConflict=function(){return g.fn.tab=l,this};var h=function(b){b.preventDefault(),f.call(g(this),"show")};g(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',h).on("click.bs.tab.data-api",'[data-toggle="pill"]',h)}(jQuery),+function(f){function e(c){return this.each(function(){var m=f(this),l=m.data("bs.affix"),b="object"==typeof c&&c;l||m.data("bs.affix",l=new h(this,b)),"string"==typeof c&&l[c]()})}var h=function(c,l){this.options=f.extend({},h.DEFAULTS,l),this.$target=f(this.options.target).on("scroll.bs.affix.data-api",f.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",f.proxy(this.checkPositionWithEventLoop,this)),this.$element=f(c),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};h.VERSION="3.3.4",h.RESET="affix affix-top affix-bottom",h.DEFAULTS={offset:0,target:window},h.prototype.getState=function(w,v,u,t){var s=this.$target.scrollTop(),r=this.$element.offset(),q=this.$target.height();if(null!=u&&"top"==this.affixed){return u>s?"top":!1}if("bottom"==this.affixed){return null!=u?s+this.unpin<=r.top?!1:"bottom":w-t>=s+q?!1:"bottom"}var p=null==this.affixed,m=p?s:r.top,l=p?q:v;return null!=u&&u>=s?"top":null!=t&&m+l>=w-t?"bottom":!1},h.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset}this.$element.removeClass(h.RESET).addClass("affix");var d=this.$target.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-d},h.prototype.checkPositionWithEventLoop=function(){setTimeout(f.proxy(this.checkPosition,this),1)},h.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=this.$element.height(),t=this.options.offset,s=t.top,r=t.bottom,q=f(document.body).height();"object"!=typeof t&&(r=s=t),"function"==typeof s&&(s=t.top(this.$element)),"function"==typeof r&&(r=t.bottom(this.$element));var p=this.getState(q,c,s,r);if(this.affixed!=p){null!=this.unpin&&this.$element.css("top","");var m="affix"+(p?"-"+p:""),l=f.Event(m+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented()){return}this.affixed=p,this.unpin="bottom"==p?this.getPinnedOffset():null,this.$element.removeClass(h.RESET).addClass(m).trigger(m.replace("affix","affixed")+".bs.affix")}"bottom"==p&&this.$element.offset({top:q-c-r})}};var g=f.fn.affix;f.fn.affix=e,f.fn.affix.Constructor=h,f.fn.affix.noConflict=function(){return f.fn.affix=g,this},f(window).on("load",function(){f('[data-spy="affix"]').each(function(){var l=f(this),b=l.data();b.offset=b.offset||{},null!=b.offsetBottom&&(b.offset.bottom=b.offsetBottom),null!=b.offsetTop&&(b.offset.top=b.offsetTop),e.call(l,b)})})}(jQuery);(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?module.exports=b(require("jquery")):b(jQuery)})(function(T){var L=!1,D=!1,g=0,e=2000,N=0,q=["webkit","ms","moz","o"],C=window.requestAnimationFrame||!1,t=window.cancelAnimationFrame||!1;if(!C){for(var d in q){var u=q[d];if(C=window[u+"RequestAnimationFrame"]){t=window[u+"CancelAnimationFrame"]||window[u+"CancelRequestAnimationFrame"];break}}}var r=window.MutationObserver||window.WebKitMutationObserver||!1,m={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:0.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var v=document.getElementsByTagName("script"),v=v.length?v[v.length-1].src.split("?")[0]:"";return 0<v.split("/").length?v.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0,disablemutationobserver:!1},s=!1,c=function(){if(s){return s}var z=document.createElement("DIV"),B=z.style,w=navigator.userAgent,v=navigator.platform,A={haspointerlock:"pointerLockElement" in document||"webkitPointerLockElement" in document||"mozPointerLockElement" in document};A.isopera="opera" in window;A.isopera12=A.isopera&&"getUserMedia" in navigator;A.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini);A.isie="all" in document&&"attachEvent" in z&&!A.isopera;A.isieold=A.isie&&!("msInterpolationMode" in B);A.isie7=A.isie&&!A.isieold&&(!("documentMode" in document)||7==document.documentMode);A.isie8=A.isie&&"documentMode" in document&&8==document.documentMode;A.isie9=A.isie&&"performance" in window&&9==document.documentMode;A.isie10=A.isie&&"performance" in window&&10==document.documentMode;A.isie11="msRequestFullscreen" in z&&11<=document.documentMode;A.isieedge12=navigator.userAgent.match(/Edge\/12\./);A.isieedge="msOverflowStyle" in z;A.ismodernie=A.isie11||A.isieedge;A.isie9mobile=/iemobile.9/i.test(w);A.isie9mobile&&(A.isie9=!1);A.isie7mobile=!A.isie9mobile&&A.isie7&&/iemobile/i.test(w);A.ismozilla="MozAppearance" in B;A.iswebkit="WebkitAppearance" in B;A.ischrome="chrome" in window;A.ischrome38=A.ischrome&&"touchAction" in B;A.ischrome22=!A.ischrome38&&A.ischrome&&A.haspointerlock;A.ischrome26=!A.ischrome38&&A.ischrome&&"transition" in B;A.cantouch="ontouchstart" in document.documentElement||"ontouchstart" in window;A.hasw3ctouch=(window.PointerEvent||!1)&&(0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints);A.hasmstouch=!A.hasw3ctouch&&(window.MSPointerEvent||!1);A.ismac=/^mac$/i.test(v);A.isios=A.cantouch&&/iphone|ipad|ipod/i.test(v);A.isios4=A.isios&&!("seal" in Object);A.isios7=A.isios&&"webkitHidden" in document;A.isios8=A.isios&&"hidden" in document;A.isandroid=/android/i.test(w);A.haseventlistener="addEventListener" in z;A.trstyle=!1;A.hastransform=!1;A.hastranslate3d=!1;A.transitionstyle=!1;A.hastransition=!1;A.transitionend=!1;v=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(w=0;w<v.length;w++){if(void 0!==B[v[w]]){A.trstyle=v[w];break}}A.hastransform=!!A.trstyle;A.hastransform&&(B[A.trstyle]="translate3d(1px,2px,3px)",A.hastranslate3d=/translate3d/.test(B[A.trstyle]));A.transitionstyle=!1;A.prefixstyle="";A.transitionend=!1;for(var v="transition webkitTransition msTransition MozTransition OTransition OTransition KhtmlTransition".split(" "),y=" -webkit- -ms- -moz- -o- -o -khtml-".split(" "),x="transitionend webkitTransitionEnd msTransitionEnd transitionend otransitionend oTransitionEnd KhtmlTransitionEnd".split(" "),w=0;w<v.length;w++){if(v[w] in B){A.transitionstyle=v[w];A.prefixstyle=y[w];A.transitionend=x[w];break}}A.ischrome26&&(A.prefixstyle=y[1]);A.hastransition=A.transitionstyle;a:{w=["grab","-webkit-grab","-moz-grab"];if(A.ischrome&&!A.ischrome38||A.isie){w=[]}for(v=0;v<w.length;v++){if(y=w[v],B.cursor=y,B.cursor==y){B=y;break a}}B="url(//patriciaportfolio.googlecode.com/files/openhand.cur),n-resize"}A.cursorgrabvalue=B;A.hasmousecapture="setCapture" in z;A.hasMutationObserver=!1!==r;return s=A},b=function(E,J){function B(){var y=M.doc.css(F.trstyle);return y&&"matrix"==y.substr(0,6)?y.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function A(){var y=M.win;if("zIndex" in y){return y.zIndex()}for(;0<y.length&&9!=y[0].nodeType;){var z=y.css("zIndex");if(!isNaN(z)&&0!=z){return parseInt(z)}y=y.parent()}return !1}function G(y,Q,z){Q=y.css(Q);y=parseFloat(Q);return isNaN(y)?(y=H[Q]||0,z=3==y?z?M.win.outerHeight()-M.win.innerHeight():M.win.outerWidth()-M.win.innerWidth():1,M.isie8&&y&&(y+=1),z?y:0):y}function w(y,Q,z,R){M._bind(y,Q,function(S){S=S?S:window.event;var U={original:S,target:S.target||S.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==S.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){S.preventDefault?S.preventDefault():S.returnValue=!1;return !1},stopImmediatePropagation:function(){S.stopImmediatePropagation?S.stopImmediatePropagation():S.cancelBubble=!0}};"mousewheel"==Q?(S.wheelDeltaX&&(U.deltaX=-0.025*S.wheelDeltaX),S.wheelDeltaY&&(U.deltaY=-0.025*S.wheelDeltaY),U.deltaY||U.deltaX||(U.deltaY=-0.025*S.wheelDelta)):U.deltaY=S.detail;return z.call(y,U)},R)}function P(y,z,S){var R,Q;0==y.deltaMode?(R=-Math.floor(M.opt.mousescrollstep/54*y.deltaX),Q=-Math.floor(M.opt.mousescrollstep/54*y.deltaY)):1==y.deltaMode&&(R=-Math.floor(y.deltaX*M.opt.mousescrollstep),Q=-Math.floor(y.deltaY*M.opt.mousescrollstep));z&&M.opt.oneaxismousemode&&0==R&&Q&&(R=Q,Q=0,S&&(0>R?M.getScrollLeft()>=M.page.maxw:0>=M.getScrollLeft())&&(Q=R,R=0));M.isrtlmode&&(R=-R);R&&(M.scrollmom&&M.scrollmom.stop(),M.lastdeltax+=R,M.debounced("mousewheelx",function(){var U=M.lastdeltax;M.lastdeltax=0;M.rail.drag||M.doScrollLeftBy(U)},15));if(Q){if(M.opt.nativeparentscrolling&&S&&!M.ispage&&!M.zoomactive){if(0>Q){if(M.getScrollTop()>=M.page.maxh){return !0}}else{if(0>=M.getScrollTop()){return !0}}}M.scrollmom&&M.scrollmom.stop();M.lastdeltay+=Q;M.synched("mousewheely",function(){var U=M.lastdeltay;M.lastdeltay=0;M.rail.drag||M.doScrollBy(U)},15)}y.stopImmediatePropagation();return y.preventDefault()}var M=this;this.version="3.6.8";this.name="nicescroll";this.me=J;this.opt={doc:T("body"),win:!1};T.extend(this.opt,m);this.opt.snapbackspeed=80;if(E){for(var v in M.opt){void 0!==E[v]&&(M.opt[v]=E[v])}}M.opt.disablemutationobserver&&(r=!1);this.iddoc=(this.doc=M.opt.doc)&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/^BODY|HTML/.test(M.opt.win?M.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=!1!==M.opt.win;this.win=M.opt.win||(this.ispage?T(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?T(window):this.win;this.body=T("body");this.iframe=this.isfixed=this.viewport=!1;this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName;this.istextarea="TEXTAREA"==this.win[0].nodeName;this.forcescreen=!1;this.canshowonmouseevent="scroll"!=M.opt.autohidemode;this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;if("auto"==this.opt.rtlmode){v=this.win[0]==window?this.body:this.win;var x=v.css("writing-mode")||v.css("-webkit-writing-mode")||v.css("-ms-writing-mode")||v.css("-moz-writing-mode");"horizontal-tb"==x||"lr-tb"==x||""==x?(this.isrtlmode="rtl"==v.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==x||"tb"==x||"tb-rl"==x||"rl-tb"==x,this.isvertical="vertical-rl"==x||"tb"==x||"tb-rl"==x)}else{this.isrtlmode=!0===this.opt.rtlmode,this.isvertical=!1}this.observerbody=this.observerremover=this.observer=this.scrollmom=this.scrollrunning=!1;do{this.id="ascrail"+e++}while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.selectiondrag=this.cursorfreezed=this.cursor=this.rail=!1;this.visibility=!0;this.hidden=this.locked=this.railslocked=!1;this.cursoractive=!0;this.wheelprevented=!1;this.overflowx=M.opt.overflowx;this.overflowy=M.opt.overflowy;this.nativescrollingarea=!1;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltay=this.lastdeltax=0;this.detected=c();var F=T.extend({},this.detected);this.ishwscroll=(this.canhwscroll=F.hastransform&&M.opt.hwacceleration)&&M.haswrapper;this.hasreversehr=this.isrtlmode?this.isvertical?!(F.iswebkit||F.isie||F.isie11):!(F.iswebkit||F.isie&&!F.isie10&&!F.isie11):!1;this.istouchcapable=!1;F.cantouch||!F.hasw3ctouch&&!F.hasmstouch?!F.cantouch||F.isios||F.isandroid||!F.iswebkit&&!F.ismozilla||(this.istouchcapable=!0):this.istouchcapable=!0;M.opt.enablemouselockapi||(F.hasmousecapture=!1,F.haspointerlock=!1);this.debounced=function(y,z,Q){M&&(M.delaylist[y]||(z.call(M),M.delaylist[y]={h:C(function(){M.delaylist[y].fn.call(M);M.delaylist[y]=!1},Q)}),M.delaylist[y].fn=z)};var O=!1;this.synched=function(y,z){M.synclist[y]=z;(function(){O||(C(function(){if(M){O=!1;for(var Q in M.synclist){var R=M.synclist[Q];R&&R.call(M);M.synclist[Q]=!1}}}),O=!0)})();return y};this.unsynched=function(y){M.synclist[y]&&(M.synclist[y]=!1)};this.css=function(y,z){for(var Q in z){M.saved.css.push([y,Q,y.css(Q)]),y.css(Q,z[Q])}};this.scrollTop=function(y){return void 0===y?M.getScrollTop():M.setScrollTop(y)};this.scrollLeft=function(y){return void 0===y?M.getScrollLeft():M.setScrollLeft(y)};var f=function(y,Q,V,U,S,R,z){this.st=y;this.ed=Q;this.spd=V;this.p1=U||0;this.p2=S||1;this.p3=R||0;this.p4=z||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};f.prototype={B2:function(y){return 3*y*y*(1-y)},B3:function(y){return 3*y*(1-y)*(1-y)},B4:function(y){return(1-y)*(1-y)*(1-y)},getNow:function(){var y=1-((new Date).getTime()-this.ts)/this.spd,z=this.B2(y)+this.B3(y)+this.B4(y);return 0>y?this.ed:this.st+Math.round(this.df*z)},update:function(y,z){this.st=this.getNow();this.ed=y;this.spd=z;this.ts=(new Date).getTime();this.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};F.hastranslate3d&&F.isios&&this.doc.css("-webkit-backface-visibility","hidden");this.getScrollTop=function(y){if(!y){if(y=B()){return 16==y.length?-y[13]:-y[5]}if(M.timerscroll&&M.timerscroll.bz){return M.timerscroll.bz.getNow()}}return M.doc.translate.y};this.getScrollLeft=function(y){if(!y){if(y=B()){return 16==y.length?-y[12]:-y[4]}if(M.timerscroll&&M.timerscroll.bh){return M.timerscroll.bh.getNow()}}return M.doc.translate.x};this.notifyScrollEvent=function(y){var z=document.createEvent("UIEvents");z.initUIEvent("scroll",!1,!0,window,1);z.niceevent=!0;y.dispatchEvent(z)};var K=this.isrtlmode?1:-1;F.hastranslate3d&&M.opt.enabletranslate3d?(this.setScrollTop=function(y,z){M.doc.translate.y=y;M.doc.translate.ty=-1*y+"px";M.doc.css(F.trstyle,"translate3d("+M.doc.translate.tx+","+M.doc.translate.ty+",0px)");z||M.notifyScrollEvent(M.win[0])},this.setScrollLeft=function(y,z){M.doc.translate.x=y;M.doc.translate.tx=y*K+"px";M.doc.css(F.trstyle,"translate3d("+M.doc.translate.tx+","+M.doc.translate.ty+",0px)");z||M.notifyScrollEvent(M.win[0])}):(this.setScrollTop=function(y,z){M.doc.translate.y=y;M.doc.translate.ty=-1*y+"px";M.doc.css(F.trstyle,"translate("+M.doc.translate.tx+","+M.doc.translate.ty+")");z||M.notifyScrollEvent(M.win[0])},this.setScrollLeft=function(y,z){M.doc.translate.x=y;M.doc.translate.tx=y*K+"px";M.doc.css(F.trstyle,"translate("+M.doc.translate.tx+","+M.doc.translate.ty+")");z||M.notifyScrollEvent(M.win[0])})}else{this.getScrollTop=function(){return M.docscroll.scrollTop()},this.setScrollTop=function(y){return setTimeout(function(){M&&M.docscroll.scrollTop(y)},1)},this.getScrollLeft=function(){return M.hasreversehr?M.detected.ismozilla?M.page.maxw-Math.abs(M.docscroll.scrollLeft()):M.page.maxw-M.docscroll.scrollLeft():M.docscroll.scrollLeft()},this.setScrollLeft=function(y){return setTimeout(function(){if(M){return M.hasreversehr&&(y=M.detected.ismozilla?-(M.page.maxw-y):M.page.maxw-y),M.docscroll.scrollLeft(y)}},1)}}this.getTarget=function(y){return y?y.target?y.target:y.srcElement?y.srcElement:!1:!1};this.hasParent=function(y,z){if(!y){return !1}for(var Q=y.target||y.srcElement||y||!1;Q&&Q.id!=z;){Q=Q.parentNode||!1}return !1!==Q};var H={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}};this.getOffset=function(){if(M.isfixed){var y=M.win.offset(),z=M.getDocumentScrollOffset();y.top-=z.top;y.left-=z.left;return y}y=M.win.offset();if(!M.viewport){return y}z=M.viewport.offset();return{top:y.top-z.top,left:y.left-z.left}};this.updateScrollBar=function(y){var z,S,R;if(M.ishwscroll){M.rail.css({height:M.win.innerHeight()-(M.opt.railpadding.top+M.opt.railpadding.bottom)}),M.railh&&M.railh.css({width:M.win.innerWidth()-(M.opt.railpadding.left+M.opt.railpadding.right)})}else{var Q=M.getOffset();z=Q.top;S=Q.left-(M.opt.railpadding.left+M.opt.railpadding.right);z+=G(M.win,"border-top-width",!0);S+=M.rail.align?M.win.outerWidth()-G(M.win,"border-right-width")-M.rail.width:G(M.win,"border-left-width");if(R=M.opt.railoffset){R.top&&(z+=R.top),R.left&&(S+=R.left)}M.railslocked||M.rail.css({top:z,left:S,height:(y?y.h:M.win.innerHeight())-(M.opt.railpadding.top+M.opt.railpadding.bottom)});M.zoom&&M.zoom.css({top:z+1,left:1==M.rail.align?S-20:S+M.rail.width+4});if(M.railh&&!M.railslocked){z=Q.top;S=Q.left;if(R=M.opt.railhoffset){R.top&&(z+=R.top),R.left&&(S+=R.left)}y=M.railh.align?z+G(M.win,"border-top-width",!0)+M.win.innerHeight()-M.railh.height:z+G(M.win,"border-top-width",!0);S+=G(M.win,"border-left-width");M.railh.css({top:y-(M.opt.railpadding.top+M.opt.railpadding.bottom),left:S,width:M.railh.width})}}};this.doRailClick=function(y,z,R){var Q;M.railslocked||(M.cancelEvent(y),z?(z=R?M.doScrollLeft:M.doScrollTop,Q=R?(y.pageX-M.railh.offset().left-M.cursorwidth/2)*M.scrollratio.x:(y.pageY-M.rail.offset().top-M.cursorheight/2)*M.scrollratio.y,z(Q)):(z=R?M.doScrollLeftBy:M.doScrollBy,Q=R?M.scroll.x:M.scroll.y,y=R?y.pageX-M.railh.offset().left:y.pageY-M.rail.offset().top,R=R?M.view.w:M.view.h,z(Q>=y?R:-R)))};M.hasanimationframe=C;M.hascancelanimationframe=t;M.hasanimationframe?M.hascancelanimationframe||(t=function(){M.cancelAnimationFrame=!0}):(C=function(y){return setTimeout(y,15-Math.floor(+new Date/1000)%16)},t=clearTimeout);this.init=function(){M.saved.css=[];if(F.isie7mobile||F.isoperamini){return !0}F.hasmstouch&&M.css(M.ispage?T("html"):M.win,{_touchaction:"none"});var aa=F.ismodernie||F.isie10?{"-ms-overflow-style":"none"}:{"overflow-y":"hidden"};M.zindex="auto";M.zindex=M.ispage||"auto"!=M.opt.zindex?M.opt.zindex:A()||"auto";!M.ispage&&"auto"!=M.zindex&&M.zindex>N&&(N=M.zindex);M.isie&&0==M.zindex&&"auto"==M.opt.zindex&&(M.zindex="auto");if(!M.ispage||!F.cantouch&&!F.isieold&&!F.isie9mobile){var Y=M.docscroll;M.ispage&&(Y=M.haswrapper?M.win:M.doc);F.isie9mobile||M.css(Y,aa);M.ispage&&F.isie7&&("BODY"==M.doc[0].nodeName?M.css(T("html"),{"overflow-y":"hidden"}):"HTML"==M.doc[0].nodeName&&M.css(T("body"),aa));!F.isios||M.ispage||M.haswrapper||M.css(T("body"),{"-webkit-overflow-scrolling":"touch"});var X=T(document.createElement("div"));X.css({position:"relative",top:0,"float":"right",width:M.opt.cursorwidth,height:0,"background-color":M.opt.cursorcolor,border:M.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":M.opt.cursorborderradius,"-moz-border-radius":M.opt.cursorborderradius,"border-radius":M.opt.cursorborderradius});X.hborder=parseFloat(X.outerHeight()-X.innerHeight());X.addClass("nicescroll-cursors");M.cursor=X;var S=T(document.createElement("div"));S.attr("id",M.id);S.addClass("nicescroll-rails nicescroll-rails-vr");var U,V,Q=["left","right","top","bottom"],Z;for(Z in Q){V=Q[Z],(U=M.opt.railpadding[V])?S.css("padding-"+V,U+"px"):M.opt.railpadding[V]=0}S.append(X);S.width=Math.max(parseFloat(M.opt.cursorwidth),X.outerWidth());S.css({width:S.width+"px",zIndex:M.zindex,background:M.opt.background,cursor:"default"});S.visibility=!0;S.scrollable=!0;S.align="left"==M.opt.railalign?0:1;M.rail=S;X=M.rail.drag=!1;!M.opt.boxzoom||M.ispage||F.isieold||(X=document.createElement("div"),M.bind(X,"click",M.doZoom),M.bind(X,"mouseenter",function(){M.zoom.css("opacity",M.opt.cursoropacitymax)}),M.bind(X,"mouseleave",function(){M.zoom.css("opacity",M.opt.cursoropacitymin)}),M.zoom=T(X),M.zoom.css({cursor:"pointer",zIndex:M.zindex,backgroundImage:"url("+M.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),M.opt.dblclickzoom&&M.bind(M.win,"dblclick",M.doZoom),F.cantouch&&M.opt.gesturezoom&&(M.ongesturezoom=function(ac){1.5<ac.scale&&M.doZoomIn(ac);0.8>ac.scale&&M.doZoomOut(ac);return M.cancelEvent(ac)},M.bind(M.win,"gestureend",M.ongesturezoom)));M.railh=!1;var R;M.opt.horizrailenabled&&(M.css(Y,{overflowX:"hidden"}),X=T(document.createElement("div")),X.css({position:"absolute",top:0,height:M.opt.cursorwidth,width:0,backgroundColor:M.opt.cursorcolor,border:M.opt.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":M.opt.cursorborderradius,"-moz-border-radius":M.opt.cursorborderradius,"border-radius":M.opt.cursorborderradius}),F.isieold&&X.css("overflow","hidden"),X.wborder=parseFloat(X.outerWidth()-X.innerWidth()),X.addClass("nicescroll-cursors"),M.cursorh=X,R=T(document.createElement("div")),R.attr("id",M.id+"-hr"),R.addClass("nicescroll-rails nicescroll-rails-hr"),R.height=Math.max(parseFloat(M.opt.cursorwidth),X.outerHeight()),R.css({height:R.height+"px",zIndex:M.zindex,background:M.opt.background}),R.append(X),R.visibility=!0,R.scrollable=!0,R.align="top"==M.opt.railvalign?0:1,M.railh=R,M.railh.drag=!1);M.ispage?(S.css({position:"fixed",top:0,height:"100%"}),S.align?S.css({right:0}):S.css({left:0}),M.body.append(S),M.railh&&(R.css({position:"fixed",left:0,width:"100%"}),R.align?R.css({bottom:0}):R.css({top:0}),M.body.append(R))):(M.ishwscroll?("static"==M.win.css("position")&&M.css(M.win,{position:"relative"}),Y="HTML"==M.win[0].nodeName?M.body:M.win,T(Y).scrollTop(0).scrollLeft(0),M.zoom&&(M.zoom.css({position:"absolute",top:1,right:0,"margin-right":S.width+4}),Y.append(M.zoom)),S.css({position:"absolute",top:0}),S.align?S.css({right:0}):S.css({left:0}),Y.append(S),R&&(R.css({position:"absolute",left:0,bottom:0}),R.align?R.css({bottom:0}):R.css({top:0}),Y.append(R))):(M.isfixed="fixed"==M.win.css("position"),Y=M.isfixed?"fixed":"absolute",M.isfixed||(M.viewport=M.getViewport(M.win[0])),M.viewport&&(M.body=M.viewport,0==/fixed|absolute/.test(M.viewport.css("position"))&&M.css(M.viewport,{position:"relative"})),S.css({position:Y}),M.zoom&&M.zoom.css({position:Y}),M.updateScrollBar(),M.body.append(S),M.zoom&&M.body.append(M.zoom),M.railh&&(R.css({position:Y}),M.body.append(R))),F.isios&&M.css(M.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),F.isie&&M.opt.disableoutline&&M.win.attr("hideFocus","true"),F.iswebkit&&M.opt.disableoutline&&M.win.css("outline","none"));!1===M.opt.autohidemode?(M.autohidedom=!1,M.rail.css({opacity:M.opt.cursoropacitymax}),M.railh&&M.railh.css({opacity:M.opt.cursoropacitymax})):!0===M.opt.autohidemode||"leave"===M.opt.autohidemode?(M.autohidedom=T().add(M.rail),F.isie8&&(M.autohidedom=M.autohidedom.add(M.cursor)),M.railh&&(M.autohidedom=M.autohidedom.add(M.railh)),M.railh&&F.isie8&&(M.autohidedom=M.autohidedom.add(M.cursorh))):"scroll"==M.opt.autohidemode?(M.autohidedom=T().add(M.rail),M.railh&&(M.autohidedom=M.autohidedom.add(M.railh))):"cursor"==M.opt.autohidemode?(M.autohidedom=T().add(M.cursor),M.railh&&(M.autohidedom=M.autohidedom.add(M.cursorh))):"hidden"==M.opt.autohidemode&&(M.autohidedom=!1,M.hide(),M.railslocked=!1);if(F.isie9mobile){M.scrollmom=new h(M),M.onmangotouch=function(){var ac=M.getScrollTop(),ai=M.getScrollLeft();if(ac==M.scrollmom.lastscrolly&&ai==M.scrollmom.lastscrollx){return !0}var ae=ac-M.mangotouch.sy,ah=ai-M.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(ah,2)+Math.pow(ae,2)))){var ag=0>ae?-1:1,af=0>ah?-1:1,ad=+new Date;M.mangotouch.lazy&&clearTimeout(M.mangotouch.lazy);80<ad-M.mangotouch.tm||M.mangotouch.dry!=ag||M.mangotouch.drx!=af?(M.scrollmom.stop(),M.scrollmom.reset(ai,ac),M.mangotouch.sy=ac,M.mangotouch.ly=ac,M.mangotouch.sx=ai,M.mangotouch.lx=ai,M.mangotouch.dry=ag,M.mangotouch.drx=af,M.mangotouch.tm=ad):(M.scrollmom.stop(),M.scrollmom.update(M.mangotouch.sx-ah,M.mangotouch.sy-ae),M.mangotouch.tm=ad,ae=Math.max(Math.abs(M.mangotouch.ly-ac),Math.abs(M.mangotouch.lx-ai)),M.mangotouch.ly=ac,M.mangotouch.lx=ai,2<ae&&(M.mangotouch.lazy=setTimeout(function(){M.mangotouch.lazy=!1;M.mangotouch.dry=0;M.mangotouch.drx=0;M.mangotouch.tm=0;M.scrollmom.doMomentum(30)},100)))}},S=M.getScrollTop(),R=M.getScrollLeft(),M.mangotouch={sy:S,ly:S,dry:0,sx:R,lx:R,drx:0,lazy:!1,tm:0},M.bind(M.docscroll,"scroll",M.onmangotouch)}else{if(F.cantouch||M.istouchcapable||M.opt.touchbehavior||F.hasmstouch){M.scrollmom=new h(M);M.ontouchstart=function(ac){if(ac.pointerType&&2!=ac.pointerType&&"touch"!=ac.pointerType){return !1}M.hasmoving=!1;if(!M.railslocked){var af;if(F.hasmstouch){for(af=ac.target?ac.target:!1;af;){var ad=T(af).getNiceScroll();if(0<ad.length&&ad[0].me==M.me){break}if(0<ad.length){return !1}if("DIV"==af.nodeName&&af.id==M.id){break}af=af.parentNode?af.parentNode:!1}}M.cancelScroll();if((af=M.getTarget(ac))&&/INPUT/i.test(af.nodeName)&&/range/i.test(af.type)){return M.stopPropagation(ac)}!("clientX" in ac)&&"changedTouches" in ac&&(ac.clientX=ac.changedTouches[0].clientX,ac.clientY=ac.changedTouches[0].clientY);M.forcescreen&&(ad=ac,ac={original:ac.original?ac.original:ac},ac.clientX=ad.screenX,ac.clientY=ad.screenY);M.rail.drag={x:ac.clientX,y:ac.clientY,sx:M.scroll.x,sy:M.scroll.y,st:M.getScrollTop(),sl:M.getScrollLeft(),pt:2,dl:!1};if(M.ispage||!M.opt.directionlockdeadzone){M.rail.drag.dl="f"}else{var ad=T(window).width(),ae=T(window).height(),ae=Math.max(0,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-ae),ad=Math.max(0,Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)-ad);M.rail.drag.ck=!M.rail.scrollable&&M.railh.scrollable?0<ae?"v":!1:M.rail.scrollable&&!M.railh.scrollable?0<ad?"h":!1:!1;M.rail.drag.ck||(M.rail.drag.dl="f")}M.opt.touchbehavior&&M.isiframe&&F.isie&&(ad=M.win.position(),M.rail.drag.x+=ad.left,M.rail.drag.y+=ad.top);M.hasmoving=!1;M.lastmouseup=!1;M.scrollmom.reset(ac.clientX,ac.clientY);if(!F.cantouch&&!this.istouchcapable&&!ac.pointerType){if(!af||!/INPUT|SELECT|TEXTAREA/i.test(af.nodeName)){return !M.ispage&&F.hasmousecapture&&af.setCapture(),M.opt.touchbehavior?(af.onclick&&!af._onclick&&(af._onclick=af.onclick,af.onclick=function(ag){if(M.hasmoving){return !1}af._onclick.call(this,ag)}),M.cancelEvent(ac)):M.stopPropagation(ac)}/SUBMIT|CANCEL|BUTTON/i.test(T(af).attr("type"))&&(pc={tg:af,click:!1},M.preventclick=pc)}}};M.ontouchend=function(ac){if(!M.rail.drag){return !0}if(2==M.rail.drag.pt){if(ac.pointerType&&2!=ac.pointerType&&"touch"!=ac.pointerType){return !1}M.scrollmom.doMomentum();M.rail.drag=!1;if(M.hasmoving&&(M.lastmouseup=!0,M.hideCursor(),F.hasmousecapture&&document.releaseCapture(),!F.cantouch)){return M.cancelEvent(ac)}}else{if(1==M.rail.drag.pt){return M.onmouseup(ac)}}};var z=M.opt.touchbehavior&&M.isiframe&&!F.hasmousecapture;M.ontouchmove=function(ak,aj){if(!M.rail.drag||ak.targetTouches&&M.opt.preventmultitouchscrolling&&1<ak.targetTouches.length||ak.pointerType&&2!=ak.pointerType&&"touch"!=ak.pointerType){return !1}if(2==M.rail.drag.pt){if(F.cantouch&&F.isios&&void 0===ak.original){return !0}M.hasmoving=!0;M.preventclick&&!M.preventclick.click&&(M.preventclick.click=M.preventclick.tg.onclick||!1,M.preventclick.tg.onclick=M.onpreventclick);ak=T.extend({original:ak},ak);"changedTouches" in ak&&(ak.clientX=ak.changedTouches[0].clientX,ak.clientY=ak.changedTouches[0].clientY);if(M.forcescreen){var ah=ak;ak={original:ak.original?ak.original:ak};ak.clientX=ah.screenX;ak.clientY=ah.screenY}var ai,ah=ai=0;z&&!aj&&(ai=M.win.position(),ah=-ai.left,ai=-ai.top);var al=ak.clientY+ai;ai=al-M.rail.drag.y;var ad=ak.clientX+ah,af=ad-M.rail.drag.x,ag=M.rail.drag.st-ai;M.ishwscroll&&M.opt.bouncescroll?0>ag?ag=Math.round(ag/2):ag>M.page.maxh&&(ag=M.page.maxh+Math.round((ag-M.page.maxh)/2)):(0>ag&&(al=ag=0),ag>M.page.maxh&&(ag=M.page.maxh,al=0));var ae;M.railh&&M.railh.scrollable&&(ae=M.isrtlmode?af-M.rail.drag.sl:M.rail.drag.sl-af,M.ishwscroll&&M.opt.bouncescroll?0>ae?ae=Math.round(ae/2):ae>M.page.maxw&&(ae=M.page.maxw+Math.round((ae-M.page.maxw)/2)):(0>ae&&(ad=ae=0),ae>M.page.maxw&&(ae=M.page.maxw,ad=0)));ah=!1;if(M.rail.drag.dl){ah=!0,"v"==M.rail.drag.dl?ae=M.rail.drag.sl:"h"==M.rail.drag.dl&&(ag=M.rail.drag.st)}else{ai=Math.abs(ai);var af=Math.abs(af),ac=M.opt.directionlockdeadzone;if("v"==M.rail.drag.ck){if(ai>ac&&af<=0.3*ai){return M.rail.drag=!1,!0}af>ac&&(M.rail.drag.dl="f",T("body").scrollTop(T("body").scrollTop()))}else{if("h"==M.rail.drag.ck){if(af>ac&&ai<=0.3*af){return M.rail.drag=!1,!0}ai>ac&&(M.rail.drag.dl="f",T("body").scrollLeft(T("body").scrollLeft()))}}}M.synched("touchmove",function(){M.rail.drag&&2==M.rail.drag.pt&&(M.prepareTransition&&M.prepareTransition(0),M.rail.scrollable&&M.setScrollTop(ag),M.scrollmom.update(ad,al),M.railh&&M.railh.scrollable?(M.setScrollLeft(ae),M.showCursor(ag,ae)):M.showCursor(ag),F.isie10&&document.selection.clear())});F.ischrome&&M.istouchcapable&&(ah=!1);if(ah){return M.cancelEvent(ak)}}else{if(1==M.rail.drag.pt){return M.onmousemove(ak)}}}}M.onmousedown=function(ac,ae){if(!M.rail.drag||1==M.rail.drag.pt){if(M.railslocked){return M.cancelEvent(ac)}M.cancelScroll();M.rail.drag={x:ac.clientX,y:ac.clientY,sx:M.scroll.x,sy:M.scroll.y,pt:1,hr:!!ae};var ad=M.getTarget(ac);!M.ispage&&F.hasmousecapture&&ad.setCapture();M.isiframe&&!F.hasmousecapture&&(M.saved.csspointerevents=M.doc.css("pointer-events"),M.css(M.doc,{"pointer-events":"none"}));M.hasmoving=!1;return M.cancelEvent(ac)}};M.onmouseup=function(ac){if(M.rail.drag){if(1!=M.rail.drag.pt){return !0}F.hasmousecapture&&document.releaseCapture();M.isiframe&&!F.hasmousecapture&&M.doc.css("pointer-events",M.saved.csspointerevents);M.rail.drag=!1;M.hasmoving&&M.triggerScrollEnd();return M.cancelEvent(ac)}};M.onmousemove=function(ac){if(M.rail.drag){if(1==M.rail.drag.pt){if(F.ischrome&&0==ac.which){return M.onmouseup(ac)}M.cursorfreezed=!0;M.hasmoving=!0;if(M.rail.drag.hr){M.scroll.x=M.rail.drag.sx+(ac.clientX-M.rail.drag.x);0>M.scroll.x&&(M.scroll.x=0);var ad=M.scrollvaluemaxw;M.scroll.x>ad&&(M.scroll.x=ad)}else{M.scroll.y=M.rail.drag.sy+(ac.clientY-M.rail.drag.y),0>M.scroll.y&&(M.scroll.y=0),ad=M.scrollvaluemax,M.scroll.y>ad&&(M.scroll.y=ad)}M.synched("mousemove",function(){M.rail.drag&&1==M.rail.drag.pt&&(M.showCursor(),M.rail.drag.hr?M.hasreversehr?M.doScrollLeft(M.scrollvaluemaxw-Math.round(M.scroll.x*M.scrollratio.x),M.opt.cursordragspeed):M.doScrollLeft(Math.round(M.scroll.x*M.scrollratio.x),M.opt.cursordragspeed):M.doScrollTop(Math.round(M.scroll.y*M.scrollratio.y),M.opt.cursordragspeed))});return M.cancelEvent(ac)}}else{M.checkarea=0}};if(F.cantouch||M.opt.touchbehavior){M.onpreventclick=function(ac){if(M.preventclick){return M.preventclick.tg.onclick=M.preventclick.click,M.preventclick=!1,M.cancelEvent(ac)}},M.bind(M.win,"mousedown",M.ontouchstart),M.onclick=F.isios?!1:function(ac){return M.lastmouseup?(M.lastmouseup=!1,M.cancelEvent(ac)):!0},M.opt.grabcursorenabled&&F.cursorgrabvalue&&(M.css(M.ispage?M.doc:M.win,{cursor:F.cursorgrabvalue}),M.css(M.rail,{cursor:F.cursorgrabvalue}))}else{var y=function(ac){if(M.selectiondrag){if(ac){var ad=M.win.outerHeight();ac=ac.pageY-M.selectiondrag.top;0<ac&&ac<ad&&(ac=0);ac>=ad&&(ac-=ad);M.selectiondrag.df=ac}0!=M.selectiondrag.df&&(M.doScrollBy(2*-Math.floor(M.selectiondrag.df/6)),M.debounced("doselectionscroll",function(){y()},50))}};M.hasTextSelected="getSelection" in document?function(){return 0<document.getSelection().rangeCount}:"selection" in document?function(){return"None"!=document.selection.type}:function(){return !1};M.onselectionstart=function(ac){M.ispage||(M.selectiondrag=M.win.offset())};M.onselectionend=function(ac){M.selectiondrag=!1};M.onselectiondrag=function(ac){M.selectiondrag&&M.hasTextSelected()&&M.debounced("selectionscroll",function(){y(ac)},250)}}F.hasw3ctouch?(M.css(M.rail,{"touch-action":"none"}),M.css(M.cursor,{"touch-action":"none"}),M.bind(M.win,"pointerdown",M.ontouchstart),M.bind(document,"pointerup",M.ontouchend),M.bind(document,"pointermove",M.ontouchmove)):F.hasmstouch?(M.css(M.rail,{"-ms-touch-action":"none"}),M.css(M.cursor,{"-ms-touch-action":"none"}),M.bind(M.win,"MSPointerDown",M.ontouchstart),M.bind(document,"MSPointerUp",M.ontouchend),M.bind(document,"MSPointerMove",M.ontouchmove),M.bind(M.cursor,"MSGestureHold",function(ac){ac.preventDefault()}),M.bind(M.cursor,"contextmenu",function(ac){ac.preventDefault()})):this.istouchcapable&&(M.bind(M.win,"touchstart",M.ontouchstart),M.bind(document,"touchend",M.ontouchend),M.bind(document,"touchcancel",M.ontouchend),M.bind(document,"touchmove",M.ontouchmove));if(M.opt.cursordragontouch||!F.cantouch&&!M.opt.touchbehavior){M.rail.css({cursor:"default"}),M.railh&&M.railh.css({cursor:"default"}),M.jqbind(M.rail,"mouseenter",function(){if(!M.ispage&&!M.win.is(":visible")){return !1}M.canshowonmouseevent&&M.showCursor();M.rail.active=!0}),M.jqbind(M.rail,"mouseleave",function(){M.rail.active=!1;M.rail.drag||M.hideCursor()}),M.opt.sensitiverail&&(M.bind(M.rail,"click",function(ac){M.doRailClick(ac,!1,!1)}),M.bind(M.rail,"dblclick",function(ac){M.doRailClick(ac,!0,!1)}),M.bind(M.cursor,"click",function(ac){M.cancelEvent(ac)}),M.bind(M.cursor,"dblclick",function(ac){M.cancelEvent(ac)})),M.railh&&(M.jqbind(M.railh,"mouseenter",function(){if(!M.ispage&&!M.win.is(":visible")){return !1}M.canshowonmouseevent&&M.showCursor();M.rail.active=!0}),M.jqbind(M.railh,"mouseleave",function(){M.rail.active=!1;M.rail.drag||M.hideCursor()}),M.opt.sensitiverail&&(M.bind(M.railh,"click",function(ac){M.doRailClick(ac,!1,!0)}),M.bind(M.railh,"dblclick",function(ac){M.doRailClick(ac,!0,!0)}),M.bind(M.cursorh,"click",function(ac){M.cancelEvent(ac)}),M.bind(M.cursorh,"dblclick",function(ac){M.cancelEvent(ac)})))}F.cantouch||M.opt.touchbehavior?(M.bind(F.hasmousecapture?M.win:document,"mouseup",M.ontouchend),M.bind(document,"mousemove",M.ontouchmove),M.onclick&&M.bind(document,"click",M.onclick),M.opt.cursordragontouch?(M.bind(M.cursor,"mousedown",M.onmousedown),M.bind(M.cursor,"mouseup",M.onmouseup),M.cursorh&&M.bind(M.cursorh,"mousedown",function(ac){M.onmousedown(ac,!0)}),M.cursorh&&M.bind(M.cursorh,"mouseup",M.onmouseup)):(M.bind(M.rail,"mousedown",function(ac){ac.preventDefault()}),M.railh&&M.bind(M.railh,"mousedown",function(ac){ac.preventDefault()}))):(M.bind(F.hasmousecapture?M.win:document,"mouseup",M.onmouseup),M.bind(document,"mousemove",M.onmousemove),M.onclick&&M.bind(document,"click",M.onclick),M.bind(M.cursor,"mousedown",M.onmousedown),M.bind(M.cursor,"mouseup",M.onmouseup),M.railh&&(M.bind(M.cursorh,"mousedown",function(ac){M.onmousedown(ac,!0)}),M.bind(M.cursorh,"mouseup",M.onmouseup)),!M.ispage&&M.opt.enablescrollonselection&&(M.bind(M.win[0],"mousedown",M.onselectionstart),M.bind(document,"mouseup",M.onselectionend),M.bind(M.cursor,"mouseup",M.onselectionend),M.cursorh&&M.bind(M.cursorh,"mouseup",M.onselectionend),M.bind(document,"mousemove",M.onselectiondrag)),M.zoom&&(M.jqbind(M.zoom,"mouseenter",function(){M.canshowonmouseevent&&M.showCursor();M.rail.active=!0}),M.jqbind(M.zoom,"mouseleave",function(){M.rail.active=!1;M.rail.drag||M.hideCursor()})));M.opt.enablemousewheel&&(M.isiframe||M.mousewheel(F.isie&&M.ispage?document:M.win,M.onmousewheel),M.mousewheel(M.rail,M.onmousewheel),M.railh&&M.mousewheel(M.railh,M.onmousewheelhr));M.ispage||F.cantouch||/HTML|^BODY/.test(M.win[0].nodeName)||(M.win.attr("tabindex")||M.win.attr({tabindex:g++}),M.jqbind(M.win,"focus",function(ac){L=M.getTarget(ac).id||!0;M.hasfocus=!0;M.canshowonmouseevent&&M.noticeCursor()}),M.jqbind(M.win,"blur",function(ac){L=!1;M.hasfocus=!1}),M.jqbind(M.win,"mouseenter",function(ac){D=M.getTarget(ac).id||!0;M.hasmousefocus=!0;M.canshowonmouseevent&&M.noticeCursor()}),M.jqbind(M.win,"mouseleave",function(){D=!1;M.hasmousefocus=!1;M.rail.drag||M.hideCursor()}))}M.onkeypress=function(ac){if(M.railslocked&&0==M.page.maxh){return !0}ac=ac?ac:window.e;var ag=M.getTarget(ac);if(ag&&/INPUT|TEXTAREA|SELECT|OPTION/.test(ag.nodeName)&&(!ag.getAttribute("type")&&!ag.type||!/submit|button|cancel/i.tp)||T(ag).attr("contenteditable")){return !0}if(M.hasfocus||M.hasmousefocus&&!L||M.ispage&&!L&&!D){ag=ac.keyCode;if(M.railslocked&&27!=ag){return M.cancelEvent(ac)}var ad=ac.ctrlKey||!1,af=ac.shiftKey||!1,ae=!1;switch(ag){case 38:case 63233:M.doScrollBy(72);ae=!0;break;case 40:case 63235:M.doScrollBy(-72);ae=!0;break;case 37:case 63232:M.railh&&(ad?M.doScrollLeft(0):M.doScrollLeftBy(72),ae=!0);break;case 39:case 63234:M.railh&&(ad?M.doScrollLeft(M.page.maxw):M.doScrollLeftBy(-72),ae=!0);break;case 33:case 63276:M.doScrollBy(M.view.h);ae=!0;break;case 34:case 63277:M.doScrollBy(-M.view.h);ae=!0;break;case 36:case 63273:M.railh&&ad?M.doScrollPos(0,0):M.doScrollTo(0);ae=!0;break;case 35:case 63275:M.railh&&ad?M.doScrollPos(M.page.maxw,M.page.maxh):M.doScrollTo(M.page.maxh);ae=!0;break;case 32:M.opt.spacebarenabled&&(af?M.doScrollBy(M.view.h):M.doScrollBy(-M.view.h),ae=!0);break;case 27:M.zoomactive&&(M.doZoom(),ae=!0)}if(ae){return M.cancelEvent(ac)}}};M.opt.enablekeyboard&&M.bind(document,F.isopera&&!F.isopera12?"keypress":"keydown",M.onkeypress);M.bind(document,"keydown",function(ac){ac.ctrlKey&&(M.wheelprevented=!0)});M.bind(document,"keyup",function(ac){ac.ctrlKey||(M.wheelprevented=!1)});M.bind(window,"blur",function(ac){M.wheelprevented=!1});M.bind(window,"resize",M.lazyResize);M.bind(window,"orientationchange",M.lazyResize);M.bind(window,"load",M.lazyResize);if(F.ischrome&&!M.ispage&&!M.haswrapper){var ab=M.win.attr("style"),S=parseFloat(M.win.css("width"))+1;M.win.css("width",S);M.synched("chromefix",function(){M.win.attr("style",ab)})}M.onAttributeChange=function(ac){M.lazyResize(M.isieold?250:30)};M.isie11||!1===r||(M.observerbody=new r(function(ac){ac.forEach(function(ad){if("attributes"==ad.type){return T("body").hasClass("modal-open")&&T("body").hasClass("modal-dialog")&&!T.contains(T(".modal-dialog")[0],M.doc[0])?M.hide():M.show()}});if(document.body.scrollHeight!=M.page.maxh){return M.lazyResize(30)}}),M.observerbody.observe(document.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]}));M.ispage||M.haswrapper||(!1!==r?(M.observer=new r(function(ac){ac.forEach(M.onAttributeChange)}),M.observer.observe(M.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),M.observerremover=new r(function(ac){ac.forEach(function(ad){if(0<ad.removedNodes.length){for(var ae in ad.removedNodes){if(M&&ad.removedNodes[ae]==M.win[0]){return M.remove()}}}})}),M.observerremover.observe(M.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(M.bind(M.win,F.isie&&!F.isie9?"propertychange":"DOMAttrModified",M.onAttributeChange),F.isie9&&M.win[0].attachEvent("onpropertychange",M.onAttributeChange),M.bind(M.win,"DOMNodeRemoved",function(ac){ac.target==M.win[0]&&M.remove()})));!M.ispage&&M.opt.boxzoom&&M.bind(window,"resize",M.resizeZoom);M.istextarea&&(M.bind(M.win,"keydown",M.lazyResize),M.bind(M.win,"mouseup",M.lazyResize));M.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var W=function(){M.iframexd=!1;var ae;try{ae="contentDocument" in this?this.contentDocument:this.contentWindow.document}catch(ac){M.iframexd=!0,ae=!1}if(M.iframexd){return"console" in window&&console.log("NiceScroll error: policy restriced iframe"),!0}M.forcescreen=!0;M.isiframe&&(M.iframe={doc:T(ae),html:M.doc.contents().find("html")[0],body:M.doc.contents().find("body")[0]},M.getContentSize=function(){return{w:Math.max(M.iframe.html.scrollWidth,M.iframe.body.scrollWidth),h:Math.max(M.iframe.html.scrollHeight,M.iframe.body.scrollHeight)}},M.docscroll=T(M.iframe.body));if(!F.isios&&M.opt.iframeautoresize&&!M.isiframe){M.win.scrollTop(0);M.doc.height("");var ad=Math.max(ae.getElementsByTagName("html")[0].scrollHeight,ae.body.scrollHeight);M.doc.height(ad)}M.lazyResize(30);F.isie7&&M.css(T(M.iframe.html),aa);M.css(T(M.iframe.body),aa);F.isios&&M.haswrapper&&M.css(T(ae.body),{"-webkit-transform":"translate3d(0,0,0)"});"contentWindow" in this?M.bind(this.contentWindow,"scroll",M.onscroll):M.bind(ae,"scroll",M.onscroll);M.opt.enablemousewheel&&M.mousewheel(ae,M.onmousewheel);M.opt.enablekeyboard&&M.bind(ae,F.isopera?"keypress":"keydown",M.onkeypress);if(F.cantouch||M.opt.touchbehavior){M.bind(ae,"mousedown",M.ontouchstart),M.bind(ae,"mousemove",function(af){return M.ontouchmove(af,!0)}),M.opt.grabcursorenabled&&F.cursorgrabvalue&&M.css(T(ae.body),{cursor:F.cursorgrabvalue})}M.bind(ae,"mouseup",M.ontouchend);M.zoom&&(M.opt.dblclickzoom&&M.bind(ae,"dblclick",M.doZoom),M.ongesturezoom&&M.bind(ae,"gestureend",M.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){W.call(M.doc[0],!1)},500);M.bind(this.doc,"load",W)}};this.showCursor=function(y,Q){M.cursortimeout&&(clearTimeout(M.cursortimeout),M.cursortimeout=0);if(M.rail){M.autohidedom&&(M.autohidedom.stop().css({opacity:M.opt.cursoropacitymax}),M.cursoractive=!0);M.rail.drag&&1==M.rail.drag.pt||(void 0!==y&&!1!==y&&(M.scroll.y=Math.round(1*y/M.scrollratio.y)),void 0!==Q&&(M.scroll.x=Math.round(1*Q/M.scrollratio.x)));M.cursor.css({height:M.cursorheight,top:M.scroll.y});if(M.cursorh){var z=M.hasreversehr?M.scrollvaluemaxw-M.scroll.x:M.scroll.x;!M.rail.align&&M.rail.visibility?M.cursorh.css({width:M.cursorwidth,left:z+M.rail.width}):M.cursorh.css({width:M.cursorwidth,left:z});M.cursoractive=!0}M.zoom&&M.zoom.stop().css({opacity:M.opt.cursoropacitymax})}};this.hideCursor=function(y){M.cursortimeout||!M.rail||!M.autohidedom||M.hasmousefocus&&"leave"==M.opt.autohidemode||(M.cursortimeout=setTimeout(function(){M.rail.active&&M.showonmouseevent||(M.autohidedom.stop().animate({opacity:M.opt.cursoropacitymin}),M.zoom&&M.zoom.stop().animate({opacity:M.opt.cursoropacitymin}),M.cursoractive=!1);M.cursortimeout=0},y||M.opt.hidecursordelay))};this.noticeCursor=function(y,Q,z){M.showCursor(Q,z);M.rail.active||M.hideCursor(y)};this.getContentSize=M.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:M.haswrapper?function(){return{w:M.doc.outerWidth()+parseInt(M.win.css("paddingLeft"))+parseInt(M.win.css("paddingRight")),h:M.doc.outerHeight()+parseInt(M.win.css("paddingTop"))+parseInt(M.win.css("paddingBottom"))}}:function(){return{w:M.docscroll[0].scrollWidth,h:M.docscroll[0].scrollHeight}};this.onResize=function(y,U){if(!M||!M.win){return !1}if(!M.haswrapper&&!M.ispage){if("none"==M.win.css("display")){return M.visibility&&M.hideRail().hideRailHr(),!1}M.hidden||M.visibility||M.showRail().showRailHr()}var S=M.page.maxh,R=M.page.maxw,Q=M.view.h,z=M.view.w;M.view={w:M.ispage?M.win.width():parseInt(M.win[0].clientWidth),h:M.ispage?M.win.height():parseInt(M.win[0].clientHeight)};M.page=U?U:M.getContentSize();M.page.maxh=Math.max(0,M.page.h-M.view.h);M.page.maxw=Math.max(0,M.page.w-M.view.w);if(M.page.maxh==S&&M.page.maxw==R&&M.view.w==z&&M.view.h==Q){if(M.ispage){return M}S=M.win.offset();if(M.lastposition&&(R=M.lastposition,R.top==S.top&&R.left==S.left)){return M}M.lastposition=S}0==M.page.maxh?(M.hideRail(),M.scrollvaluemax=0,M.scroll.y=0,M.scrollratio.y=0,M.cursorheight=0,M.setScrollTop(0),M.rail&&(M.rail.scrollable=!1)):(M.page.maxh-=M.opt.railpadding.top+M.opt.railpadding.bottom,M.rail.scrollable=!0);0==M.page.maxw?(M.hideRailHr(),M.scrollvaluemaxw=0,M.scroll.x=0,M.scrollratio.x=0,M.cursorwidth=0,M.setScrollLeft(0),M.railh&&(M.railh.scrollable=!1)):(M.page.maxw-=M.opt.railpadding.left+M.opt.railpadding.right,M.railh&&(M.railh.scrollable=M.opt.horizrailenabled));M.railslocked=M.locked||0==M.page.maxh&&0==M.page.maxw;if(M.railslocked){return M.ispage||M.updateScrollBar(M.view),!1}M.hidden||M.visibility?!M.railh||M.hidden||M.railh.visibility||M.showRailHr():M.showRail().showRailHr();M.istextarea&&M.win.css("resize")&&"none"!=M.win.css("resize")&&(M.view.h-=20);M.cursorheight=Math.min(M.view.h,Math.round(M.view.h/M.page.h*M.view.h));M.cursorheight=M.opt.cursorfixedheight?M.opt.cursorfixedheight:Math.max(M.opt.cursorminheight,M.cursorheight);M.cursorwidth=Math.min(M.view.w,Math.round(M.view.w/M.page.w*M.view.w));M.cursorwidth=M.opt.cursorfixedheight?M.opt.cursorfixedheight:Math.max(M.opt.cursorminheight,M.cursorwidth);M.scrollvaluemax=M.view.h-M.cursorheight-M.cursor.hborder-(M.opt.railpadding.top+M.opt.railpadding.bottom);M.railh&&(M.railh.width=0<M.page.maxh?M.view.w-M.rail.width:M.view.w,M.scrollvaluemaxw=M.railh.width-M.cursorwidth-M.cursorh.wborder-(M.opt.railpadding.left+M.opt.railpadding.right));M.ispage||M.updateScrollBar(M.view);M.scrollratio={x:M.page.maxw/M.scrollvaluemaxw,y:M.page.maxh/M.scrollvaluemax};M.getScrollTop()>M.page.maxh?M.doScrollTop(M.page.maxh):(M.scroll.y=Math.round(M.getScrollTop()*(1/M.scrollratio.y)),M.scroll.x=Math.round(M.getScrollLeft()*(1/M.scrollratio.x)),M.cursoractive&&M.noticeCursor());M.scroll.y&&0==M.getScrollTop()&&M.doScrollTo(Math.floor(M.scroll.y*M.scrollratio.y));return M};this.resize=M.onResize;this.hlazyresize=0;this.lazyResize=function(y){M.haswrapper||M.hide();M.hlazyresize&&clearTimeout(M.hlazyresize);M.hlazyresize=setTimeout(function(){M&&M.show().resize()},240);return M};this.jqbind=function(y,Q,z){M.events.push({e:y,n:Q,f:z,q:!0});T(y).bind(Q,z)};this.mousewheel=function(y,R,Q){y="jquery" in y?y[0]:y;if("onwheel" in document.createElement("div")){M._bind(y,"wheel",R,Q||!1)}else{var z=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";w(y,z,R,Q||!1);"DOMMouseScroll"==z&&w(y,"MozMousePixelScroll",R,Q||!1)}};F.haseventlistener?(this.bind=function(y,R,Q,z){M._bind("jquery" in y?y[0]:y,R,Q,z||!1)},this._bind=function(y,R,Q,z){M.events.push({e:y,n:R,f:Q,b:z,q:!1});y.addEventListener(R,Q,z||!1)},this.cancelEvent=function(y){if(!y){return !1}y=y.original?y.original:y;y.cancelable&&y.preventDefault();y.stopPropagation();y.preventManipulation&&y.preventManipulation();return !1},this.stopPropagation=function(y){if(!y){return !1}y=y.original?y.original:y;y.stopPropagation();return !1},this._unbind=function(y,R,Q,z){y.removeEventListener(R,Q,z)}):(this.bind=function(y,S,R,Q){var z="jquery" in y?y[0]:y;M._bind(z,S,function(U){(U=U||window.event||!1)&&U.srcElement&&(U.target=U.srcElement);"pageY" in U||(U.pageX=U.clientX+document.documentElement.scrollLeft,U.pageY=U.clientY+document.documentElement.scrollTop);return !1===R.call(z,U)||!1===Q?M.cancelEvent(U):!0})},this._bind=function(y,R,Q,z){M.events.push({e:y,n:R,f:Q,b:z,q:!1});y.attachEvent?y.attachEvent("on"+R,Q):y["on"+R]=Q},this.cancelEvent=function(y){y=window.event||!1;if(!y){return !1}y.cancelBubble=!0;y.cancel=!0;return y.returnValue=!1},this.stopPropagation=function(y){y=window.event||!1;if(!y){return !1}y.cancelBubble=!0;return !1},this._unbind=function(y,R,Q,z){y.detachEvent?y.detachEvent("on"+R,Q):y["on"+R]=!1});this.unbindAll=function(){for(var y=0;y<M.events.length;y++){var z=M.events[y];z.q?z.e.unbind(z.n,z.f):M._unbind(z.e,z.n,z.f,z.b)}};this.showRail=function(){0==M.page.maxh||!M.ispage&&"none"==M.win.css("display")||(M.visibility=!0,M.rail.visibility=!0,M.rail.css("display","block"));return M};this.showRailHr=function(){if(!M.railh){return M}0==M.page.maxw||!M.ispage&&"none"==M.win.css("display")||(M.railh.visibility=!0,M.railh.css("display","block"));return M};this.hideRail=function(){M.visibility=!1;M.rail.visibility=!1;M.rail.css("display","none");return M};this.hideRailHr=function(){if(!M.railh){return M}M.railh.visibility=!1;M.railh.css("display","none");return M};this.show=function(){M.hidden=!1;M.railslocked=!1;return M.showRail().showRailHr()};this.hide=function(){M.hidden=!0;M.railslocked=!0;return M.hideRail().hideRailHr()};this.toggle=function(){return M.hidden?M.show():M.hide()};this.remove=function(){M.stop();M.cursortimeout&&clearTimeout(M.cursortimeout);for(var y in M.delaylist){M.delaylist[y]&&t(M.delaylist[y].h)}M.doZoomOut();M.unbindAll();F.isie9&&M.win[0].detachEvent("onpropertychange",M.onAttributeChange);!1!==M.observer&&M.observer.disconnect();!1!==M.observerremover&&M.observerremover.disconnect();!1!==M.observerbody&&M.observerbody.disconnect();M.events=null;M.cursor&&M.cursor.remove();M.cursorh&&M.cursorh.remove();M.rail&&M.rail.remove();M.railh&&M.railh.remove();M.zoom&&M.zoom.remove();for(y=0;y<M.saved.css.length;y++){var R=M.saved.css[y];R[0].css(R[1],void 0===R[2]?"":R[2])}M.saved=!1;M.me.data("__nicescroll","");var Q=T.nicescroll;Q.each(function(S){if(this&&this.id===M.id){delete Q[S];for(var U=++S;U<Q.length;U++,S++){Q[S]=Q[U]}Q.length--;Q.length&&delete Q[Q.length]}});for(var z in M){M[z]=null,delete M[z]}M=null};this.scrollstart=function(y){this.onscrollstart=y;return M};this.scrollend=function(y){this.onscrollend=y;return M};this.scrollcancel=function(y){this.onscrollcancel=y;return M};this.zoomin=function(y){this.onzoomin=y;return M};this.zoomout=function(y){this.onzoomout=y;return M};this.isScrollable=function(y){y=y.target?y.target:y;if("OPTION"==y.nodeName){return !0}for(;y&&1==y.nodeType&&!/^BODY|HTML/.test(y.nodeName);){var z=T(y),z=z.css("overflowY")||z.css("overflowX")||z.css("overflow")||"";if(/scroll|auto/.test(z)){return y.clientHeight!=y.scrollHeight}y=y.parentNode?y.parentNode:!1}return !1};this.getViewport=function(y){for(y=y&&y.parentNode?y.parentNode:!1;y&&1==y.nodeType&&!/^BODY|HTML/.test(y.nodeName);){var Q=T(y);if(/fixed|absolute/.test(Q.css("position"))){return Q}var z=Q.css("overflowY")||Q.css("overflowX")||Q.css("overflow")||"";if(/scroll|auto/.test(z)&&y.clientHeight!=y.scrollHeight||0<Q.getNiceScroll().length){return Q}y=y.parentNode?y.parentNode:!1}return !1};this.triggerScrollEnd=function(){if(M.onscrollend){var y=M.getScrollLeft(),z=M.getScrollTop();M.onscrollend.call(M,{type:"scrollend",current:{x:y,y:z},end:{x:y,y:z}})}};this.onmousewheel=function(y){if(!M.wheelprevented){if(M.railslocked){return M.debounced("checkunlock",M.resize,250),!0}if(M.rail.drag){return M.cancelEvent(y)}"auto"==M.opt.oneaxismousemode&&0!=y.deltaX&&(M.opt.oneaxismousemode=!1);if(M.opt.oneaxismousemode&&0==y.deltaX&&!M.rail.scrollable){return M.railh&&M.railh.scrollable?M.onmousewheelhr(y):!0}var Q=+new Date,z=!1;M.opt.preservenativescrolling&&M.checkarea+600<Q&&(M.nativescrollingarea=M.isScrollable(y),z=!0);M.checkarea=Q;if(M.nativescrollingarea){return !0}if(y=P(y,!1,z)){M.checkarea=0}return y}};this.onmousewheelhr=function(y){if(!M.wheelprevented){if(M.railslocked||!M.railh.scrollable){return !0}if(M.rail.drag){return M.cancelEvent(y)}var Q=+new Date,z=!1;M.opt.preservenativescrolling&&M.checkarea+600<Q&&(M.nativescrollingarea=M.isScrollable(y),z=!0);M.checkarea=Q;return M.nativescrollingarea?!0:M.railslocked?M.cancelEvent(y):P(y,!0,z)}};this.stop=function(){M.cancelScroll();M.scrollmon&&M.scrollmon.stop();M.cursorfreezed=!1;M.scroll.y=Math.round(M.getScrollTop()*(1/M.scrollratio.y));M.noticeCursor();return M};this.getTransitionSpeed=function(y){y=Math.min(Math.round(10*M.opt.scrollspeed),Math.round(y/20*M.opt.scrollspeed));return 20<y?y:0};M.opt.smoothscroll?M.ishwscroll&&F.hastransition&&M.opt.usetransition&&M.opt.smoothscroll?(this.prepareTransition=function(y,R){var Q=R?20<y?y:0:M.getTransitionSpeed(y),z=Q?F.prefixstyle+"transform "+Q+"ms ease-out":"";M.lasttransitionstyle&&M.lasttransitionstyle==z||(M.lasttransitionstyle=z,M.doc.css(F.transitionstyle,z));return Q},this.doScrollLeft=function(y,Q){var z=M.scrollrunning?M.newscrolly:M.getScrollTop();M.doScrollPos(y,z,Q)},this.doScrollTop=function(y,Q){var z=M.scrollrunning?M.newscrollx:M.getScrollLeft();M.doScrollPos(z,y,Q)},this.doScrollPos=function(y,S,R){var Q=M.getScrollTop(),z=M.getScrollLeft();(0>(M.newscrolly-Q)*(S-Q)||0>(M.newscrollx-z)*(y-z))&&M.cancelScroll();0==M.opt.bouncescroll&&(0>S?S=0:S>M.page.maxh&&(S=M.page.maxh),0>y?y=0:y>M.page.maxw&&(y=M.page.maxw));if(M.scrollrunning&&y==M.newscrollx&&S==M.newscrolly){return !1}M.newscrolly=S;M.newscrollx=y;M.newscrollspeed=R||!1;if(M.timer){return !1}M.timer=setTimeout(function(){var W=M.getScrollTop(),V=M.getScrollLeft(),U=Math.round(Math.sqrt(Math.pow(y-V,2)+Math.pow(S-W,2))),U=M.newscrollspeed&&1<M.newscrollspeed?M.newscrollspeed:M.getTransitionSpeed(U);M.newscrollspeed&&1>=M.newscrollspeed&&(U*=M.newscrollspeed);M.prepareTransition(U,!0);M.timerscroll&&M.timerscroll.tm&&clearInterval(M.timerscroll.tm);0<U&&(!M.scrollrunning&&M.onscrollstart&&M.onscrollstart.call(M,{type:"scrollstart",current:{x:V,y:W},request:{x:y,y:S},end:{x:M.newscrollx,y:M.newscrolly},speed:U}),F.transitionend?M.scrollendtrapped||(M.scrollendtrapped=!0,M.bind(M.doc,F.transitionend,M.onScrollTransitionEnd,!1)):(M.scrollendtrapped&&clearTimeout(M.scrollendtrapped),M.scrollendtrapped=setTimeout(M.onScrollTransitionEnd,U)),M.timerscroll={bz:new f(W,M.newscrolly,U,0,0,0.58,1),bh:new f(V,M.newscrollx,U,0,0,0.58,1)},M.cursorfreezed||(M.timerscroll.tm=setInterval(function(){M.showCursor(M.getScrollTop(),M.getScrollLeft())},60)));M.synched("doScroll-set",function(){M.timer=0;M.scrollendtrapped&&(M.scrollrunning=!0);M.setScrollTop(M.newscrolly);M.setScrollLeft(M.newscrollx);if(!M.scrollendtrapped){M.onScrollTransitionEnd()}})},50)},this.cancelScroll=function(){if(!M.scrollendtrapped){return !0}var y=M.getScrollTop(),z=M.getScrollLeft();M.scrollrunning=!1;F.transitionend||clearTimeout(F.transitionend);M.scrollendtrapped=!1;M._unbind(M.doc[0],F.transitionend,M.onScrollTransitionEnd);M.prepareTransition(0);M.setScrollTop(y);M.railh&&M.setScrollLeft(z);M.timerscroll&&M.timerscroll.tm&&clearInterval(M.timerscroll.tm);M.timerscroll=!1;M.cursorfreezed=!1;M.showCursor(y,z);return M},this.onScrollTransitionEnd=function(){M.scrollendtrapped&&M._unbind(M.doc[0],F.transitionend,M.onScrollTransitionEnd);M.scrollendtrapped=!1;M.prepareTransition(0);M.timerscroll&&M.timerscroll.tm&&clearInterval(M.timerscroll.tm);M.timerscroll=!1;var y=M.getScrollTop(),z=M.getScrollLeft();M.setScrollTop(y);M.railh&&M.setScrollLeft(z);M.noticeCursor(!1,y,z);M.cursorfreezed=!1;0>y?y=0:y>M.page.maxh&&(y=M.page.maxh);0>z?z=0:z>M.page.maxw&&(z=M.page.maxw);if(y!=M.newscrolly||z!=M.newscrollx){return M.doScrollPos(z,y,M.opt.snapbackspeed)}M.onscrollend&&M.scrollrunning&&M.triggerScrollEnd();M.scrollrunning=!1}):(this.doScrollLeft=function(y,Q){var z=M.scrollrunning?M.newscrolly:M.getScrollTop();M.doScrollPos(y,z,Q)},this.doScrollTop=function(y,Q){var z=M.scrollrunning?M.newscrollx:M.getScrollLeft();M.doScrollPos(z,y,Q)},this.doScrollPos=function(Y,X,W){function V(){if(M.cancelAnimationFrame){return !0}M.scrollrunning=!0;if(y=1-y){return M.timer=C(V)||1}var Z=0,ac,ab,aa=ab=M.getScrollTop();if(M.dst.ay){aa=M.bzscroll?M.dst.py+M.bzscroll.getNow()*M.dst.ay:M.newscrolly;ac=aa-ab;if(0>ac&&aa<M.newscrolly||0<ac&&aa>M.newscrolly){aa=M.newscrolly}M.setScrollTop(aa);aa==M.newscrolly&&(Z=1)}else{Z=1}ab=ac=M.getScrollLeft();if(M.dst.ax){ab=M.bzscroll?M.dst.px+M.bzscroll.getNow()*M.dst.ax:M.newscrollx;ac=ab-ac;if(0>ac&&ab<M.newscrollx||0<ac&&ab>M.newscrollx){ab=M.newscrollx}M.setScrollLeft(ab);ab==M.newscrollx&&(Z+=1)}else{Z+=1}2==Z?(M.timer=0,M.cursorfreezed=!1,M.bzscroll=!1,M.scrollrunning=!1,0>aa?aa=0:aa>M.page.maxh&&(aa=Math.max(0,M.page.maxh)),0>ab?ab=0:ab>M.page.maxw&&(ab=M.page.maxw),ab!=M.newscrollx||aa!=M.newscrolly?M.doScrollPos(ab,aa):M.onscrollend&&M.triggerScrollEnd()):M.timer=C(V)||1}X=void 0===X||!1===X?M.getScrollTop(!0):X;if(M.timer&&M.newscrolly==X&&M.newscrollx==Y){return !0}M.timer&&t(M.timer);M.timer=0;var U=M.getScrollTop(),R=M.getScrollLeft();(0>(M.newscrolly-U)*(X-U)||0>(M.newscrollx-R)*(Y-R))&&M.cancelScroll();M.newscrolly=X;M.newscrollx=Y;M.bouncescroll&&M.rail.visibility||(0>M.newscrolly?M.newscrolly=0:M.newscrolly>M.page.maxh&&(M.newscrolly=M.page.maxh));M.bouncescroll&&M.railh.visibility||(0>M.newscrollx?M.newscrollx=0:M.newscrollx>M.page.maxw&&(M.newscrollx=M.page.maxw));M.dst={};M.dst.x=Y-R;M.dst.y=X-U;M.dst.px=R;M.dst.py=U;var S=Math.round(Math.sqrt(Math.pow(M.dst.x,2)+Math.pow(M.dst.y,2)));M.dst.ax=M.dst.x/S;M.dst.ay=M.dst.y/S;var Q=0,z=S;0==M.dst.x?(Q=U,z=X,M.dst.ay=1,M.dst.py=0):0==M.dst.y&&(Q=R,z=Y,M.dst.ax=1,M.dst.px=0);S=M.getTransitionSpeed(S);W&&1>=W&&(S*=W);M.bzscroll=0<S?M.bzscroll?M.bzscroll.update(z,S):new f(Q,z,S,0,1,0,1):!1;if(!M.timer){(U==M.page.maxh&&X>=M.page.maxh||R==M.page.maxw&&Y>=M.page.maxw)&&M.checkContentSize();var y=1;M.cancelAnimationFrame=!1;M.timer=1;M.onscrollstart&&!M.scrollrunning&&M.onscrollstart.call(M,{type:"scrollstart",current:{x:R,y:U},request:{x:Y,y:X},end:{x:M.newscrollx,y:M.newscrolly},speed:S});V();(U==M.page.maxh&&X>=U||R==M.page.maxw&&Y>=R)&&M.checkContentSize();M.noticeCursor()}},this.cancelScroll=function(){M.timer&&t(M.timer);M.timer=0;M.bzscroll=!1;M.scrollrunning=!1;return M}):(this.doScrollLeft=function(y,Q){var z=M.getScrollTop();M.doScrollPos(y,z,Q)},this.doScrollTop=function(y,Q){var z=M.getScrollLeft();M.doScrollPos(z,y,Q)},this.doScrollPos=function(y,S,R){var Q=y>M.page.maxw?M.page.maxw:y;0>Q&&(Q=0);var z=S>M.page.maxh?M.page.maxh:S;0>z&&(z=0);M.synched("scroll",function(){M.setScrollTop(z);M.setScrollLeft(Q)})},this.cancelScroll=function(){});this.doScrollBy=function(y,R){var Q=0,Q=R?Math.floor((M.scroll.y-y)*M.scrollratio.y):(M.timer?M.newscrolly:M.getScrollTop(!0))-y;if(M.bouncescroll){var z=Math.round(M.view.h/2);Q<-z?Q=-z:Q>M.page.maxh+z&&(Q=M.page.maxh+z)}M.cursorfreezed=!1;z=M.getScrollTop(!0);if(0>Q&&0>=z){return M.noticeCursor()}if(Q>M.page.maxh&&z>=M.page.maxh){return M.checkContentSize(),M.noticeCursor()}M.doScrollTop(Q)};this.doScrollLeftBy=function(y,R){var Q=0,Q=R?Math.floor((M.scroll.x-y)*M.scrollratio.x):(M.timer?M.newscrollx:M.getScrollLeft(!0))-y;if(M.bouncescroll){var z=Math.round(M.view.w/2);Q<-z?Q=-z:Q>M.page.maxw+z&&(Q=M.page.maxw+z)}M.cursorfreezed=!1;z=M.getScrollLeft(!0);if(0>Q&&0>=z||Q>M.page.maxw&&z>=M.page.maxw){return M.noticeCursor()}M.doScrollLeft(Q)};this.doScrollTo=function(y,z){M.cursorfreezed=!1;M.doScrollTop(y)};this.checkContentSize=function(){var y=M.getContentSize();y.h==M.page.h&&y.w==M.page.w||M.resize(!1,y)};M.onscroll=function(y){M.rail.drag||M.cursorfreezed||M.synched("scroll",function(){M.scroll.y=Math.round(M.getScrollTop()*(1/M.scrollratio.y));M.railh&&(M.scroll.x=Math.round(M.getScrollLeft()*(1/M.scrollratio.x)));M.noticeCursor()})};M.bind(M.docscroll,"scroll",M.onscroll);this.doZoomIn=function(y){if(!M.zoomactive){M.zoomactive=!0;M.zoomrestore={style:{}};var S="position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight".split(" "),R=M.win[0].style,z;for(z in S){var Q=S[z];M.zoomrestore.style[Q]=void 0!==R[Q]?R[Q]:""}M.zoomrestore.style.width=M.win.css("width");M.zoomrestore.style.height=M.win.css("height");M.zoomrestore.padding={w:M.win.outerWidth()-M.win.width(),h:M.win.outerHeight()-M.win.height()};F.isios4&&(M.zoomrestore.scrollTop=T(window).scrollTop(),T(window).scrollTop(0));M.win.css({position:F.isios4?"absolute":"fixed",top:0,left:0,zIndex:N+100,margin:0});S=M.win.css("backgroundColor");(""==S||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(S))&&M.win.css("backgroundColor","#fff");M.rail.css({zIndex:N+101});M.zoom.css({zIndex:N+102});M.zoom.css("backgroundPosition","0px -18px");M.resizeZoom();M.onzoomin&&M.onzoomin.call(M);return M.cancelEvent(y)}};this.doZoomOut=function(y){if(M.zoomactive){return M.zoomactive=!1,M.win.css("margin",""),M.win.css(M.zoomrestore.style),F.isios4&&T(window).scrollTop(M.zoomrestore.scrollTop),M.rail.css({"z-index":M.zindex}),M.zoom.css({"z-index":M.zindex}),M.zoomrestore=!1,M.zoom.css("backgroundPosition","0px 0px"),M.onResize(),M.onzoomout&&M.onzoomout.call(M),M.cancelEvent(y)}};this.doZoom=function(y){return M.zoomactive?M.doZoomOut(y):M.doZoomIn(y)};this.resizeZoom=function(){if(M.zoomactive){var y=M.getScrollTop();M.win.css({width:T(window).width()-M.zoomrestore.padding.w+"px",height:T(window).height()-M.zoomrestore.padding.h+"px"});M.onResize();M.setScrollTop(Math.min(M.page.maxh,y))}};this.init();T.nicescroll.push(this)},h=function(v){var w=this;this.nc=v;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=!1;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=-1;this.timer=this.chky=this.chkx=0;this.time=function(){return +new Date};this.reset=function(y,x){w.stop();var z=w.time();w.steptime=0;w.lasttime=z;w.speedx=0;w.speedy=0;w.lastx=y;w.lasty=x;w.lastscrollx=-1;w.lastscrolly=-1};this.update=function(B,z){var E=w.time();w.steptime=E-w.lasttime;w.lasttime=E;var E=z-w.lasty,A=B-w.lastx,y=w.nc.getScrollTop(),x=w.nc.getScrollLeft(),y=y+E,x=x+A;w.snapx=0>x||x>w.nc.page.maxw;w.snapy=0>y||y>w.nc.page.maxh;w.speedx=A;w.speedy=E;w.lastx=B;w.lasty=z};this.stop=function(){w.nc.unsynched("domomentum2d");w.timer&&clearTimeout(w.timer);w.timer=0;w.lastscrollx=-1;w.lastscrolly=-1};this.doSnapy=function(y,x){var z=!1;0>x?(x=0,z=!0):x>w.nc.page.maxh&&(x=w.nc.page.maxh,z=!0);0>y?(y=0,z=!0):y>w.nc.page.maxw&&(y=w.nc.page.maxw,z=!0);z?w.nc.doScrollPos(y,x,w.nc.opt.snapbackspeed):w.nc.triggerScrollEnd()};this.doMomentum=function(B){var A=w.time(),F=B?A+B:w.lasttime;B=w.nc.getScrollLeft();var y=w.nc.getScrollTop(),J=w.nc.page.maxh,G=w.nc.page.maxw;w.speedx=0<G?Math.min(60,w.speedx):0;w.speedy=0<J?Math.min(60,w.speedy):0;F=F&&60>=A-F;if(0>y||y>J||0>B||B>G){F=!1}B=w.speedx&&F?w.speedx:!1;if(w.speedy&&F&&w.speedy||B){var x=Math.max(16,w.steptime);50<x&&(B=x/50,w.speedx*=B,w.speedy*=B,x=50);w.demulxy=0;w.lastscrollx=w.nc.getScrollLeft();w.chkx=w.lastscrollx;w.lastscrolly=w.nc.getScrollTop();w.chky=w.lastscrolly;var z=w.lastscrollx,E=w.lastscrolly,H=function(){var f=600<w.time()-A?0.04:0.02;w.speedx&&(z=Math.floor(w.lastscrollx-w.speedx*(1-w.demulxy)),w.lastscrollx=z,0>z||z>G)&&(f=0.1);w.speedy&&(E=Math.floor(w.lastscrolly-w.speedy*(1-w.demulxy)),w.lastscrolly=E,0>E||E>J)&&(f=0.1);w.demulxy=Math.min(1,w.demulxy+f);w.nc.synched("domomentum2d",function(){w.speedx&&(w.nc.getScrollLeft(),w.chkx=z,w.nc.setScrollLeft(z));w.speedy&&(w.nc.getScrollTop(),w.chky=E,w.nc.setScrollTop(E));w.timer||(w.nc.hideCursor(),w.doSnapy(z,E))});1>w.demulxy?w.timer=setTimeout(H,x):(w.stop(),w.nc.hideCursor(),w.doSnapy(z,E))};H()}else{w.doSnapy(w.nc.getScrollLeft(),w.nc.getScrollTop())}}},p=T.fn.scrollTop;T.cssHooks.pageYOffset={get:function(v,w,f){return(w=T.data(v,"__nicescroll")||!1)&&w.ishwscroll?w.getScrollTop():p.call(v)},set:function(v,w){var f=T.data(v,"__nicescroll")||!1;f&&f.ishwscroll?f.setScrollTop(parseInt(w)):p.call(v,w);return this}};T.fn.scrollTop=function(f){if(void 0===f){var v=this[0]?T.data(this[0],"__nicescroll")||!1:!1;return v&&v.ishwscroll?v.getScrollTop():p.call(this)}return this.each(function(){var w=T.data(this,"__nicescroll")||!1;w&&w.ishwscroll?w.setScrollTop(parseInt(f)):p.call(T(this),f)})};var l=T.fn.scrollLeft;T.cssHooks.pageXOffset={get:function(v,w,f){return(w=T.data(v,"__nicescroll")||!1)&&w.ishwscroll?w.getScrollLeft():l.call(v)},set:function(v,w){var f=T.data(v,"__nicescroll")||!1;f&&f.ishwscroll?f.setScrollLeft(parseInt(w)):l.call(v,w);return this}};T.fn.scrollLeft=function(f){if(void 0===f){var v=this[0]?T.data(this[0],"__nicescroll")||!1:!1;return v&&v.ishwscroll?v.getScrollLeft():l.call(this)}return this.each(function(){var w=T.data(this,"__nicescroll")||!1;w&&w.ishwscroll?w.setScrollLeft(parseInt(f)):l.call(T(this),f)})};var I=function(w){var x=this;this.length=0;this.name="nicescrollarray";this.each=function(y){T.each(x,y);return x};this.push=function(y){x[x.length]=y;x.length++};this.eq=function(y){return x[y]};if(w){for(var v=0;v<w.length;v++){var f=T.data(w[v],"__nicescroll")||!1;f&&(this[this.length]=f,this.length++)}}return this};(function(x,y,w){for(var v=0;v<y.length;v++){w(x,y[v])}})(I.prototype,"show hide toggle onResize resize remove stop doScrollPos".split(" "),function(v,w){v[w]=function(){var x=arguments;return this.each(function(){this[w].apply(this,x)})}});T.fn.getNiceScroll=function(f){return void 0===f?new I(this):this[f]&&T.data(this[f],"__nicescroll")||!1};T.expr[":"].nicescroll=function(f){return void 0!==T.data(f,"__nicescroll")};T.fn.niceScroll=function(w,x){void 0!==x||"object"!=typeof w||"jquery" in w||(x=w,w=!1);x=T.extend({},x);var v=new I;void 0===x&&(x={});w&&(x.doc=T(w),x.win=T(this));var f=!("doc" in x);f||"win" in x||(x.win=T(this));this.each(function(){var y=T(this).data("__nicescroll")||!1;y||(x.doc=f?T(this):x.doc,y=new b(x,T(this)),T(this).data("__nicescroll",y));v.push(y)});return 1==v.length?v[0]:v};window.NiceScroll={getjQuery:function(){return T}};T.nicescroll||(T.nicescroll=new I,T.nicescroll.options=m)});var WorkFlow={init:function(){var flowJson;if($("#flow-json").size()>0&&$("#flow-json").text()!="[]"){flowJson=$("#flow-json").text();var instanceId=$("input[name='content.stateid']").val();var workflowJson=eval("("+flowJson+")");var flowInfo=[];for(var i=0;i<workflowJson[0].length;i++){if(workflowJson[0][i].instanceId==instanceId){flowInfo=workflowJson[0][i];break}}this.bindEvent(flowInfo);this.workFlowStatus.init(flowInfo);$("#current-processing-node-td").show()}else{$("#current-processing-node-td").hide()}},bindEvent:function(b){$("#flow-panel").find(".flow-status").off().on("click",function(c){if($("#flow-status-panel").is(":visible")){$("#flow-status-panel").hide()}else{$("#flow-status-panel").show()}$(document).on("click",function(d){if($(d.target).parents("#flow-status-panel").size()<=0){$("#flow-status-panel").hide()}});c.stopPropagation()});$("#flow-panel").find(".flow-history").off().on("click",function(){var c=true;var h=new Date().getTime();var e=document.getElementsByName("content.stateid")[0].value;var g=document.getElementById("applicationid").value;var d=b.flowName;var f=contextPath+"/portal/H5/dynaform/work/workflow_history.jsp?flowName="+d+"&flowStateId="+e+"&application="+g+"&contentId="+contentId;OBPM.dialog.show({width:850,height:480,url:f,args:{},title:"流程历史",resize:false,close:function(l){}})})},workFlowStatus:{init:function(b){this.renderWorkFlowStatus(b);this.bindEvent()},bindEvent:function(){$("#flow-Collapse").on("shown.bs.collapse",function(){$(this).find(".in").parent().find(".glyphicon").removeClass("glyphicon-menu-down").addClass("glyphicon-menu-up")});$("#flow-Collapse").on("hidden.bs.collapse",function(){$(this).find(".collapse").not(".in").parent().find(".glyphicon").removeClass("glyphicon-menu-up").addClass("glyphicon-menu-down")})},renderWorkFlowStatus:function(d){var f=$("[name='content.stateid']").val();var b=d.flowName;var e={flowCollapse:"<div class='panel panel-default'></div>",flowCollapseBtn:"<div class='panel-heading' role='tab' id='heading'><a data-toggle='collapse' href='#collapse' aria-expanded='true' aria-controls='collapse'><i class='fa fa-angle-double-down'></i></a></div><div id='collapse' class='panel-collapse collapse' role='tabpanel' aria-labelledby='heading'></div>",flowCollapseItem:"<div class='panel-body' data-authorid='{authorid}' style='padding:10px 15px'><span class='flow-name pull-left'>{userFace} <span title='{userName}'>{userName}</span></span><span class='flow-stateLabel pull-right' title='{stateLabel}'>{stateLabel}</span></div>"};$("#flow-Collapse").html("");$("#flow-Collapse").append(e.flowCollapse);var c=$("#flow-Collapse .panel-default");$.each(d.nodes,function(r,m){var p=m.nodeId;var h=m.stateLabel;var g=$("[name='content.author.id']").val();var q=false;if(p!=""&&m.auditors.length>0){$.each(m.auditors,function(t,s){if(s.id==g){q=true}});$.each(m.auditors,function(v,u){var s=Common.Util.getAvatar(u.id);if(s!=""&&s!=undefined){_avatar="<img src ="+s+">"}else{_avatar="<div class='noAvatar'>"+u.name.substr(u.name.length-2,2)+"</div>"}var t=Common.Util.format(e.flowCollapseItem,{authorid:u.id});t=Common.Util.format(t,{userFace:_avatar});t=Common.Util.format(t,{userName:u.name});t=Common.Util.format(t,{stateLabel:h});if(u.id==g){c.prepend($(t).addClass("panel-body-active"))}else{if(q){if(c.find(".panel-body[data-authorid='"+g+"']").size()<=0){c.prepend(t)}else{c.find(".panel-body[data-authorid='"+g+"']").after(t)}}else{c.append(t)}}})}else{if(h!=""){var l=Common.Util.format(e.flowCollapseItem,{authorid:""});l=Common.Util.format(l,{userFace:""});l=Common.Util.format(l,{userName:""});l=Common.Util.format(l,{stateLabel:h});c.append(l)}else{$(".flow-status").hide()}}});if(c.find(".panel-body").size()>3){c.find(".panel-body").each(function(g){if(c.find("#collapse").size()<=0){if(g==2){$(this).after(e.flowCollapseBtn)}}else{c.find("#collapse").append($(this))}})}$(".flow-status-body-other").find(".collapse").addClass("in");$(".flow-status-body-active").find(".collapse").find(".flow-stateLabel").remove()}}};var Common={};Common.Util={cache:{},getAvatar:function(b){if(!this.cache[b]){$.ajax({type:"GET",url:contextPath+"/contacts/getAvatar.action",data:{id:b},async:false,dataType:"json",success:function(c){if(1==c.status){Common.Util.cache[b]=c.data}}})}return this.cache[b]},daysCalc:function(d,t){var l=d.split(/[- :]/);var c=new Date(l[0],l[1]-1,l[2],l[3],l[4],(l[5]!=undefined&&l[5]!=""?l[5]:0));if(!t||t==""){var r=new Date()}else{var r=new Date(t)}var b=r.getTime()-c.getTime();var s=Math.floor(b/(24*3600*1000));var h=b%(24*3600*1000);var p=Math.floor(h/(3600*1000));var g=h%(3600*1000);var f=Math.floor(g/(60*1000));var e=g%(60*1000);var q=Math.round(e/1000);var m={days:s,hours:p,minutes:f,seconds:q};return m},numOfDayCalc:function(d,m){var e=d.split(/[- :]/);var c=new Date(e[0],e[1]-1,e[2]);if(!m||m==""){var g=new Date().getFullYear();var h=new Date().getMonth();var d=new Date().getDate();var l=new Date(g,h,d)}else{var l=new Date(m)}var b=l.getTime()-c.getTime();var f=Math.floor(b/(24*3600*1000));return f},calculateTime:function(p){var g;var d=new Date(p);var l=p.split(/[- :]/);var b=new Date(l[0],l[1]-1,l[2],l[3],l[4]);var c=b.getMonth()+1;var h=b.getDate();var f=b.getHours();var e=b.getMinutes();var m=p.substr(0,p.indexOf(" "));if(Common.Util.numOfDayCalc(m)>2){if(c>=10){g=c+"-"}else{g="0"+c+"-"}if(h>=10){g+=h+" "}else{g+="0"+h}}else{if(Common.Util.numOfDayCalc(m)==2){g="前天 ";if(f>=10){g+=f+":"}else{g+="0"+f+":"}if(e>=10){g+=e}else{g+="0"+e}}else{if(Common.Util.numOfDayCalc(m)==1){g="昨天 ";if(f>=10){g+=f+":"}else{g+="0"+f+":"}if(e>=10){g+=e}else{g+="0"+e}}else{if(Common.Util.numOfDayCalc(m)==0&&Common.Util.daysCalc(p).hours>0){g=Common.Util.daysCalc(p).hours+" 小时前 "}else{if(Common.Util.numOfDayCalc(m)==0&&Common.Util.daysCalc(p).hours<=0&&Common.Util.daysCalc(p).minutes>5){g=Common.Util.daysCalc(p).minutes+" 分钟前 "}else{g="刚刚"}}}}}return g},format:function(e,c){for(var b in c){var d=new RegExp("{"+b+"}","g");e=e.replace(d,c[b])}return e},renderScroll:function(d,c){var e={cursorcolor:"#ccc",cursoropacitymax:1,touchbehavior:false,cursorwidth:"7px",cursorborder:"0",cursorborderradius:"7px",autohidemode:"leave"};var b=$.extend({},e,c);d.niceScroll(b)},getQueryString:function(c,b){var d=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");var e=c.substr(c.indexOf("?")).substr(1).match(d);if(e!=null){return unescape(e[2])}return null},renderPagination:function(id,callback){var $panel=$("#"+id);var $paginationPanel;var _options;var _datasPageCurrent=1;var _datasPageCount;var _datasPageItem;var $form=$("form:eq(0)");if($panel&&$panel.size()>0){$paginationPanel=$panel.find("#pagination-panel");_options=eval("("+$paginationPanel.attr("data-options")+")");_datasPageCurrent=_options._currpage-1;_datasPageCount=_options._totalRowText;_datasPageItem=_options._pagelines;if($panel.find("[name='_currpage']").size()>0){_datasPageCurrent=parseInt($panel.find("[name='_currpage']").val())-1;_datasPageCount=parseInt($panel.find("[name='_rowcount']").val());_datasPageItem=parseInt($panel.find("[name='_pagelines']").val())}}else{$paginationPanel=$("#pagination-panel");_options=eval("("+$paginationPanel.data("options")+")");_datasPageCurrent=parseInt($("[name='_currpage']").val())-1;_datasPageCount=parseInt($("[name='_rowcount']").val());_datasPageItem=parseInt($("[name='_pagelines']").val())}$paginationPanel.append("<div class='pagination-body'></div><div class='pagination-other'></div>");if(_options._isPagination&&_options._isPagination=="true"){if(!callback||typeof callback!="function"){callback=function(){}}if(!_datasPageItem||_datasPageItem==undefined){_datasPageItem=10}$paginationPanel.find(".pagination-body").pagination(_datasPageCount,{current_page:_datasPageCurrent,items_per_page:_datasPageItem,prev_text:"<span class='glyphicon glyphicon-chevron-left'></span>",next_text:"<span class='glyphicon glyphicon-chevron-right'></span>",num_edge_entries:1,num_display_entries:5,callback:callback});$paginationPanel.find("a").on("click",function(){var $this=$(this);var _pageNo=parseInt($("[name='_currpage']").val());var _rowNo=parseInt($("[name='_rowcount']").val());var _lineNo=parseInt($("[name='_pagelines']").val());var _pageCount=Math.ceil(_rowNo/_lineNo);var _pageNum;if(isNaN(_pageNo)||isNaN(_rowNo)||isNaN(_lineNo)){return}if($this.hasClass("prev")){if(_pageNo>1){_pageNum=_pageNo-1}else{return}}else{if($this.hasClass("next")){if(_pageCount>1&&_pageCount>_pageNo){_pageNum=_pageNo+1}else{return}}else{_pageNum=parseInt($(this).text())}}$form.find("[name='_currpage']").val(_pageNum);if(listAction){var $actA=$("#ulHead li[class=active] a");if($actA&&$actA.size()>0){var ind=listAction.indexOf("?");if(ind!=-1){listAction=listAction.substring(0,ind)}listAction+="?appId="+$actA.attr("aria-controls")}$form.attr("action",listAction);$form.submit()}});if(_options._isShowItem&&_options._isShowItem=="true"){var showItem="<div class='showItemPanel'><ul style='display: none;'><li>100条</li><li>50条</li><li>25条</li><li>10条</li></ul><div class='showItemBtn'>"+_datasPageItem+"条 <span class='glyphicon glyphicon-chevron-up'></span></div></div>";$paginationPanel.find(".pagination-other").append(showItem);$paginationPanel.find(".showItemBtn").on("click",function(){$(this).prev("ul").slideToggle("fast")});$paginationPanel.find("li").on("click",function(){var pageLine=parseInt($(this).text());$("[name='_currpage']").val(pageLine);$form.submit()});$(document).on("click",function(e){if($(e.target).closest(".showItemPanel").size()<=0&&$paginationPanel.find(".showItemPanel").find("ul").is(":visible")){$paginationPanel.find(".showItemPanel").find("ul").slideToggle("fast")}})}}if(_options._isShowTotalRow&&_options._isShowTotalRow=="true"){var totalRow="<div class='totalRowPanel'>总条数: "+_options._totalRowText+"</div>";$paginationPanel.find(".pagination-other").append(totalRow)}}};var PermissionType_READONLY=1;var PermissionType_MODIFY=2;var PermissionType_HIDDEN=3;var PermissionType_DISABLED=4;var PermissionType_PRINT=5;function getOtherProps(e){var f=jQuery("[moduleOtherAttrs='"+e+"']")[0],g=f.attributes,b,d="";for(var c=0;c<g.length;c++){b=g[c];if(b.specified&&b.name.toLowerCase()!="moduleotherattrs"&&b.name!="type"&&b.value!=""&&b.name.toLowerCase().indexOf("jquery")==-1){d+=" "+b.name+"='"+b.value+"'"}}jQuery(f).remove("input");return d}function getOtherAttrs(e){var f=e.attributes,b,d="";for(var c=0;c<f.length;c++){b=f[c];if(b.specified&&b.name.toLowerCase()!="moduletype"&&b.name.toLowerCase()!="classname"&&b.name.toLowerCase()!="discript"&&b.name.toLowerCase()!="style"&&b.name.toLowerCase()!="class"&&b.name.toLowerCase()!="value"&&b.name!="type"&&b.value!=""&&b.name.substr(0,1)!="_"&&b.name.toLowerCase().indexOf("jquery")==-1){d+=" "+b.name+"='"+b.value+"'"}}return d}function loadPedding(){jQuery(".ElementDiv").each(function(b){jQuery(this).load(jQuery(this).attr("src"),{index:b},function(){jQuery("[moduleType='pending']").obpmPending()})})}function renderSearchActivePanel(){if($(".search-active-panel").size()>0){if($("#activityTable").find(".comSearchBtn").size()<=0){var d="";if($("[isCommonFilter='true']").size()>0){d='<button type="button" class="btn btn-info comSearchBtn" onclick="modifyActionBack();">查询</button><button type="button" class="btn btn-link search-senior" onclick="isSearch();">高级</button>';var c=$("#searchFormTable").find("[isCommonFilter='true']");c.each(function(){var h=$(this);var f=h.parents("span[id$='_divid']");var m=h.attr("id");var g=h.attr("name");var l=h.attr("discript")?h.attr("discript"):g;var e=h.attr("fieldType");if(e=="RadioField"||e=="CheckboxField"){g=h.data("label")}if(h.attr("type")=="text"){f.find("[isCommonFilter='true']").attr("placeholder",l)}f.before("<span _isCommonFilterID='"+m+"' style='display:none'></span>");f.addClass("form-group");f.prepend('<span data-title style="vertical-align: middle;">'+l+": </span>");$("#activityTable").find(".search-btns").before(f)})}else{d='<button type="button" class="btn btn-info " onclick="isSearch();"><i class="fa fa-search"></i></button>'}$("#activityTable").find(".search-btns").html(d)}else{var b=$(".search-active-panel").find("[isCommonFilter='true']");b.each(function(){var h=$(this);var f=h.parents("span[id$='_divid']");var g=h.attr("name");var l=h.attr("discript")?h.attr("discript"):g;var e=h.attr("fieldType");if(e=="RadioField"||e=="CheckboxField"){g=h.data("label")}if(h.attr("type")=="text"){f.find("[isCommonFilter='true']").attr("placeholder",l)}f.prepend('<span data-title style="vertical-align: middle;">'+l+": </span>")})}}}function jqRefactor(){var c=jQuery("input[moduleType='activityButton']");if(c.size()!=0){c.obpmButton()}var b=$("#activityTable");if(b.find("a.btn").length>0||b.find("button").length>0||c.size()>0||$("#current-processing-node-td").size()>0||$("#activityTable").find(".searchBtn").length>0){if(b.find("a.btn").length==0&&b.find("button").length>0){b.find(".searchDiv").eq(0).css("height","55px")}$("#activity-box-space").height(55)}else{b.hide();$("#activity-box-space").hide()}jQuery("input[moduleType='IncludedView']").filter(function(){return(jQuery(this).parents("div[moduleType='TabNormal']").size()==0&&jQuery(this).parents("div[moduleType='TabNormalHasRefactor']").size()==0)}).obpmIncludedView();jQuery("div[moduleType='TabNormal']").filter(function(){return(jQuery(this).parents("div[moduleType='TabNormal']").size()==0&&jQuery(this).parents("div[moduleType='TabNormalHasRefactor']").size()==0)}).obpmTabNormalField();jQuery("ul[moduleType='TabCollapse']").filter(function(){return(jQuery(this).parents("ul[moduleType='TabCollapse']").size()==0)}).obpmTabCollapseField();jQuery("input[moduleType='formActivityButton']").obpmButtonField();jQuery("span[moduleType='select']").obpmSelectField();jQuery("input[moduleType='input']").obpmInputField();jQuery("textarea[moduleType='textarea']").obpmTextareaField();jQuery("span[moduleType='radio']").obpmRadioField();jQuery("span[moduleType='radiogrid']").obpmRadioGridField();jQuery("span[moduleType='checkbox']").obpmCheckbox();jQuery("span[moduleType='gridcheckbox']").obpmGridCheckbox();jQuery("select[moduleType='department']").obpmDepartmentField();jQuery("input[moduleType='viewDialog']").obpmViewDialog();jQuery("input[moduleType='treeDepartment']").obpmTreeDepartmentField();jQuery("input[moduleType='takePhoto']").obpmTakePhoto();jQuery("select[moduleType='selectAbout']").obpmSelectAboutField();jQuery("input[moduleType='dateinput']").obpmDateField();jQuery("input[moduleType='userfield']").obpmUserfield();jQuery("input[moduleType='suggest']").obpmSuggestField();jQuery("span[moduleType='uploadFile']").obpmUploadField();jQuery("textarea[moduleType='htmlEditor']").obpmHtmlEditorField();jQuery("input[moduleType='fileManager']").obpmFileManager();jQuery("input[moduleType='mapField']").obpmMapField();jQuery("input[moduleType='wordField']").obpmWordField();jQuery("div[moduleType='flowHistoryField']").obpmFlowHistoryField();jQuery("div[moduleType='flowReminderHistoryField']").obpmFlowReminderHistoryField();jQuery("input[moduleType='weixingpsfield']").obpmWeixinGpsField();jQuery("input[moduleType='surveyField']").obpmSurveyField();jQuery("input[moduleType='qrcodefield']").obpmQRCodeField();jQuery("input[moduleType='weixinrecordfield']").obpmWeixinRecord();jQuery("input[moduleType='genericWordField']").obpmGenericWordField();jQuery("input[moduleType='webofficeField']").obpmWebOfficeField();loadPedding();renderSearchActivePanel()}var isRefreshLoading=false;var dy_token=true;function showLoading(){var c=$(parent.document).find("iframe");var b=false;if(c.size()>0){c.each(function(d){if($(this).attr("name")=="display_view"){b=true}})}if(b){}else{jQuery("body").css("overflow","hidden");jQuery("#loadingMask").fadeIn(300)}}function hideLoading(){parent.jQuery("#loadingMask").fadeOut(200);jQuery("body").css("overflow","visible");jQuery("#loadingMask").fadeOut(200)}function refresh_lock(){jQuery("#refresh-loadingDivBack").fadeTo(300,0.4)}function refresh_unlock(){jQuery("#refresh-loadingDivBack").fadeOut(200)}function dy_getFormid(){return formid}function dy_getValuesMap(g,l){jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var f={};var b="";var d=new Array();var m="";var c=$("#"+l);if(c.attr("isSubSearch")=="true"){m=c.parents("#searchFormTableSub").find("#dy_refreshObj")}else{m=jQuery("#_formHtml > #dy_refreshObj")}if(m.length==0){m=jQuery("#dy_refreshObj")}if(m.size()>0){b=m.attr("mapVal")}if(b){d=b.split(";")}if(document.getElementsByName("_selects")){var h=getCheckedListStr("_selects");f._selectsText=(h&&h!=null)?h:""}for(var e=0;e<d.length;e++){f[d[e]]=ev_getValue(d[e])}if($("input[name='parentid']").length>0&&g){f.parentid=$("input[name='parentid']").val()}if($("input[name='application']").length>0){f.application=$("input[name='application']").val()}return f}var FormDoc=FormDoc||{};FormDoc.getFocusObj=function(){var c={tagName:"",name:""};var b=document.activeElement;if(b&&b!=null){c.tagName=b.tagName;c.name=b.name}return c};FormDoc.setFocusObj=function(b){if(b&&b.tagName&&b.name){$(b.tagName+"[name='"+b.name+"']").focus()}};function dy_refresh(actfield){var $dy_refreshObj="";var $actfield=$("#"+actfield);if($actfield.attr("isSubSearch")){$dy_refreshObj=$actfield.parents("#searchFormTableSub").find("#dy_refreshObj")}else{$dy_refreshObj=jQuery("#_formHtml > #dy_refreshObj")}if($dy_refreshObj.length==0){$dy_refreshObj=jQuery("#dy_refreshObj")}var formid=$dy_refreshObj.attr("formid");var docid=$dy_refreshObj.attr("docid");var userid=$dy_refreshObj.attr("userid");var flowid=$dy_refreshObj.attr("flowid");try{if(dy_token){if(typeof FormHelper!="undefined"){dy_token=false;refresh_lock();isRefreshLoading=true;if(document.getElementById("tabid")){var _tabid=document.getElementById("tabid").value}if($actfield.parents(".search-active-panel").length>0){var _viewid=$("input[name='_viewid']").attr("value");FormHelper.refreshSearchForm(_viewid,_tabid,formid,actfield,docid,userid,dy_getValuesMap(true,actfield),flowid,function(str){try{var focusObj=FormDoc.getFocusObj();eval(str);jQuery("#flowprocessDiv").hide();jqRefactor();if($(".basictab").size()>0){var $tab=$(".basictab").find(".current");$tab.trigger("click")}if($(".refreshItem").find("iframe").size()>0){$(".refreshItem").find("iframe").each(function(){var spanHeight=$(this).parent("span").height();$(this).height(spanHeight<400?400:spanHeight)})}$(".refreshItem").removeAttr("style").removeClass("refreshItem");FormDoc.setFocusObj(focusObj)}catch(ex){alert("form: "+ex.message)}refresh_unlock();isRefreshLoading=false;dy_token=true})}else{FormHelper.refresh(_tabid,formid,actfield,docid,userid,dy_getValuesMap(true,actfield),flowid,function(str){try{var focusObj=FormDoc.getFocusObj();eval(str);jQuery("#flowprocessDiv").hide();jqRefactor();if($(".basictab").size()>0){var $tab=$(".basictab").find(".current");$tab.trigger("click")}if($(".refreshItem").find("iframe").size()>0){$(".refreshItem").find("iframe").each(function(){var spanHeight=$(this).parent("span").height();$(this).height(spanHeight<400?400:spanHeight)})}$(".refreshItem").removeAttr("style").removeClass("refreshItem");FormDoc.setFocusObj(focusObj)}catch(ex){alert("form: "+ex.message)}refresh_unlock();isRefreshLoading=false;dy_token=true})}}}}catch(ex){refresh_unlock();isRefreshLoading=false;alert("form: "+ex.message)}}(function(c){function b(h,g){var e=contextPath+"/portal/share/component/onlinetakephoto/onlinetakephoto.jsp?id="+h+"&filePath="+g;var f=jQuery("#"+h);var d=jQuery("#"+h+"_img");OBPM.dialog.show({opener:window.parent.parent,width:455,height:318,url:e,args:{},title:title_onlinetakephoto,close:function(l){if(l==null||l=="undefined"||l==""){}else{f.val(l);d.attr("src","../../.."+l)}}})}c.fn.obpmTakePhoto=function(){return this.each(function(){var s=jQuery(this);var g=s.attr("contextPath");var t=s.attr("value");var e=s.attr("id");var h=s.attr("imgw");var u=s.attr("imgh");var d=s.attr("name");var r=s.attr("_hiddenValue");var f=s.attr("tagName");var p=s.attr("disabled");var m=s.attr("displayType");var q="";var l="";if(m!=PermissionType_HIDDEN){q+="<table style='border:0'><tr><td style='border:0' width='"+h+"'> ";q+="<div class='onlinePreview'>";q+="<img alt='拍照图片' border=0 src='../../.."+t+"' id='"+e+"_img' width='"+h+"' height='"+u+"' />";q+="</div>";q+="</td>";q+="<td style='border:0;valign:botton'>";q+="<input type='hidden' id='"+e+"' name='"+d+"' fieldType='"+f+"'  value = '"+t;q+="'/>";if(m!=PermissionType_DISABLED&&m!="1"){q+="<input type='button'";q+=" class='button_searchdel4' />"}q+="</td>";q+="</tr>";q+="</table>";l=c(q);l.find(".onlinePreview").bind("click",function(){c(this).viewer({navbar:false,hidden:function(){c(this).viewer("destroy")}}).viewer("show")});l.find(".button_searchdel4").bind("click",function(){b(e,t)}).end().replaceAll(s)}else{q+="<span>"+r+"</span>";l=c(q);l.replaceAll(s)}})};c.fn.obpmViewTakePhoto=function(){return this.each(function(){var p=jQuery(this);var f=p.attr("imgw");var t=p.attr("imgh");var m=p.attr("viewReadOnly");var e=p.attr("docId");var s=p.attr("docFormid");var d=p.attr("url");var h=p.attr("fileName");m=(m=="true")?true:false;var q=t/2;var r=jQuery("#obpm_subGridView").size()>0?true:false;var l="<div  class='takePhotoImg' style='position:relative;max-height:50px;max-width:50px;'>";if(m){l+="<img alt='"+h+"' border='0' style='max-height:50px;max-width:50px;' src='"+d+"' />"}else{l+="<a ";if(!r){l+=" href=\"javaScript:viewDoc('"+e+"','"+s+"')\""}l+=" title='"+h+"'>";l+="<img alt='"+h+"' border='0' style='max-height:50px;max-width:50px;' src='"+d+"'/>";l+="</a>"}l+="<div  class='takePhotoIcon' style='display:none;position:absolute;right:0px;top:25px;z-index:100;'><a class='imgClick' href='"+d+"' target='blank'>";l+="<img alt='"+h+"' border='0' src='../../resource/images/picture_go.png' title='点击查看原图' /></a><div>";l+="</div>";var g=c(l);g.mouseover(function(u){u.stopPropagation();jQuery(this).find(".takePhotoIcon").show()}).mouseout(function(u){u.stopPropagation();jQuery(this).find(".takePhotoIcon").hide()});p.replaceWith(g)})}})(jQuery);(function(b){function c(h,g,e){var f=jQuery("#"+h);var d=contextPath+"/portal/share/component/map/form/baiduMap.jsp?type=dialog&applicationid="+g+"&displayType="+e;hiddenDocumentFieldIncludeIframe();OBPM.dialog.show({title:title_map,url:d,args:{fieldID:h,mapData:f.val()},width:1000,height:600,close:function(l){showDocumentFieldIncludeIframe();var m=l;if(l==null||l=="undefined"){}else{f.val(m)}}})}b.fn.obpmMapField=function(){return this.each(function(){var u=jQuery(this);var h=u.attr("id");var e=u.attr("name");var r=u.attr("fieldType");var v=u.attr("value");var f=u.attr("mapLabel");var t=u.attr("application");var p=u.attr("displayType");var d=u.attr("srcEnvironment");var m=u.attr("openType");if(p!=PermissionType_HIDDEN){var s="<input type='hidden' id='"+h+"' name='"+e+"' fieldType='"+r+"'";if(v){s+=" value='"+v+"'"}s+=" />";u.after(b(s));if(m=="dialog"){var l="<table style='width:100%;height:100%;margin:0px;'>";l+="<tr><td style='border:0'>";l+="<input type='button' value='"+f+"' name='btnSelectDept'";if(p==PermissionType_READONLY||p==PermissionType_DISABLED){l+=" disabled='disabled' "}l+=" />";l+="</td>";l+="</tr></table>";var q=b(l);q.find("input").click(function(){c(h,t,p)});u.after(q)}else{var g=encodeURI(encodeURI(h));var w="<iframe name='baidumap' id='baidumap' style='margin:0px;width:100%;height:550px;'";w+="frameborder=0 ";w+=" style=''";w+="src="+d+"/portal/share/component/map/form/baiduMap.jsp?type="+m+"&fieldID="+g+"&applicationid="+t+"&displayType="+p+"";w+=" >";w+="</iframe>";u.replaceWith(b(w))}}u.remove()})}})(jQuery);(function(b){b.fn.obpmCheckbox=function(){return this.each(function(){var r=jQuery(this);var e=r.attr("_id");var d=r.attr("_name");var m=r.attr("_fieldType");var h=r.attr("_displayType");var q=r.attr("_textType");var p=r.attr("_isRefreshOnChanged");var f=r.attr("classname");var v=r.attr("_class");var c=r.attr("_getLayout");p=(p=="true");var g=r.attr("_hiddenValue");var t=r.attr("_discript");t=t?t:d;var s=r.attr("_isCommonFilter");s=(s=="true");var l="";var u=getOtherAttrs(r[0]);l+="<span id='"+e+"' fieldType='"+m+"' data-label='"+d+"'  name='span_"+d+"' discript='"+t+"' isCommonFilter='"+s+"' style='white-space: pre-wrap;'>";l+="<input type='checkbox' value=\"\" name='"+d+"' style='display:none' checked />";r.find("span").each(function(){var x=jQuery(this);var A=x.attr("value");var C=x.attr("text");var w=x.attr("checkedListSize");var y=x.attr("isDef");var z=x.attr("checkedListContains");var B="";A=A?A:"";B+="<input type='checkbox' value=\""+A+"\" text='"+C+"' name='"+d+"' class='"+v+"' isRefreshOnChanged='"+p+"'";if(q&&q.toLowerCase()=="readonly"||h==PermissionType_DISABLED||h==PermissionType_READONLY){B+=" disabled='disabled'"}B+=" style='width:14px;height:14px;";if(h==PermissionType_HIDDEN){B+=";display:none;"}B+="'";if(p){B+=" onclick='dy_refresh(this.id)'"}if(w>0&&z=="true"||(w<=0&&y=="true")){B+=" checked='true'"}B+=" classname='"+f+"' "+u+"";B+=">";B+="<span class='obpm-checkbox-text'";if(h==PermissionType_HIDDEN){B+=" style=';display:none;'"}B+=">"+C+"</span>";if(c!=""&&c.toLowerCase()=="vertical"){B+="<br/>"}l+=B});if(h==PermissionType_HIDDEN){l+="<span>"+g+"</span>"}l+="</span>";r.after(l);r.remove()})};b.fn.obpmGridCheckbox=function(){return this.each(function(){var q=jQuery(this);var d=q.attr("_name");var l=q.attr("_fieldType");var e=q.attr("_id");var f=q.attr("classname");var s=q.attr("_class");var g=q.attr("_displayType");var p=q.attr("_textType");var m=q.attr("_isRefreshOnChanged");var c=q.attr("_getLayout");m=(m=="true");var h="";if(g!=PermissionType_HIDDEN){var r=getOtherAttrs(q[0]);h+="<input type='checkbox' fieldType='"+l+"' id='"+e+"' value='' name='"+d+"' style='display:none' checked />";q.find("span").each(function(){var u=jQuery(this);var x=u.attr("value");var z=u.attr("text");var t=u.attr("checkedListSize");var v=u.attr("isDef");var w=u.attr("checkedListContains");var y="";x=x?x:"";y+="<input type='checkbox' value='"+x+"' name='"+d+"' class='"+s+"'";y+=" fieldType='"+l+"' id='"+e+"' text='"+z+"'"+r;if(p!=null&&p.toLowerCase()=="readonly"||g==PermissionType_DISABLED||g==PermissionType_READONLY){y+=" disabled='disabled'"}if(m){y+=" onclick='dy_view_refresh(this.id)'"}if(t>0&&w=="true"||v=="true"){y+=" checked='true'"}y+=" classname='"+f+"'";y+=">";y+=""+z;y+="</input>";if(c!=""&&c.toLowerCase()=="vertical"){y+="<br/>"}h+=y});q.after(h)}q.remove()})}})(jQuery);(function(b){b.fn.obpmRadioField=function(){return this.each(function(){var s=jQuery(this);var e=s.attr("_id");var d=s.attr("_name");var q=s.attr("_isRefreshOnChanged");var g=s.attr("classname");var x=s.attr("_cssClass");var p=s.attr("_fieldType");var l=s.attr("_displayType");var r=s.attr("_textType");var f=s.attr("_valueList")=="null"?null:s.attr("_valueList");var h=s.attr("_hiddenValue");var c=s.attr("_getLayout");var u=s.attr("_discript");u=u?u:d;var t=s.attr("_isCommonFilter");t=(t=="true");q=(q=="true");var m="<span id='"+e+"' fieldType='"+p+"' data-label='"+d+"' name='span_"+d+"' discript='"+u+"' isCommonFilter='"+t+"'>";var v=getOtherAttrs(s[0]);var w="";s.find("span").each(function(){var y=jQuery(this);var B=y.attr("value");var C=y.attr("get0ption");var A=y.attr("getValue");var z=y.attr("isDef");z=(z=="true");B=B?B:"";m+="<label class='radio-inline'><input text='"+C+"' type='radio' id='"+e+"' value=\""+B+"\" name='"+d+"' class='"+x+"' "+v+" style='width:14px;height:14px; ";if(l==PermissionType_HIDDEN){m+="display:none;"}m+=" '";if(q){m+=" isRefreshOnChanged='true' onclick='dy_refresh(this.id)'"}if(r&&r.toLowerCase()=="readonly"||l==PermissionType_DISABLED||l==PermissionType_READONLY){m+=" disabled='disabled'"}if(f!=null&&f!="null"){if(f.split(";")[0]==A){w=A;m+=" checked ='checked' "}}else{if(z){w=A;m+=" checked ='checked' "}}m+=" classname='"+g+"'";m+=">";m+="<span";if(l==PermissionType_HIDDEN){m+=" style='display:none;'"}else{m+=" style='display:inline-block;'"}m+=">"+C+"";m+="</span>";m+="</label>";if(c!=""&&c.toLowerCase()=="vertical"){m+="<br/>"}});if(l==PermissionType_HIDDEN){m+="<span>"+h+"</span>"}m+="</span>";s.after(m);s.remove()})};b.fn.obpmRadioGridField=function(){return this.each(function(){var q=jQuery(this);var e=q.attr("_id");var d=q.attr("_name");var m=q.attr("_isRefreshOnChanged");var g=q.attr("classname");var t=q.attr("_cssClass");var h=q.attr("_displayType");var p=q.attr("_textType");var f=q.attr("_valueList");var c=q.attr("_getLayout");m=(m=="true");var l="";if(h!=PermissionType_HIDDEN){var r=getOtherAttrs(q[0]);var s="";q.find("span").each(function(){var u=jQuery(this);var x=u.attr("value");var y=u.attr("get0ption");var w=u.attr("getValue");var v=u.attr("isDef");v=(v=="true");l+="<input type='radio' text='"+y+"' id='"+e+"' value='"+x+"' name='"+e+"' class='"+t+"' "+r;if(m){l+=" isRefreshOnChanged='true' onclick='dy_view_refresh(this.id)'"}if(p&&p.toLowerCase()=="readonly"||h==PermissionType_DISABLED||h==PermissionType_READONLY){l+=" disabled='disabled'"}if(f&&w){if(f.split(";")[0]==w){s=w;l+=" checked ='checked' "}}else{if(v){s=w;l+=" checked ='checked' "}}l+=" classname='"+g+"'";l+=">";l+="<span>";l+=""+y+"";l+="</span>";l+="</input>";if(c!=""&&c.toLowerCase()=="vertical"){l+="<br/>"}});q.after(l)}q.remove()})}})(jQuery);var origValue="";function resetWhenNonNumeric(b){var e=/^([\-]{1}[0-9]*|[0-9]*)\.?[0-9]*$/;if(!e.test(b.value)){for(var c=0;c<b.value.length;c++){var d=b.value.charAt(c);if(isNaN(d)){break}}b.value=b.value.substring(0,c);return false}else{origValue=b.value}}(function(b){b.fn.obpmInputField=function(){return this.each(function(){var w=jQuery(this);var s=w.attr("_id");var G=w.attr("_name");var c=w.attr("_textType");var p=w.attr("_isBorderType");var u=w.attr("readOnlyShowValOnly");var f=w.attr("_fieldType");var x=w.attr("_fieldKeyEvent");var h=w.attr("_displayType");var C=w.attr("_hiddenValue");var g=w.attr("_cssClass");var F=w.attr("_title");var B=w.attr("classname");var q=w.attr("_discript");q=q?q:G;var A=w.attr("_isCommonFilter");A=(A=="true");var d=w.attr("placeholder");d=d?d:"";var y=w.attr("style");if(y){y=y.replace(/"([^"]*)"/g,"$1")}var v=w.attr("value");v=v?v:"";var m=w.attr("_isBlank");m=(m=="true");var e=w.attr("_isRefreshOnChanged");e=(e=="true");var E=w.attr("_subGridView");E=(E=="true");if(p=="true"&&u==undefined){u=p}if(c.toLowerCase()=="password"){u=false}var l="";var z="";if(h==PermissionType_HIDDEN||c.toLowerCase()=="hidden"){l="<input type='hidden' discript='"+q+"' name='"+G+"' isRefreshOnChanged='"+e+"' id='"+s+"' value='"+v+"' /><span>"+C+"</span>";this.parentNode.innerHTML=l}else{var r=getOtherAttrs(w[0]);if(v&&v!=""){v=v.replace(/"/g,"&quot;")}else{if(f=="VALUE_TYPE_NUMBER"){v="";d=z="0"}}if(!F){F=""}else{if(F!=""){F=F.replace(/"/g,"&quot;")}}l+="<input discript='"+q+"' class='form-control component-input";l+="' placeholder = '"+d;l+="' isCommonFilter='"+A+"'";if(c.toLowerCase()=="readonly"||h==PermissionType_READONLY||h==PermissionType_DISABLED){l+=" readonly ";if(u=="true"){y+=";display:none;"}}if(c=="tel"){y+=";background:url(../../phone/resource/main/images/tel.png) no-repeat;background-position:right center; background-size:14px 14px;"}l+=" type=";if(!m){if(c.toLowerCase()=="password"){l+='"password"'}else{if(c.toLowerCase()=="hidden"){l+='"hidden"'}else{l+='"text"'}}}else{l+='"text"'}l+=' style="';if(y){l+=y+";"}l+='"';if(f=="VALUE_TYPE_NUMBER"){l+=' onkeyup="resetWhenNonNumeric(this)"';l+=' onkeypress="isNumeric(event)"'}l+=' class="'+g+'"';if(x&&x.toLowerCase()=="enterkey"){}l+=' id="'+s+'" name="'+G+'" classname="'+B+'" fieldType="'+f+'" fieldKeyEvent="'+x+'"  value="'+v+'" title="'+F+'"';l+=' isRefreshOnChanged="'+e+'"'+r;l+=" />";if((c.toLowerCase()=="readonly"||h==PermissionType_READONLY||h==PermissionType_DISABLED)&&u=="true"){l+="<span id='"+G+"_show' class='component-input-span'>"+v.replace(/(\r)*\n/g,"<br/>").replace(/\s/g,"&nbsp;")+"</span>"}var t="";var D=jQuery(t);jQuery(this).after(D);jQuery(l).bind("change",function(){if(e){if(E){dy_view_refresh(this.id)}else{dy_refresh(this.id)}}}).bind("keydown",function(J){var H=J.which;if(H==13){if(x&&x.toLowerCase()=="enterkey"){jQuery("input:text:enabled,textarea:enabled").eq((jQuery("input:text:enabled,textarea:enabled").index(this)+1)).focus()}else{var I=b(J.target).parents("form");if(I.attr("name")!="document_content"){b(J.target).parents("form").submit()}}}}).bind("keyup",function(){if(f=="VALUE_TYPE_NUMBER"){resetWhenNonNumeric(this)}}).replaceAll(w)}})}})(jQuery);(function(b){b.fn.obpmTextareaField=function(){return this.each(function(){var v=jQuery(this);var r=v.attr("_id");var u=v.val();var B=v.attr("_name");var f=v.attr("_cssClass");var y=v.attr("classname");var d=v.attr("_isRefreshOnChanged");var e=v.attr("_fieldType");var l=v.attr("_isBorderType");var t=v.attr("readOnlyShowValOnly");var w=v.attr("style");var g=v.attr("_displayType");var c=v.attr("_textType");var z=v.attr("_hiddenValue");var A=v.attr("_subGridView");var m=v.attr("_discript");m=m?m:B;var x=v.attr("_isCommonFilter");x=(x=="true");d=(d=="true");A=(A=="true");if(w){w=w.replace(/"([^"]*)"/g,"$1")}u=u?u:"";if(l=="true"&&t==undefined){t=l}var h="";var p="";var s="";if(!w){w=""}if(w.indexOf("height")<0){if(w.substr(w.length-1,1)!=";"){p=";height:60px;"}else{p="height:60px;"}w=w+p}if(w.indexOf("width")<0){if(w.substr(w.length-1,1)!=";"){s=";width:200px;"}else{s="width:200px;"}w=w+s}if(g==PermissionType_HIDDEN){h+="<textarea style='display:none' isCommonFilter='"+x+"' discript='"+m+"' name='"+B+"'>"+u+"</textarea><span>"+z+"</span>"}else{if(g==PermissionType_READONLY||c.toLowerCase()=="readonly"||g==PermissionType_DISABLED){if(t=="true"){h+="<textarea class='form-control' isCommonFilter='"+x+"' style='display:none;' discript='"+m+"' name='"+B+"'>"+u+"</textarea>";h+="<div id='"+B+"_show' style='display:inline-block;'>"+u.replace(/(\r)*\n/g,"<br/>").replace(/\s/g,"&nbsp;")+"</div>"}else{h+="<textarea class='form-control' isCommonFilter='"+x+"' readonly='true' discript='"+m+"' name='"+B+"' style='"+w+"'>"+u+"</textarea>"}}else{var q=getOtherAttrs(v[0]);h+="<textarea class='form-control' isCommonFilter='"+x+"' ";h+='id="'+r+'" discript="'+m+'" name="'+B+'" class="'+f+'" classname="'+y+'" fieldType="'+e+'" title="'+u+'"'+q;if(d){if(A){h+=' onchange="dy_view_refresh(this.id)"'}else{h+=' onchange="dy_refresh(this.id)"'}}h+=' style="'+w+p+s;h+='"';h+=">";h+=u;h+="</textarea>"}}v.after(h);v.remove()})}})(jQuery);(function(b){b.fn.obpmSelectField=function(){return this.each(function(){var r=jQuery(this);var p=r.attr("_id");var y=r.attr("_name");var x=r.children().html();var e=r.attr("_isRefreshOnChanged");var d=r.attr("_textType");var g=r.attr("_displayType");var q=r.attr("readOnlyShowValOnly");var f=r.attr("_fieldType");var s=r.attr("style");var w=r.attr("_subGridView");e=(e=="true");w=(w=="true");var v=r.attr("_hiddenValue");var l=r.attr("_discript");l=l?l:y;var u=r.attr("_isCommonFilter");u=(u=="true");var t=r.attr("onchange");var c="";if(s){s=s.replace(/"([^"]*)"/g,"$1")}var h="";if(t){r.removeAttr("onchange");if(t.indexOf("'")>=0||t.indexOf('"')>=0){alert("onchange值不能包含引号！");t=""}}else{t=""}if(w){r.removeAttr("subGridView")}var m=getOtherAttrs(r[0]);h+="<select class='form-control component-select' ";h+=" id='"+p+"' discript='"+l+"' name='"+y+"' isCommonFilter='"+u+"' fieldType='"+f+"' "+m;if(e){if(w){t+=';dy_view_refresh("'+p+'")'}else{t+=';dy_refresh("'+p+'")'}}h+=" onchange='"+t+"'";if(g==PermissionType_READONLY||d.toLowerCase()=="readonly"||g==PermissionType_DISABLED||d.toLowerCase()=="disabled"||d.toLowerCase()=="hidden"||g==PermissionType_HIDDEN){h+=" disabled "}h+=' style="';if(s){h+=s+";"}if(g==PermissionType_READONLY||d.toLowerCase()=="readonly"||g==PermissionType_DISABLED||d.toLowerCase()=="disabled"){if(q=="true"){h+=" display:none;"}}if(d.toLowerCase()=="hidden"||g==PermissionType_HIDDEN){h+=" display:none;"}h+='"';h+=">";r.find("span").each(function(){$option=jQuery(this);var A=$option.attr("isSelected");var C=$option.attr("value");var B=$option.html();var z=$option.attr("cssClass");A=A=="true"?true:false;C=C?C:"";var D='<option value="'+C+'" class="'+z+'"';if(A){D+=' selected="true"';c=B}D+=" >"+B+"</option>";h+=D});h+="</select>";if(g==PermissionType_HIDDEN||d.toLowerCase()=="hidden"){h+="<span id='"+y+"_show' >"+v+"</span>"}else{if(g==PermissionType_READONLY||d.toLowerCase()=="readonly"||g==PermissionType_DISABLED){if(q=="true"){h+="<span id='"+y+"_show' >"+c+"</span>"}}}this.parentNode.innerHTML=h})}})(jQuery);(function(b){b.fn.obpmDepartmentField=function(){return this.each(function(){var t=jQuery(this);var r=t.attr("_id");var A=t.attr("_name");var f=t.attr("_fieldType");var w=t.attr("classname");var d=t.attr("class");var e=t.attr("_isRefreshOnChanged");var z=t.html();var u=t.attr("style");var g=t.attr("_displayType");var s=t.attr("readOnlyShowValOnly");var c=t.attr("_textType");var y=t.attr("_subGridView");var x=t.attr("_hiddenValue");var p=t.attr("_discript");p=p?p:A;var v=t.attr("_isCommonFilter");v=(v=="true");e=(e=="true");y=(y=="true");if(u){u=u.replace(/"([^"]*)"/g,"$1")}var h="";var m=false;var l=false;if(g==PermissionType_READONLY||c.toLowerCase()=="readonly"||g==PermissionType_DISABLED){m=true}if(c.toLowerCase()=="hidden"||g==PermissionType_HIDDEN){l=true}var q=getOtherAttrs(t[0]);h+="<select class='form-control component-select' id ='"+r+"' isCommonFilter='"+v+"' fieldType='"+f+"'";if(m||l){h+=" disabled "}if(l||(m&&s=="true")){u+=";display:none;"}if(u){h+=' style="'+u+';"'}h+="' classname='"+w+"' class='"+d+"' discript='"+p+"' name='"+A+"' ";h+=" isRefreshOnChanged='"+e+"'"+q;if(e){if(y){h+=" onchange='dy_view_refresh(this.id)'"}else{h+=" onchange='dy_refresh(this.id)'"}}h+=">";h+=""+z;h+="</select>";if(m){if(s=="true"){h+="<span id='"+A+"_show'>"+t.find("option:selected").text()+"</span>"}}if(l){h+="<span>"+x+"</span>"}this.parentNode.innerHTML=h})}})(jQuery);(function(b){b.fn.obpmViewDialog=function(){return this.each(function(){var v=jQuery(this);var C=v.attr("name");var B=v.attr("allow");var g=v.attr("mutil");var q=v.attr("selectOne");var u=v.attr("parentid");var s=v.attr("clsName");var z=v.attr("formid");var t=v.attr("fieldid");var w=v.attr("isEdit");var c=v.attr("viewTitle");var x=v.attr("dialogView");var m=v.attr("mapping");var l=v.attr("openType");var A=v.attr("viewType");var d=v.attr("divWidth");var r=v.attr("divHeight");var e=v.attr("isMaximization");var h=v.attr("isRefreshOnChanged");var y=v.attr("caption");var f=v.attr("isDisable");f=(f=="true");h=(h=="true");e=(e=="true");q=(q=="true");g=(g=="true");w=(w=="true");var p="<input style='margin-left:5px;' class='btn btn-default' type=";p+="'button'";if(y&&y.replace(/(^\s*)|(\s*$)/g,"").length>0){p+=" value='"+y+"'"}else{p+=" value='...'"}if(f||!w){p+=" disabled='disabled'"}p+=" />";b(p).bind("click",function(){ViewHelper.convertValuesMapToPage(dy_getValuesMap(),function(H){var G={allow:B,mutil:g,selectOne:q,parentid:u,className:s,formid:z,fieldid:t,isEdit:w};var E=contextPath+"/portal/share/dynaform/view/dialogTemp.jsp";E+="?_viewid="+x;E+="&datetime="+new Date().getTime();E+="&"+jQuery.param(G,true);if(d==null||d==""&&e==false){E+="&_defaultSize=true"}var F=640;var D=400;if(d!=""&&d.length>0){F=d}if(r!=""&&r.length>0){D=r}OBPM.dialog.show({width:F,height:D,url:E,args:{html:new String(H),parent:window},maximization:e,maximized:true,title:c,close:function(J){if(!J){return}var I=jQuery("#document_content").serializeArray();var K=new Object;b.each(I,function(M,L){K[L.name]=L.value});K=b.extend(K,J.params?J.params:{});K.selectedValue=J.selectedValue?J.selectedValue:"";ViewHelper.runViewDialogCallbackscript(K,function(M){var L=J.selectedValue;if(G.selectOne=="false"||G.selectOne==false){getDialogValue(m,L)}else{getDialogSelectValue(m,L)}if(h){dy_refresh(C)}})}})})}).replaceAll(v)})}})(jQuery);(function(b){b.fn.obpmTreeDepartmentField=function(){return this.each(function(){var v=jQuery(this);var c=v.attr("_textType");var x=v.attr("_fieldId");var e=v.attr("_fieldType");var g=v.attr("_cssClass");var u=v.attr("_fieldText");var B=v.attr("_limit");var d=v.attr("_isRefreshOnChanged");var G=v.attr("_name");var f=v.attr("_fieldValue");var F=v.attr("_title");var y=v.attr("style");var E=x+"_text";var s=x;var h=v.attr("_displayType");var t=v.attr("readOnlyShowValOnly");var w=v.attr("_treeTip");var D=v.attr("_subGridView");var p=v.attr("_discript");p=p?p:G;var A=v.attr("_isCommonFilter");A=(A=="true");d=(d=="true");D=(D=="true");var C=v.attr("_hiddenValue");f=f?f:"";y=y?y:"vertical-align: bottom;width: auto;height: 34px;display: inherit;margin-right:4px;";var l="";var m=false;var r=getOtherAttrs(v[0]);l+="<textarea disabled ";l+=" id='"+E+"'";l+=" name='show_"+G+"'";l+=" discript='"+p+"'";l+=" class='form-control "+g+"'";l+=" isCommonFilter='"+A+"'";l+=" fieldType='"+e+"'";l+=r;if(c.toLowerCase()=="hidden"||h==PermissionType_HIDDEN){y+=";display:none;"}if(h==PermissionType_READONLY||c.toLowerCase()=="readonly"||h==PermissionType_DISABLED){m=true;if(t=="true"){y+=";display:none;"}}if(y){l+=" style='"+y+"' "}l+=" >"+u+"</textarea>";l+="<input type='hidden' id='"+s+"'";l+=" name='"+G+"'";l+=" discript='"+p+"'";l+=" fieldType='"+e+"'";l+=" value='"+f+"'";l+=" />";if(c.toLowerCase()!="hidden"&&h!=PermissionType_HIDDEN){if(!(m&&t=="true")){l+="<span class='btn btn-default'";var z="{textField:'"+E+"',valueField:'"+s+"',limit:'"+B+"',callback:"+(d?(D?"dy_view_refresh":"dy_refresh"):"''")+",readonly:"+m+"}";var q='jQuery("#'+E+'").val("");jQuery("#'+E+'").attr("title","");jQuery("#'+s+'").attr("value","");'+(d?(D?'dy_view_refresh("'+s+'")':'dy_refresh("'+G+'")'):"");if(!m){l+=" onclick=\"showDepartmentSelect('actionName',"+z+')"';l+=" style='cursor: pointer;margin-right:4px;'"}else{l+=" style='cursor: not-allowed;color:#ccc;margin-right:4px;'"}l+=" title='"+w+"'";l+=" >添加</span>";l+="<span class='btn btn-default'";if(!m){l+=" onclick='"+q+"'";l+=" style='cursor: pointer;margin-right:4px;'"}else{l+=" style='cursor: not-allowed;color:#ccc;margin-right:4px;'"}l+=" title='清除'> 清除 </span>"}}if(m){if(t=="true"){l+="<span id='"+G+"_show'>"+u+"</span>"}}if(c.toLowerCase()=="hidden"||h==PermissionType_HIDDEN){l+="<span>"+C+"</span>"}this.parentNode.innerHTML=l})}})(jQuery);(function(b){b.fn.obpmUserfield=function(){return this.each(function(){var A=jQuery(this);var x=A.attr("_id");var K=A.attr("_name");var f=A.attr("_fieldType");var h=A.attr("class");var z=A.attr("value");var u=A.attr("_getFieldValue");var q=A.attr("_limitSum");var e=A.attr("_isRefreshOnChanged");var c=A.attr("_roleid");var l=A.attr("_selectUser");var t=A.attr("_add");var p=A.attr("_clearlabel");var H=A.attr("_subGridView");var I=A.attr("_selectMode");var m=A.attr("_displayType");var y=A.attr("readOnlyShowValOnly");var d=A.attr("_textType");var G=A.attr("_hiddenValue");var s=A.attr("_discript");s=s?s:K;var F=A.attr("_isCommonFilter");F=(F=="true");var C=A.attr("style");if(C){C=C.replace(/"([^"]*)"/g,"$1")}z=z?z:"";f=f?f:"";h=h?h:"";z=z?z:"";u=u?u:"";q=q?q:"";e=(e=="true");H=(H=="true");c=c?c:"";l=l?l:"";t=t?t:"";p=p?p:"";I=I?I:"";m=m?m:"";d=d?d:"";G=G?G:"";C=C?"style='"+C+";'":"style='vertical-align: bottom;width: auto;height: 34px;margin-right:4px; display:inline-block;'";var r=false;var g="";var w=getOtherAttrs(A[0]);if(m==PermissionType_READONLY||d.toLowerCase()=="readonly"||m==PermissionType_DISABLED){r=true}g+="<input type='hidden' id='"+x+"' isCommonFilter='"+F+"' discript='"+s+"' name='"+K+"' value='"+u+"' fieldType='"+f+"' />";if(d.toLowerCase()=="hidden"||m==PermissionType_HIDDEN){g+="<input class='form-control' type='hidden'"}else{g+="<textarea class='form-control' type='text' readonly "}if(r){g+=" disabled='disabled'"}g+=C;g+=" isRefreshOnChanged='"+e+"'";g+=" id='"+x+"_text' class='"+h+"'  filetype='userfield' fieldtype='"+f+"' discript='"+s+"' name='"+K+"_text' "+w;if(z){g+=" title='"+bulitTitle(z)+"'"}g+=" >";if(z&&d.toLowerCase()!="hidden"&&m!=PermissionType_HIDDEN){g+=z}g+="</textarea>";var J="";if(d.toLowerCase()!="hidden"&&m!=PermissionType_HIDDEN){if(!(r&&y=="true")){var E="{textField:'"+x+"_text',valueField:'"+x+"',limitSum:'"+q+"',selectMode:'"+I+"',callback:'"+(e?(H?'dy_view_refresh("'+x+'")':'dy_refresh("'+K+'")'):"")+"',readonly:"+r+"}";var v='jQuery("#'+x+'_text").val("");jQuery("#'+x+'_text").attr("title","");jQuery("#'+x+'").attr("value","");'+(e?(H?'dy_view_refresh("'+x+'")':'dy_refresh("'+K+'")'):"");J+="<span class='btn btn-default'";if(!r){J+=" onclick=showUserSelectNoFlow('actionName',"+E+",'"+c+"')"}if(!r){J+=" style='margin-right:4px;'"}else{J+=" style='color:#ccc;cursor:not-allowed;margin-right:4px;'"}J+=" title='"+l+"'>"+t+" </span>";J+="<span class='btn btn-default'";if(!r){J+=" onclick='"+v+"'"}if(!r){J+=" style='margin-right:4px;'"}else{J+=" style='color:#ccc;cursor:not-allowed;margin-right:4px;'"}J+=" title='"+p+"'> "+p+" </span>"}}if(m==PermissionType_HIDDEN){J+="<span>"+G+"</span>"}if(r&&y=="true"){var D="<span style='display:none;'>"+g+J+"</span><span id='"+K+"_show'>"+z+"</span>";A.after(D)}else{var B="<div style='min-width: 336px;'>"+g+J+"</div>";A.after(B)}A.remove()})}})(jQuery);function bulitTitle(c){if(c!=null&&c!=""){var e=c.split(";");var d="";for(var b=0;b<e.length;b++){if(b!=0&&b%10==0){d+="\n"}d+=e[b]+";"}return d==""?d:d.substring(0,d.length-1)}return""}(function(b){b.fn.obpmPending=function(){return this.each(function(){var h=jQuery(this);var d=h.attr("id");var m=h.attr("formId");var l=h.attr("summaryCfgId");var c=h.attr("Summary");var f=h.attr("isread");f=(f=="true");var g="";var e="";var p="";if(f){e="pd";p="16x16_0700/pencil";alt="己读"}else{e="pdread";p="16x16_0380/email_edit";alt="未读"}g+="<a title='"+alt+"' class='"+e+"' href=\"javaScript:viewDoc('"+d+"', '"+m+"','"+l+"')\" style='background:url(\"../../lib/icon/"+p+".png\") no-repeat;display: block;background-position: 0 50%;padding-left: 20px;margin-bottom:5px;'>";g+="&nbsp;"+c+"&nbsp;";g+="</a>";jQuery(g).replaceAll(h)})}})(jQuery);(function(b){b.fn.obpmIncludedView=function(){return this.each(function(){var x=jQuery(this);var u=x.attr("id");var m=x.attr("isRefreshOnChanged");var r=x.attr("getName");var v=x.attr("userType");var y=x.attr("action");var l=x.attr("application");var f=x.attr("_viewid");var d=x.attr("_fieldid");var h=x.attr("_opentype");var A=x.attr("isRelate");var w=x.attr("parentid");var g=x.attr("divid");var e=x.attr("getEditMode");var t=x.attr("fixation");var B=x.attr("fixationHeight");var s="";if(t==true||t=="true"){s="height:"+B+";"}else{}v=(v=="true");e=(e=="true");m=(m=="true");var q="";if(h==1||h==277){q+="<div id='"+u+"' getName='"+r+"' fixation='"+t+"' fixationHeight='"+B+"' name='display_view' waterMark='"+g+"_waterMark' width='100%' height='100%' type='includedView' style='background: #f6f7fb;padding: 15px;border:1px solid #dddddd;' ";if(v){q+=" _src='../view/preView.action";q+="?application="+l+"";q+="&_skinType="+x.attr("skinType")+""}else{q+=" _src='../view/";q+=""+y+"";q+="?application="+l+""}q+="&_viewid="+f+"";q+="&_fieldid="+d+"";q+="&_opentype="+h+"";q+="&parentid="+w+"";q+="&isRelate="+A+"";q+="&divid="+g+"";if(e){q+="&isedit=false"}if(m){q+="&refreshparent=true"}q+="'";q+=" isRefreshOnChanged='"+m+"'";q+=" style='"+s+"overflow:auto;'></div>";x.attr("moduleType","IncludedView_backup");var p=b(q);b.ajax({type:"POST",url:p.attr("_src"),async:false,dataType:"html",data:{},context:p,success:function(E){var C=b("<div></div>").append(E);var D=C.find("form");var F=f+"_params";var G=b("<div></div>").attr("id",F).attr("_action",D.attr("action")).css("display","none");b.each(D.serializeArray(),function(){G.append("<span name='"+this.name+"'>"+this.value+"</span>")});b(this).append(G);D.find("input[type!=button],select,textarea").not("input[name='_jumppage']").each(function(){if(!b(this).attr("moduleType")){b(this).remove()}});D.after(D.html()).remove();b(this).append(C.html()).insertAfter(x);if(typeof(initDispComm)=="function"){initDispComm();DisplayView.bindEvent(b(this));DisplayView.displayWaterMark(b(this))}}})}else{q+="<iframe id='"+u+"' getName='"+r+"' fixation='"+t+"' fixationHeight='"+B+"' name='display_view' width='100%' height='100%' frameborder='0' ";if(v){q+=" src='../view/preView.action";q+="?application="+l+"";q+="&_skinType="+x.attr("skinType")+""}else{q+=" src='../view/";q+=""+y+"";q+="?application="+l+""}q+="&_viewid="+f+"";q+="&_fieldid="+d+"";q+="&_opentype="+h+"";q+="&parentid="+w+"";q+="&isRelate="+A+"";q+="&divid="+g+"";if(e){q+="&isedit=false"}if(m){q+="&refreshparent=true"}q+="'";q+=" isRefreshOnChanged='"+m+"'";q+=" style='"+s+"overflow:auto;'></iframe>";var c=this.parentNode;c.innerHTML=q;jQuery(c).find("iframe").bind("save",function(){var C=this;win=C.contentWindow||C.contentDocument.parentWindow;if(win&&win.doSave){win.doSave()}});if(m){function z(){var D=jQuery("#"+u);var C=D.attr("getName");if(D[0].contentWindow.document.readyState=="complete"){setTimeout(function(){D.unbind("load");D.bind("load",function(){dy_refresh(C)})},500)}else{setTimeout(function(){z()},500)}}setTimeout(function(){z()},500)}}})}})(jQuery);(function(b){b.fn.obpmWordField=function(){return this.each(function(){var A=jQuery(this);var I=A.attr("name");var z=A.attr("id");var t=A.attr("getItemValue");var u=A.attr("getId");var c=A.attr("wordid");var x=A.attr("getOpenTypeEquals");var g=A.attr("showWord");var e=A.attr("secondvalue");var F=A.attr("docgetId");var p=A.attr("docgetFormname");var l=A.attr("openType");var r=A.attr("displayType");var D=A.attr("saveable");var q=A.attr("isSignature");var C=A.attr("filename");var f=A.attr("_docid");var E=A.attr("_type");var G=A.attr("fieldname");var w=A.attr("formname");var m=A.attr("content.versions");var h=A.attr("application");var d=A.attr("_isEdit");var y=A.attr("signature");var H=(r==PermissionType_READONLY||r==PermissionType_DISABLED);var B={filename:C,opinion:[]};if(t&&t!=""){var v=b.parseJSON(t);if(typeof(v.filename)=="string"){C=v.filename;B=v}else{C=t;B.filename=C}}t=JSON.stringify(B);D=(D=="true");q=(q=="true");var s="";if(r!=PermissionType_HIDDEN){if(H){d=1}if(l&&l=="2"||l=="3"){s+="<input type='hidden' name='"+I+"' id='"+u+"' value='"+t+"' />";s+="<button class='button-class' type='button'";if(r==PermissionType_READONLY){s+=" readonly"}s+=">";s+=" <img src='../../share/images/view/word.gif'></img>";s+="</button>"}else{s+="<input type='hidden'  name='"+I+"' id='"+u+"' value='"+t+"' />";s+="<iframe fieldName='"+I+"' id='"+u+"' ";s+=" name='word' frameborder='0' width='100%' height='645px' scrolling='no' style='overflow:visible;z-index:-1px;' _type='word' ";s+=" src='"+contextPath+"/portal/dynaform/document/newword.action?id="+u+"";s+="&filename="+C+"";s+="&_docid="+f+"";s+="&_type="+E+"";s+="&fieldname="+G+"";s+="&formname="+w+"";s+="&content.versions="+m+"";s+="&application="+h+"";s+="&_isEdit="+d+"";s+="&isSignature="+q+"";s+="&isOnlyRead="+H+"";s+="&signature="+y+"'";s+=" ></iframe>"}if(l&&l=="2"||l=="3"){b(s).bind("click",function(){var J="/portal/dynaform/document/newword.action?id="+u;J+="&filename="+C+"";J+="&_docid="+f;J+="&_type="+E;J+="&fieldname="+G;J+="&formname="+w;J+="&content.versions="+m;J+="&application="+h;J+="&_isEdit="+d;J+="&isSignature="+q;J+="&isOnlyRead="+H;J+="&signature="+y;J+="&_opentype="+l;J+="&saveable="+D;showWordDialog(g,J,"WordControl",F,p,u,l,r,D,H,y,(q?true:false))}).replaceAll(A)}else{b(s).replaceAll(A)}}else{b(s).replaceAll(A)}})}})(jQuery);(function($){function _init(t){var options=_parseOptions(t);var displayType=options.displayType;var v=t.val();var panle="";var html="";var url=contextPath+"/portal/share/component/webofficeField/vendor/content.jsp?jsessionid="+jsessionid+"&FileType=.doc&fullPath="+options.fullPath;url+="&id="+options.id;url+="&saveable="+options.saveable+"";url+="&applicationId="+options.applicationId;url+="&fileType="+options.fileType;url+="&path="+options.path;url+="&fileName="+options.fileName;url+="&signature="+options.signature;url+="&showTrace="+options.showTrace;url+="&addTemplate="+options.addTemplate;url+="&addWaterMark="+options.addWaterMark;if(options.openType=="3"){html+="<button class='button-class' type='button'";if(displayType==PermissionType_READONLY){html+=" readonly"}html+=">";html+=" <img src='../../share/images/view/word.gif'></img>";html+="</button>";panel=$(html);panel.bind("click",function(){_open(url)})}else{if(options.openType=="1"){;var targetUrl=url;if(!_isIE()){targetUrl=contextPath+"/portal/share/component/webofficeField/vendor/preview.jsp?jsessionid="+jsessionid+"&FileType=.doc&fullPath="+options.fullPath;targetUrl+="&id="+options.id;targetUrl+="&saveable="+options.saveable+"";targetUrl+="&applicationId="+options.applicationId;targetUrl+="&fileType="+options.fileType;targetUrl+="&path="+options.path;targetUrl+="&fileName="+options.fileName;targetUrl+="&signature="+options.signature;targetUrl+="&showTrace="+options.showTrace;targetUrl+="&addTemplate="+options.addTemplate;targetUrl+="&addWaterMark="+options.addWaterMark;targetUrl+="&showName="+options.name}html+="<iframe fieldName='"+options.name+"' id='"+options.id+"' ";html+=" name='iframe_"+options.name+"' frameborder='0' width='100%' height='645px' scrolling='no' style='overflow:visible;z-index:-1px;' ";html+=" src='"+targetUrl+"' ></iframe>";panel=$(html)}}panel.insertAfter(t);return panel}function _isIE(){if(!!window.ActiveXObject||"ActiveXObject" in window){return true}else{return false}}function _open(aurl){$.ajax({type:"get",async:false,url:"http://127.0.0.1:9588/LongListen?id=111",jsonp:"hookback",dataType:"jsonp",success:function(data){_startBrowser(aurl,1)},error:function(){alert("金格浏览器没有安装,请下载安装！");window.open(mHttpUrl+contextPath+"/portal/share/component/webofficeField/vendor/KGBrowserV1.0.0.72.msi")}});var head=document.head||$("head")[0]||document.documentElement;var script=$(head).find("script")[0];script.onerror=function(evt){alert("金格浏览器没有安装,请下载安装！");window.open(mHttpUrl+contextPath+"/portal/share/component/webofficeField/vendor/KGBrowserV1.0.0.72.msi");if(script.parentNode){script.parentNode.removeChild(script)}var src=script.src||"";var idx=src.indexOf("hookback=");if(idx!=-1){var idx2=src.indexOf("&");if(idx2==-1){idx2=src.length}var hookback=src.substring(idx+13,idx2);delete window[hookback]}}}function _link(url,skin){var link="KGBrowser://$link:<%=mHttpUrl%>"+url+"$skin="+skin+"$tabshow=1";location.href=link;_connect()}function _startBrowser(weburl,skin){urlString="http://127.0.0.1:9588/StartBrowser?weburl="+mHttpUrl+weburl+"$skin="+skin+"$tabshow=1";$.ajax({type:"get",async:false,url:urlString,jsonp:"hookback",dataType:"jsonp",success:function(data){var jsonobj=eval(data);_connect()},error:function(){}})}function _connect(){$.ajax({type:"get",async:false,url:"http://127.0.0.1:9588/LongListen?id=111",jsonp:"hookback",dataType:"jsonp",success:function(data){var jsonobj=eval(data);if(jsonobj.ret=="save"){setTimeout("location.reload();",100)}if(jsonobj.ret=="returnlist"){setTimeout("location.reload();",100)}else{if(jsonobj.ret=="none"){_connect()}}},error:function(a,b,c){}})}function _bindEvents(t){}function _parseOptions(t){var options={};options.id=t.attr("id");options.name=t.attr("name");options.value=t.data("itemValue");options.formName=t.data("formName");options.docId=t.data("docId");options.fieldId=t.data("fieldId");options.openType=t.data("openType");options.displayType=t.data("displayType");options.saveable=t.data("saveable");options.applicationId=t.data("application");options.path=t.data("path");options.fullPath=t.data("fullPath");options.fileName=t.data("fileName");options.showName=t.data("showName");options.fileType=t.data("fileType");options.signature=t.data("signature");options.showTrace=t.data("showTrace");options.addTemplate=t.data("addTemplate");options.addWaterMark=t.data("addWaterMark");return options}$.fn.obpmWebOfficeField=function(options,param){if(typeof options=="string"){return $.fn.obpmWebOfficeField.method[options](this,param)}options=options||{};return this.each(function(){var t=$(this);var state=t.data("webOfficeField");if(state){$.extend(state.options,options)}else{var r=_init(t);state=t.data("webOfficeField",{options:$.extend({},$.fn.obpmWebOfficeField.defaults,_parseOptions(t),options),panel:r});_bindEvents(t)}})},$.fn.obpmWebOfficeField.defaults={id:"",name:undefined},$.fn.obpmWebOfficeField.method={setValue:function(jq,value){},getValue:function(jq){}}})(jQuery);(function(l){function h(r){var p=f(r);var m;if(p.displayType!=PermissionType_HIDDEN){if(p.openType&&p.openType=="3"){var q=[];q.push('<div  id="genericWordField_map_container_'+p.id+'"></div>');panel=l(q.join(""));panel.insertAfter(r);c(p,panel);return panel}else{var q=[];var s=e(p);q.push('<div style="'+s+'" id="genericWordField_map_container_'+p.id+'"></div>');panel=l(q.join(""));panel.insertAfter(r);d(p,panel);return panel}}}function d(q,m){var p="../../share/common/preview/preview.jsp";p+="?applicationId="+q.application+"";p+="&path="+q.fullPath+"";p+="&name="+q.fileName+"";p+="&showName="+q.showName+"";p+="&fileType=.doc";p+="&isOpenCloseBtn=false";p+="&isShowDocName=false";p+="&curEditUserId="+WebUser.id;p+="&action="+q.action;var r="";r+="<iframe fieldName='"+q.name+"' id='"+q.id+"' ";r+=" name='word' frameborder='0' width='100%' height='100%' scrolling='no' style='overflow:visible;z-index:1px;' _type='word' ";r+=" src='"+p+"'";r+=" ></iframe>";m.append(r)}function c(p,m){var q="";q+="<input type='hidden' fieldName='"+p.name+"' id='"+p.id+"' value='"+p.getItemValue+"' />";q+="<button class='button-class' type='button'";q+=">";q+=" <img src='../../share/images/view/genericword.jpg'></img>";q+="</button>";m.append(q);l(m).find("button").bind("click",function(){var r="../share/common/preview/preview.jsp";r+="?applicationId="+p.application+"";r+="&path="+p.fullPath+"";r+="&name="+p.fileName+"";r+="&showName="+p.showName+"";r+="&fileType=.doc";r+="&isOpenCloseBtn=false";r+="&isShowDocName=false";r+="&curEditUserId="+WebUser.id;if(p.displayType==PermissionType_READONLY){r+="&action=readOnly"}else{r+="&action="+p.action+""}b("word编辑对话框",r)})}function g(p){var m=p.data("genericWordField").panel;m.find(".refresh").on("click",function(q){q.preventDefault();q.stopPropagation();m.find(".address-text").html(" &nbsp;");getLocation(p)});m.find(".location").on("click",function(q){q.preventDefault();q.stopPropagation();openLocation(p)})}function f(p){var m={};m.id=p.attr("id");m.name=p.attr("name");m.value=p.data("itemValue");m.formName=p.data("formName");m.docId=p.data("docId");m.fieldId=p.data("fieldId");m.openType=p.data("openType");m.displayType=p.data("displayType");m.saveable=p.data("saveable")=="true";m.isSignature=p.data("isSignature")=="true";m.applicationId=p.data("application");m.fullPath=p.data("fullPath");m.fileName=p.data("fileName");m.showName=p.data("showName");m.fileType=p.data("fileType");m.action=p.data("action");return m}l.fn.obpmGenericWordField=function(m,p){if(typeof m=="string"){return l.fn.obpmGenericWordField.method[m](this,p)}m=m||{};return this.each(function(){var q=l(this);var u=q.data("genericWordField");if(u){l.extend(u.options,m)}else{var s=h(q);u=q.data("genericWordField",{options:l.extend({},l.fn.obpmGenericWordField.defaults,f(q),m),panel:s});g(q)}})},l.fn.obpmGenericWordField.defaults={id:"",name:undefined},l.fn.obpmGenericWordField.method={setValue:function(p,m){},getValue:function(m){}};function b(p,m){wx="900px";wy="600px";OBPM.dialog.show({width:1200,height:600,url:m,title:p,close:function(q){}})}function e(q){var p="#"+q.fieldId+"_divid";var u=l(p).parent();var s="1000px";var m="500px";try{s=u.width()+"px";m=u.height()+"px"}catch(t){}var r="width:"+s+";height:"+m+";min-width:1000px;min-height:500px;overflow:auto";return r}})(jQuery);(function(d){var c={SHOW_MODE_TEXT:"text",SHOW_MODE_DIAGRAM:"diagram",SHOW_MODE_TEXT_AND_DIAGRAM:"textAndDiagram"};function b(g){var e=g.attr("_name");var h=g.attr("_discript");h=h?h:e;var f=[];f.push("<div class='field-title'>"+h+"</div><table class='component-flowhistory' cellSpacing='0' cellPadding='1' width='100%' align='center' style='border:solid #cccccc;border-width:1px 0px 0px 1px;'><tbody>");g.find("table tr").each(function(l){var m=jQuery(this);if(l==0){f.push("<thead>");f.push("<tr style='line-height:40px;'>");m.children().each(function(){var p=jQuery(this);f.push("<th style='font-size: 14px;text-align:center;border:solid #cccccc;border-width:0px 1px 1px 0px;background-color:#EFF0F1;width="+p.attr("width")+"' >");f.push(p.text()+"</th>")});f.push("</tr></thead>")}else{f.push("<tr style='line-height:22px;'>");m.children().each(function(){var q=jQuery(this);f.push("<td style='font-size: 14px;border:solid #cccccc;border-width:0px 1px 1px 0px;text-align:center;'>");f.push("<div style='margin:0px;padding:0px;border:0px;word-wrap:break-word; word-break:break-all;white-space:pre-wrap;text-align:left;'>");f.push(q.text()?q.text():"&nbsp;");if(q.hasClass("attitude")&&q.find("span").length==1){var p=q.find("span").data("datas");f.push("<a class='signatureImage' data-image='");f.push("data:"+p.type+","+p.data);f.push("' title='查看大图' >");f.push("<img height='32px' src='");f.push("data:"+p.type+","+p.data);f.push("' >");f.push("</a>")}f.push("</div>");f.push("</td>")});f.push("</tr>")}});f.push("</tbody></table>");return f.join("")}d.fn.obpmFlowHistoryField=function(){return this.each(function(){var m=jQuery(this);var h=m.attr("_name");var g=m.attr("showMode");var f=m.attr("flowDiagram");var l=[];l.push("<div name='"+h+"' style='list-style-type:none;margin-left: 3px;margin-right: 3px;margin-top: 3px;margin-bottom: 3px;'>");if(g==c.SHOW_MODE_TEXT){l.push("<li>"+b(m)+"</li>")}else{if(g==c.SHOW_MODE_DIAGRAM){l.push("<li><img src='"+f+"' /></li>")}else{if(g==c.SHOW_MODE_TEXT_AND_DIAGRAM){l.push("<li><img src='"+f+"' /></li>");l.push("<li>"+b(m)+"</li>")}}}l.push("</div>");var e=d(l.join(""));e.find(".signatureImage").on("click",function(){var r=d(this);var q=r.data("image");if(d("body").find("#signatureImage-preview").size()<=0){d("body").append("<div id='signatureImage-preview' style='position: fixed;top: 0px;bottom: 0px;left: 0px;right: 0px;background: rgba(0, 0, 0, 0.5);z-index: 1000;'><div class='signatureImage-panel' style='display: table;width: 100%;height: 100%;text-align: center;'><div class='signatureImage-pic' style='display: table-cell;vertical-align: middle;'><img title='点击关闭' style='background: #fff;'/></div></div></div>")}var p=d("body").find("#signatureImage-preview");p.find("img").attr("src",q);p.show()});d("body").on("click","#signatureImage-preview",function(){var p=d(this);p.hide()});m.replaceWith(e)})}})(jQuery);(function(f){function e(m){var l=c(m);var g=f('<div name="'+l.name+'" id="flowReminderHistoryField_container_'+l.id+'" style="list-style-type:none;margin-left: 3px;margin-right: 3px;margin-top: 3px;margin-bottom: 3px;"></div>');var p=l.questions;var h=l.displayType;f(b(m)).appendTo(g);m.replaceWith(g);return g}function b(l){var m=f(l);var g=m.data("name");var p=m.data("discription");p=p?p:g;var h=[];h.push("<div class='field-title'>"+p+"</div><table cellSpacing='0' cellPadding='1' width='100%' align='center' style='border:solid #cccccc;border-width:1px 0px 0px 1px;'><tbody>");m.find("table tr").each(function(q){var r=jQuery(this);if(q==0){h.push("<thead>");h.push("<tr style='line-height:22px;'>");r.children().each(function(){var s=jQuery(this);h.push("<th style='text-align:center;font-family: Arial;border:solid #cccccc;border-width:0px 1px 1px 0px;padding:10px;background-color:#EFF0F1;width="+s.attr("width")+"' >");h.push(s.text()+"</th>")});h.push("</tr></thead>")}else{h.push("<tr style='line-height:22px;'>");r.children().each(function(){var s=jQuery(this);h.push("<td style='font-family: Arial;border:solid #cccccc;border-width:0px 1px 1px 0px;text-align:center;'>");h.push(s.text()?s.text():"&nbsp;");h.push("</td>")});h.push("</tr>")}});h.push("</tbody></table>");return h.join("")}function d(g){}function c(h){var g={};g.id=h.attr("id");g.name=h.attr("data-name");g.discription=h.data("discription");return g}f.fn.obpmFlowReminderHistoryField=function(g,h){if(typeof g=="string"){return f.fn.obpmFlowReminderHistoryField.method[g](this,h)}g=g||{};return this.each(function(){var l=f(this);var p=l.data("flowReminderHistoryField");if(p){f.extend(p.options,g)}else{var m=e(l);p=l.data("flowReminderHistoryField",{options:f.extend({},f.fn.obpmFlowReminderHistoryField.defaults,c(l),g),panel:m});d(l)}})},f.fn.obpmFlowReminderHistoryField.defaults={id:"",name:undefined,discription:""},f.fn.obpmFlowReminderHistoryField.method={setValue:function(h,g){},getValue:function(g){g.each(function(){})}}})(jQuery);(function(g){function d(q){var m=b(q);var l=g.parseJSON(q.val());var h=l.address;var p=g("#weixingpsfield_map_container_"+m.id);p.find(".gps_address").html(h)}function f(q){var p=b(q);var m=p.displayType;var l=q.val();var h="";if(l.length<=0){panel=g('<div style="height: 128px;width: 128px;background:url(../../H5/resource/component/weixinGpsField/gps.png) 0 0 no-repeat;"></div>');if(m==PermissionType_HIDDEN){panel.css("display","none")}panel.insertAfter(q)}else{var r="";if(m==PermissionType_HIDDEN){r=";display:none;"}panel=g('<div id="weixingpsfield_map_container_'+p.id+'" style="'+r+'width: 128px;text-align: center;"><div><img src="../../H5/resource/component/weixinGpsField/gps_ok.png"></div><div class="gps_address"></div></div>');panel.insertAfter(q);d(q)}return panel}function c(l){var h=contextPath+"/portal/H5/resource/component/weixinGpsField/view.jsp";OBPM.dialog.show({width:682,height:500,url:h,args:{location:JSON.parse(l.val())},title:"地图"})}function e(l){var h=l.data("weixinGpsField").panel;h.on("click",function(m){m.preventDefault();m.stopPropagation();c(l)})}function b(l){var h={};h.id=l.attr("id");h.name=l.attr("name");h.displayType=l.attr("displayType");return h}g.fn.obpmWeixinGpsField=function(h,l){if(typeof h=="string"){return g.fn.obpmWeixinGpsField.method[h](this,l)}h=h||{};return this.each(function(){var m=g(this);var q=m.data("weixinGpsField");if(q){g.extend(q.options,h)}else{var p=f(m);q=m.data("weixinGpsField",{options:g.extend({},g.fn.obpmWeixinGpsField.defaults,b(m),h),panel:p});e(m)}})},g.fn.obpmWeixinGpsField.defaults={id:"",name:undefined},g.fn.obpmWeixinGpsField.method={setValue:function(l,h){},getValue:function(h){}}})(jQuery);(function(f){function e(u){var s=c(u);var m=f('<div id="survyfield_container_'+s.id+'"></div>');var v=s.questions;var r=s.displayType;for(i in v){var q=v[i];var p=l(q,r);m.append(p);m.append(f('<div class="space-content"></div>'))}m.insertAfter(u);return m}function l(p,q){var m=f('<div class="question-content" id=""question-content-'+p.id+'"><div class="question-content-title"><b></b>'+p.topic+"</div></div>");var r=h(p,q);r.appendTo(m);return m}function h(p,r){var m=f('<div class="question-content-answer"><table id="question-content-answer-'+p.id+'" width="100%" border="0" cellspacing="0" cellpadding="0"></table></div>');var q=r==4||r==1?"disabled":"";for(i in p.options){var s=p.options[i];var u=s.type;var v=s.value;var w=s.text;var t=undefined;switch(u){case"checkbox":case"radio":if(s.custom){t=f('<tr id="question-'+p.id+"-answerrow-"+i+'"><td style="height: 26px; padding-right: 10px;"><input id="question-'+p.id+"-answer-"+i+'" name="question-'+p.id+'-answer" ordernumber="'+i+'" type="'+u+'" value="" data-type="'+u+'" data-custom="true"  data-text="'+w+'" onclick="" '+q+'><label for="question-'+p.id+"-answer-"+i+'">'+w+'</label><input id="question-'+p.id+'-answer-value" name="question-'+p.id+'-answer-value" type="text" value="" '+q+"></td> </tr>")}else{t=f('<tr id="question-'+p.id+"-answerrow-"+i+'"><td style="height: 26px; padding-right: 10px;"><input id="question-'+p.id+"-answer-"+i+'" name="question-'+p.id+'-answer" ordernumber="'+i+'" type="'+u+'" data-type="'+u+'" data-custom="false" data-text="'+w+'" value="'+v+'" onclick="" '+q+'><label for="question-'+p.id+"-answer-"+i+'">'+w+"</label></td> </tr>")}break;case"text":t=f('<tr id="question-'+p.id+"-answerrow-"+i+'"><td style="height: 26px; padding-right: 10px;"><input id="question-'+p.id+"-answer-"+i+'" name="question-'+p.id+'-answer" ordernumber="'+i+'" type="'+u+'" data-type="'+u+'" data-custom="false" data-text="'+w+'" value="'+v+'" onclick="" '+q+"></td> </tr>");break;case"textarea":t=f('<tr id="question-'+p.id+"-answerrow-"+i+'"><td style="height: 26px; padding-right: 10px;"><textarea id="question-'+p.id+"-answer-"+i+'" name="question-'+p.id+'-answer" ordernumber="'+i+'" data-type="'+u+'" data-custom="false" data-text="'+w+'" onclick="" '+q+">"+v+"</textarea></td> </tr>");break;default:break}t.appendTo(m)}return m}function d(m){}function c(p){var m={};m.id=p.attr("id");m.name=p.attr("name");m.displayType=p.data("displayType");m.discription=p.data("discription");m.questions=p.data("questions");return m}function b(v){var q=[];var u=v.data("surveyField");var r=u.options;var m=u.panel;var s=r.questions;for(i in s){var p=s[i];var t={question:p.id,answers:[]};m.find("input[name='question-"+p.id+"-answer']:checked, input[name='question-"+p.id+"-answer'][type='text'], textarea[name='question-"+p.id+"-answer']").each(function(x){var C=f(this);var y=C.data("type");var A=C.data("custom");var B=C.data("text");var w=A?C.parent().find("input[name='"+C.attr("name")+"-value']").val():C.val();var z={type:y,custom:A,text:B,value:w};t.answers.push(z)});q.push(t)}v.val(JSON.stringify(q));return q}function g(r,w){if(typeof w=="string"&&w.length>0){w=f.parseJSON(w)}var x=w||[];var q=r.data("surveyField");var y=q.options;var p=q.panel;var s=y.questions;for(i in x){var u=x[i];var m=u.question;var t=u.answers;p.find("input[name='question-"+m+"-answer'],textarea[name='question-"+m+"-answer']").each(function(v){var A=f(this);for(k in t){var z=t[k];if(z.type=="radio"||z.type=="checkbox"){if(!z.custom&&z.value==A.val()){A.attr("checked","true");break}if(z.custom&&A.data("custom")&&z.text==A.data("text")){A.attr("checked","true");A.parent().find("input[name='"+A.attr("name")+"-value']").val(z.value);break}}else{if(z.type=="text"&&z.text==A.data("text")){A.val(z.value);break}else{if(z.type=="textarea"&&z.text==A.data("text")){A.val(z.value);break}}}}})}}f.fn.obpmSurveyField=function(m,p){if(typeof m=="string"){return f.fn.obpmSurveyField.method[m](this,p)}m=m||{};return this.each(function(){var q=f(this);var u=q.data("surveyField");if(u){f.extend(u.options,m)}else{var s=e(q);u=q.data("surveyField",{options:f.extend({},f.fn.obpmSurveyField.defaults,c(q),m),panel:s});d(q);g(q,q.val())}})},f.fn.obpmSurveyField.defaults={id:"",name:undefined,displayType:2,discription:"",questions:[]},f.fn.obpmSurveyField.method={setValue:function(p,m){},getValue:function(m){m.each(function(){b(f(this))})}}})(jQuery);(function(b){b.fn.obpmButtonField=function(){return this.each(function(){var d=jQuery(this);var f=d.attr("value");var c=d.attr("activityType");var e=d.attr("onclick");if((c=="29"||c=="43")&&typeof DisplayView=="object"&&DisplayView.getTheView(this)){d.remove();return}switch(c){case"8":BtnStyle="btn-warning-o";break;case"10":BtnStyle="btn-default";break;case"11":BtnStyle="btn-success-o";break;case"13":BtnStyle="btn-default";break;case"14":BtnStyle="btn-info-o";break;case"15":BtnStyle="btn-info-o";break;case"19":BtnStyle="btn-success-o";break;case"21":BtnStyle="btn-success-o";break;case"25":BtnStyle="btn-info-o";break;case"26":BtnStyle="btn-info-o";break;case"28":BtnStyle="btn-primary-o";break;case"30":BtnStyle="btn-info-o";break;case"34":BtnStyle="btn-success-o";break;case"37":BtnStyle="btn-info-o";break;case"42":BtnStyle="btn-success-o";break;case"43":BtnStyle="btn-warning-o";break;case"45":BtnStyle="btn-success-o";break;default:BtnStyle="btn-default";break}if(c!="5"){d.addClass("vbtn btn "+BtnStyle+"")}})}})(jQuery);(function(e){var g={HANDLE_TYPE_TEXT:"text",HANDLE_TYPE_LINK:"link",HANDLE_TYPE_CALLBACK_EVENT:"callback_event"};function d(w,x){var l=e('<div id="qrcode_container_'+x.id+'"></div>');var u="";switch(x.handleType){case g.HANDLE_TYPE_TEXT:u=x.value;break;case g.HANDLE_TYPE_LINK:case g.HANDLE_TYPE_CALLBACK_EVENT:var s=e("input[name='formid']").val();if(e("input[name='_templateForm']").val().length>0){s=e("input[name='_templateForm']").val()}var h=e("input[name='domain']").val();var q=e("input[name='content.id']").val();var r=x.fieldId;var m=e("input[name='application']").val();var v=x.serverHost.length==0?window.location.protocol+"//"+window.location.host+contextPath:x.serverHost;u=v+"/portal/document/qrcodefield/ready?domainId="+h+"&formId="+s+"&docId="+q+"&fieldId="+r+"&applicationId="+m+"&_randomCode="+x.randomCode;break;default:break}var p={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:x.size,fill:"#000",background:null,text:u,radius:0,quiet:0,mode:0,mSize:0.1,mPosX:0.5,mPosY:0.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null};l.insertAfter(w);l.qrcode(p);return l}function c(l){var h=l.data("qrcode").options;if(h.handleType==g.HANDLE_TYPE_CALLBACK_EVENT){f(l)}}function f(m){var h=m.data("qrcode").options;var l=e("input[name='content.id']").val();var p=window.setInterval(function(){e.get(contextPath+"/portal/document/qrcodefield/handle?action=track&_randomCode="+h.randomCode,function(q){if(q=="success"){window.clearInterval(p);Activity.refreshForm()}})},5*1000)}function b(p){var m={};m.id=p.attr("id");m.fieldId=p.data("fieldId");m.handleType=p.data("handleType");m.serverHost=p.data("serverHost");m.name=p.attr("name");m.discription=HTMLDencode(p.data("discription"))?HTMLDencode(p.data("discription")):m.name;m.value=p.val();m.refreshOnChanged=(p.data("refreshOnChanged")?(p.data("refreshOnChanged")=="true"||p.data("refreshOnChanged")==true):undefined),m.displayType=p.data("displayType");m.size=p.data("size");var q="";var l=16;var r="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";var h=r.length;for(i=0;i<l;i++){q+=r.charAt(Math.floor(Math.random()*h))}m.randomCode=q;return m}e.fn.obpmQRCodeField=function(h,l){if(typeof h=="string"){return e.fn.obpmQRCodeField.method[h](this,l)}return this.each(function(){var m=h||{};var p=e(this);var s=p.data("qrcode");if(s){e.extend(s.options,m)}else{m=e.extend({},e.fn.obpmQRCodeField.defaults,b(p),m);var q=d(p,m);s=p.data("qrcode",{options:m,panel:q});c(p)}})},e.fn.obpmQRCodeField.defaults={id:"",fieldId:"",handleType:g.HANDLE_TYPE_TEXT,serverHost:"",name:"",value:"",refreshOnChanged:false,discription:"",displayType:null},e.fn.obpmQRCodeField.method={setValue:function(l,h){},getValue:function(h){h.each(function(){})}}})(jQuery);!function(C){function A(v,m,g,d){function h(e,c){return e-=d,c-=d,0>e||e>=s||0>c||c>=s?!1:r.isDark(e,c)}var r=C(g,m);r.addData(v),r.make(),d=d||0;var s=r.getModuleCount(),l=r.getModuleCount()+2*d,p=function(u,f,w,Q){var y=this.isDark,c=1/l;this.isDark=function(t,R){var T=R*c,U=t*c,e=T+c,S=U+c;return y(t,R)&&(u>e||T>w||f>S||U>Q)}};this.text=v,this.level=m,this.version=g,this.moduleCount=l,this.isDark=h,this.addBlank=p}function M(g,h,m,l,f){m=Math.max(1,m||1),l=Math.min(40,l||40);for(var c=m;l>=c;c+=1){try{return new A(g,h,c,f)}catch(d){}}}function F(d,W,S){var p=S.size,m="bold "+S.mSize*p+"px "+S.fontname,w=q("<canvas/>")[0].getContext("2d");w.font=m;var U=w.measureText(S.label).width,V=S.mSize,R=U/p,T=(1-R)*S.mPosX,v=(1-V)*S.mPosY,Q=T+R,X=v+V,y=0.01;1===S.mode?d.addBlank(0,v-y,p,X+y):d.addBlank(T-y,v-y,Q+y,X+y),W.fillStyle=S.fontcolor,W.font=m,W.fillText(S.label,T*p,v*p+0.75*S.mSize*p)}function E(d,U,Q){var m=Q.size,h=Q.image.naturalWidth||1,v=Q.image.naturalHeight||1,S=Q.mSize,T=S*h/v,y=(1-T)*Q.mPosX,R=(1-S)*Q.mPosY,p=y+T,w=R+S,V=0.01;3===Q.mode?d.addBlank(0,R-V,m,w+V):d.addBlank(y-V,R-V,p+V,w+V),U.drawImage(Q.image,y*m,R*m,T*m,S*m)}function I(f,d,g){q(g.background).is("img")?d.drawImage(g.background,0,0,g.size,g.size):g.background&&(d.fillStyle=g.background,d.fillRect(g.left,g.top,g.size,g.size));var c=g.mode;1===c||2===c?F(f,d,g):(3===c||4===c)&&E(f,d,g)}function P(h,g,l,p,m,f,c,d){h.isDark(c,d)&&g.rect(p,m,f,f)}function z(d,y,p,h,g,l,v,w,m,s){v?d.moveTo(y+l,p):d.moveTo(y,p),w?(d.lineTo(h-l,p),d.arcTo(h,p,h,g,l)):d.lineTo(h,p),m?(d.lineTo(h,g-l),d.arcTo(h,g,y,g,l)):d.lineTo(h,g),s?(d.lineTo(y+l,g),d.arcTo(y,g,y,p,l)):d.lineTo(y,g),v?(d.lineTo(y,p+l),d.arcTo(y,p,h,p,l)):d.lineTo(y,p)}function L(d,y,p,h,g,l,v,w,m,s){v&&(d.moveTo(y+l,p),d.lineTo(y,p),d.lineTo(y,p+l),d.arcTo(y,p,y+l,p,l)),w&&(d.moveTo(h-l,p),d.lineTo(h,p),d.lineTo(h,p+l),d.arcTo(h,p,h-l,p,l)),m&&(d.moveTo(h-l,g),d.lineTo(h,g),d.lineTo(h,g-l),d.arcTo(h,g,h-l,g,l)),s&&(d.moveTo(y+l,g),d.lineTo(y,g),d.lineTo(y,g-l),d.arcTo(y,g,y+l,g,l))}function O(Y,V,ak,ad,ac,ah,an,am){var af=Y.isDark,aj=ad+ah,W=ac+ah,ai=ak.radius*ah,S=an-1,al=an+1,R=am-1,ae=am+1,ab=af(an,am),Q=af(S,R),f=af(S,am),Z=af(S,ae),aa=af(an,ae),U=af(al,ae),ag=af(al,am),u=af(al,R),X=af(an,R);ab?z(V,ad,ac,aj,W,ai,!f&&!X,!f&&!aa,!ag&&!aa,!ag&&!X):L(V,ad,ac,aj,W,ai,f&&X&&Q,f&&aa&&Z,ag&&aa&&U,ag&&X&&u)}function H(c,T,R){var m,d,v=c.moduleCount,S=R.size/v,Q=P;for(D&&R.radius>0&&R.radius<=0.5&&(Q=O),T.beginPath(),m=0;v>m;m+=1){for(d=0;v>d;d+=1){var p=R.left+d*S,y=R.top+m*S,U=S;Q(c,T,R,p,y,U,m,d)}}if(q(R.fill).is("img")){T.strokeStyle="rgba(0,0,0,0.5)",T.lineWidth=2,T.stroke();var w=T.globalCompositeOperation;T.globalCompositeOperation="destination-out",T.fill(),T.globalCompositeOperation=w,T.clip(),T.drawImage(R.fill,0,0,R.size,R.size),T.restore()}else{T.fillStyle=R.fill,T.fill()}}function K(e,d){var g=M(d.text,d.ecLevel,d.minVersion,d.maxVersion,d.quiet);if(!g){return null}var f=q(e).data("qrcode",g),c=f[0].getContext("2d");return I(g,c,d),H(g,c,d),f}function B(d){var c=q("<canvas/>").attr("width",d.size).attr("height",d.size);return K(c,d)}function J(c){return q("<img/>").attr("src",B(c)[0].toDataURL("image/png"))}function x(d){var U=M(d.text,d.ecLevel,d.minVersion,d.maxVersion,d.quiet);if(!U){return null}var m,e,v=d.size,S=d.background,T=Math.floor,Q=U.moduleCount,R=T(v/Q),p=T(0.5*(v-R*Q)),y={position:"relative",left:0,top:0,padding:0,margin:0,width:v,height:v},V={position:"absolute",padding:0,margin:0,width:R,height:R,"background-color":d.fill},w=q("<div/>").data("qrcode",U).css(y);for(S&&w.css("background-color",S),m=0;Q>m;m+=1){for(e=0;Q>e;e+=1){U.isDark(m,e)&&q("<div/>").css(V).css({left:p+e*R,top:p+m*R}).appendTo(w)}}return w}function N(c){return G&&"canvas"===c.render?B(c):G&&"image"===c.render?J(c):x(c)}var q=jQuery,G=function(){var c=document.createElement("canvas");return Boolean(c.getContext&&c.getContext("2d"))}(),D="[object Opera]"!==Object.prototype.toString.call(window.opera),b={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mSize:0.1,mPosX:0.5,mPosY:0.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null};q.fn.qrcode=function(d){var c=q.extend({},b,d);return this.each(function(){"canvas"===this.nodeName.toLowerCase()?K(this,c):q(this).append(N(c))})}}(function(){var b=function(){function d(c,f){if("undefined"==typeof c.length){throw new Error(c.length+"/"+f)}var h=function(){for(var e=0;e<c.length&&0==c[e];){e+=1}for(var s=new Array(c.length-e+f),l=0;l<c.length-e;l+=1){s[l]=c[l+e]}return s}(),g={};return g.getAt=function(e){return h[e]},g.getLength=function(){return h.length},g.multiply=function(r){for(var s=new Array(g.getLength()+r.getLength()-1),u=0;u<g.getLength();u+=1){for(var l=0;l<r.getLength();l+=1){s[u+l]^=C.gexp(C.glog(g.getAt(u))+C.glog(r.getAt(l)))}}return d(s,0)},g.mod=function(r){if(g.getLength()-r.getLength()<0){return g}for(var s=C.glog(g.getAt(0))-C.glog(r.getAt(0)),u=new Array(g.getLength()),l=0;l<g.getLength();l+=1){u[l]=g.getAt(l)}for(var l=0;l<r.getLength();l+=1){u[l]^=C.gexp(C.glog(r.getAt(l))+s)}return d(u,0).mod(r)},g}var F=function(H,W){var P=236,Y=17,R=H,V=p[W],J=null,U=0,X=null,u=new Array,Q={},O=function(g,e){U=4*R+17,J=function(l){for(var h=new Array(l),s=0;l>s;s+=1){h[s]=new Array(l);for(var M=0;l>M;M+=1){h[s][M]=null}}return h}(U),r(0,0),r(U-7,0),r(0,U-7),N(),L(),S(g,e),R>=7&&v(g),null==X&&(X=I(R,V,u)),f(X,e)},r=function(h,g){for(var l=-1;7>=l;l+=1){if(!(-1>=h+l||h+l>=U)){for(var s=-1;7>=s;s+=1){-1>=g+s||g+s>=U||(l>=0&&6>=l&&(0==s||6==s)||s>=0&&6>=s&&(0==l||6==l)||l>=2&&4>=l&&s>=2&&4>=s?J[h+l][g+s]=!0:J[h+l][g+s]=!1)}}}},c=function(){for(var h=0,g=0,l=0;8>l;l+=1){O(!0,l);var s=w.getLostPoint(Q);(0==l||h>s)&&(h=s,g=l)}return g},L=function(){for(var g=8;U-8>g;g+=1){null==J[g][6]&&(J[g][6]=g%2==0)}for(var e=8;U-8>e;e+=1){null==J[6][e]&&(J[6][e]=e%2==0)}},N=function(){for(var s=w.getPatternPosition(R),l=0;l<s.length;l+=1){for(var M=0;M<s.length;M+=1){var Z=s[l],T=s[M];if(null==J[Z][T]){for(var g=-2;2>=g;g+=1){for(var h=-2;2>=h;h+=1){-2==g||2==g||-2==h||2==h||0==g&&0==h?J[Z+g][T+h]=!0:J[Z+g][T+h]=!1}}}}}},v=function(h){for(var g=w.getBCHTypeNumber(R),l=0;18>l;l+=1){var s=!h&&1==(g>>l&1);J[Math.floor(l/3)][l%3+U-8-3]=s}for(var l=0;18>l;l+=1){var s=!h&&1==(g>>l&1);J[l%3+U-8-3][Math.floor(l/3)]=s}},S=function(l,h){for(var s=V<<3|h,T=w.getBCHTypeInfo(s),M=0;15>M;M+=1){var g=!l&&1==(T>>M&1);6>M?J[M][8]=g:8>M?J[M+1][8]=g:J[U-15+M][8]=g}for(var M=0;15>M;M+=1){var g=!l&&1==(T>>M&1);8>M?J[8][U-M-1]=g:9>M?J[8][15-M-1+1]=g:J[8][15-M-1]=g}J[U-8][8]=!l},f=function(h,af){for(var ab=-1,M=U-1,s=7,ad=0,ae=w.getMaskFunction(af),aa=U-1;aa>0;aa-=2){for(6==aa&&(aa-=1);;){for(var ac=0;2>ac;ac+=1){if(null==J[M][aa-ac]){var T=!1;ad<h.length&&(T=1==(h[ad]>>>s&1));var Z=ae(M,aa-ac);Z&&(T=!T),J[M][aa-ac]=T,s-=1,-1==s&&(ad+=1,s=7)}}if(M+=ab,0>M||M>=U){M-=ab,ab=-ab;break}}}},K=function(ab,al){for(var af=0,ae=0,ao=0,aa=new Array(al.length),ak=new Array(al.length),an=0;an<al.length;an+=1){var ah=al[an].dataCount,aj=al[an].totalCount-ah;ae=Math.max(ae,ah),ao=Math.max(ao,aj),aa[an]=new Array(ah);for(var ac=0;ac<aa[an].length;ac+=1){aa[an][ac]=255&ab.getBuffer()[ac+af]}af+=ah;var ai=w.getErrorCorrectPolynomial(aj),Z=d(aa[an],ai.getLength()-1),am=Z.mod(ai);ak[an]=new Array(ai.getLength()-1);for(var ac=0;ac<ak[an].length;ac+=1){var T=ac+am.getLength()-ak[an].length;ak[an][ac]=T>=0?am.getAt(T):0}}for(var ag=0,ac=0;ac<al.length;ac+=1){ag+=al[ac].totalCount}for(var ad=new Array(ag),M=0,ac=0;ae>ac;ac+=1){for(var an=0;an<al.length;an+=1){ac<aa[an].length&&(ad[M]=aa[an][ac],M+=1)}}for(var ac=0;ao>ac;ac+=1){for(var an=0;an<al.length;an+=1){ac<ak[an].length&&(ad[M]=ak[an][ac],M+=1)}}return ad},I=function(aa,M,ab){for(var ad=E.getRSBlocks(aa,M),ac=z(),h=0;h<ab.length;h+=1){var Z=ab[h];ac.put(Z.getMode(),4),ac.put(Z.getLength(),w.getLengthInBits(Z.getMode(),aa)),Z.write(ac)}for(var T=0,h=0;h<ad.length;h+=1){T+=ad[h].dataCount}if(ac.getLengthInBits()>8*T){throw new Error("code length overflow. ("+ac.getLengthInBits()+">"+8*T+")")}for(ac.getLengthInBits()+4<=8*T&&ac.put(0,4);ac.getLengthInBits()%8!=0;){ac.putBit(!1)}for(;;){if(ac.getLengthInBits()>=8*T){break}if(ac.put(P,8),ac.getLengthInBits()>=8*T){break}ac.put(Y,8)}return K(ac,ad)};return Q.addData=function(g){var e=B(g);u.push(e),X=null},Q.isDark=function(g,e){if(0>g||g>=U||0>e||e>=U){throw new Error(g+","+e)}return J[g][e]},Q.getModuleCount=function(){return U},Q.make=function(){O(!1,c())},Q.createTableTag=function(h,g){h=h||2,g="undefined"==typeof g?4*h:g;var l="";l+='<table style="',l+=" border-width: 0px; border-style: none;",l+=" border-collapse: collapse;",l+=" padding: 0px; margin: "+g+"px;",l+='">',l+="<tbody>";for(var M=0;M<Q.getModuleCount();M+=1){l+="<tr>";for(var s=0;s<Q.getModuleCount();s+=1){l+='<td style="',l+=" border-width: 0px; border-style: none;",l+=" border-collapse: collapse;",l+=" padding: 0px; margin: 0px;",l+=" width: "+h+"px;",l+=" height: "+h+"px;",l+=" background-color: ",l+=Q.isDark(M,s)?"#000000":"#ffffff",l+=";",l+='"/>'}l+="</tr>"}return l+="</tbody>",l+="</table>"},Q.createImgTag=function(h,g){h=h||2,g="undefined"==typeof g?4*h:g;var l=Q.getModuleCount()*h+2*g,M=g,s=l-g;return D(l,l,function(aa,ab){if(aa>=M&&s>aa&&ab>=M&&s>ab){var Z=Math.floor((aa-M)/h),T=Math.floor((ab-M)/h);return Q.isDark(T,Z)?0:1}return 1})},Q};F.stringToBytes=function(f){for(var c=new Array,g=0;g<f.length;g+=1){var h=f.charCodeAt(g);c.push(255&h)}return c},F.createStringToBytes=function(f,c){var g=function(){for(var J=G(f),s=function(){var e=J.read();if(-1==e){throw new Error}return e},r=0,v={};;){var L=J.read();if(-1==L){break}var M=s(),I=s(),K=s(),t=String.fromCharCode(L<<8|M),H=I<<8|K;v[t]=H,r+=1}if(r!=c){throw new Error(r+" != "+c)}return v}(),h="?".charCodeAt(0);return function(u){for(var s=new Array,v=0;v<u.length;v+=1){var l=u.charCodeAt(v);if(128>l){s.push(l)}else{var e=g[u.charAt(v)];"number"==typeof e?(255&e)==e?s.push(e):(s.push(e>>>8),s.push(255&e)):s.push(h)}}return s}};var A={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},p={L:1,M:0,Q:3,H:2},m={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},w=function(){var h=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],s=1335,g=7973,e=21522,l={},r=function(f){for(var c=0;0!=f;){c+=1,f>>>=1}return c};return l.getBCHTypeInfo=function(f){for(var c=f<<10;r(c)-r(s)>=0;){c^=s<<r(c)-r(s)}return(f<<10|c)^e},l.getBCHTypeNumber=function(f){for(var c=f<<12;r(c)-r(g)>=0;){c^=g<<r(c)-r(g)}return f<<12|c},l.getPatternPosition=function(c){return h[c-1]},l.getMaskFunction=function(c){switch(c){case m.PATTERN000:return function(u,f){return(u+f)%2==0};case m.PATTERN001:return function(u,f){return u%2==0};case m.PATTERN010:return function(u,f){return f%3==0};case m.PATTERN011:return function(u,f){return(u+f)%3==0};case m.PATTERN100:return function(u,f){return(Math.floor(u/2)+Math.floor(f/3))%2==0};case m.PATTERN101:return function(u,f){return u*f%2+u*f%3==0};case m.PATTERN110:return function(u,f){return(u*f%2+u*f%3)%2==0};case m.PATTERN111:return function(u,f){return(u*f%3+(u+f)%2)%2==0};default:throw new Error("bad maskPattern:"+c)}},l.getErrorCorrectPolynomial=function(c){for(var f=d([1],0),u=0;c>u;u+=1){f=f.multiply(d([1,C.gexp(u)],0))}return f},l.getLengthInBits=function(f,c){if(c>=1&&10>c){switch(f){case A.MODE_NUMBER:return 10;case A.MODE_ALPHA_NUM:return 9;case A.MODE_8BIT_BYTE:return 8;case A.MODE_KANJI:return 8;default:throw new Error("mode:"+f)}}else{if(27>c){switch(f){case A.MODE_NUMBER:return 12;case A.MODE_ALPHA_NUM:return 11;case A.MODE_8BIT_BYTE:return 16;case A.MODE_KANJI:return 10;default:throw new Error("mode:"+f)}}else{if(!(41>c)){throw new Error("type:"+c)}switch(f){case A.MODE_NUMBER:return 14;case A.MODE_ALPHA_NUM:return 13;case A.MODE_8BIT_BYTE:return 16;case A.MODE_KANJI:return 12;default:throw new Error("mode:"+f)}}}},l.getLostPoint=function(v){for(var R=v.getModuleCount(),N=0,I=0;R>I;I+=1){for(var H=0;R>H;H+=1){for(var K=0,P=v.isDark(I,H),Q=-1;1>=Q;Q+=1){if(!(0>I+Q||I+Q>=R)){for(var M=-1;1>=M;M+=1){0>H+M||H+M>=R||(0!=Q||0!=M)&&P==v.isDark(I+Q,H+M)&&(K+=1)}}}K>5&&(N+=3+K-5)}}for(var I=0;R-1>I;I+=1){for(var H=0;R-1>H;H+=1){var O=0;v.isDark(I,H)&&(O+=1),v.isDark(I+1,H)&&(O+=1),v.isDark(I,H+1)&&(O+=1),v.isDark(I+1,H+1)&&(O+=1),(0==O||4==O)&&(N+=3)}}for(var I=0;R>I;I+=1){for(var H=0;R-6>H;H+=1){v.isDark(I,H)&&!v.isDark(I,H+1)&&v.isDark(I,H+2)&&v.isDark(I,H+3)&&v.isDark(I,H+4)&&!v.isDark(I,H+5)&&v.isDark(I,H+6)&&(N+=40)}}for(var H=0;R>H;H+=1){for(var I=0;R-6>I;I+=1){v.isDark(I,H)&&!v.isDark(I+1,H)&&v.isDark(I+2,H)&&v.isDark(I+3,H)&&v.isDark(I+4,H)&&!v.isDark(I+5,H)&&v.isDark(I+6,H)&&(N+=40)}}for(var J=0,H=0;R>H;H+=1){for(var I=0;R>I;I+=1){v.isDark(I,H)&&(J+=1)}}var L=Math.abs(100*J/R/R-50)/5;return N+=10*L},l}(),C=function(){for(var f=new Array(256),c=new Array(256),g=0;8>g;g+=1){f[g]=1<<g}for(var g=8;256>g;g+=1){f[g]=f[g-4]^f[g-5]^f[g-6]^f[g-8]}for(var g=0;255>g;g+=1){c[f[g]]=g}var h={};return h.glog=function(e){if(1>e){throw new Error("glog("+e+")")}return c[e]},h.gexp=function(e){for(;0>e;){e+=255}for(;e>=256;){e-=255}return f[e]},h}(),E=function(){var f=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],c=function(s,l){var u={};return u.totalCount=s,u.dataCount=l,u},g={},h=function(l,r){switch(r){case p.L:return f[4*(l-1)+0];case p.M:return f[4*(l-1)+1];case p.Q:return f[4*(l-1)+2];case p.H:return f[4*(l-1)+3];default:return void 0}};return g.getRSBlocks=function(s,K){var t=h(s,K);if("undefined"==typeof t){throw new Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+K)}for(var H=t.length/3,M=new Array,N=0;H>N;N+=1){for(var J=t[3*N+0],L=t[3*N+1],v=t[3*N+2],I=0;J>I;I+=1){M.push(c(L,v))}}return M},g}(),z=function(){var f=new Array,c=0,g={};return g.getBuffer=function(){return f},g.getAt=function(h){var l=Math.floor(h/8);return 1==(f[l]>>>7-h%8&1)},g.put=function(h,e){for(var l=0;e>l;l+=1){g.putBit(1==(h>>>e-l-1&1))}},g.getLengthInBits=function(){return c},g.putBit=function(h){var l=Math.floor(c/8);f.length<=l&&f.push(0),h&&(f[l]|=128>>>c%8),c+=1},g},B=function(e){var g=A.MODE_8BIT_BYTE,f=F.stringToBytes(e),c={};return c.getMode=function(){return g},c.getLength=function(h){return f.length},c.write=function(l){for(var h=0;h<f.length;h+=1){l.put(f[h],8)}},c},q=function(){var e=new Array,c={};return c.writeByte=function(f){e.push(255&f)},c.writeShort=function(f){c.writeByte(f),c.writeByte(f>>>8)},c.writeBytes=function(f,g,l){g=g||0,l=l||f.length;for(var h=0;l>h;h+=1){c.writeByte(f[h+g])}},c.writeString=function(f){for(var g=0;g<f.length;g+=1){c.writeByte(f.charCodeAt(g))}},c.toByteArray=function(){return e},c.toString=function(){var f="";f+="[";for(var g=0;g<e.length;g+=1){g>0&&(f+=","),f+=e[g]}return f+="]"},c},y=function(){var h=0,g=0,l=0,u="",s={},f=function(e){u+=String.fromCharCode(c(63&e))},c=function(e){if(0>e){}else{if(26>e){return 65+e}if(52>e){return 97+(e-26)}if(62>e){return 48+(e-52)}if(62==e){return 43}if(63==e){return 47}}throw new Error("n:"+e)};return s.writeByte=function(e){for(h=h<<8|255&e,g+=8,l+=1;g>=6;){f(h>>>g-6),g-=6}},s.flush=function(){if(g>0&&(f(h<<6-g),h=0,g=0),l%3!=0){for(var r=3-l%3,e=0;r>e;e+=1){u+="="}}},s.toString=function(){return u},s},G=function(h){var g=h,l=0,u=0,s=0,f={};f.read=function(){for(;8>s;){if(l>=g.length){if(0==s){return -1}throw new Error("unexpected end of file./"+s)}var t=g.charAt(l);if(l+=1,"="==t){return s=0,-1}t.match(/^\s$/)||(u=u<<6|c(t.charCodeAt(0)),s+=6)}var e=u>>>s-8&255;return s-=8,e};var c=function(e){if(e>=65&&90>=e){return e-65}if(e>=97&&122>=e){return e-97+26}if(e>=48&&57>=e){return e-48+52}if(43==e){return 62}if(47==e){return 63}throw new Error("c:"+e)};return f},x=function(c,J){var v=c,h=J,g=new Array(c*J),l={};l.setPixel=function(f,e,u){g[e*v+f]=u},l.write=function(u){u.writeString("GIF87a"),u.writeShort(v),u.writeShort(h),u.writeByte(128),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(255),u.writeByte(255),u.writeByte(255),u.writeString(","),u.writeShort(0),u.writeShort(0),u.writeShort(v),u.writeShort(h),u.writeByte(0);var f=2,K=I(f);u.writeByte(f);for(var e=0;K.length-e>255;){u.writeByte(255),u.writeBytes(K,e,255),e+=255}u.writeByte(K.length-e),u.writeBytes(K,e,K.length-e),u.writeByte(0),u.writeString(";")};var H=function(u){var f=u,K=0,M=0,L={};return L.write=function(e,t){if(e>>>t!=0){throw new Error("length over")}for(;K+t>=8;){f.writeByte(255&(e<<K|M)),t-=8-K,e>>>=8-K,M=0,K=0}M=e<<K|M,K+=t},L.flush=function(){K>0&&f.writeByte(M)},L},I=function(f){for(var S=1<<f,O=(1<<f)+1,K=f+1,L=s(),R=0;S>R;R+=1){L.add(String.fromCharCode(R))}L.add(String.fromCharCode(S)),L.add(String.fromCharCode(O));var P=q(),N=H(P);N.write(S,K);var T=0,M=String.fromCharCode(g[T]);for(T+=1;T<g.length;){var Q=String.fromCharCode(g[T]);T+=1,L.contains(M+Q)?M+=Q:(N.write(L.indexOf(M),K),L.size()<4095&&(L.size()==1<<K&&(K+=1),L.add(M+Q)),M=Q)}return N.write(L.indexOf(M),K),N.write(O,K),N.flush(),P.toByteArray()},s=function(){var u={},f=0,K={};return K.add=function(e){if(K.contains(e)){throw new Error("dup key:"+e)}u[e]=f,f+=1},K.size=function(){return f},K.indexOf=function(e){return u[e]},K.contains=function(e){return"undefined"!=typeof u[e]},K};return l},D=function(g,O,J,l){for(var h=x(g,O),H=0;O>H;H+=1){for(var L=0;g>L;L+=1){h.setPixel(L,H,J(L,H))}}var N=q();h.write(N);for(var I=y(),K=N.toByteArray(),P=0;P<K.length;P+=1){I.writeByte(K[P])}I.flush();var M="";return M+="<img",M+=' src="',M+="data:image/gif;base64,",M+=I,M+='"',M+=' width="',M+=g,M+='"',M+=' height="',M+=O,M+='"',l&&(M+=' alt="',M+=l,M+='"'),M+="/>"};return F}();return function(c){"function"==typeof define&&define.amd?define([],c):"object"==typeof exports&&(module.exports=c())}(function(){return b}),!function(c){c.stringToBytes=function(e){function d(g){for(var f=[],h=0;h<g.length;h++){var l=g.charCodeAt(h);128>l?f.push(l):2048>l?f.push(192|l>>6,128|63&l):55296>l||l>=57344?f.push(224|l>>12,128|l>>6&63,128|63&l):(h++,l=65536+((1023&l)<<10|1023&g.charCodeAt(h)),f.push(240|l>>18,128|l>>12&63,128|l>>6&63,128|63&l))}return f}return d(e)}}(b),b}());(function(){window.UEDITOR_HOME_URL=contextPath+"/portal/share/component/htmlEditor/ueditor/";var b=window.UEDITOR_HOME_URL||f();window.UEDITOR_CONFIG={UEDITOR_HOME_URL:b,serverUrl:b+"jsp/controller.jsp",toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","emotion","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","background","|","horizontal","date","time","spechars","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace"]],zIndex:1,enableAutoSave:false,elementPathEnabled:false,autoFloatEnabled:false};function f(g,h){return d(g||self.document.URL||self.location.href,h||c())}function c(){var g=document.getElementsByTagName("script");return g[g.length-1].src}function d(g,h){var l=h;if(/^(\/|\\\\)/.test(h)){l=/^.+?\w(\/|\\\\)/.exec(g)[0]+h.replace(/^(\/|\\\\)/,"")}else{if(!/^[a-z]+:/i.test(h)){g=g.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,"");l=g+""+h}}return e(l)}function e(l){var m=/^[a-z]+:\/\//.exec(l)[0],h=null,g=[];l=l.replace(m,"").split("?")[0].split("#")[0];l=l.replace(/\\/g,"/").split(/\//);l[l.length-1]="";while(l.length){if((h=l.shift())===".."){g.pop()}else{if(h!=="."){g.push(h)}}}return m+g.join("/")}window.UE={getUEBasePath:f}})();
/*!
 * UEditor
 * version: ueditor
 * build: Thu Jun 16 2016 12:38:04 GMT+0800 (CST)
 */
(function(){UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu;window.UE=baidu.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.4.3";var dom=UE.dom={};var browser=UE.browser=function(){var agent=navigator.userAgent.toLowerCase(),opera=window.opera,browser={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(agent),opera:(!!opera&&opera.version),webkit:(agent.indexOf(" applewebkit/")>-1),mac:(agent.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat")};browser.gecko=(navigator.product=="Gecko"&&!browser.webkit&&!browser.opera&&!browser.ie);var version=0;if(browser.ie){var v1=agent.match(/(?:msie\s([\w.]+))/);var v2=agent.match(/(?:trident.*rv:([\w.]+))/);if(v1&&v2&&v1[1]&&v2[1]){version=Math.max(v1[1]*1,v2[1]*1)}else{if(v1&&v1[1]){version=v1[1]*1}else{if(v2&&v2[1]){version=v2[1]*1}else{version=0}}}browser.ie11Compat=document.documentMode==11;browser.ie9Compat=document.documentMode==9;browser.ie8=!!document.documentMode;browser.ie8Compat=document.documentMode==8;browser.ie7Compat=((version==7&&!document.documentMode)||document.documentMode==7);browser.ie6Compat=(version<7||browser.quirks);browser.ie9above=version>8;browser.ie9below=version<9;browser.ie11above=version>10;browser.ie11below=version<11}if(browser.gecko){var geckoRelease=agent.match(/rv:([\d\.]+)/);if(geckoRelease){geckoRelease=geckoRelease[1].split(".");version=geckoRelease[0]*10000+(geckoRelease[1]||0)*100+(geckoRelease[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(agent)){browser.chrome=+RegExp["\x241"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(agent)&&!/chrome/i.test(agent)){browser.safari=+(RegExp["\x241"]||RegExp["\x242"])}if(browser.opera){version=parseFloat(opera.version())}if(browser.webkit){version=parseFloat(agent.match(/ applewebkit\/(\d+)/)[1])}browser.version=version;browser.isCompatible=!browser.mobile&&((browser.ie&&version>=6)||(browser.gecko&&version>=10801)||(browser.opera&&version>=9.5)||(browser.air&&version>=1)||(browser.webkit&&version>=522)||false);return browser}();var ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera;var utils=UE.utils={each:function(obj,iterator,context){if(obj==null){return}if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===false){return false}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)===false){return false}}}}},makeInstance:function(obj){var noop=new Function();noop.prototype=obj;obj=new noop;noop.prototype=null;return obj},extend:function(t,s,b){if(s){for(var k in s){if(!b||!t.hasOwnProperty(k)){t[k]=s[k]}}}return t},extend2:function(t){var a=arguments;for(var i=1;i<a.length;i++){var x=a[i];for(var k in x){if(!t.hasOwnProperty(k)){t[k]=x[k]}}}return t},inherits:function(subClass,superClass){var oldP=subClass.prototype,newP=utils.makeInstance(superClass.prototype);utils.extend(newP,oldP,true);subClass.prototype=newP;return(newP.constructor=subClass)},bind:function(fn,context){return function(){return fn.apply(context,arguments)}},defer:function(fn,delay,exclusion){var timerID;return function(){if(exclusion){clearTimeout(timerID)}timerID=setTimeout(fn,delay)}},indexOf:function(array,item,start){var index=-1;start=this.isNumber(start)?start:0;this.each(array,function(v,i){if(i>=start&&v===item){index=i;return false}});return index},removeItem:function(array,item){for(var i=0,l=array.length;i<l;i++){if(array[i]===item){array.splice(i,1);i--}}},trim:function(str){return str.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(list){if(!list){return{}}list=utils.isArray(list)?list:list.split(",");for(var i=0,ci,obj={};ci=list[i++];){obj[ci.toUpperCase()]=obj[ci]=1}return obj},unhtml:function(str,reg){return str?str.replace(reg||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(a,b){if(b){return a}else{return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}}):""},unhtmlForUrl:function(str,reg){return str?str.replace(reg||/[<">']/g,function(a){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(str){return str?str.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(m){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[m]}):""},cssStyleToDomStyle:function(){var test=document.createElement("div").style,cache={"float":test.cssFloat!=undefined?"cssFloat":test.styleFloat!=undefined?"styleFloat":"float"};return function(cssName){return cache[cssName]||(cache[cssName]=cssName.toLowerCase().replace(/-./g,function(match){return match.charAt(1).toUpperCase()}))}}(),loadFile:function(){var tmpList=[];function getItem(doc,obj){try{for(var i=0,ci;ci=tmpList[i++];){if(ci.doc===doc&&ci.url==(obj.src||obj.href)){return ci}}}catch(e){return null}}return function(doc,obj,fn){var item=getItem(doc,obj);if(item){if(item.ready){fn&&fn()}else{item.funs.push(fn)}return}tmpList.push({doc:doc,url:obj.src||obj.href,funs:[fn]});if(!doc.body){var html=[];for(var p in obj){if(p=="tag"){continue}html.push(p+'="'+obj[p]+'"')}doc.write("<"+obj.tag+" "+html.join(" ")+" ></"+obj.tag+">");return}if(obj.id&&doc.getElementById(obj.id)){return}var element=doc.createElement(obj.tag);delete obj.tag;for(var p in obj){element.setAttribute(p,obj[p])}element.onload=element.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){item=getItem(doc,obj);if(item.funs.length>0){item.ready=1;for(var fi;fi=item.funs.pop();){fi()}}element.onload=element.onreadystatechange=null}};element.onerror=function(){throw Error("The load "+(obj.href||obj.src)+" fails,check the url settings of file ueditor.config.js ")};doc.getElementsByTagName("head")[0].appendChild(element)}}(),isEmptyObject:function(obj){if(obj==null){return true}if(this.isArray(obj)||this.isString(obj)){return obj.length===0}for(var key in obj){if(obj.hasOwnProperty(key)){return false}}return true},fixColor:function(name,value){if(/color/i.test(name)&&/rgba?/.test(value)){var array=value.split(",");if(array.length>3){return""}value="#";for(var i=0,color;color=array[i++];){color=parseInt(color.replace(/[^\d]/gi,""),10).toString(16);value+=color.length==1?"0"+color:color}value=value.toUpperCase()}return value},optCss:function(val){var padding,margin,border;val=val.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(str,key,name,val){if(val.split(" ").length==1){switch(key){case"padding":!padding&&(padding={});padding[name]=val;return"";case"margin":!margin&&(margin={});margin[name]=val;return"";case"border":return val=="initial"?"":str}}return str});function opt(obj,name){if(!obj){return""}var t=obj.top,b=obj.bottom,l=obj.left,r=obj.right,val="";if(!t||!l||!b||!r){for(var p in obj){val+=";"+name+"-"+p+":"+obj[p]+";"}}else{val+=";"+name+":"+(t==b&&b==l&&l==r?t:t==b&&l==r?(t+" "+l):l==r?(t+" "+l+" "+b):(t+" "+r+" "+b+" "+l))+";"}return val}val+=opt(padding,"padding")+opt(margin,"margin");return val.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},clone:function(source,target){var tmp;target=target||{};for(var i in source){if(source.hasOwnProperty(i)){tmp=source[i];if(typeof tmp=="object"){target[i]=utils.isArray(tmp)?[]:{};utils.clone(source[i],target[i])}else{target[i]=tmp}}}return target},transUnitToPx:function(val){if(!/(pt|cm)/.test(val)){return val}var unit;val.replace(/([\d.]+)(\w+)/,function(str,v,u){val=v;unit=u});switch(unit){case"cm":val=parseFloat(val)*25;break;case"pt":val=Math.round(parseFloat(val)*96/72)}return val+(val?"px":"")},domReady:function(){var fnArr=[];function doReady(doc){doc.isReady=true;for(var ci;ci=fnArr.pop();ci()){}}return function(onready,win){win=win||window;var doc=win.document;onready&&fnArr.push(onready);if(doc.readyState==="complete"){doReady(doc)}else{doc.isReady&&doReady(doc);if(browser.ie&&browser.version!=11){(function(){if(doc.isReady){return}try{doc.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}doReady(doc)})();win.attachEvent("onload",function(){doReady(doc)})}else{doc.addEventListener("DOMContentLoaded",function(){doc.removeEventListener("DOMContentLoaded",arguments.callee,false);doReady(doc)},false);win.addEventListener("load",function(){doReady(doc)},false)}}}}(),cssRule:browser.ie&&browser.version!=11?function(key,style,doc){var indexList,index;if(style===undefined||style&&style.nodeType&&style.nodeType==9){doc=style&&style.nodeType&&style.nodeType==9?style:(doc||document);indexList=doc.indexList||(doc.indexList={});index=indexList[key];if(index!==undefined){return doc.styleSheets[index].cssText}return undefined}doc=doc||document;indexList=doc.indexList||(doc.indexList={});index=indexList[key];if(style===""){if(index!==undefined){doc.styleSheets[index].cssText="";delete indexList[key];return true}return false}if(index!==undefined){sheetStyle=doc.styleSheets[index]}else{sheetStyle=doc.createStyleSheet("",index=doc.styleSheets.length);indexList[key]=index}sheetStyle.cssText=style}:function(key,style,doc){var head,node;if(style===undefined||style&&style.nodeType&&style.nodeType==9){doc=style&&style.nodeType&&style.nodeType==9?style:(doc||document);node=doc.getElementById(key);return node?node.innerHTML:undefined}doc=doc||document;node=doc.getElementById(key);if(style===""){if(node){node.parentNode.removeChild(node);return true}return false}if(node){node.innerHTML=style}else{node=doc.createElement("style");node.id=key;node.innerHTML=style;doc.getElementsByTagName("head")[0].appendChild(node)}},sort:function(array,compareFn){compareFn=compareFn||function(item1,item2){return item1.localeCompare(item2)};for(var i=0,len=array.length;i<len;i++){for(var j=i,length=array.length;j<length;j++){if(compareFn(array[i],array[j])>0){var t=array[i];array[i]=array[j];array[j]=t}}}return array},serializeParam:function(json){var strArr=[];for(var i in json){if(i=="method"||i=="timeout"||i=="async"){continue}if(!((typeof json[i]).toLowerCase()=="function"||(typeof json[i]).toLowerCase()=="object")){strArr.push(encodeURIComponent(i)+"="+encodeURIComponent(json[i]))}else{if(utils.isArray(json[i])){for(var j=0;j<json[i].length;j++){strArr.push(encodeURIComponent(i)+"[]="+encodeURIComponent(json[i][j]))}}}}return strArr.join("&")},formatUrl:function(url){var u=url.replace(/&&/g,"&");u=u.replace(/\?&/g,"?");u=u.replace(/&$/g,"");u=u.replace(/&#/g,"#");u=u.replace(/&+/g,"&");return u},isCrossDomainUrl:function(url){var a=document.createElement("a");a.href=url;if(browser.ie){a.href=a.href}return !(a.protocol==location.protocol&&a.hostname==location.hostname&&(a.port==location.port||(a.port=="80"&&location.port=="")||(a.port==""&&location.port=="80")))},clearEmptyAttrs:function(obj){for(var p in obj){if(obj[p]===""){delete obj[p]}}return obj},str2json:function(s){if(!utils.isString(s)){return null}if(window.JSON){return JSON.parse(s)}else{return(new Function("return "+utils.trim(s||"")))()}},json2str:(function(){if(window.JSON){return JSON.stringify}else{var escapeMap={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function encodeString(source){if(/["\\\x00-\x1f]/.test(source)){source=source.replace(/["\\\x00-\x1f]/g,function(match){var c=escapeMap[match];if(c){return c}c=match.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})}return'"'+source+'"'}function encodeArray(source){var result=["["],l=source.length,preComma,i,item;for(i=0;i<l;i++){item=source[i];switch(typeof item){case"undefined":case"function":case"unknown":break;default:if(preComma){result.push(",")}result.push(utils.json2str(item));preComma=1}}result.push("]");return result.join("")}function pad(source){return source<10?"0"+source:source}function encodeDate(source){return'"'+source.getFullYear()+"-"+pad(source.getMonth()+1)+"-"+pad(source.getDate())+"T"+pad(source.getHours())+":"+pad(source.getMinutes())+":"+pad(source.getSeconds())+'"'}return function(value){switch(typeof value){case"undefined":return"undefined";case"number":return isFinite(value)?String(value):"null";case"string":return encodeString(value);case"boolean":return String(value);default:if(value===null){return"null"}else{if(utils.isArray(value)){return encodeArray(value)}else{if(utils.isDate(value)){return encodeDate(value)}else{var result=["{"],encode=utils.json2str,preComma,item;for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){item=value[key];switch(typeof item){case"undefined":case"unknown":case"function":break;default:if(preComma){result.push(",")}preComma=1;result.push(encode(key)+":"+encode(item))}}}result.push("}");return result.join("")}}}}}}})()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(v){UE.utils["is"+v]=function(obj){return Object.prototype.toString.apply(obj)=="[object "+v+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(types,listener){types=utils.trim(types).split(/\s+/);for(var i=0,ti;ti=types[i++];){getListener(this,ti,true).push(listener)}},on:function(types,listener){return this.addListener(types,listener)},off:function(types,listener){return this.removeListener(types,listener)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(types,listener){types=utils.trim(types).split(/\s+/);for(var i=0,ti;ti=types[i++];){utils.removeItem(getListener(this,ti)||[],listener)}},fireEvent:function(){var types=arguments[0];types=utils.trim(types).split(" ");for(var i=0,ti;ti=types[i++];){var listeners=getListener(this,ti),r,t,k;if(listeners){k=listeners.length;while(k--){if(!listeners[k]){continue}t=listeners[k].apply(this,arguments);if(t===true){return t}if(t!==undefined){r=t}}}if(t=this["on"+ti.toLowerCase()]){r=t.apply(this,arguments)}}return r}};function getListener(obj,type,force){var allListeners;type=type.toLowerCase();return((allListeners=(obj.__allListeners||force&&(obj.__allListeners={})))&&(allListeners[type]||force&&(allListeners[type]=[])))}var dtd=dom.dtd=(function(){function _(s){for(var k in s){s[k.toUpperCase()]=s[k]}return s}var X=utils.extend2;var A=_({isindex:1,fieldset:1}),B=_({input:1,button:1,select:1,textarea:1,label:1}),C=X(_({a:1}),B),D=X({iframe:1},C),E=_({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),F=_({ins:1,del:1,script:1,style:1}),G=X(_({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),F),H=X(_({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),G),I=X(_({p:1}),H),J=X(_({iframe:1}),H,B),K=_({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),L=X(_({a:0}),J),M=_({tr:1}),N=_({"#":1}),O=X(_({param:1}),K),P=X(_({form:1}),A,D,E,I),Q=_({li:1,ol:1,ul:1}),R=_({style:1,script:1}),S=_({base:1,link:1,meta:1,title:1}),T=X(S,R),U=_({head:1,body:1}),V=_({html:1});var block=_({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),empty=_({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return _({$nonBodyContent:X(V,U,S),$block:block,$inline:L,$inlineWithA:X(_({a:1}),L),$body:X(_({script:1,style:1}),block),$cdata:_({script:1,style:1}),$empty:empty,$nonChild:_({iframe:1,textarea:1}),$listItem:_({dd:1,dt:1,li:1}),$list:_({ul:1,ol:1,dl:1}),$isNotEmpty:_({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:_({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:_({p:1,div:1}),$tableContent:_({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:_({pre:1,script:1,style:1,textarea:1}),html:U,head:T,style:N,script:N,body:P,base:{},link:{},meta:{},title:N,col:{},tr:_({td:1,th:1}),img:{},embed:{},colgroup:_({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:P,td:P,br:{},th:P,center:P,kbd:L,button:X(I,E),basefont:{},h5:L,h4:L,samp:L,h6:L,ol:Q,h1:L,h3:L,option:N,h2:L,form:X(A,D,E,I),select:_({optgroup:1,option:1}),font:L,ins:L,menu:Q,abbr:L,label:L,table:_({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:L,tfoot:M,cite:L,li:P,input:{},iframe:P,strong:L,textarea:N,noframes:P,big:L,small:L,span:_({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:L,dt:L,sub:L,optgroup:_({option:1}),param:{},bdo:L,"var":L,div:P,object:O,sup:L,dd:P,strike:L,area:{},dir:Q,map:X(_({area:1,form:1,p:1}),A,F,E),applet:O,dl:_({dt:1,dd:1}),del:L,isindex:{},fieldset:X(_({legend:1}),K),thead:M,ul:Q,acronym:L,b:L,a:X(_({a:1}),J),blockquote:X(_({td:1,tr:1,tbody:1,li:1}),P),caption:L,i:L,u:L,tbody:M,s:L,address:X(D,I),tt:L,legend:L,q:L,pre:X(G,C),p:X(_({a:1}),L),em:L,dfn:L})})();function getDomNode(node,start,ltr,startFromChild,fn,guard){var tmpNode=startFromChild&&node[start],parent;!tmpNode&&(tmpNode=node[ltr]);while(!tmpNode&&(parent=(parent||node).parentNode)){if(parent.tagName=="BODY"||guard&&!guard(parent)){return null}tmpNode=parent[ltr]}if(tmpNode&&fn&&!fn(tmpNode)){return getDomNode(tmpNode,start,ltr,false,fn)}return tmpNode}var attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200B",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(nodeA,nodeB){if(nodeA===nodeB){return 0}var node,parentsA=[nodeA],parentsB=[nodeB];node=nodeA;while(node=node.parentNode){if(node===nodeB){return 10}parentsA.push(node)}node=nodeB;while(node=node.parentNode){if(node===nodeA){return 20}parentsB.push(node)}parentsA.reverse();parentsB.reverse();if(parentsA[0]!==parentsB[0]){return 1}var i=-1;while(i++,parentsA[i]===parentsB[i]){}nodeA=parentsA[i];nodeB=parentsB[i];while(nodeA=nodeA.nextSibling){if(nodeA===nodeB){return 4}}return 2},getNodeIndex:function(node,ignoreTextNode){var preNode=node,i=0;while(preNode=preNode.previousSibling){if(ignoreTextNode&&preNode.nodeType==3){if(preNode.nodeType!=preNode.nextSibling.nodeType){i++}continue}i++}return i},inDoc:function(node,doc){return domUtils.getPosition(node,doc)==10},findParent:function(node,filterFn,includeSelf){if(node&&!domUtils.isBody(node)){node=includeSelf?node:node.parentNode;while(node){if(!filterFn||filterFn(node)||domUtils.isBody(node)){return filterFn&&!filterFn(node)&&domUtils.isBody(node)?null:node}node=node.parentNode}}return null},findParentByTagName:function(node,tagNames,includeSelf,excludeFn){tagNames=utils.listToMap(utils.isArray(tagNames)?tagNames:[tagNames]);return domUtils.findParent(node,function(node){return tagNames[node.tagName]&&!(excludeFn&&excludeFn(node))},includeSelf)},findParents:function(node,includeSelf,filterFn,closerFirst){var parents=includeSelf&&(filterFn&&filterFn(node)||!filterFn)?[node]:[];while(node=domUtils.findParent(node,filterFn)){parents.push(node)}return closerFirst?parents:parents.reverse()},insertAfter:function(node,newNode){return node.nextSibling?node.parentNode.insertBefore(newNode,node.nextSibling):node.parentNode.appendChild(newNode)},remove:function(node,keepChildren){var parent=node.parentNode,child;if(parent){if(keepChildren&&node.hasChildNodes()){while(child=node.firstChild){parent.insertBefore(child,node)}}parent.removeChild(node)}return node},getNextDomNode:function(node,startFromChild,filterFn,guard){return getDomNode(node,"firstChild","nextSibling",startFromChild,filterFn,guard)},getPreDomNode:function(node,startFromChild,filterFn,guard){return getDomNode(node,"lastChild","previousSibling",startFromChild,filterFn,guard)},isBookmarkNode:function(node){return node.nodeType==1&&node.id&&/^_baidu_bookmark_/i.test(node.id)},getWindow:function(node){var doc=node.ownerDocument||node;return doc.defaultView||doc.parentWindow},getCommonAncestor:function(nodeA,nodeB){if(nodeA===nodeB){return nodeA}var parentsA=[nodeA],parentsB=[nodeB],parent=nodeA,i=-1;while(parent=parent.parentNode){if(parent===nodeB){return parent}parentsA.push(parent)}parent=nodeB;while(parent=parent.parentNode){if(parent===nodeA){return parent}parentsB.push(parent)}parentsA.reverse();parentsB.reverse();while(i++,parentsA[i]===parentsB[i]){}return i==0?null:parentsA[i-1]},clearEmptySibling:function(node,ignoreNext,ignorePre){function clear(next,dir){var tmpNode;while(next&&!domUtils.isBookmarkNode(next)&&(domUtils.isEmptyInlineElement(next)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(next.nodeValue))){tmpNode=next[dir];domUtils.remove(next);next=tmpNode}}!ignoreNext&&clear(node.nextSibling,"nextSibling");!ignorePre&&clear(node.previousSibling,"previousSibling")},split:function(node,offset){var doc=node.ownerDocument;if(browser.ie&&offset==node.nodeValue.length){var next=doc.createTextNode("");return domUtils.insertAfter(node,next)}var retval=node.splitText(offset);if(browser.ie8){var tmpNode=doc.createTextNode("");domUtils.insertAfter(retval,tmpNode);domUtils.remove(tmpNode)}return retval},isWhitespace:function(node){return !new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(node.nodeValue)},getXY:function(element){var x=0,y=0;while(element.offsetParent){y+=element.offsetTop;x+=element.offsetLeft;element=element.offsetParent}return{x:x,y:y}},on:function(element,type,handler){var types=utils.isArray(type)?type:utils.trim(type).split(/\s+/),k=types.length;if(k){while(k--){type=types[k];if(element.addEventListener){element.addEventListener(type,handler,false)}else{if(!handler._d){handler._d={els:[]}}var key=type+handler.toString(),index=utils.indexOf(handler._d.els,element);if(!handler._d[key]||index==-1){if(index==-1){handler._d.els.push(element)}if(!handler._d[key]){handler._d[key]=function(evt){return handler.call(evt.srcElement,evt||window.event)}}element.attachEvent("on"+type,handler._d[key])}}}}element=null},un:function(element,type,handler){var types=utils.isArray(type)?type:utils.trim(type).split(/\s+/),k=types.length;if(k){while(k--){type=types[k];if(element.removeEventListener){element.removeEventListener(type,handler,false)}else{var key=type+handler.toString();try{element.detachEvent("on"+type,handler._d?handler._d[key]:handler)}catch(e){}if(handler._d&&handler._d[key]){var index=utils.indexOf(handler._d.els,element);if(index!=-1){handler._d.els.splice(index,1)}handler._d.els.length==0&&delete handler._d[key]}}}}},isSameElement:function(nodeA,nodeB){if(nodeA.tagName!=nodeB.tagName){return false}var thisAttrs=nodeA.attributes,otherAttrs=nodeB.attributes;if(!ie&&thisAttrs.length!=otherAttrs.length){return false}var attrA,attrB,al=0,bl=0;for(var i=0;attrA=thisAttrs[i++];){if(attrA.nodeName=="style"){if(attrA.specified){al++}if(domUtils.isSameStyle(nodeA,nodeB)){continue}else{return false}}if(ie){if(attrA.specified){al++;attrB=otherAttrs.getNamedItem(attrA.nodeName)}else{continue}}else{attrB=nodeB.attributes[attrA.nodeName]}if(!attrB.specified||attrA.nodeValue!=attrB.nodeValue){return false}}if(ie){for(i=0;attrB=otherAttrs[i++];){if(attrB.specified){bl++}}if(al!=bl){return false}}return true},isSameStyle:function(nodeA,nodeB){var styleA=nodeA.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),styleB=nodeB.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){styleA=nodeA.style;styleB=nodeB.style;if(styleA.length!=styleB.length){return false}for(var p in styleA){if(/^(\d+|csstext)$/i.test(p)){continue}if(styleA[p]!=styleB[p]){return false}}return true}if(!styleA||!styleB){return styleA==styleB}styleA=styleA.split(";");styleB=styleB.split(";");if(styleA.length!=styleB.length){return false}for(var i=0,ci;ci=styleA[i++];){if(utils.indexOf(styleB,ci)==-1){return false}}return true},isBlockElm:function(node){return node.nodeType==1&&(dtd.$block[node.tagName]||styleBlock[domUtils.getComputedStyle(node,"display")])&&!dtd.$nonChild[node.tagName]},isBody:function(node){return node&&node.nodeType==1&&node.tagName.toLowerCase()=="body"},breakParent:function(node,parent){var tmpNode,parentClone=node,clone=node,leftNodes,rightNodes;do{parentClone=parentClone.parentNode;if(leftNodes){tmpNode=parentClone.cloneNode(false);tmpNode.appendChild(leftNodes);leftNodes=tmpNode;tmpNode=parentClone.cloneNode(false);tmpNode.appendChild(rightNodes);rightNodes=tmpNode}else{leftNodes=parentClone.cloneNode(false);rightNodes=leftNodes.cloneNode(false)}while(tmpNode=clone.previousSibling){leftNodes.insertBefore(tmpNode,leftNodes.firstChild)}while(tmpNode=clone.nextSibling){rightNodes.appendChild(tmpNode)}clone=parentClone}while(parent!==parentClone);tmpNode=parent.parentNode;tmpNode.insertBefore(leftNodes,parent);tmpNode.insertBefore(rightNodes,parent);tmpNode.insertBefore(node,rightNodes);domUtils.remove(parent);return node},isEmptyInlineElement:function(node){if(node.nodeType!=1||!dtd.$removeEmpty[node.tagName]){return 0}node=node.firstChild;while(node){if(domUtils.isBookmarkNode(node)){return 0}if(node.nodeType==1&&!domUtils.isEmptyInlineElement(node)||node.nodeType==3&&!domUtils.isWhitespace(node)){return 0}node=node.nextSibling}return 1},trimWhiteTextNode:function(node){function remove(dir){var child;while((child=node[dir])&&child.nodeType==3&&domUtils.isWhitespace(child)){node.removeChild(child)}}remove("firstChild");remove("lastChild")},mergeChild:function(node,tagName,attrs){var list=domUtils.getElementsByTagName(node,node.tagName.toLowerCase());for(var i=0,ci;ci=list[i++];){if(!ci.parentNode||domUtils.isBookmarkNode(ci)){continue}if(ci.tagName.toLowerCase()=="span"){if(node===ci.parentNode){domUtils.trimWhiteTextNode(node);if(node.childNodes.length==1){node.style.cssText=ci.style.cssText+";"+node.style.cssText;domUtils.remove(ci,true);continue}}ci.style.cssText=node.style.cssText+";"+ci.style.cssText;if(attrs){var style=attrs.style;if(style){style=style.split(";");for(var j=0,s;s=style[j++];){ci.style[utils.cssStyleToDomStyle(s.split(":")[0])]=s.split(":")[1]}}}if(domUtils.isSameStyle(ci,node)){domUtils.remove(ci,true)}continue}if(domUtils.isSameElement(node,ci)){domUtils.remove(ci,true)}}},getElementsByTagName:function(node,name,filter){if(filter&&utils.isString(filter)){var className=filter;filter=function(node){return domUtils.hasClass(node,className)}}name=utils.trim(name).replace(/[ ]{2,}/g," ").split(" ");var arr=[];for(var n=0,ni;ni=name[n++];){var list=node.getElementsByTagName(ni);for(var i=0,ci;ci=list[i++];){if(!filter||filter(ci)){arr.push(ci)}}}return arr},mergeToParent:function(node){var parent=node.parentNode;while(parent&&dtd.$removeEmpty[parent.tagName]){if(parent.tagName==node.tagName||parent.tagName=="A"){domUtils.trimWhiteTextNode(parent);if(parent.tagName=="SPAN"&&!domUtils.isSameStyle(parent,node)||(parent.tagName=="A"&&node.tagName=="SPAN")){if(parent.childNodes.length>1||parent!==node.parentNode){node.style.cssText=parent.style.cssText+";"+node.style.cssText;parent=parent.parentNode;continue}else{parent.style.cssText+=";"+node.style.cssText;if(parent.tagName=="A"){parent.style.textDecoration="underline"}}}if(parent.tagName!="A"){parent===node.parentNode&&domUtils.remove(node,true);break}}parent=parent.parentNode}},mergeSibling:function(node,ignorePre,ignoreNext){function merge(rtl,start,node){var next;if((next=node[rtl])&&!domUtils.isBookmarkNode(next)&&next.nodeType==1&&domUtils.isSameElement(node,next)){while(next.firstChild){if(start=="firstChild"){node.insertBefore(next.lastChild,node.firstChild)}else{node.appendChild(next.firstChild)}}domUtils.remove(next)}}!ignorePre&&merge("previousSibling","firstChild",node);!ignoreNext&&merge("nextSibling","lastChild",node)},unSelectable:ie&&browser.ie9below||browser.opera?function(node){node.onselectstart=function(){return false};node.onclick=node.onkeyup=node.onkeydown=function(){return false};node.unselectable="on";node.setAttribute("unselectable","on");for(var i=0,ci;ci=node.all[i++];){switch(ci.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:ci.unselectable="on";node.setAttribute("unselectable","on")}}}:function(node){node.style.MozUserSelect=node.style.webkitUserSelect=node.style.msUserSelect=node.style.KhtmlUserSelect="none"},removeAttributes:function(node,attrNames){attrNames=utils.isArray(attrNames)?attrNames:utils.trim(attrNames).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci;ci=attrNames[i++];){ci=attrFix[ci]||ci;switch(ci){case"className":node[ci]="";break;case"style":node.style.cssText="";var val=node.getAttributeNode("style");!browser.ie&&val&&node.removeAttributeNode(val)}node.removeAttribute(ci)}},createElement:function(doc,tag,attrs){return domUtils.setAttributes(doc.createElement(tag),attrs)},setAttributes:function(node,attrs){for(var attr in attrs){if(attrs.hasOwnProperty(attr)){var value=attrs[attr];switch(attr){case"class":node.className=value;break;case"style":node.style.cssText=node.style.cssText+";"+value;break;case"innerHTML":node[attr]=value;break;case"value":node.value=value;break;default:node.setAttribute(attrFix[attr]||attr,value)}}}return node},getComputedStyle:function(element,styleName){var pros="width height top left";if(pros.indexOf(styleName)>-1){return element["offset"+styleName.replace(/^\w/,function(s){return s.toUpperCase()})]+"px"}if(element.nodeType==3){element=element.parentNode}if(browser.ie&&browser.version<9&&styleName=="font-size"&&!element.style.fontSize&&!dtd.$empty[element.tagName]&&!dtd.$nonChild[element.tagName]){var span=element.ownerDocument.createElement("span");span.style.cssText="padding:0;border:0;font-family:simsun;";span.innerHTML=".";element.appendChild(span);var result=span.offsetHeight;element.removeChild(span);span=null;return result+"px"}try{var value=domUtils.getStyle(element,styleName)||(window.getComputedStyle?domUtils.getWindow(element).getComputedStyle(element,"").getPropertyValue(styleName):(element.currentStyle||element.style)[utils.cssStyleToDomStyle(styleName)])}catch(e){return""}return utils.transUnitToPx(utils.fixColor(styleName,value))},removeClasses:function(elm,classNames){classNames=utils.isArray(classNames)?classNames:utils.trim(classNames).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci,cls=elm.className;ci=classNames[i++];){cls=cls.replace(new RegExp("\\b"+ci+"\\b"),"")}cls=utils.trim(cls).replace(/[ ]{2,}/g," ");if(cls){elm.className=cls}else{domUtils.removeAttributes(elm,["class"])}},addClass:function(elm,classNames){if(!elm){return}classNames=utils.trim(classNames).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci,cls=elm.className;ci=classNames[i++];){if(!new RegExp("\\b"+ci+"\\b").test(cls)){cls+=" "+ci}}elm.className=utils.trim(cls)},hasClass:function(element,className){if(utils.isRegExp(className)){return className.test(element.className)}className=utils.trim(className).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci,cls=element.className;ci=className[i++];){if(!new RegExp("\\b"+ci+"\\b","i").test(cls)){return false}}return i-1==className.length},preventDefault:function(evt){evt.preventDefault?evt.preventDefault():(evt.returnValue=false)},removeStyle:function(element,name){if(browser.ie){if(name=="color"){name="(^|;)"+name}element.style.cssText=element.style.cssText.replace(new RegExp(name+"[^:]*:[^;]+;?","ig"),"")}else{if(element.style.removeProperty){element.style.removeProperty(name)}else{element.style.removeAttribute(utils.cssStyleToDomStyle(name))}}if(!element.style.cssText){domUtils.removeAttributes(element,["style"])}},getStyle:function(element,name){var value=element.style[utils.cssStyleToDomStyle(name)];return utils.fixColor(name,value)},setStyle:function(element,name,value){element.style[utils.cssStyleToDomStyle(name)]=value;if(!utils.trim(element.style.cssText)){this.removeAttributes(element,"style")}},setStyles:function(element,styles){for(var name in styles){if(styles.hasOwnProperty(name)){domUtils.setStyle(element,name,styles[name])}}},removeDirtyAttr:function(node){for(var i=0,ci,nodes=node.getElementsByTagName("*");ci=nodes[i++];){ci.removeAttribute("_moz_dirty")}node.removeAttribute("_moz_dirty")},getChildCount:function(node,fn){var count=0,first=node.firstChild;fn=fn||function(){return 1};while(first){if(fn(first)){count++}first=first.nextSibling}return count},isEmptyNode:function(node){return !node.firstChild||domUtils.getChildCount(node,function(node){return !domUtils.isBr(node)&&!domUtils.isBookmarkNode(node)&&!domUtils.isWhitespace(node)})==0},clearSelectedArr:function(nodes){var node;while(node=nodes.pop()){domUtils.removeAttributes(node,["class"])}},scrollToView:function(node,win,offsetTop){var getViewPaneSize=function(){var doc=win.document,mode=doc.compatMode=="CSS1Compat";return{width:(mode?doc.documentElement.clientWidth:doc.body.clientWidth)||0,height:(mode?doc.documentElement.clientHeight:doc.body.clientHeight)||0}},getScrollPosition=function(win){if("pageXOffset" in win){return{x:win.pageXOffset||0,y:win.pageYOffset||0}}else{var doc=win.document;return{x:doc.documentElement.scrollLeft||doc.body.scrollLeft||0,y:doc.documentElement.scrollTop||doc.body.scrollTop||0}}};var winHeight=getViewPaneSize().height,offset=winHeight*-1+offsetTop;offset+=(node.offsetHeight||0);var elementPosition=domUtils.getXY(node);offset+=elementPosition.y;var currentScroll=getScrollPosition(win).y;if(offset>currentScroll||offset<currentScroll-winHeight){win.scrollTo(0,offset+(offset<0?-20:20))}},isBr:function(node){return node.nodeType==1&&node.tagName=="BR"},isFillChar:function(node,isInStart){if(node.nodeType!=3){return false}var text=node.nodeValue;if(isInStart){return new RegExp("^"+domUtils.fillChar).test(text)}return !text.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(range){var tmpRange=range.cloneRange(),flag=0,start=tmpRange.startContainer,tmp;if(start.nodeType==1&&start.childNodes[tmpRange.startOffset]){start=start.childNodes[tmpRange.startOffset];var pre=start.previousSibling;while(pre&&domUtils.isFillChar(pre)){start=pre;pre=pre.previousSibling}}if(this.isFillChar(start,true)&&tmpRange.startOffset==1){tmpRange.setStartBefore(start);start=tmpRange.startContainer}while(start&&domUtils.isFillChar(start)){tmp=start;start=start.previousSibling}if(tmp){tmpRange.setStartBefore(tmp);start=tmpRange.startContainer}if(start.nodeType==1&&domUtils.isEmptyNode(start)&&tmpRange.startOffset==1){tmpRange.setStart(start,0).collapse(true)}while(!tmpRange.startOffset){start=tmpRange.startContainer;if(domUtils.isBlockElm(start)||domUtils.isBody(start)){flag=1;break}var pre=tmpRange.startContainer.previousSibling,tmpNode;if(!pre){tmpRange.setStartBefore(tmpRange.startContainer)}else{while(pre&&domUtils.isFillChar(pre)){tmpNode=pre;pre=pre.previousSibling}if(tmpNode){tmpRange.setStartBefore(tmpNode)}else{tmpRange.setStartBefore(tmpRange.startContainer)}}}return flag&&!domUtils.isBody(tmpRange.startContainer)?1:0},isEmptyBlock:function(node,reg){if(node.nodeType!=1){return 0}reg=reg||new RegExp("[ \xa0\t\r\n"+domUtils.fillChar+"]","g");if(node[browser.ie?"innerText":"textContent"].replace(reg,"").length>0){return 0}for(var n in dtd.$isNotEmpty){if(node.getElementsByTagName(n).length){return 0}}return 1},setViewportOffset:function(element,offset){var left=parseInt(element.style.left)|0;var top=parseInt(element.style.top)|0;var rect=element.getBoundingClientRect();var offsetLeft=offset.left-rect.left;var offsetTop=offset.top-rect.top;if(offsetLeft){element.style.left=left+offsetLeft+"px"}if(offsetTop){element.style.top=top+offsetTop+"px"}},fillNode:function(doc,node){var tmpNode=browser.ie?doc.createTextNode(domUtils.fillChar):doc.createElement("br");node.innerHTML="";node.appendChild(tmpNode)},moveChild:function(src,tag,dir){while(src.firstChild){if(dir&&tag.firstChild){tag.insertBefore(src.lastChild,tag.firstChild)}else{tag.appendChild(src.firstChild)}}},hasNoAttributes:function(node){return browser.ie?/^<\w+\s*?>/.test(node.outerHTML):node.attributes.length==0},isCustomeNode:function(node){return node.nodeType==1&&node.getAttribute("_ue_custom_node_")},isTagNode:function(node,tagNames){return node.nodeType==1&&new RegExp("\\b"+node.tagName+"\\b","i").test(tagNames)},filterNodeList:function(nodelist,filter,forAll){var results=[];if(!utils.isFunction(filter)){var str=filter;filter=function(n){return utils.indexOf(utils.isArray(str)?str:str.split(" "),n.tagName.toLowerCase())!=-1}}utils.each(nodelist,function(n){filter(n)&&results.push(n)});return results.length==0?null:results.length==1||!forAll?results[0]:results},isInNodeEndBoundary:function(rng,node){var start=rng.startContainer;if(start.nodeType==3&&rng.startOffset!=start.nodeValue.length){return 0}if(start.nodeType==1&&rng.startOffset!=start.childNodes.length){return 0}while(start!==node){if(start.nextSibling){return 0}start=start.parentNode}return 1},isBoundaryNode:function(node,dir){var tmp;while(!domUtils.isBody(node)){tmp=node;node=node.parentNode;if(tmp!==node[dir]){return false}}return true},fillHtml:browser.ie11below?"&nbsp;":"<br/>"};var fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){var guid=0,fillChar=domUtils.fillChar,fillData;function updateCollapse(range){range.collapsed=range.startContainer&&range.endContainer&&range.startContainer===range.endContainer&&range.startOffset==range.endOffset}function selectOneNode(rng){return !rng.collapsed&&rng.startContainer.nodeType==1&&rng.startContainer===rng.endContainer&&rng.endOffset-rng.startOffset==1}function setEndPoint(toStart,node,offset,range){if(node.nodeType==1&&(dtd.$empty[node.tagName]||dtd.$nonChild[node.tagName])){offset=domUtils.getNodeIndex(node)+(toStart?0:1);node=node.parentNode}if(toStart){range.startContainer=node;range.startOffset=offset;if(!range.endContainer){range.collapse(true)}}else{range.endContainer=node;range.endOffset=offset;if(!range.startContainer){range.collapse(false)}}updateCollapse(range);return range}function execContentsAction(range,action){var start=range.startContainer,end=range.endContainer,startOffset=range.startOffset,endOffset=range.endOffset,doc=range.document,frag=doc.createDocumentFragment(),tmpStart,tmpEnd;if(start.nodeType==1){start=start.childNodes[startOffset]||(tmpStart=start.appendChild(doc.createTextNode("")))}if(end.nodeType==1){end=end.childNodes[endOffset]||(tmpEnd=end.appendChild(doc.createTextNode("")))}if(start===end&&start.nodeType==3){frag.appendChild(doc.createTextNode(start.substringData(startOffset,endOffset-startOffset)));if(action){start.deleteData(startOffset,endOffset-startOffset);range.collapse(true)}return frag}var current,currentLevel,clone=frag,startParents=domUtils.findParents(start,true),endParents=domUtils.findParents(end,true);for(var i=0;startParents[i]==endParents[i];){i++}for(var j=i,si;si=startParents[j];j++){current=si.nextSibling;if(si==start){if(!tmpStart){if(range.startContainer.nodeType==3){clone.appendChild(doc.createTextNode(start.nodeValue.slice(startOffset)));if(action){start.deleteData(startOffset,start.nodeValue.length-startOffset)}}else{clone.appendChild(!action?start.cloneNode(true):start)}}}else{currentLevel=si.cloneNode(false);clone.appendChild(currentLevel)}while(current){if(current===end||current===endParents[j]){break}si=current.nextSibling;clone.appendChild(!action?current.cloneNode(true):current);current=si}clone=currentLevel}clone=frag;if(!startParents[i]){clone.appendChild(startParents[i-1].cloneNode(false));clone=clone.firstChild}for(var j=i,ei;ei=endParents[j];j++){current=ei.previousSibling;if(ei==end){if(!tmpEnd&&range.endContainer.nodeType==3){clone.appendChild(doc.createTextNode(end.substringData(0,endOffset)));if(action){end.deleteData(0,endOffset)}}}else{currentLevel=ei.cloneNode(false);clone.appendChild(currentLevel)}if(j!=i||!startParents[i]){while(current){if(current===start){break}ei=current.previousSibling;clone.insertBefore(!action?current.cloneNode(true):current,clone.firstChild);current=ei}}clone=currentLevel}if(action){range.setStartBefore(!endParents[i]?endParents[i-1]:!startParents[i]?startParents[i-1]:endParents[i]).collapse(true)}tmpStart&&domUtils.remove(tmpStart);tmpEnd&&domUtils.remove(tmpEnd);return frag}var Range=dom.Range=function(document){var me=this;me.startContainer=me.startOffset=me.endContainer=me.endOffset=null;me.document=document;me.collapsed=true};function removeFillData(doc,excludeNode){try{if(fillData&&domUtils.inDoc(fillData,doc)){if(!fillData.nodeValue.replace(fillCharReg,"").length){var tmpNode=fillData.parentNode;domUtils.remove(fillData);while(tmpNode&&domUtils.isEmptyInlineElement(tmpNode)&&(browser.safari?!(domUtils.getPosition(tmpNode,excludeNode)&domUtils.POSITION_CONTAINS):!tmpNode.contains(excludeNode))){fillData=tmpNode.parentNode;domUtils.remove(tmpNode);tmpNode=fillData}}else{fillData.nodeValue=fillData.nodeValue.replace(fillCharReg,"")}}}catch(e){}}function mergeSibling(node,dir){var tmpNode;node=node[dir];while(node&&domUtils.isFillChar(node)){tmpNode=node[dir];domUtils.remove(node);node=tmpNode}}Range.prototype={cloneContents:function(){return this.collapsed?null:execContentsAction(this,0)},deleteContents:function(){var txt;if(!this.collapsed){execContentsAction(this,1)}if(browser.webkit){txt=this.startContainer;if(txt.nodeType==3&&!txt.nodeValue.length){this.setStartBefore(txt).collapse(true);domUtils.remove(txt)}}return this},extractContents:function(){return this.collapsed?null:execContentsAction(this,2)},setStart:function(node,offset){return setEndPoint(true,node,offset,this)},setEnd:function(node,offset){return setEndPoint(false,node,offset,this)},setStartAfter:function(node){return this.setStart(node.parentNode,domUtils.getNodeIndex(node)+1)},setStartBefore:function(node){return this.setStart(node.parentNode,domUtils.getNodeIndex(node))},setEndAfter:function(node){return this.setEnd(node.parentNode,domUtils.getNodeIndex(node)+1)},setEndBefore:function(node){return this.setEnd(node.parentNode,domUtils.getNodeIndex(node))},setStartAtFirst:function(node){return this.setStart(node,0)},setStartAtLast:function(node){return this.setStart(node,node.nodeType==3?node.nodeValue.length:node.childNodes.length)},setEndAtFirst:function(node){return this.setEnd(node,0)},setEndAtLast:function(node){return this.setEnd(node,node.nodeType==3?node.nodeValue.length:node.childNodes.length)},selectNode:function(node){return this.setStartBefore(node).setEndAfter(node)},selectNodeContents:function(node){return this.setStart(node,0).setEndAtLast(node)},cloneRange:function(){var me=this;return new Range(me.document).setStart(me.startContainer,me.startOffset).setEnd(me.endContainer,me.endOffset)},collapse:function(toStart){var me=this;if(toStart){me.endContainer=me.startContainer;me.endOffset=me.startOffset}else{me.startContainer=me.endContainer;me.startOffset=me.endOffset}me.collapsed=true;return me},shrinkBoundary:function(ignoreEnd){var me=this,child,collapsed=me.collapsed;function check(node){return node.nodeType==1&&!domUtils.isBookmarkNode(node)&&!dtd.$empty[node.tagName]&&!dtd.$nonChild[node.tagName]}while(me.startContainer.nodeType==1&&(child=me.startContainer.childNodes[me.startOffset])&&check(child)){me.setStart(child,0)}if(collapsed){return me.collapse(true)}if(!ignoreEnd){while(me.endContainer.nodeType==1&&me.endOffset>0&&(child=me.endContainer.childNodes[me.endOffset-1])&&check(child)){me.setEnd(child,child.childNodes.length)}}return me},getCommonAncestor:function(includeSelf,ignoreTextNode){var me=this,start=me.startContainer,end=me.endContainer;if(start===end){if(includeSelf&&selectOneNode(this)){start=start.childNodes[me.startOffset];if(start.nodeType==1){return start}}return ignoreTextNode&&start.nodeType==3?start.parentNode:start}return domUtils.getCommonAncestor(start,end)},trimBoundary:function(ignoreEnd){this.txtToElmBoundary();var start=this.startContainer,offset=this.startOffset,collapsed=this.collapsed,end=this.endContainer;if(start.nodeType==3){if(offset==0){this.setStartBefore(start)}else{if(offset>=start.nodeValue.length){this.setStartAfter(start)}else{var textNode=domUtils.split(start,offset);if(start===end){this.setEnd(textNode,this.endOffset-offset)}else{if(start.parentNode===end){this.endOffset+=1}}this.setStartBefore(textNode)}}if(collapsed){return this.collapse(true)}}if(!ignoreEnd){offset=this.endOffset;end=this.endContainer;if(end.nodeType==3){if(offset==0){this.setEndBefore(end)}else{offset<end.nodeValue.length&&domUtils.split(end,offset);this.setEndAfter(end)}}}return this},txtToElmBoundary:function(ignoreCollapsed){function adjust(r,c){var container=r[c+"Container"],offset=r[c+"Offset"];if(container.nodeType==3){if(!offset){r["set"+c.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](container)}else{if(offset>=container.nodeValue.length){r["set"+c.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](container)}}}}if(ignoreCollapsed||!this.collapsed){adjust(this,"start");adjust(this,"end")}return this},insertNode:function(node){var first=node,length=1;if(node.nodeType==11){first=node.firstChild;length=node.childNodes.length}this.trimBoundary(true);var start=this.startContainer,offset=this.startOffset;var nextNode=start.childNodes[offset];if(nextNode){start.insertBefore(node,nextNode)}else{start.appendChild(node)}if(first.parentNode===this.endContainer){this.endOffset=this.endOffset+length}return this.setStartBefore(first)},setCursor:function(toEnd,noFillData){return this.collapse(!toEnd).select(noFillData)},createBookmark:function(serialize,same){var endNode,startNode=this.document.createElement("span");startNode.style.cssText="display:none;line-height:0px;";startNode.appendChild(this.document.createTextNode("\u200D"));startNode.id="_baidu_bookmark_start_"+(same?"":guid++);if(!this.collapsed){endNode=startNode.cloneNode(true);endNode.id="_baidu_bookmark_end_"+(same?"":guid++)}this.insertNode(startNode);if(endNode){this.collapse().insertNode(endNode).setEndBefore(endNode)}this.setStartAfter(startNode);return{start:serialize?startNode.id:startNode,end:endNode?serialize?endNode.id:endNode:null,id:serialize}},moveToBookmark:function(bookmark){var start=bookmark.id?this.document.getElementById(bookmark.start):bookmark.start,end=bookmark.end&&bookmark.id?this.document.getElementById(bookmark.end):bookmark.end;this.setStartBefore(start);domUtils.remove(start);if(end){this.setEndBefore(end);domUtils.remove(end)}else{this.collapse(true)}return this},enlarge:function(toBlock,stopFn){var isBody=domUtils.isBody,pre,node,tmp=this.document.createTextNode("");if(toBlock){node=this.startContainer;if(node.nodeType==1){if(node.childNodes[this.startOffset]){pre=node=node.childNodes[this.startOffset]}else{node.appendChild(tmp);pre=node=tmp}}else{pre=node}while(1){if(domUtils.isBlockElm(node)){node=pre;while((pre=node.previousSibling)&&!domUtils.isBlockElm(pre)){node=pre}this.setStartBefore(node);break}pre=node;node=node.parentNode}node=this.endContainer;if(node.nodeType==1){if(pre=node.childNodes[this.endOffset]){node.insertBefore(tmp,pre)}else{node.appendChild(tmp)}pre=node=tmp}else{pre=node}while(1){if(domUtils.isBlockElm(node)){node=pre;while((pre=node.nextSibling)&&!domUtils.isBlockElm(pre)){node=pre}this.setEndAfter(node);break}pre=node;node=node.parentNode}if(tmp.parentNode===this.endContainer){this.endOffset--}domUtils.remove(tmp)}if(!this.collapsed){while(this.startOffset==0){if(stopFn&&stopFn(this.startContainer)){break}if(isBody(this.startContainer)){break}this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(stopFn&&stopFn(this.endContainer)){break}if(isBody(this.endContainer)){break}this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(ignoreEnd){while(!domUtils.isBlockElm(this.startContainer)){this.setStartBefore(this.startContainer)}if(!ignoreEnd){while(!domUtils.isBlockElm(this.endContainer)){this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setEndBefore(this.endContainer)}}return this},applyInlineStyle:function(tagName,attrs,list){if(this.collapsed){return this}this.trimBoundary().enlarge(false,function(node){return node.nodeType==1&&domUtils.isBlockElm(node)}).adjustmentBoundary();var bookmark=this.createBookmark(),end=bookmark.end,filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br":!domUtils.isWhitespace(node)},current=domUtils.getNextDomNode(bookmark.start,false,filterFn),node,pre,range=this.cloneRange();while(current&&(domUtils.getPosition(current,end)&domUtils.POSITION_PRECEDING)){if(current.nodeType==3||dtd[tagName][current.tagName]){range.setStartBefore(current);node=current;while(node&&(node.nodeType==3||dtd[tagName][node.tagName])&&node!==end){pre=node;node=domUtils.getNextDomNode(node,node.nodeType==1,null,function(parent){return dtd[tagName][parent.tagName]})}var frag=range.setEndAfter(pre).extractContents(),elm;if(list&&list.length>0){var level,top;top=level=list[0].cloneNode(false);for(var i=1,ci;ci=list[i++];){level.appendChild(ci.cloneNode(false));level=level.firstChild}elm=level}else{elm=range.document.createElement(tagName)}if(attrs){domUtils.setAttributes(elm,attrs)}elm.appendChild(frag);range.insertNode(list?top:elm);var aNode;if(tagName=="span"&&attrs.style&&/text\-decoration/.test(attrs.style)&&(aNode=domUtils.findParentByTagName(elm,"a",true))){domUtils.setAttributes(aNode,attrs);domUtils.remove(elm,true);elm=aNode}else{domUtils.mergeSibling(elm);domUtils.clearEmptySibling(elm)}domUtils.mergeChild(elm,attrs);current=domUtils.getNextDomNode(elm,false,filterFn);domUtils.mergeToParent(elm);if(node===end){break}}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return this.moveToBookmark(bookmark)},removeInlineStyle:function(tagNames){if(this.collapsed){return this}tagNames=utils.isArray(tagNames)?tagNames:[tagNames];this.shrinkBoundary().adjustmentBoundary();var start=this.startContainer,end=this.endContainer;while(1){if(start.nodeType==1){if(utils.indexOf(tagNames,start.tagName.toLowerCase())>-1){break}if(start.tagName.toLowerCase()=="body"){start=null;break}}start=start.parentNode}while(1){if(end.nodeType==1){if(utils.indexOf(tagNames,end.tagName.toLowerCase())>-1){break}if(end.tagName.toLowerCase()=="body"){end=null;break}}end=end.parentNode}var bookmark=this.createBookmark(),frag,tmpRange;if(start){tmpRange=this.cloneRange().setEndBefore(bookmark.start).setStartBefore(start);frag=tmpRange.extractContents();tmpRange.insertNode(frag);domUtils.clearEmptySibling(start,true);start.parentNode.insertBefore(bookmark.start,start)}if(end){tmpRange=this.cloneRange().setStartAfter(bookmark.end).setEndAfter(end);frag=tmpRange.extractContents();tmpRange.insertNode(frag);domUtils.clearEmptySibling(end,false,true);end.parentNode.insertBefore(bookmark.end,end.nextSibling)}var current=domUtils.getNextDomNode(bookmark.start,false,function(node){return node.nodeType==1}),next;while(current&&current!==bookmark.end){next=domUtils.getNextDomNode(current,true,function(node){return node.nodeType==1});if(utils.indexOf(tagNames,current.tagName.toLowerCase())>-1){domUtils.remove(current,true)}current=next}return this.moveToBookmark(bookmark)},getClosedNode:function(){var node;if(!this.collapsed){var range=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(selectOneNode(range)){var child=range.startContainer.childNodes[range.startOffset];if(child&&child.nodeType==1&&(dtd.$empty[child.tagName]||dtd.$nonChild[child.tagName])){node=child}}}return node},select:browser.ie?function(noFillData,textRange){var nativeRange;if(!this.collapsed){this.shrinkBoundary()}var node=this.getClosedNode();if(node&&!textRange){try{nativeRange=this.document.body.createControlRange();nativeRange.addElement(node);nativeRange.select()}catch(e){}return this}var bookmark=this.createBookmark(),start=bookmark.start,end;nativeRange=this.document.body.createTextRange();nativeRange.moveToElementText(start);nativeRange.moveStart("character",1);if(!this.collapsed){var nativeRangeEnd=this.document.body.createTextRange();end=bookmark.end;nativeRangeEnd.moveToElementText(end);nativeRange.setEndPoint("EndToEnd",nativeRangeEnd)}else{if(!noFillData&&this.startContainer.nodeType!=3){var tmpText=this.document.createTextNode(fillChar),tmp=this.document.createElement("span");tmp.appendChild(this.document.createTextNode(fillChar));start.parentNode.insertBefore(tmp,start);start.parentNode.insertBefore(tmpText,start);removeFillData(this.document,tmpText);fillData=tmpText;mergeSibling(tmp,"previousSibling");mergeSibling(start,"nextSibling");nativeRange.moveStart("character",-1);nativeRange.collapse(true)}}this.moveToBookmark(bookmark);tmp&&domUtils.remove(tmp);try{nativeRange.select()}catch(e){}return this}:function(notInsertFillData){function checkOffset(rng){function check(node,offset,dir){if(node.nodeType==3&&node.nodeValue.length<offset){rng[dir+"Offset"]=node.nodeValue.length}}check(rng.startContainer,rng.startOffset,"start");check(rng.endContainer,rng.endOffset,"end")}var win=domUtils.getWindow(this.document),sel=win.getSelection(),txtNode;browser.gecko?this.document.body.focus():win.focus();if(sel){sel.removeAllRanges();if(this.collapsed&&!notInsertFillData){var start=this.startContainer,child=start;if(start.nodeType==1){child=start.childNodes[this.startOffset]}if(!(start.nodeType==3&&this.startOffset)&&(child?(!child.previousSibling||child.previousSibling.nodeType!=3):(!start.lastChild||start.lastChild.nodeType!=3))){txtNode=this.document.createTextNode(fillChar);this.insertNode(txtNode);removeFillData(this.document,txtNode);mergeSibling(txtNode,"previousSibling");mergeSibling(txtNode,"nextSibling");fillData=txtNode;this.setStart(txtNode,browser.webkit?1:0).collapse(true)}}var nativeRange=this.document.createRange();if(this.collapsed&&browser.opera&&this.startContainer.nodeType==1){var child=this.startContainer.childNodes[this.startOffset];if(!child){child=this.startContainer.lastChild;if(child&&domUtils.isBr(child)){this.setStartBefore(child).collapse(true)}}else{while(child&&domUtils.isBlockElm(child)){if(child.nodeType==1&&child.childNodes[0]){child=child.childNodes[0]}else{break}}child&&this.setStartBefore(child).collapse(true)}}checkOffset(this);nativeRange.setStart(this.startContainer,this.startOffset);nativeRange.setEnd(this.endContainer,this.endOffset);sel.addRange(nativeRange)}return this},scrollToView:function(win,offset){win=win?window:domUtils.getWindow(this.document);var me=this,span=me.document.createElement("span");span.innerHTML="&nbsp;";me.cloneRange().insertNode(span);domUtils.scrollToView(span,win,offset);domUtils.remove(span);return me},inFillChar:function(){var start=this.startContainer;if(this.collapsed&&start.nodeType==3&&start.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==start.nodeValue.length){return true}return false},createAddress:function(ignoreEnd,ignoreTxt){var addr={},me=this;function getAddress(isStart){var node=isStart?me.startContainer:me.endContainer;var parents=domUtils.findParents(node,true,function(node){return !domUtils.isBody(node)}),addrs=[];for(var i=0,ci;ci=parents[i++];){addrs.push(domUtils.getNodeIndex(ci,ignoreTxt))}var firstIndex=0;if(ignoreTxt){if(node.nodeType==3){var tmpNode=node.previousSibling;while(tmpNode&&tmpNode.nodeType==3){firstIndex+=tmpNode.nodeValue.replace(fillCharReg,"").length;tmpNode=tmpNode.previousSibling}firstIndex+=(isStart?me.startOffset:me.endOffset)}else{node=node.childNodes[isStart?me.startOffset:me.endOffset];if(node){firstIndex=domUtils.getNodeIndex(node,ignoreTxt)}else{node=isStart?me.startContainer:me.endContainer;var first=node.firstChild;while(first){if(domUtils.isFillChar(first)){first=first.nextSibling;continue}firstIndex++;if(first.nodeType==3){while(first&&first.nodeType==3){first=first.nextSibling}}else{first=first.nextSibling}}}}}else{firstIndex=isStart?domUtils.isFillChar(node)?0:me.startOffset:me.endOffset}if(firstIndex<0){firstIndex=0}addrs.push(firstIndex);return addrs}addr.startAddress=getAddress(true);if(!ignoreEnd){addr.endAddress=me.collapsed?[].concat(addr.startAddress):getAddress()}return addr},moveToAddress:function(addr,ignoreEnd){var me=this;function getNode(address,isStart){var tmpNode=me.document.body,parentNode,offset;for(var i=0,ci,l=address.length;i<l;i++){ci=address[i];parentNode=tmpNode;tmpNode=tmpNode.childNodes[ci];if(!tmpNode){offset=ci;break}}if(isStart){if(tmpNode){me.setStartBefore(tmpNode)}else{me.setStart(parentNode,offset)}}else{if(tmpNode){me.setEndBefore(tmpNode)}else{me.setEnd(parentNode,offset)}}}getNode(addr.startAddress,true);!ignoreEnd&&addr.endAddress&&getNode(addr.endAddress);return me},equals:function(rng){for(var p in this){if(this.hasOwnProperty(p)){if(this[p]!==rng[p]){return false}}}return true},traversal:function(doFn,filterFn){if(this.collapsed){return this}var bookmark=this.createBookmark(),end=bookmark.end,current=domUtils.getNextDomNode(bookmark.start,false,filterFn);while(current&&current!==end&&(domUtils.getPosition(current,end)&domUtils.POSITION_PRECEDING)){var tmpNode=domUtils.getNextDomNode(current,false,filterFn);doFn(current);current=tmpNode}return this.moveToBookmark(bookmark)}}})();(function(){function getBoundaryInformation(range,start){var getIndex=domUtils.getNodeIndex;range=range.duplicate();range.collapse(start);var parent=range.parentElement();if(!parent.hasChildNodes()){return{container:parent,offset:0}}var siblings=parent.children,child,testRange=range.duplicate(),startIndex=0,endIndex=siblings.length-1,index=-1,distance;while(startIndex<=endIndex){index=Math.floor((startIndex+endIndex)/2);child=siblings[index];testRange.moveToElementText(child);var position=testRange.compareEndPoints("StartToStart",range);if(position>0){endIndex=index-1}else{if(position<0){startIndex=index+1}else{return{container:parent,offset:getIndex(child)}}}}if(index==-1){testRange.moveToElementText(parent);testRange.setEndPoint("StartToStart",range);distance=testRange.text.replace(/(\r\n|\r)/g,"\n").length;siblings=parent.childNodes;if(!distance){child=siblings[siblings.length-1];return{container:child,offset:child.nodeValue.length}}var i=siblings.length;while(distance>0){distance-=siblings[--i].nodeValue.length}return{container:siblings[i],offset:-distance}}testRange.collapse(position>0);testRange.setEndPoint(position>0?"StartToStart":"EndToStart",range);distance=testRange.text.replace(/(\r\n|\r)/g,"\n").length;if(!distance){return dtd.$empty[child.tagName]||dtd.$nonChild[child.tagName]?{container:parent,offset:getIndex(child)+(position>0?0:1)}:{container:child,offset:position>0?0:child.childNodes.length}}while(distance>0){try{var pre=child;child=child[position>0?"previousSibling":"nextSibling"];distance-=child.nodeValue.length}catch(e){return{container:parent,offset:getIndex(pre)}}}return{container:child,offset:position>0?-distance:child.nodeValue.length+distance}}function transformIERangeToRange(ieRange,range){if(ieRange.item){range.selectNode(ieRange.item(0))}else{var bi=getBoundaryInformation(ieRange,true);range.setStart(bi.container,bi.offset);if(ieRange.compareEndPoints("StartToEnd",ieRange)!=0){bi=getBoundaryInformation(ieRange,false);range.setEnd(bi.container,bi.offset)}}return range}function _getIERange(sel){var ieRange;try{ieRange=sel.getNative().createRange()}catch(e){return null}var el=ieRange.item?ieRange.item(0):ieRange.parentElement();if((el.ownerDocument||el)===sel.document){return ieRange}return null}var Selection=dom.Selection=function(doc){var me=this,iframe;me.document=doc;if(browser.ie9below){iframe=domUtils.getWindow(doc).frameElement;domUtils.on(iframe,"beforedeactivate",function(){me._bakIERange=me.getIERange()});domUtils.on(iframe,"activate",function(){try{if(!_getIERange(me)&&me._bakIERange){me._bakIERange.select()}}catch(ex){}me._bakIERange=null})}iframe=doc=null};Selection.prototype={rangeInBody:function(rng,txtRange){var node=browser.ie9below||txtRange?rng.item?rng.item():rng.parentElement():rng.startContainer;return node===this.document.body||domUtils.inDoc(node,this.document)},getNative:function(){var doc=this.document;try{return !doc?null:browser.ie9below?doc.selection:domUtils.getWindow(doc).getSelection()}catch(e){return null}},getIERange:function(){var ieRange=_getIERange(this);if(!ieRange){if(this._bakIERange){return this._bakIERange}}return ieRange},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var start=this.getStart();if(start){return domUtils.findParents(start,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var nativeRange=_getIERange(this);return !!(nativeRange&&this.rangeInBody(nativeRange))}else{return !!this.getNative().rangeCount}}catch(e){return false}},getRange:function(){var me=this;function optimze(range){var child=me.document.body.firstChild,collapsed=range.collapsed;while(child&&child.firstChild){range.setStart(child,0);child=child.firstChild}if(!range.startContainer){range.setStart(me.document.body,0)}if(collapsed){range.collapse(true)}}if(me._cachedRange!=null){return this._cachedRange}var range=new baidu.editor.dom.Range(me.document);if(browser.ie9below){var nativeRange=me.getIERange();if(nativeRange){try{transformIERangeToRange(nativeRange,range)}catch(e){optimze(range)}}else{optimze(range)}}else{var sel=me.getNative();if(sel&&sel.rangeCount){var firstRange=sel.getRangeAt(0);var lastRange=sel.getRangeAt(sel.rangeCount-1);range.setStart(firstRange.startContainer,firstRange.startOffset).setEnd(lastRange.endContainer,lastRange.endOffset);if(range.collapsed&&domUtils.isBody(range.startContainer)&&!range.startOffset){optimze(range)}}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document)){return this._bakRange}optimze(range)}}return this._bakRange=range},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var range=browser.ie9below?this.getIERange():this.getRange(),tmpRange,start,tmp,parent;if(browser.ie9below){if(!range){return this.document.body.firstChild}if(range.item){return range.item(0)}tmpRange=range.duplicate();tmpRange.text.length>0&&tmpRange.moveStart("character",1);tmpRange.collapse(1);start=tmpRange.parentElement();parent=tmp=range.parentElement();while(tmp=tmp.parentNode){if(tmp==start){start=parent;break}}}else{range.shrinkBoundary();start=range.startContainer;if(start.nodeType==1&&start.hasChildNodes()){start=start.childNodes[Math.min(start.childNodes.length-1,range.startOffset)]}if(start.nodeType==3){return start.parentNode}}return start},getText:function(){var nativeSel,nativeRange;if(this.isFocus()&&(nativeSel=this.getNative())){nativeRange=browser.ie9below?nativeSel.createRange():nativeSel.getRangeAt(0);return browser.ie9below?nativeRange.text:nativeRange.toString()}return""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}})();(function(){var uid=0,_selectionChangeTimer;function setValue(form,editor){var textarea;if(editor.textarea){if(utils.isString(editor.textarea)){for(var i=0,ti,tis=domUtils.getElementsByTagName(form,"textarea");ti=tis[i++];){if(ti.id=="ueditor_textarea_"+editor.options.textarea){textarea=ti;break}}}else{textarea=editor.textarea}}if(!textarea){form.appendChild(textarea=domUtils.createElement(document,"textarea",{name:editor.options.textarea,id:"ueditor_textarea_"+editor.options.textarea,style:"display:none"}));editor.textarea=textarea}!textarea.getAttribute("name")&&textarea.setAttribute("name",editor.options.textarea);textarea.value=editor.hasContents()?(editor.options.allHtmlEnabled?editor.getAllHtml():editor.getContent(null,null,true)):""}function loadPlugins(me){for(var pi in UE.plugins){UE.plugins[pi].call(me)}}function checkCurLang(I18N){for(var lang in I18N){return lang}}function langReadied(me){me.langIsReady=true;me.fireEvent("langReady")}var Editor=UE.Editor=function(options){var me=this;me.uid=uid++;EventBase.call(me);me.commands={};me.options=utils.extend(utils.clone(options||{}),UEDITOR_CONFIG,true);me.shortcutkeys={};me.inputRules=[];me.outputRules=[];me.setOpt(Editor.defaultOptions(me));me.loadServerConfig();if(!utils.isEmptyObject(UE.I18N)){me.options.lang=checkCurLang(UE.I18N);UE.plugin.load(me);langReadied(me)}else{utils.loadFile(document,{src:me.options.langPath+me.options.lang+"/"+me.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(me);langReadied(me)})}UE.instants["ueditorInstant"+me.uid]=me};Editor.prototype={registerCommand:function(name,obj){this.commands[name]=obj},ready:function(fn){var me=this;if(fn){me.isReady?fn.apply(me):me.addListener("ready",fn)}},setOpt:function(key,val){var obj={};if(utils.isString(key)){obj[key]=val}else{obj=key}utils.extend(this.options,obj,true)},getOpt:function(key){return this.options[key]},destroy:function(){var me=this;me.fireEvent("destroy");var container=me.container.parentNode;var textarea=me.textarea;if(!textarea){textarea=document.createElement("textarea");container.parentNode.insertBefore(textarea,container)}else{textarea.style.display=""}textarea.style.width=me.iframe.offsetWidth+"px";textarea.style.height=me.iframe.offsetHeight+"px";textarea.value=me.getContent();textarea.id=me.key;container.innerHTML="";domUtils.remove(container);var key=me.key;for(var p in me){if(me.hasOwnProperty(p)){delete this[p]}}UE.delEditor(key)},render:function(container){var me=this,options=me.options,getStyleValue=function(attr){return parseInt(domUtils.getComputedStyle(container,attr))};if(utils.isString(container)){container=document.getElementById(container)}if(container){if(options.initialFrameWidth){options.minFrameWidth=options.initialFrameWidth}else{options.minFrameWidth=options.initialFrameWidth=container.offsetWidth}if(options.initialFrameHeight){options.minFrameHeight=options.initialFrameHeight}else{options.initialFrameHeight=options.minFrameHeight=container.offsetHeight}container.style.width=/%$/.test(options.initialFrameWidth)?"100%":options.initialFrameWidth-getStyleValue("padding-left")-getStyleValue("padding-right")+"px";container.style.height=/%$/.test(options.initialFrameHeight)?"100%":options.initialFrameHeight-getStyleValue("padding-top")-getStyleValue("padding-bottom")+"px";container.style.zIndex=options.zIndex;var html=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(options.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(options.iframeCssUrl)+"'/>":"")+(options.initialStyle?"<style>"+options.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+me.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script></html>";container.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+me.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(options.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+html+'");document.close();}())'}));container.style.overflow="hidden";setTimeout(function(){if(/%$/.test(options.initialFrameWidth)){options.minFrameWidth=options.initialFrameWidth=container.offsetWidth}if(/%$/.test(options.initialFrameHeight)){options.minFrameHeight=options.initialFrameHeight=container.offsetHeight;container.style.height=options.initialFrameHeight+"px"}})}},_setup:function(doc){var me=this,options=me.options;if(ie){doc.body.disabled=true;doc.body.contentEditable=true;doc.body.disabled=false}else{doc.body.contentEditable=true}doc.body.spellcheck=false;me.document=doc;me.window=doc.defaultView||doc.parentWindow;me.iframe=me.window.frameElement;me.body=doc.body;me.selection=new dom.Selection(doc);var geckoSel;if(browser.gecko&&(geckoSel=this.selection.getNative())){geckoSel.removeAllRanges()}this._initEvents();for(var form=this.iframe.parentNode;!domUtils.isBody(form);form=form.parentNode){if(form.tagName=="FORM"){me.form=form;if(me.options.autoSyncData){domUtils.on(me.window,"blur",function(){setValue(form,me)})}else{domUtils.on(form,"submit",function(){setValue(this,me)})}break}}if(options.initialContent){if(options.autoClearinitialContent){var oldExecCommand=me.execCommand;me.execCommand=function(){me.fireEvent("firstBeforeExecCommand");return oldExecCommand.apply(me,arguments)};this._setDefaultContent(options.initialContent)}else{this.setContent(options.initialContent,false,true)}}if(domUtils.isEmptyNode(me.body)){me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"}if(options.focus){setTimeout(function(){me.focus(me.options.focusInEnd);!me.options.autoClearinitialContent&&me._selectionChange()},0)}if(!me.container){me.container=this.iframe.parentNode}if(options.fullscreen&&me.ui){me.ui.setFullScreen(true)}try{me.document.execCommand("2D-position",false,false)}catch(e){}try{me.document.execCommand("enableInlineTableEditing",false,false)}catch(e){}try{me.document.execCommand("enableObjectResizing",false,false)}catch(e){}me._bindshortcutKeys();me.isReady=1;me.fireEvent("ready");options.onready&&options.onready.call(me);if(!browser.ie9below){domUtils.on(me.window,["blur","focus"],function(e){if(e.type=="blur"){me._bakRange=me.selection.getRange();try{me._bakNativeRange=me.selection.getNative().getRangeAt(0);me.selection.getNative().removeAllRanges()}catch(e){me._bakNativeRange=null}}else{try{me._bakRange&&me._bakRange.select()}catch(e){}}})}if(browser.gecko&&browser.version<=10902){me.body.contentEditable=false;setTimeout(function(){me.body.contentEditable=true},100);setInterval(function(){me.body.style.height=me.iframe.offsetHeight-20+"px"},100)}!options.isShow&&me.setHide();options.readonly&&me.setDisabled()},sync:function(formId){var me=this,form=formId?document.getElementById(formId):domUtils.findParent(me.iframe.parentNode,function(node){return node.tagName=="FORM"},true);form&&setValue(form,me)},setHeight:function(height,notSetHeight){if(height!==parseInt(this.iframe.parentNode.style.height)){this.iframe.parentNode.style.height=height+"px"}!notSetHeight&&(this.options.minFrameHeight=this.options.initialFrameHeight=height);this.body.style.height=height+"px";!notSetHeight&&this.trigger("setHeight")},addshortcutkey:function(cmd,keys){var obj={};if(keys){obj[cmd]=keys}else{obj=cmd}utils.extend(this.shortcutkeys,obj)},_bindshortcutKeys:function(){var me=this,shortcutkeys=this.shortcutkeys;me.addListener("keydown",function(type,e){var keyCode=e.keyCode||e.which;for(var i in shortcutkeys){var tmp=shortcutkeys[i].split(",");for(var t=0,ti;ti=tmp[t++];){ti=ti.split(":");var key=ti[0],param=ti[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(key.toLowerCase())||/^(\d+)$/.test(key)){if(((RegExp.$1=="ctrl"?(e.ctrlKey||e.metaKey):0)&&(RegExp.$2!=""?e[RegExp.$2.slice(1)+"Key"]:1)&&keyCode==RegExp.$3)||keyCode==RegExp.$1){if(me.queryCommandState(i,param)!=-1){me.execCommand(i,param)}domUtils.preventDefault(e)}}}}})},getContent:function(cmd,fn,notSetCursor,ignoreBlank,formatter){var me=this;if(cmd&&utils.isFunction(cmd)){fn=cmd;cmd=""}if(fn?!fn():!this.hasContents()){return""}me.fireEvent("beforegetcontent");var root=UE.htmlparser(me.body.innerHTML,ignoreBlank);me.filterOutputRule(root);me.fireEvent("aftergetcontent",cmd,root);return root.toHtml(formatter)},getAllHtml:function(){var me=this,headHtml=[],html="";me.fireEvent("getAllHtml",headHtml);if(browser.ie&&browser.version>8){var headHtmlForIE9="";utils.each(me.document.styleSheets,function(si){headHtmlForIE9+=(si.href?'<link rel="stylesheet" type="text/css" href="'+si.href+'" />':"<style>"+si.cssText+"</style>")});utils.each(me.document.getElementsByTagName("script"),function(si){headHtmlForIE9+=si.outerHTML})}return"<html><head>"+(me.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+me.options.charset+'"/>':"")+(headHtmlForIE9||me.document.getElementsByTagName("head")[0].innerHTML)+headHtml.join("\n")+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+me.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var reg=new RegExp(domUtils.fillChar,"g"),html=this.body.innerHTML.replace(/[\n\r]/g,"");html=html.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,c){return dtd.$block[c]?"\n":b?b:""});return html.replace(reg,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var reg=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(reg,"").replace(/\u00a0/g," ")},setContent:function(html,isAppendTo,notFireSelectionchange){var me=this;me.fireEvent("beforesetcontent",html);var root=UE.htmlparser(html);me.filterInputRule(root);html=root.toHtml();me.body.innerHTML=(isAppendTo?me.body.innerHTML:"")+html;function isCdataDiv(node){return node.tagName=="DIV"&&node.getAttribute("cdata_tag")}if(me.options.enterTag=="p"){var child=this.body.firstChild,tmpNode;if(!child||child.nodeType==1&&(dtd.$cdata[child.tagName]||isCdataDiv(child)||domUtils.isCustomeNode(child))&&child===this.body.lastChild){this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var p=me.document.createElement("p");while(child){while(child&&(child.nodeType==3||child.nodeType==1&&dtd.p[child.tagName]&&!dtd.$cdata[child.tagName])){tmpNode=child.nextSibling;p.appendChild(child);child=tmpNode}if(p.firstChild){if(!child){me.body.appendChild(p);break}else{child.parentNode.insertBefore(p,child);p=me.document.createElement("p")}}child=child.nextSibling}}}me.fireEvent("aftersetcontent");me.fireEvent("contentchange");!notFireSelectionchange&&me._selectionChange();me._bakRange=me._bakIERange=me._bakNativeRange=null;var geckoSel;if(browser.gecko&&(geckoSel=this.selection.getNative())){geckoSel.removeAllRanges()}if(me.options.autoSyncData){me.form&&setValue(me.form,me)}},focus:function(toEnd){try{var me=this,rng=me.selection.getRange();if(toEnd){var node=me.body.lastChild;if(node&&node.nodeType==1&&!dtd.$empty[node.tagName]){if(domUtils.isEmptyBlock(node)){rng.setStartAtFirst(node)}else{rng.setStartAtLast(node)}rng.collapse(true)}rng.setCursor(true)}else{if(!rng.collapsed&&domUtils.isBody(rng.startContainer)&&rng.startOffset==0){var node=me.body.firstChild;if(node&&node.nodeType==1&&!dtd.$empty[node.tagName]){rng.setStartAtFirst(node).collapse(true)}}rng.select(true)}this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var sel=this.selection.getNative();if(sel.empty&&browser.ie){var nativeRng=document.body.createTextRange();nativeRng.moveToElementText(document.body);nativeRng.collapse(true);nativeRng.select();sel.empty()}else{sel.removeAllRanges()}},_initEvents:function(){var me=this,doc=me.document,win=me.window;me._proxyDomEvent=utils.bind(me._proxyDomEvent,me);domUtils.on(doc,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],me._proxyDomEvent);domUtils.on(win,["focus","blur"],me._proxyDomEvent);domUtils.on(me.body,"drop",function(e){if(browser.gecko&&e.stopPropagation){e.stopPropagation()}me.fireEvent("contentchange")});domUtils.on(doc,["mouseup","keydown"],function(evt){if(evt.type=="keydown"&&(evt.ctrlKey||evt.metaKey||evt.shiftKey||evt.altKey)){return}if(evt.button==2){return}me._selectionChange(250,evt)})},_proxyDomEvent:function(evt){if(this.fireEvent("before"+evt.type.replace(/^on/,"").toLowerCase())===false){return false}if(this.fireEvent(evt.type.replace(/^on/,""),evt)===false){return false}return this.fireEvent("after"+evt.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(delay,evt){var me=this;var hackForMouseUp=false;var mouseX,mouseY;if(browser.ie&&browser.version<9&&evt&&evt.type=="mouseup"){var range=this.selection.getRange();if(!range.collapsed){hackForMouseUp=true;mouseX=evt.clientX;mouseY=evt.clientY}}clearTimeout(_selectionChangeTimer);_selectionChangeTimer=setTimeout(function(){if(!me.selection||!me.selection.getNative()){return}var ieRange;if(hackForMouseUp&&me.selection.getNative().type=="None"){ieRange=me.document.body.createTextRange();try{ieRange.moveToPoint(mouseX,mouseY)}catch(ex){ieRange=null}}var bakGetIERange;if(ieRange){bakGetIERange=me.selection.getIERange;me.selection.getIERange=function(){return ieRange}}me.selection.cache();if(bakGetIERange){me.selection.getIERange=bakGetIERange}if(me.selection._cachedRange&&me.selection._cachedStartElement){me.fireEvent("beforeselectionchange");me.fireEvent("selectionchange",!!evt);me.fireEvent("afterselectionchange");me.selection.clear()}},delay||50)},_callCmdFn:function(fnName,args){var cmdName=args[0].toLowerCase(),cmd,cmdFn;cmd=this.commands[cmdName]||UE.commands[cmdName];cmdFn=cmd&&cmd[fnName];if((!cmd||!cmdFn)&&fnName=="queryCommandState"){return 0}else{if(cmdFn){return cmdFn.apply(this,args)}}},execCommand:function(cmdName){cmdName=cmdName.toLowerCase();var me=this,result,cmd=me.commands[cmdName]||UE.commands[cmdName];if(!cmd||!cmd.execCommand){return null}if(!cmd.notNeedUndo&&!me.__hasEnterExecCommand){me.__hasEnterExecCommand=true;if(me.queryCommandState.apply(me,arguments)!=-1){me.fireEvent("saveScene");me.fireEvent.apply(me,["beforeexeccommand",cmdName].concat(arguments));result=this._callCmdFn("execCommand",arguments);me.fireEvent.apply(me,["afterexeccommand",cmdName].concat(arguments));me.fireEvent("saveScene")}me.__hasEnterExecCommand=false}else{result=this._callCmdFn("execCommand",arguments);(!me.__hasEnterExecCommand&&!cmd.ignoreContentChange&&!me._ignoreContentChange)&&me.fireEvent("contentchange")}(!me.__hasEnterExecCommand&&!cmd.ignoreContentChange&&!me._ignoreContentChange)&&me._selectionChange();return result},queryCommandState:function(cmdName){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(cmdName){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(tags){if(tags){for(var i=0,ci;ci=tags[i++];){if(this.document.getElementsByTagName(ci).length>0){return true}}}if(!domUtils.isEmptyBlock(this.body)){return true}tags=["div"];for(i=0;ci=tags[i++];){var nodes=domUtils.getElementsByTagName(this.document,ci);for(var n=0,cn;cn=nodes[n++];){if(domUtils.isCustomeNode(cn)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var me=this,range;if(me.body.contentEditable=="false"){me.body.contentEditable=true;range=me.selection.getRange();try{range.moveToBookmark(me.lastBk);delete me.lastBk}catch(e){range.setStartAtFirst(me.body).collapse(true)}range.select(true);if(me.bkqueryCommandState){me.queryCommandState=me.bkqueryCommandState;delete me.bkqueryCommandState}if(me.bkqueryCommandValue){me.queryCommandValue=me.bkqueryCommandValue;delete me.bkqueryCommandValue}me.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(except){var me=this;except=except?utils.isArray(except)?except:[except]:[];if(me.body.contentEditable=="true"){if(!me.lastBk){me.lastBk=me.selection.getRange().createBookmark(true)}me.body.contentEditable=false;me.bkqueryCommandState=me.queryCommandState;me.bkqueryCommandValue=me.queryCommandValue;me.queryCommandState=function(type){if(utils.indexOf(except,type)!=-1){return me.bkqueryCommandState.apply(me,arguments)}return -1};me.queryCommandValue=function(type){if(utils.indexOf(except,type)!=-1){return me.bkqueryCommandValue.apply(me,arguments)}return null};me.fireEvent("selectionchange")}},disable:function(except){return this.setDisabled(except)},_setDefaultContent:function(){function clear(){var me=this;if(me.document.getElementById("initContent")){me.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";me.removeListener("firstBeforeExecCommand focus",clear);setTimeout(function(){me.focus();me._selectionChange()},0)}}return function(cont){var me=this;me.body.innerHTML='<p id="initContent">'+cont+"</p>";me.addListener("firstBeforeExecCommand focus",clear)}}(),setShow:function(){var me=this,range=me.selection.getRange();if(me.container.style.display=="none"){try{range.moveToBookmark(me.lastBk);delete me.lastBk}catch(e){range.setStartAtFirst(me.body).collapse(true)}setTimeout(function(){range.select(true)},100);me.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var me=this;if(!me.lastBk){me.lastBk=me.selection.getRange().createBookmark(true)}me.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(path){var lang=UE.I18N[this.options.lang];if(!lang){throw Error("not import language file")}path=(path||"").split(".");for(var i=0,ci;ci=path[i++];){lang=lang[ci];if(!lang){break}}return lang},getContentLength:function(ingoneHtml,tagNames){var count=this.getContent(false,false,true).length;if(ingoneHtml){tagNames=(tagNames||[]).concat(["hr","img","iframe"]);count=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var i=0,ci;ci=tagNames[i++];){count+=this.document.getElementsByTagName(ci).length}}return count},addInputRule:function(rule){this.inputRules.push(rule)},filterInputRule:function(root){for(var i=0,ci;ci=this.inputRules[i++];){ci.call(this,root)}},addOutputRule:function(rule){this.outputRules.push(rule)},filterOutputRule:function(root){for(var i=0,ci;ci=this.outputRules[i++];){ci.call(this,root)}},getActionUrl:function(action){var actionName=this.getOpt(action)||action,imageUrl=this.getOpt("imageUrl"),serverUrl=this.getOpt("serverUrl");if(!serverUrl&&imageUrl){serverUrl=imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")}if(serverUrl){serverUrl=serverUrl+(serverUrl.indexOf("?")==-1?"?":"&")+"action="+(actionName||"");return utils.formatUrl(serverUrl)}else{return""}}};utils.inherits(Editor,EventBase)})();UE.Editor.defaultOptions=function(editor){var _url=editor.options.UEDITOR_HOME_URL;return{isShow:true,initialContent:"",initialStyle:"",autoClearinitialContent:false,iframeCssUrl:_url+"themes/iframe.css",textarea:"editorValue",focus:false,focusInEnd:true,autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:999,imagePopup:true,enterTag:"p",customDomain:false,lang:"zh-cn",langPath:_url+"lang/",theme:"default",themePath:_url+"themes/",allHtmlEnabled:false,scaleEnabled:false,tableNativeEditInFF:false,autoSyncData:true,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=false;configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config);me.fireEvent("serverConfigLoaded");me._serverConfigLoaded=true}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}});function showErrorMsg(msg){console&&console.error(msg)}};UE.Editor.prototype.isServerConfigLoaded=function(){var me=this;return me._serverConfigLoaded||false};UE.Editor.prototype.afterConfigReady=function(handler){if(!handler||!utils.isFunction(handler)){return}var me=this;var readyHandler=function(){handler.apply(me,arguments);me.removeListener("serverConfigLoaded",readyHandler)};if(me.isServerConfigLoaded()){handler.call(me,"serverConfigLoaded")}else{me.addListener("serverConfigLoaded",readyHandler)}}})();UE.ajax=function(){var fnStr="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP");fnStr="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP");fnStr="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var creatAjaxRequest=new Function("return new "+fnStr);function json2str(json){var strArr=[];for(var i in json){if(i=="method"||i=="timeout"||i=="async"||i=="dataType"||i=="callback"){continue}if(json[i]==undefined||json[i]==null){continue}if(!((typeof json[i]).toLowerCase()=="function"||(typeof json[i]).toLowerCase()=="object")){strArr.push(encodeURIComponent(i)+"="+encodeURIComponent(json[i]))}else{if(utils.isArray(json[i])){for(var j=0;j<json[i].length;j++){strArr.push(encodeURIComponent(i)+"[]="+encodeURIComponent(json[i][j]))}}}}return strArr.join("&")}function doAjax(url,ajaxOptions){var xhr=creatAjaxRequest(),timeIsOut=false,defaultAjaxOptions={method:"POST",timeout:5000,async:true,data:{},onsuccess:function(){},onerror:function(){}};if(typeof url==="object"){ajaxOptions=url;url=ajaxOptions.url}if(!xhr||!url){return}var ajaxOpts=ajaxOptions?utils.extend(defaultAjaxOptions,ajaxOptions):defaultAjaxOptions;var submitStr=json2str(ajaxOpts);if(!utils.isEmptyObject(ajaxOpts.data)){submitStr+=(submitStr?"&":"")+json2str(ajaxOpts.data)}var timerID=setTimeout(function(){if(xhr.readyState!=4){timeIsOut=true;xhr.abort();clearTimeout(timerID)}},ajaxOpts.timeout);var method=ajaxOpts.method.toUpperCase();var str=url+(url.indexOf("?")==-1?"?":"&")+(method=="POST"?"":submitStr+"&noCache="+ +new Date);xhr.open(method,str,ajaxOpts.async);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(!timeIsOut&&xhr.status==200){ajaxOpts.onsuccess(xhr)}else{ajaxOpts.onerror(xhr)}}};if(method=="POST"){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(submitStr)}else{xhr.send(null)}}function doJsonp(url,opts){var successhandler=opts.onsuccess||function(){},scr=document.createElement("SCRIPT"),options=opts||{},charset=options.charset,callbackField=options.jsonp||"callback",callbackFnName,timeOut=options.timeOut||0,timer,reg=new RegExp("(\\?|&)"+callbackField+"=([^&]*)"),matches;if(utils.isFunction(successhandler)){callbackFnName="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36);window[callbackFnName]=getCallBack(0)}else{if(utils.isString(successhandler)){callbackFnName=successhandler}else{if(matches=reg.exec(url)){callbackFnName=matches[2]}}}url=url.replace(reg,"\x241"+callbackField+"="+callbackFnName);if(url.search(reg)<0){url+=(url.indexOf("?")<0?"?":"&")+callbackField+"="+callbackFnName}var queryStr=json2str(opts);if(!utils.isEmptyObject(opts.data)){queryStr+=(queryStr?"&":"")+json2str(opts.data)}if(queryStr){url=url.replace(/\?/,"?"+queryStr+"&")}scr.onerror=getCallBack(1);if(timeOut){timer=setTimeout(getCallBack(1),timeOut)}createScriptTag(scr,url,charset);function createScriptTag(scr,url,charset){scr.setAttribute("type","text/javascript");scr.setAttribute("defer","defer");charset&&scr.setAttribute("charset",charset);scr.setAttribute("src",url);document.getElementsByTagName("head")[0].appendChild(scr)}function getCallBack(onTimeOut){return function(){try{if(onTimeOut){options.onerror&&options.onerror()}else{try{clearTimeout(timer);successhandler.apply(window,arguments)}catch(e){}}}catch(exception){options.onerror&&options.onerror.call(window,exception)}finally{options.oncomplete&&options.oncomplete.apply(window,arguments);scr.parentNode&&scr.parentNode.removeChild(scr);window[callbackFnName]=null;try{delete window[callbackFnName]}catch(e){}}}}}return{request:function(url,opts){if(opts&&opts.dataType=="jsonp"){doJsonp(url,opts)}else{doAjax(url,opts)}},getJSONP:function(url,data,fn){var opts={data:data,oncomplete:fn};doJsonp(url,opts)}}}();var filterWord=UE.filterWord=function(){function isWordDocument(str){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(str)}function transUnit(v){v=v.replace(/[\d.]+\w+/g,function(m){return utils.transUnitToPx(m)});return v}function filterPasteWord(str){return str.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(str){if(browser.opera){return""}try{if(/Bitmap/i.test(str)){return""}var width=str.match(/width:([ \d.]*p[tx])/i)[1],height=str.match(/height:([ \d.]*p[tx])/i)[1],src=str.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+transUnit(width)+'" height="'+transUnit(height)+'" src="'+src+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(str,name,marks,val){return name=="class"&&val=="MsoListParagraph"?str:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(a,b,c){return c.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(str,tag,tmp,style){var n=[],s=style.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(str){return utils.transUnitToPx(str)}).split(/;\s*/g);for(var i=0,v;v=s[i];i++){var name,value,parts=v.split(":");if(parts.length==2){name=parts[0].toLowerCase();value=parts[1].toLowerCase();if(/^(background)\w*/.test(name)&&value.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(name)&&/^0\w+$/.test(value)){continue}switch(name){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(tag)){n[i]=name.replace(/^mso-|-alt$/g,"")+":"+transUnit(value)}continue;case"horiz-align":n[i]="text-align:"+value;continue;case"vert-align":n[i]="vertical-align:"+value;continue;case"font-color":case"mso-foreground":n[i]="color:"+value;continue;case"mso-background":case"mso-highlight":n[i]="background:"+value;continue;case"mso-default-height":n[i]="min-height:"+transUnit(value);continue;case"mso-default-width":n[i]="min-width:"+transUnit(value);continue;case"mso-padding-between-alt":n[i]="border-collapse:separate;border-spacing:"+transUnit(value);continue;case"text-line-through":if((value=="single")||(value=="double")){n[i]="text-decoration:line-through"}continue;case"mso-zero-height":if(value=="yes"){n[i]="display:none"}continue;case"margin":if(!/[1-9]/.test(value)){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(name)||/text\-indent|padding|margin/.test(name)&&/\-[\d.]+/.test(value)){continue}n[i]=name+":"+parts[1]}}return tag+(n.length?' style="'+n.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(html){return(isWordDocument(html)?filterPasteWord(html):html)}}();(function(){var uNode=UE.uNode=function(obj){this.type=obj.type;this.data=obj.data;this.tagName=obj.tagName;this.parentNode=obj.parentNode;this.attrs=obj.attrs||{};this.children=obj.children};var notTransAttrs={href:1,src:1,_src:1,_href:1,cdata_data:1};var notTransTagName={style:1,script:1};var indentChar="    ",breakChar="\n";function insertLine(arr,current,begin){arr.push(breakChar);return current+(begin?1:-1)}function insertIndent(arr,current){for(var i=0;i<current;i++){arr.push(indentChar)}}uNode.createElement=function(html){if(/[<>]/.test(html)){return UE.htmlparser(html).children[0]}else{return new uNode({type:"element",children:[],tagName:html})}};uNode.createText=function(data,noTrans){return new UE.uNode({type:"text",data:noTrans?data:utils.unhtml(data||"")})};function nodeToHtml(node,arr,formatter,current){switch(node.type){case"root":for(var i=0,ci;ci=node.children[i++];){if(formatter&&ci.type=="element"&&!dtd.$inlineWithA[ci.tagName]&&i>1){insertLine(arr,current,true);insertIndent(arr,current)}nodeToHtml(ci,arr,formatter,current)}break;case"text":isText(node,arr);break;case"element":isElement(node,arr,formatter,current);break;case"comment":isComment(node,arr,formatter)}return arr}function isText(node,arr){if(node.parentNode.tagName=="pre"){arr.push(node.data)}else{arr.push(notTransTagName[node.parentNode.tagName]?utils.html(node.data):node.data.replace(/[ ]{2}/g," &nbsp;"))}}function isElement(node,arr,formatter,current){var attrhtml="";if(node.attrs){attrhtml=[];var attrs=node.attrs;for(var a in attrs){attrhtml.push(a+(attrs[a]!==undefined?'="'+(notTransAttrs[a]?utils.html(attrs[a]).replace(/["]/g,function(a){return"&quot;"}):utils.unhtml(attrs[a]))+'"':""))}attrhtml=attrhtml.join(" ")}arr.push("<"+node.tagName+(attrhtml?" "+attrhtml:"")+(dtd.$empty[node.tagName]?"/":"")+">");if(formatter&&!dtd.$inlineWithA[node.tagName]&&node.tagName!="pre"){if(node.children&&node.children.length){current=insertLine(arr,current,true);insertIndent(arr,current)}}if(node.children&&node.children.length){for(var i=0,ci;ci=node.children[i++];){if(formatter&&ci.type=="element"&&!dtd.$inlineWithA[ci.tagName]&&i>1){insertLine(arr,current);insertIndent(arr,current)}nodeToHtml(ci,arr,formatter,current)}}if(!dtd.$empty[node.tagName]){if(formatter&&!dtd.$inlineWithA[node.tagName]&&node.tagName!="pre"){if(node.children&&node.children.length){current=insertLine(arr,current);insertIndent(arr,current)}}arr.push("</"+node.tagName+">")}}function isComment(node,arr){arr.push("<!--"+node.data+"-->")}function getNodeById(root,id){var node;if(root.type=="element"&&root.getAttr("id")==id){return root}if(root.children&&root.children.length){for(var i=0,ci;ci=root.children[i++];){if(node=getNodeById(ci,id)){return node}}}}function getNodesByTagName(node,tagName,arr){if(node.type=="element"&&node.tagName==tagName){arr.push(node)}if(node.children&&node.children.length){for(var i=0,ci;ci=node.children[i++];){getNodesByTagName(ci,tagName,arr)}}}function nodeTraversal(root,fn){if(root.children&&root.children.length){for(var i=0,ci;ci=root.children[i];){nodeTraversal(ci,fn);if(ci.parentNode){if(ci.children&&ci.children.length){fn(ci)}if(ci.parentNode){i++}}}}else{fn(root)}}uNode.prototype={toHtml:function(formatter){var arr=[];nodeToHtml(this,arr,formatter,0);return arr.join("")},innerHTML:function(htmlstr){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(utils.isString(htmlstr)){if(this.children){for(var i=0,ci;ci=this.children[i++];){ci.parentNode=null}}this.children=[];var tmpRoot=UE.htmlparser(htmlstr);for(var i=0,ci;ci=tmpRoot.children[i++];){this.children.push(ci);ci.parentNode=this}return this}else{var tmpRoot=new UE.uNode({type:"root",children:this.children});return tmpRoot.toHtml()}},innerText:function(textStr,noTrans){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(textStr){if(this.children){for(var i=0,ci;ci=this.children[i++];){ci.parentNode=null}}this.children=[];this.appendChild(uNode.createText(textStr,noTrans));return this}else{return this.toHtml().replace(/<[^>]+>/g,"")}},getData:function(){if(this.type=="element"){return""}return this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i];i++){if(ci===this){return i==0?null:parent.children[i-1]}}},nextSibling:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i++];){if(ci===this){return parent.children[i]}}},replaceChild:function(target,source){if(this.children){if(target.parentNode){target.parentNode.removeChild(target)}for(var i=0,ci;ci=this.children[i];i++){if(ci===source){this.children.splice(i,1,target);source.parentNode=null;target.parentNode=this;return target}}}},appendChild:function(node){if(this.type=="root"||(this.type=="element"&&!dtd.$empty[this.tagName])){if(!this.children){this.children=[]}if(node.parentNode){node.parentNode.removeChild(node)}for(var i=0,ci;ci=this.children[i];i++){if(ci===node){this.children.splice(i,1);break}}this.children.push(node);node.parentNode=this;return node}},insertBefore:function(target,source){if(this.children){if(target.parentNode){target.parentNode.removeChild(target)}for(var i=0,ci;ci=this.children[i];i++){if(ci===source){this.children.splice(i,0,target);target.parentNode=this;return target}}}},insertAfter:function(target,source){if(this.children){if(target.parentNode){target.parentNode.removeChild(target)}for(var i=0,ci;ci=this.children[i];i++){if(ci===source){this.children.splice(i+1,0,target);target.parentNode=this;return target}}}},removeChild:function(node,keepChildren){if(this.children){for(var i=0,ci;ci=this.children[i];i++){if(ci===node){this.children.splice(i,1);ci.parentNode=null;if(keepChildren&&ci.children&&ci.children.length){for(var j=0,cj;cj=ci.children[j];j++){this.children.splice(i+j,0,cj);cj.parentNode=this}}return ci}}}},getAttr:function(attrName){return this.attrs&&this.attrs[attrName.toLowerCase()]},setAttr:function(attrName,attrVal){if(!attrName){delete this.attrs;return}if(!this.attrs){this.attrs={}}if(utils.isObject(attrName)){for(var a in attrName){if(!attrName[a]){delete this.attrs[a]}else{this.attrs[a.toLowerCase()]=attrName[a]}}}else{if(!attrVal){delete this.attrs[attrName]}else{this.attrs[attrName.toLowerCase()]=attrVal}}},getIndex:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i];i++){if(ci===this){return i}}return -1},getNodeById:function(id){var node;if(this.children&&this.children.length){for(var i=0,ci;ci=this.children[i++];){if(node=getNodeById(ci,id)){return node}}}},getNodesByTagName:function(tagNames){tagNames=utils.trim(tagNames).replace(/[ ]{2,}/g," ").split(" ");var arr=[],me=this;utils.each(tagNames,function(tagName){if(me.children&&me.children.length){for(var i=0,ci;ci=me.children[i++];){getNodesByTagName(ci,tagName,arr)}}});return arr},getStyle:function(name){var cssStyle=this.getAttr("style");if(!cssStyle){return""}var reg=new RegExp("(^|;)\\s*"+name+":([^;]+)","i");var match=cssStyle.match(reg);if(match&&match[0]){return match[2]}return""},setStyle:function(name,val){function exec(name,val){var reg=new RegExp("(^|;)\\s*"+name+":([^;]+;?)","gi");cssStyle=cssStyle.replace(reg,"$1");if(val){cssStyle=name+":"+utils.unhtml(val)+";"+cssStyle}}var cssStyle=this.getAttr("style");if(!cssStyle){cssStyle=""}if(utils.isObject(name)){for(var a in name){exec(a,name[a])}}else{exec(name,val)}this.setAttr("style",utils.trim(cssStyle))},traversal:function(fn){if(this.children&&this.children.length){nodeTraversal(this,fn)}return this}}})();var htmlparser=UE.htmlparser=function(htmlstr,ignoreBlank){var re_tag=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,re_attr=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var allowEmptyTags={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};htmlstr=htmlstr.replace(new RegExp(domUtils.fillChar,"g"),"");if(!ignoreBlank){htmlstr=htmlstr.replace(new RegExp("[\\r\\t\\n"+(ignoreBlank?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(ignoreBlank?"":" ")+"]*","g"),function(a,b){if(b&&allowEmptyTags[b.toLowerCase()]){return a.replace(/(^[\n\r]+)|([\n\r]+$)/g,"")}return a.replace(new RegExp("^[\\r\\n"+(ignoreBlank?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(ignoreBlank?"":" ")+"]+$"),"")})}var notTransAttrs={href:1,src:1};var uNode=UE.uNode,needParentNode={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},needChild={ol:"li",ul:"li"};function text(parent,data){if(needChild[parent.tagName]){var tmpNode=uNode.createElement(needChild[parent.tagName]);parent.appendChild(tmpNode);tmpNode.appendChild(uNode.createText(data));parent=tmpNode}else{parent.appendChild(uNode.createText(data))}}function element(parent,tagName,htmlattr){var needParentTag;if(needParentTag=needParentNode[tagName]){var tmpParent=parent,hasParent;while(tmpParent.type!="root"){if(utils.isArray(needParentTag)?utils.indexOf(needParentTag,tmpParent.tagName)!=-1:needParentTag==tmpParent.tagName){parent=tmpParent;hasParent=true;break}tmpParent=tmpParent.parentNode}if(!hasParent){parent=element(parent,utils.isArray(needParentTag)?needParentTag[0]:needParentTag)}}var elm=new uNode({parentNode:parent,type:"element",tagName:tagName.toLowerCase(),children:dtd.$empty[tagName]?null:[]});if(htmlattr){var attrs={},match;while(match=re_attr.exec(htmlattr)){attrs[match[1].toLowerCase()]=notTransAttrs[match[1].toLowerCase()]?(match[2]||match[3]||match[4]):utils.unhtml(match[2]||match[3]||match[4])}elm.attrs=attrs}parent.children.push(elm);return dtd.$empty[tagName]?parent:elm}function comment(parent,data){parent.children.push(new uNode({type:"comment",data:data,parentNode:parent}))}var match,currentIndex=0,nextIndex=0;var root=new uNode({type:"root",children:[]});var currentParent=root;while(match=re_tag.exec(htmlstr)){currentIndex=match.index;try{if(currentIndex>nextIndex){text(currentParent,htmlstr.slice(nextIndex,currentIndex))}if(match[3]){if(dtd.$cdata[currentParent.tagName]){text(currentParent,match[0])}else{currentParent=element(currentParent,match[3].toLowerCase(),match[4])}}else{if(match[1]){if(currentParent.type!="root"){if(dtd.$cdata[currentParent.tagName]&&!dtd.$cdata[match[1]]){text(currentParent,match[0])}else{var tmpParent=currentParent;while(currentParent.type=="element"&&currentParent.tagName!=match[1].toLowerCase()){currentParent=currentParent.parentNode;if(currentParent.type=="root"){currentParent=tmpParent;throw"break"}}currentParent=currentParent.parentNode}}}else{if(match[2]){comment(currentParent,match[2])}}}}catch(e){}nextIndex=re_tag.lastIndex}if(nextIndex<htmlstr.length){text(currentParent,htmlstr.slice(nextIndex))}return root};var filterNode=UE.filterNode=function(){function filterNode(node,rules){switch(node.type){case"text":break;case"element":var val;if(val=rules[node.tagName]){if(val==="-"){node.parentNode.removeChild(node)}else{if(utils.isFunction(val)){var parentNode=node.parentNode,index=node.getIndex();val(node);if(node.parentNode){if(node.children){for(var i=0,ci;ci=node.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}else{for(var i=index,ci;ci=parentNode.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}else{var attrs=val["$"];if(attrs&&node.attrs){var tmpAttrs={},tmpVal;for(var a in attrs){tmpVal=node.getAttr(a);if(a=="style"&&utils.isArray(attrs[a])){var tmpCssStyle=[];utils.each(attrs[a],function(v){var tmp;if(tmp=node.getStyle(v)){tmpCssStyle.push(v+":"+tmp)}});tmpVal=tmpCssStyle.join(";")}if(tmpVal){tmpAttrs[a]=tmpVal}}node.attrs=tmpAttrs}if(node.children){for(var i=0,ci;ci=node.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}}}else{if(dtd.$cdata[node.tagName]){node.parentNode.removeChild(node)}else{var parentNode=node.parentNode,index=node.getIndex();node.parentNode.removeChild(node,true);for(var i=index,ci;ci=parentNode.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}break;case"comment":node.parentNode.removeChild(node)}}return function(root,rules){if(utils.isEmptyObject(rules)){return root}var val;if(val=rules["-"]){utils.each(val.split(" "),function(k){rules[k]="-"})}for(var i=0,ci;ci=root.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}return root}}();UE.plugin=function(){var _plugins={};return{register:function(pluginName,fn,oldOptionName,afterDisabled){if(oldOptionName&&utils.isFunction(oldOptionName)){afterDisabled=oldOptionName;oldOptionName=null}_plugins[pluginName]={optionName:oldOptionName||pluginName,execFn:fn,afterDisabled:afterDisabled}},load:function(editor){utils.each(_plugins,function(plugin){var _export=plugin.execFn.call(editor);if(editor.options[plugin.optionName]!==false){if(_export){utils.each(_export,function(v,k){switch(k.toLowerCase()){case"shortcutkey":editor.addshortcutkey(v);break;case"bindevents":utils.each(v,function(fn,eventName){editor.addListener(eventName,fn)});break;case"bindmultievents":utils.each(utils.isArray(v)?v:[v],function(event){var types=utils.trim(event.type).split(/\s+/);utils.each(types,function(eventName){editor.addListener(eventName,event.handler)})});break;case"commands":utils.each(v,function(execFn,execName){editor.commands[execName]=execFn});break;case"outputrule":editor.addOutputRule(v);break;case"inputrule":editor.addInputRule(v);break;case"defaultoptions":editor.setOpt(v)}})}}else{if(plugin.afterDisabled){plugin.afterDisabled.call(editor)}}});utils.each(UE.plugins,function(plugin){plugin.call(editor)})},run:function(pluginName,editor){var plugin=_plugins[pluginName];if(plugin){plugin.exeFn.call(editor)}}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78};var LocalStorage=UE.LocalStorage=(function(){var storage=window.localStorage||getUserData()||null,LOCAL_FILE="localStorage";return{saveLocalData:function(key,data){if(storage&&data){storage.setItem(key,data);return true}return false},getLocalData:function(key){if(storage){return storage.getItem(key)}return null},removeItem:function(key){storage&&storage.removeItem(key)}};function getUserData(){var container=document.createElement("div");container.style.display="none";if(!container.addBehavior){return null}container.addBehavior("#default#userdata");return{getItem:function(key){var result=null;try{document.body.appendChild(container);container.load(LOCAL_FILE);result=container.getAttribute(key);document.body.removeChild(container)}catch(e){}return result},setItem:function(key,value){document.body.appendChild(container);container.setAttribute(key,value);container.save(LOCAL_FILE);document.body.removeChild(container)},removeItem:function(key){document.body.appendChild(container);container.removeAttribute(key);container.save(LOCAL_FILE);document.body.removeChild(container)}}}})();(function(){var ROOTKEY="ueditor_preference";UE.Editor.prototype.setPreferences=function(key,value){var obj={};if(utils.isString(key)){obj[key]=value}else{obj=key}var data=LocalStorage.getLocalData(ROOTKEY);if(data&&(data=utils.str2json(data))){utils.extend(data,obj)}else{data=obj}data&&LocalStorage.saveLocalData(ROOTKEY,utils.json2str(data))};UE.Editor.prototype.getPreferences=function(key){var data=LocalStorage.getLocalData(ROOTKEY);if(data&&(data=utils.str2json(data))){return key?data[key]:data}return null};UE.Editor.prototype.removePreferences=function(key){var data=LocalStorage.getLocalData(ROOTKEY);if(data&&(data=utils.str2json(data))){data[key]=undefined;delete data[key]}data&&LocalStorage.saveLocalData(ROOTKEY,utils.json2str(data))}})();UE.plugins.defaultfilter=function(){var me=this;me.setOpt({allowDivTransToP:true,disabledTableInTable:true});me.addInputRule(function(root){var allowDivTransToP=this.options.allowDivTransToP;var val;function tdParent(node){while(node&&node.type=="element"){if(node.tagName=="td"){return true}node=node.parentNode}return false}root.traversal(function(node){if(node.type=="element"){if(!dtd.$cdata[node.tagName]&&me.options.autoClearEmptyNode&&dtd.$inline[node.tagName]&&!dtd.$empty[node.tagName]&&(!node.attrs||utils.isEmptyObject(node.attrs))){if(!node.firstChild()){node.parentNode.removeChild(node)}else{if(node.tagName=="span"&&(!node.attrs||utils.isEmptyObject(node.attrs))){node.parentNode.removeChild(node,true)}}return}switch(node.tagName){case"style":case"script":node.setAttr({cdata_tag:node.tagName,cdata_data:(node.innerHTML()||""),_ue_custom_node_:"true"});node.tagName="div";node.innerHTML("");break;case"a":if(val=node.getAttr("href")){node.setAttr("_href",val)}break;case"img":if(val=node.getAttr("src")){if(/^data:/.test(val)){node.parentNode.removeChild(node);break}}node.setAttr("_src",node.getAttr("src"));break;case"span":if(browser.webkit&&(val=node.getStyle("white-space"))){if(/nowrap|normal/.test(val)){node.setStyle("white-space","");if(me.options.autoClearEmptyNode&&utils.isEmptyObject(node.attrs)){node.parentNode.removeChild(node,true)}}}val=node.getAttr("id");if(val&&/^_baidu_bookmark_/i.test(val)){node.parentNode.removeChild(node)}break;case"p":if(val=node.getAttr("align")){node.setAttr("align");node.setStyle("text-align",val)}utils.each(node.children,function(n){if(n.type=="element"&&n.tagName=="p"){var next=n.nextSibling();node.parentNode.insertAfter(n,node);var last=n;while(next){var tmp=next.nextSibling();node.parentNode.insertAfter(next,last);last=next;next=tmp}return false}});if(!node.firstChild()){node.innerHTML(browser.ie?"&nbsp;":"<br/>")}break;case"div":if(node.getAttr("cdata_tag")){break}val=node.getAttr("class");if(val&&/^line number\d+/.test(val)){break}if(!allowDivTransToP){break}var tmpNode,p=UE.uNode.createElement("p");while(tmpNode=node.firstChild()){if(tmpNode.type=="text"||!UE.dom.dtd.$block[tmpNode.tagName]){p.appendChild(tmpNode)}else{if(p.firstChild()){node.parentNode.insertBefore(p,node);p=UE.uNode.createElement("p")}else{node.parentNode.insertBefore(tmpNode,node)}}}if(p.firstChild()){node.parentNode.insertBefore(p,node)}node.parentNode.removeChild(node);break;case"dl":node.tagName="ul";break;case"dt":case"dd":node.tagName="li";break;case"li":var className=node.getAttr("class");if(!className||!/list\-/.test(className)){node.setAttr()}var tmpNodes=node.getNodesByTagName("ol ul");UE.utils.each(tmpNodes,function(n){node.parentNode.insertAfter(n,node)});break;case"td":case"th":case"caption":if(!node.children||!node.children.length){node.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"))}break;case"table":if(me.options.disabledTableInTable&&tdParent(node)){node.parentNode.insertBefore(UE.uNode.createText(node.innerText()),node);node.parentNode.removeChild(node)}}}})});me.addOutputRule(function(root){var val;root.traversal(function(node){if(node.type=="element"){if(me.options.autoClearEmptyNode&&dtd.$inline[node.tagName]&&!dtd.$empty[node.tagName]&&(!node.attrs||utils.isEmptyObject(node.attrs))){if(!node.firstChild()){node.parentNode.removeChild(node)}else{if(node.tagName=="span"&&(!node.attrs||utils.isEmptyObject(node.attrs))){node.parentNode.removeChild(node,true)}}return}switch(node.tagName){case"div":if(val=node.getAttr("cdata_tag")){node.tagName=val;node.appendChild(UE.uNode.createText(node.getAttr("cdata_data")));node.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""})}break;case"a":if(val=node.getAttr("_href")){node.setAttr({href:utils.html(val),_href:""})}break;break;case"span":val=node.getAttr("id");if(val&&/^_baidu_bookmark_/i.test(val)){node.parentNode.removeChild(node)}break;case"img":if(val=node.getAttr("_src")){node.setAttr({src:node.getAttr("_src"),_src:""})}}}})})};UE.commands.inserthtml={execCommand:function(command,html,notNeedFilter){var me=this,range,div;if(!html){return}if(me.fireEvent("beforeinserthtml",html)===true){return}range=me.selection.getRange();div=range.document.createElement("div");div.style.display="inline";if(!notNeedFilter){var root=UE.htmlparser(html);if(me.options.filterRules){UE.filterNode(root,me.options.filterRules)}me.filterInputRule(root);html=root.toHtml()}div.innerHTML=utils.trim(html);if(!range.collapsed){var tmpNode=range.startContainer;if(domUtils.isFillChar(tmpNode)){range.setStartBefore(tmpNode)}tmpNode=range.endContainer;if(domUtils.isFillChar(tmpNode)){range.setEndAfter(tmpNode)}range.txtToElmBoundary();if(range.endContainer&&range.endContainer.nodeType==1){tmpNode=range.endContainer.childNodes[range.endOffset];if(tmpNode&&domUtils.isBr(tmpNode)){range.setEndAfter(tmpNode)}}if(range.startOffset==0){tmpNode=range.startContainer;if(domUtils.isBoundaryNode(tmpNode,"firstChild")){tmpNode=range.endContainer;if(range.endOffset==(tmpNode.nodeType==3?tmpNode.nodeValue.length:tmpNode.childNodes.length)&&domUtils.isBoundaryNode(tmpNode,"lastChild")){me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";range.setStart(me.body.firstChild,0).collapse(true)}}}!range.collapsed&&range.deleteContents();if(range.startContainer.nodeType==1){var child=range.startContainer.childNodes[range.startOffset],pre;if(child&&domUtils.isBlockElm(child)&&(pre=child.previousSibling)&&domUtils.isBlockElm(pre)){range.setEnd(pre,pre.childNodes.length).collapse();while(child.firstChild){pre.appendChild(child.firstChild)}domUtils.remove(child)}}}var child,parent,pre,tmp,hadBreak=0,nextNode;if(range.inFillChar()){child=range.startContainer;if(domUtils.isFillChar(child)){range.setStartBefore(child).collapse(true);domUtils.remove(child)}else{if(domUtils.isFillChar(child,true)){child.nodeValue=child.nodeValue.replace(fillCharReg,"");range.startOffset--;range.collapsed&&range.collapse(true)}}}var li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li){var next,last;while(child=div.firstChild){while(child&&(child.nodeType==3||!domUtils.isBlockElm(child)||child.tagName=="HR")){next=child.nextSibling;range.insertNode(child).collapse();last=child;child=next}if(child){if(/^(ol|ul)$/i.test(child.tagName)){while(child.firstChild){last=child.firstChild;domUtils.insertAfter(li,child.firstChild);li=li.nextSibling}domUtils.remove(child)}else{var tmpLi;next=child.nextSibling;tmpLi=me.document.createElement("li");domUtils.insertAfter(li,tmpLi);tmpLi.appendChild(child);last=child;child=next;li=tmpLi}}}li=domUtils.findParentByTagName(range.startContainer,"li",true);if(domUtils.isEmptyBlock(li)){domUtils.remove(li)}if(last){range.setStartAfter(last).collapse(true).select(true)}}else{while(child=div.firstChild){if(hadBreak){var p=me.document.createElement("p");while(child&&(child.nodeType==3||!dtd.$block[child.tagName])){nextNode=child.nextSibling;p.appendChild(child);child=nextNode}if(p.firstChild){child=p}}range.insertNode(child);nextNode=child.nextSibling;if(!hadBreak&&child.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(child)){parent=domUtils.findParent(child,function(node){return domUtils.isBlockElm(node)});if(parent&&parent.tagName.toLowerCase()!="body"&&!(dtd[parent.tagName][child.nodeName]&&child.parentNode===parent)){if(!dtd[parent.tagName][child.nodeName]){pre=parent}else{tmp=child.parentNode;while(tmp!==parent){pre=tmp;tmp=tmp.parentNode}}domUtils.breakParent(child,pre||tmp);var pre=child.previousSibling;domUtils.trimWhiteTextNode(pre);if(!pre.childNodes.length){domUtils.remove(pre)}if(!browser.ie&&(next=child.nextSibling)&&domUtils.isBlockElm(next)&&next.lastChild&&!domUtils.isBr(next.lastChild)){next.appendChild(me.document.createElement("br"))}hadBreak=1}}var next=child.nextSibling;if(!div.firstChild&&next&&domUtils.isBlockElm(next)){range.setStart(next,0).collapse(true);break}range.setEndAfter(child).collapse()}child=range.startContainer;if(nextNode&&domUtils.isBr(nextNode)){domUtils.remove(nextNode)}if(domUtils.isBlockElm(child)&&domUtils.isEmptyNode(child)){if(nextNode=child.nextSibling){domUtils.remove(child);if(nextNode.nodeType==1&&dtd.$block[nextNode.tagName]){range.setStart(nextNode,0).collapse(true).shrinkBoundary()}}else{try{child.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(e){range.setStartBefore(child);domUtils.remove(child)}}}try{range.select(true)}catch(e){}}setTimeout(function(){range=me.selection.getRange();range.scrollToView(me.autoHeightEnabled,me.autoHeightEnabled?domUtils.getXY(me.iframe).y:0);me.fireEvent("afterinserthtml",html)},200)}};UE.plugins.autotypeset=function(){this.setOpt({autotypeset:{mergeEmptyline:true,removeClass:true,removeEmptyline:false,textAlign:"left",imageBlockLine:"center",pasteFilter:false,clearFontSize:false,clearFontFamily:false,removeEmptyNode:false,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:false,indentValue:"2em",bdc2sb:false,tobdc:false}});var me=this,opt=me.options.autotypeset,remainClass={selectTdClass:1,pagebreak:1,anchorclass:1},remainTag={li:1},tags={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},highlightCont;if(!opt){return}readLocalOpts();function isLine(node,notEmpty){if(!node||node.nodeType==3){return 0}if(domUtils.isBr(node)){return 1}if(node&&node.parentNode&&tags[node.tagName.toLowerCase()]){if(highlightCont&&highlightCont.contains(node)||node.getAttribute("pagebreak")){return 0}return notEmpty?!domUtils.isEmptyBlock(node):domUtils.isEmptyBlock(node,new RegExp("[\\s"+domUtils.fillChar+"]","g"))}}function removeNotAttributeSpan(node){if(!node.style.cssText){domUtils.removeAttributes(node,["style"]);if(node.tagName.toLowerCase()=="span"&&domUtils.hasNoAttributes(node)){domUtils.remove(node,true)}}}function autotype(type,html){var me=this,cont;if(html){if(!opt.pasteFilter){return}cont=me.document.createElement("div");cont.innerHTML=html.html}else{cont=me.document.body}var nodes=domUtils.getElementsByTagName(cont,"*");for(var i=0,ci;ci=nodes[i++];){if(me.fireEvent("excludeNodeinautotype",ci)===true){continue}if(opt.clearFontSize&&ci.style.fontSize){domUtils.removeStyle(ci,"font-size");removeNotAttributeSpan(ci)}if(opt.clearFontFamily&&ci.style.fontFamily){domUtils.removeStyle(ci,"font-family");removeNotAttributeSpan(ci)}if(isLine(ci)){if(opt.mergeEmptyline){var next=ci.nextSibling,tmpNode,isBr=domUtils.isBr(ci);while(isLine(next)){tmpNode=next;next=tmpNode.nextSibling;if(isBr&&(!next||next&&!domUtils.isBr(next))){break}domUtils.remove(tmpNode)}}if(opt.removeEmptyline&&domUtils.inDoc(ci,cont)&&!remainTag[ci.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(ci)){next=ci.nextSibling;if(next&&!domUtils.isBr(next)){continue}}domUtils.remove(ci);continue}}if(isLine(ci,true)&&ci.tagName!="SPAN"){if(opt.indent){ci.style.textIndent=opt.indentValue}if(opt.textAlign){ci.style.textAlign=opt.textAlign}}if(opt.removeClass&&ci.className&&!remainClass[ci.className.toLowerCase()]){if(highlightCont&&highlightCont.contains(ci)){continue}domUtils.removeAttributes(ci,["class"])}if(opt.imageBlockLine&&ci.tagName.toLowerCase()=="img"&&!ci.getAttribute("emotion")){if(html){var img=ci;switch(opt.imageBlockLine){case"left":case"right":case"none":var pN=img.parentNode,tmpNode,pre,next;while(dtd.$inline[pN.tagName]||pN.tagName=="A"){pN=pN.parentNode}tmpNode=pN;if(tmpNode.tagName=="P"&&domUtils.getStyle(tmpNode,"text-align")=="center"){if(!domUtils.isBody(tmpNode)&&domUtils.getChildCount(tmpNode,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1){pre=tmpNode.previousSibling;next=tmpNode.nextSibling;if(pre&&next&&pre.nodeType==1&&next.nodeType==1&&pre.tagName==next.tagName&&domUtils.isBlockElm(pre)){pre.appendChild(tmpNode.firstChild);while(next.firstChild){pre.appendChild(next.firstChild)}domUtils.remove(tmpNode);domUtils.remove(next)}else{domUtils.setStyle(tmpNode,"text-align","")}}}domUtils.setStyle(img,"float",opt.imageBlockLine);break;case"center":if(me.queryCommandValue("imagefloat")!="center"){pN=img.parentNode;domUtils.setStyle(img,"float","none");tmpNode=img;while(pN&&domUtils.getChildCount(pN,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1&&(dtd.$inline[pN.tagName]||pN.tagName=="A")){tmpNode=pN;pN=pN.parentNode}var pNode=me.document.createElement("p");domUtils.setAttributes(pNode,{style:"text-align:center"});tmpNode.parentNode.insertBefore(pNode,tmpNode);pNode.appendChild(tmpNode);domUtils.setStyle(tmpNode,"float","")}}}else{var range=me.selection.getRange();range.selectNode(ci).select();me.execCommand("imagefloat",opt.imageBlockLine)}}if(opt.removeEmptyNode){if(opt.removeTagNames[ci.tagName.toLowerCase()]&&domUtils.hasNoAttributes(ci)&&domUtils.isEmptyBlock(ci)){domUtils.remove(ci)}}}if(opt.tobdc){var root=UE.htmlparser(cont.innerHTML);root.traversal(function(node){if(node.type=="text"){node.data=ToDBC(node.data)}});cont.innerHTML=root.toHtml()}if(opt.bdc2sb){var root=UE.htmlparser(cont.innerHTML);root.traversal(function(node){if(node.type=="text"){node.data=DBC2SB(node.data)}});cont.innerHTML=root.toHtml()}if(html){html.html=cont.innerHTML}}if(opt.pasteFilter){me.addListener("beforepaste",autotype)}function DBC2SB(str){var result="";for(var i=0;i<str.length;i++){var code=str.charCodeAt(i);if(code>=65281&&code<=65373){result+=String.fromCharCode(str.charCodeAt(i)-65248)}else{if(code==12288){result+=String.fromCharCode(str.charCodeAt(i)-12288+32)}else{result+=str.charAt(i)}}}return result}function ToDBC(txtstring){txtstring=utils.html(txtstring);var tmp="";var mark="";for(var i=0;i<txtstring.length;i++){if(txtstring.charCodeAt(i)==32){tmp=tmp+String.fromCharCode(12288)}else{if(txtstring.charCodeAt(i)<127){tmp=tmp+String.fromCharCode(txtstring.charCodeAt(i)+65248)}else{tmp+=txtstring.charAt(i)}}}return tmp}function readLocalOpts(){var cookieOpt=me.getPreferences("autotypeset");utils.extend(me.options.autotypeset,cookieOpt)}me.commands.autotypeset={execCommand:function(){me.removeListener("beforepaste",autotype);if(opt.pasteFilter){me.addListener("beforepaste",autotype)}autotype.call(me)}}};UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var me=this,form=domUtils.findParentByTagName(me.iframe,"form",false);if(form){if(me.fireEvent("beforesubmit")===false){return}me.sync();form.submit()}}}}}});UE.plugin.register("background",function(){var me=this,cssRuleId="editor_background",isSetColored,reg=new RegExp("body[\\s]*\\{(.+)\\}","i");function stringToObj(str){var obj={},styles=str.split(";");utils.each(styles,function(v){var index=v.indexOf(":"),key=utils.trim(v.substr(0,index)).toLowerCase();key&&(obj[key]=utils.trim(v.substr(index+1)||""))});return obj}function setBackground(obj){if(obj){var styles=[];for(var name in obj){if(obj.hasOwnProperty(name)){styles.push(name+":"+obj[name]+"; ")}}utils.cssRule(cssRuleId,styles.length?("body{"+styles.join("")+"}"):"",me.document)}else{utils.cssRule(cssRuleId,"",me.document)}}var orgFn=me.hasContents;me.hasContents=function(){if(me.queryCommandValue("background")){return true}return orgFn.apply(me,arguments)};return{bindEvents:{getAllHtml:function(type,headHtml){var body=this.body,su=domUtils.getComputedStyle(body,"background-image"),url="";if(su.indexOf(me.options.imagePath)>0){url=su.substring(su.indexOf(me.options.imagePath),su.length-1).replace(/"|\(|\)/ig,"")}else{url=su!="none"?su.replace(/url\("?|"?\)/ig,""):""}var html='<style type="text/css">body{';var bgObj={"background-color":domUtils.getComputedStyle(body,"background-color")||"#ffffff","background-image":url?"url("+url+")":"","background-repeat":domUtils.getComputedStyle(body,"background-repeat")||"","background-position":browser.ie?(domUtils.getComputedStyle(body,"background-position-x")+" "+domUtils.getComputedStyle(body,"background-position-y")):domUtils.getComputedStyle(body,"background-position"),height:domUtils.getComputedStyle(body,"height")};for(var name in bgObj){if(bgObj.hasOwnProperty(name)){html+=name+":"+bgObj[name]+"; "}}html+="}</style> ";headHtml.push(html)},aftersetcontent:function(){if(isSetColored==false){setBackground()}}},inputRule:function(root){isSetColored=false;utils.each(root.getNodesByTagName("p"),function(p){var styles=p.getAttr("data-background");if(styles){isSetColored=true;setBackground(stringToObj(styles));p.parentNode.removeChild(p)}})},outputRule:function(root){var me=this,styles=(utils.cssRule(cssRuleId,me.document)||"").replace(/[\n\r]+/g,"").match(reg);if(styles){root.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(styles[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))}},commands:{background:{execCommand:function(cmd,obj){setBackground(obj)},queryCommandValue:function(){var me=this,styles=(utils.cssRule(cssRuleId,me.document)||"").replace(/[\n\r]+/g,"").match(reg);return styles?stringToObj(styles[1]):null},notNeedUndo:true}}}});UE.commands.imagefloat={execCommand:function(cmd,align){var me=this,range=me.selection.getRange();if(!range.collapsed){var img=range.getClosedNode();if(img&&img.tagName=="IMG"){switch(align){case"left":case"right":case"none":var pN=img.parentNode,tmpNode,pre,next;while(dtd.$inline[pN.tagName]||pN.tagName=="A"){pN=pN.parentNode}tmpNode=pN;if(tmpNode.tagName=="P"&&domUtils.getStyle(tmpNode,"text-align")=="center"){if(!domUtils.isBody(tmpNode)&&domUtils.getChildCount(tmpNode,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1){pre=tmpNode.previousSibling;next=tmpNode.nextSibling;if(pre&&next&&pre.nodeType==1&&next.nodeType==1&&pre.tagName==next.tagName&&domUtils.isBlockElm(pre)){pre.appendChild(tmpNode.firstChild);while(next.firstChild){pre.appendChild(next.firstChild)}domUtils.remove(tmpNode);domUtils.remove(next)}else{domUtils.setStyle(tmpNode,"text-align","")}}range.selectNode(img).select()}domUtils.setStyle(img,"float",align=="none"?"":align);if(align=="none"){domUtils.removeAttributes(img,"align")}break;case"center":if(me.queryCommandValue("imagefloat")!="center"){pN=img.parentNode;domUtils.setStyle(img,"float","");domUtils.removeAttributes(img,"align");tmpNode=img;while(pN&&domUtils.getChildCount(pN,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1&&(dtd.$inline[pN.tagName]||pN.tagName=="A")){tmpNode=pN;pN=pN.parentNode}range.setStartBefore(tmpNode).setCursor(false);pN=me.document.createElement("div");pN.appendChild(tmpNode);domUtils.setStyle(tmpNode,"float","");me.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+pN.innerHTML+"</p>");tmpNode=me.document.getElementById("_img_parent_tmp");tmpNode.removeAttribute("id");tmpNode=tmpNode.firstChild;range.selectNode(tmpNode).select();next=tmpNode.parentNode.nextSibling;if(next&&domUtils.isEmptyNode(next)){domUtils.remove(next)}}break}}}},queryCommandValue:function(){var range=this.selection.getRange(),startNode,floatStyle;if(range.collapsed){return"none"}startNode=range.getClosedNode();if(startNode&&startNode.nodeType==1&&startNode.tagName=="IMG"){floatStyle=domUtils.getComputedStyle(startNode,"float")||startNode.getAttribute("align");if(floatStyle=="none"){floatStyle=domUtils.getComputedStyle(startNode.parentNode,"text-align")=="center"?"center":floatStyle}return{left:1,right:1,center:1}[floatStyle]?floatStyle:"none"}return"none"},queryCommandState:function(){var range=this.selection.getRange(),startNode;if(range.collapsed){return -1}startNode=range.getClosedNode();if(startNode&&startNode.nodeType==1&&startNode.tagName=="IMG"){return 0}return -1}};UE.commands.insertimage={execCommand:function(cmd,opt){opt=utils.isArray(opt)?opt:[opt];if(!opt.length){return}var me=this,range=me.selection.getRange(),img=range.getClosedNode();if(me.fireEvent("beforeinsertimage",opt)===true){return}function unhtmlData(imgCi){utils.each("width,height,border,hspace,vspace".split(","),function(item){if(imgCi[item]){imgCi[item]=parseInt(imgCi[item],10)||0}});utils.each("src,_src".split(","),function(item){if(imgCi[item]){imgCi[item]=utils.unhtmlForUrl(imgCi[item])}});utils.each("title,alt".split(","),function(item){if(imgCi[item]){imgCi[item]=utils.unhtml(imgCi[item])}})}if(img&&/img/i.test(img.tagName)&&(img.className!="edui-faked-video"||img.className.indexOf("edui-upload-video")!=-1)&&!img.getAttribute("word_img")){var first=opt.shift();var floatStyle=first.floatStyle;delete first.floatStyle;domUtils.setAttributes(img,first);me.execCommand("imagefloat",floatStyle);if(opt.length>0){range.setStartAfter(img).setCursor(false,true);me.execCommand("insertimage",opt)}}else{var html=[],str="",ci;ci=opt[0];if(opt.length==1){unhtmlData(ci);str='<img src="'+ci.src+'" '+(ci._src?' _src="'+ci._src+'" ':"")+(ci.width?'width="'+ci.width+'" ':"")+(ci.height?' height="'+ci.height+'" ':"")+(ci.floatStyle=="left"||ci.floatStyle=="right"?' style="float:'+ci.floatStyle+';"':"")+(ci.title&&ci.title!=""?' title="'+ci.title+'"':"")+(ci.border&&ci.border!="0"?' border="'+ci.border+'"':"")+(ci.alt&&ci.alt!=""?' alt="'+ci.alt+'"':"")+(ci.hspace&&ci.hspace!="0"?' hspace = "'+ci.hspace+'"':"")+(ci.vspace&&ci.vspace!="0"?' vspace = "'+ci.vspace+'"':"")+"/>";if(ci.floatStyle=="center"){str='<p style="text-align: center">'+str+"</p>"}html.push(str)}else{for(var i=0;ci=opt[i++];){unhtmlData(ci);str="<p "+(ci.floatStyle=="center"?'style="text-align: center" ':"")+'><img src="'+ci.src+'" '+(ci.width?'width="'+ci.width+'" ':"")+(ci._src?' _src="'+ci._src+'" ':"")+(ci.height?' height="'+ci.height+'" ':"")+' style="'+(ci.floatStyle&&ci.floatStyle!="center"?"float:"+ci.floatStyle+";":"")+(ci.border||"")+'" '+(ci.title?' title="'+ci.title+'"':"")+" /></p>";html.push(str)}}me.execCommand("insertHtml",html.join(""))}me.fireEvent("afterinsertimage",opt)}};UE.plugins.justify=function(){var me=this,block=domUtils.isBlockElm,defaultValue={left:1,right:1,center:1,justify:1},doJustify=function(range,style){var bookmark=range.createBookmark(),filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(node):!domUtils.isWhitespace(node)};range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode;while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){if(current.nodeType==3||!block(current)){tmpRange.setStartBefore(current);while(current&&current!==bookmark2.end&&!block(current)){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !block(node)})}tmpRange.setEndAfter(tmpNode);var common=tmpRange.getCommonAncestor();if(!domUtils.isBody(common)&&block(common)){domUtils.setStyles(common,utils.isString(style)?{"text-align":style}:style);current=common}else{var p=range.document.createElement("p");domUtils.setStyles(p,utils.isString(style)?{"text-align":style}:style);var frag=tmpRange.extractContents();p.appendChild(frag);tmpRange.insertNode(p);current=p}current=domUtils.getNextDomNode(current,false,filterFn)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)};UE.commands.justify={execCommand:function(cmdName,align){var range=this.selection.getRange(),txt;if(range.collapsed){txt=this.document.createTextNode("p");range.insertNode(txt)}doJustify(range,align);if(txt){range.setStartBefore(txt).collapse(true);domUtils.remove(txt)}range.select();return true},queryCommandValue:function(){var startNode=this.selection.getStart(),value=domUtils.getComputedStyle(startNode,"text-align");return defaultValue[value]?value:"left"},queryCommandState:function(){var start=this.selection.getStart(),cell=start&&domUtils.findParentByTagName(start,["td","th","caption"],true);return cell?-1:0}}};UE.plugins.font=function(){var me=this,fonts={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},needCmd={underline:1,strikethrough:1,fontborder:1},needSetChild={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};me.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});function mergeWithParent(node){var parent;while(parent=node.parentNode){if(parent.tagName=="SPAN"&&domUtils.getChildCount(parent,function(child){return !domUtils.isBookmarkNode(child)&&!domUtils.isBr(child)})==1){parent.style.cssText+=node.style.cssText;domUtils.remove(node,true);node=parent}else{break}}}function mergeChild(rng,cmdName,value){if(needSetChild[cmdName]){rng.adjustmentBoundary();if(!rng.collapsed&&rng.startContainer.nodeType==1){var start=rng.startContainer.childNodes[rng.startOffset];if(start&&domUtils.isTagNode(start,"span")){var bk=rng.createBookmark();utils.each(domUtils.getElementsByTagName(start,"span"),function(span){if(!span.parentNode||domUtils.isBookmarkNode(span)){return}if(cmdName=="backcolor"&&domUtils.getComputedStyle(span,"background-color").toLowerCase()===value){return}domUtils.removeStyle(span,needSetChild[cmdName]);if(span.style.cssText.replace(/^\s+$/,"").length==0){domUtils.remove(span,true)}});rng.moveToBookmark(bk)}}}}function mergesibling(rng,cmdName,value){var collapsed=rng.collapsed,bk=rng.createBookmark(),common;if(collapsed){common=bk.start.parentNode;while(dtd.$inline[common.tagName]){common=common.parentNode}}else{common=domUtils.getCommonAncestor(bk.start,bk.end)}utils.each(domUtils.getElementsByTagName(common,"span"),function(span){if(!span.parentNode||domUtils.isBookmarkNode(span)){return}if(/\s*border\s*:\s*none;?\s*/i.test(span.style.cssText)){if(/^\s*border\s*:\s*none;?\s*$/.test(span.style.cssText)){domUtils.remove(span,true)}else{domUtils.removeStyle(span,"border")}return}if(/border/i.test(span.style.cssText)&&span.parentNode.tagName=="SPAN"&&/border/i.test(span.parentNode.style.cssText)){span.style.cssText=span.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")}if(!(cmdName=="fontborder"&&value=="none")){var next=span.nextSibling;while(next&&next.nodeType==1&&next.tagName=="SPAN"){if(domUtils.isBookmarkNode(next)&&cmdName=="fontborder"){span.appendChild(next);next=span.nextSibling;continue}if(next.style.cssText==span.style.cssText){domUtils.moveChild(next,span);domUtils.remove(next)}if(span.nextSibling===next){break}next=span.nextSibling}}mergeWithParent(span);if(browser.ie&&browser.version>8){var parent=domUtils.findParent(span,function(n){return n.tagName=="SPAN"&&/background-color/.test(n.style.cssText)});if(parent&&!/background-color/.test(span.style.cssText)){span.style.backgroundColor=parent.style.backgroundColor}}});rng.moveToBookmark(bk);mergeChild(rng,cmdName,value)}me.addInputRule(function(root){utils.each(root.getNodesByTagName("u s del font strike"),function(node){if(node.tagName=="font"){var cssStyle=[];for(var p in node.attrs){switch(p){case"size":cssStyle.push("font-size:"+({"1":"10","2":"12","3":"16","4":"18","5":"24","6":"32","7":"48"}[node.attrs[p]]||node.attrs[p])+"px");break;case"color":cssStyle.push("color:"+node.attrs[p]);break;case"face":cssStyle.push("font-family:"+node.attrs[p]);break;case"style":cssStyle.push(node.attrs[p])}}node.attrs={style:cssStyle.join(";")}}else{var val=node.tagName=="u"?"underline":"line-through";node.attrs={style:(node.getAttr("style")||"")+"text-decoration:"+val+";"}}node.tagName="span"})});for(var p in fonts){(function(cmd,style){UE.commands[cmd]={execCommand:function(cmdName,value){value=value||(this.queryCommandState(cmdName)?"none":cmdName=="underline"?"underline":cmdName=="fontborder"?"1px solid #000":"line-through");var me=this,range=this.selection.getRange(),text;if(value=="default"){if(range.collapsed){text=me.document.createTextNode("font");range.insertNode(text).select()}me.execCommand("removeFormat","span,a",style);if(text){range.setStartBefore(text).collapse(true);domUtils.remove(text)}mergesibling(range,cmdName,value);range.select()}else{if(!range.collapsed){if(needCmd[cmd]&&me.queryCommandValue(cmd)){me.execCommand("removeFormat","span,a",style)}range=me.selection.getRange();range.applyInlineStyle("span",{style:style+":"+value});mergesibling(range,cmdName,value);range.select()}else{var span=domUtils.findParentByTagName(range.startContainer,"span",true);text=me.document.createTextNode("font");if(span&&!span.children.length&&!span[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){range.insertNode(text);if(needCmd[cmd]){range.selectNode(text).select();me.execCommand("removeFormat","span,a",style,null);span=domUtils.findParentByTagName(text,"span",true);range.setStartBefore(text)}span&&(span.style.cssText+=";"+style+":"+value);range.collapse(true).select()}else{range.insertNode(text);range.selectNode(text).select();span=range.document.createElement("span");if(needCmd[cmd]){if(domUtils.findParentByTagName(text,"a",true)){range.setStartBefore(text).setCursor();domUtils.remove(text);return}me.execCommand("removeFormat","span,a",style)}span.style.cssText=style+":"+value;text.parentNode.insertBefore(span,text);if(!browser.ie||browser.ie&&browser.version==9){var spanParent=span.parentNode;while(!domUtils.isBlockElm(spanParent)){if(spanParent.tagName=="SPAN"){span.style.cssText=spanParent.style.cssText+";"+span.style.cssText}spanParent=spanParent.parentNode}}if(opera){setTimeout(function(){range.setStart(span,0).collapse(true);mergesibling(range,cmdName,value);range.select()})}else{range.setStart(span,0).collapse(true);mergesibling(range,cmdName,value);range.select()}}domUtils.remove(text)}}return true},queryCommandValue:function(cmdName){var startNode=this.selection.getStart();if(cmdName=="underline"||cmdName=="strikethrough"){var tmpNode=startNode,value;while(tmpNode&&!domUtils.isBlockElm(tmpNode)&&!domUtils.isBody(tmpNode)){if(tmpNode.nodeType==1){value=domUtils.getComputedStyle(tmpNode,style);if(value!="none"){return value}}tmpNode=tmpNode.parentNode}return"none"}if(cmdName=="fontborder"){var tmp=startNode,val;while(tmp&&dtd.$inline[tmp.tagName]){if(val=domUtils.getComputedStyle(tmp,"border")){if(/1px/.test(val)&&/solid/.test(val)){return val}}tmp=tmp.parentNode}return""}if(cmdName=="FontSize"){var styleVal=domUtils.getComputedStyle(startNode,style),tmp=/^([\d\.]+)(\w+)$/.exec(styleVal);if(tmp){return Math.floor(tmp[1])+tmp[2]}return styleVal}return domUtils.getComputedStyle(startNode,style)},queryCommandState:function(cmdName){if(!needCmd[cmdName]){return 0}var val=this.queryCommandValue(cmdName);if(cmdName=="fontborder"){return/1px/.test(val)&&/solid/.test(val)}else{return cmdName=="underline"?/underline/.test(val):/line\-through/.test(val)}}}})(p,fonts[p])}};UE.plugins.link=function(){function optimize(range){var start=range.startContainer,end=range.endContainer;if(start=domUtils.findParentByTagName(start,"a",true)){range.setStartBefore(start)}if(end=domUtils.findParentByTagName(end,"a",true)){range.setEndAfter(end)}}UE.commands.unlink={execCommand:function(){var range=this.selection.getRange(),bookmark;if(range.collapsed&&!domUtils.findParentByTagName(range.startContainer,"a",true)){return}bookmark=range.createBookmark();optimize(range);range.removeInlineStyle("a").moveToBookmark(bookmark).select()},queryCommandState:function(){return !this.highlight&&this.queryCommandValue("link")?0:-1}};function doLink(range,opt,me){var rngClone=range.cloneRange(),link=me.queryCommandValue("link");optimize(range=range.adjustmentBoundary());var start=range.startContainer;if(start.nodeType==1&&link){start=start.childNodes[range.startOffset];if(start&&start.nodeType==1&&start.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(start[browser.ie?"innerText":"textContent"])){start[browser.ie?"innerText":"textContent"]=utils.html(opt.textValue||opt.href)}}if(!rngClone.collapsed||link){range.removeInlineStyle("a");rngClone=range.cloneRange()}if(rngClone.collapsed){var a=range.document.createElement("a"),text="";if(opt.textValue){text=utils.html(opt.textValue);delete opt.textValue}else{text=utils.html(opt.href)}domUtils.setAttributes(a,opt);start=domUtils.findParentByTagName(rngClone.startContainer,"a",true);if(start&&domUtils.isInNodeEndBoundary(rngClone,start)){range.setStartAfter(start).collapse(true)}a[browser.ie?"innerText":"textContent"]=text;range.insertNode(a).selectNode(a)}else{range.applyInlineStyle("a",opt)}}UE.commands.link={execCommand:function(cmdName,opt){var range;opt._href&&(opt._href=utils.unhtml(opt._href,/[<">]/g));opt.href&&(opt.href=utils.unhtml(opt.href,/[<">]/g));opt.textValue&&(opt.textValue=utils.unhtml(opt.textValue,/[<">]/g));doLink(range=this.selection.getRange(),opt,this);range.collapse().select(true)},queryCommandValue:function(){var range=this.selection.getRange(),node;if(range.collapsed){node=range.startContainer;node=node.nodeType==1?node:node.parentNode;if(node&&(node=domUtils.findParentByTagName(node,"a",true))&&!domUtils.isInNodeEndBoundary(range,node)){return node}}else{range.shrinkBoundary();var start=range.startContainer.nodeType==3||!range.startContainer.childNodes[range.startOffset]?range.startContainer:range.startContainer.childNodes[range.startOffset],end=range.endContainer.nodeType==3||range.endOffset==0?range.endContainer:range.endContainer.childNodes[range.endOffset-1],common=range.getCommonAncestor();node=domUtils.findParentByTagName(common,"a",true);if(!node&&common.nodeType==1){var as=common.getElementsByTagName("a"),ps,pe;for(var i=0,ci;ci=as[i++];){ps=domUtils.getPosition(ci,start),pe=domUtils.getPosition(ci,end);if((ps&domUtils.POSITION_FOLLOWING||ps&domUtils.POSITION_CONTAINS)&&(pe&domUtils.POSITION_PRECEDING||pe&domUtils.POSITION_CONTAINS)){node=ci;break}}}return node}},queryCommandState:function(){var img=this.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-video"||img.className.indexOf("edui-upload-video")!=-1);return flag?-1:0}}};UE.plugins.insertframe=function(){var me=this;function deleteIframe(){me._iframe&&delete me._iframe}me.addListener("selectionchange",function(){deleteIframe()})};UE.commands.scrawl={queryCommandState:function(){return(browser.ie&&browser.version<=8)?-1:0}};UE.plugins.removeformat=function(){var me=this;me.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});me.commands.removeformat={execCommand:function(cmdName,tags,style,attrs,notIncludeA){var tagReg=new RegExp("^(?:"+(tags||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),removeFormatAttributes=style?[]:(attrs||this.options.removeFormatAttributes).split(","),range=new dom.Range(this.document),bookmark,node,parent,filter=function(node){return node.nodeType==1};function isRedundantSpan(node){if(node.nodeType==3||node.tagName.toLowerCase()!="span"){return 0}if(browser.ie){var attrs=node.attributes;if(attrs.length){for(var i=0,l=attrs.length;i<l;i++){if(attrs[i].specified){return 0}}return 1}}return !node.attributes.length}function doRemove(range){var bookmark1=range.createBookmark();if(range.collapsed){range.enlarge(true)}if(!notIncludeA){var aNode=domUtils.findParentByTagName(range.startContainer,"a",true);if(aNode){range.setStartBefore(aNode)}aNode=domUtils.findParentByTagName(range.endContainer,"a",true);if(aNode){range.setEndAfter(aNode)}}bookmark=range.createBookmark();node=bookmark.start;while((parent=node.parentNode)&&!domUtils.isBlockElm(parent)){domUtils.breakParent(node,parent);domUtils.clearEmptySibling(node)}if(bookmark.end){node=bookmark.end;while((parent=node.parentNode)&&!domUtils.isBlockElm(parent)){domUtils.breakParent(node,parent);domUtils.clearEmptySibling(node)}var current=domUtils.getNextDomNode(bookmark.start,false,filter),next;while(current){if(current==bookmark.end){break}next=domUtils.getNextDomNode(current,true,filter);if(!dtd.$empty[current.tagName.toLowerCase()]&&!domUtils.isBookmarkNode(current)){if(tagReg.test(current.tagName)){if(style){domUtils.removeStyle(current,style);if(isRedundantSpan(current)&&style!="text-decoration"){domUtils.remove(current,true)}}else{domUtils.remove(current,true)}}else{if(!dtd.$tableContent[current.tagName]&&!dtd.$list[current.tagName]){domUtils.removeAttributes(current,removeFormatAttributes);if(isRedundantSpan(current)){domUtils.remove(current,true)}}}}current=next}}var pN=bookmark.start.parentNode;if(domUtils.isBlockElm(pN)&&!dtd.$tableContent[pN.tagName]&&!dtd.$list[pN.tagName]){domUtils.removeAttributes(pN,removeFormatAttributes)}pN=bookmark.end.parentNode;if(bookmark.end&&domUtils.isBlockElm(pN)&&!dtd.$tableContent[pN.tagName]&&!dtd.$list[pN.tagName]){domUtils.removeAttributes(pN,removeFormatAttributes)}range.moveToBookmark(bookmark).moveToBookmark(bookmark1);var node=range.startContainer,tmp,collapsed=range.collapsed;while(node.nodeType==1&&domUtils.isEmptyNode(node)&&dtd.$removeEmpty[node.tagName]){tmp=node.parentNode;range.setStartBefore(node);if(range.startContainer===range.endContainer){range.endOffset--}domUtils.remove(node);node=tmp}if(!collapsed){node=range.endContainer;while(node.nodeType==1&&domUtils.isEmptyNode(node)&&dtd.$removeEmpty[node.tagName]){tmp=node.parentNode;range.setEndBefore(node);domUtils.remove(node);node=tmp}}}range=this.selection.getRange();doRemove(range);range.select()}}};UE.plugins.blockquote=function(){var me=this;function getObj(editor){return domUtils.filterNodeList(editor.selection.getStartElementPath(),"blockquote")}me.commands.blockquote={execCommand:function(cmdName,attrs){var range=this.selection.getRange(),obj=getObj(this),blockquote=dtd.blockquote,bookmark=range.createBookmark();if(obj){var start=range.startContainer,startBlock=domUtils.isBlockElm(start)?start:domUtils.findParent(start,function(node){return domUtils.isBlockElm(node)}),end=range.endContainer,endBlock=domUtils.isBlockElm(end)?end:domUtils.findParent(end,function(node){return domUtils.isBlockElm(node)});startBlock=domUtils.findParentByTagName(startBlock,"li",true)||startBlock;endBlock=domUtils.findParentByTagName(endBlock,"li",true)||endBlock;if(startBlock.tagName=="LI"||startBlock.tagName=="TD"||startBlock===obj||domUtils.isBody(startBlock)){domUtils.remove(obj,true)}else{domUtils.breakParent(startBlock,obj)}if(startBlock!==endBlock){obj=domUtils.findParentByTagName(endBlock,"blockquote");if(obj){if(endBlock.tagName=="LI"||endBlock.tagName=="TD"||domUtils.isBody(endBlock)){obj.parentNode&&domUtils.remove(obj,true)}else{domUtils.breakParent(endBlock,obj)}}}var blockquotes=domUtils.getElementsByTagName(this.document,"blockquote");for(var i=0,bi;bi=blockquotes[i++];){if(!bi.childNodes.length){domUtils.remove(bi)}else{if(domUtils.getPosition(bi,startBlock)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(bi,endBlock)&domUtils.POSITION_PRECEDING){domUtils.remove(bi,true)}}}}else{var tmpRange=range.cloneRange(),node=tmpRange.startContainer.nodeType==1?tmpRange.startContainer:tmpRange.startContainer.parentNode,preNode=node,doEnd=1;while(1){if(domUtils.isBody(node)){if(preNode!==node){if(range.collapsed){tmpRange.selectNode(preNode);doEnd=0}else{tmpRange.setStartBefore(preNode)}}else{tmpRange.setStart(node,0)}break}if(!blockquote[node.tagName]){if(range.collapsed){tmpRange.selectNode(preNode)}else{tmpRange.setStartBefore(preNode)}break}preNode=node;node=node.parentNode}if(doEnd){preNode=node=node=tmpRange.endContainer.nodeType==1?tmpRange.endContainer:tmpRange.endContainer.parentNode;while(1){if(domUtils.isBody(node)){if(preNode!==node){tmpRange.setEndAfter(preNode)}else{tmpRange.setEnd(node,node.childNodes.length)}break}if(!blockquote[node.tagName]){tmpRange.setEndAfter(preNode);break}preNode=node;node=node.parentNode}}node=range.document.createElement("blockquote");domUtils.setAttributes(node,attrs);node.appendChild(tmpRange.extractContents());tmpRange.insertNode(node);var childs=domUtils.getElementsByTagName(node,"blockquote");for(var i=0,ci;ci=childs[i++];){if(ci.parentNode){domUtils.remove(ci,true)}}}range.moveToBookmark(bookmark).select()},queryCommandState:function(){return getObj(this)?1:0}}};UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(cmd){var me=this;var rng=me.selection.getRange();if(rng.collapsed){return rng}var bk=rng.createBookmark(),bkEnd=bk.end,filterFn=function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)},curNode=domUtils.getNextDomNode(bk.start,false,filterFn);while(curNode&&(domUtils.getPosition(curNode,bkEnd)&domUtils.POSITION_PRECEDING)){if(curNode.nodeType==3){curNode.nodeValue=curNode.nodeValue[cmd=="touppercase"?"toUpperCase":"toLowerCase"]()}curNode=domUtils.getNextDomNode(curNode,true,filterFn);if(curNode===bkEnd){break}}rng.moveToBookmark(bk).select()}};UE.commands.indent={execCommand:function(){var me=this,value=me.queryCommandState("indent")?"0em":(me.options.indentValue||"2em");me.execCommand("Paragraph","p",{style:"text-indent:"+value})},queryCommandState:function(){var pN=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return pN&&pN.style.textIndent&&parseInt(pN.style.textIndent)?1:0}};UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands.preview={execCommand:function(){var w=window.open("","_blank",""),d=w.document;d.open();d.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"><\/script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)<\/script></head><body><div>"+this.getContent(null,null,true)+"</div></body></html>");d.close()},notNeedUndo:1};UE.plugins.selectall=function(){var me=this;me.commands.selectall={execCommand:function(){var me=this,body=me.body,range=me.selection.getRange();range.selectNodeContents(body);if(domUtils.isEmptyBlock(body)){if(browser.opera&&body.firstChild&&body.firstChild.nodeType==1){range.setStartAtFirst(body.firstChild)}range.collapse(true)}range.select(true)},notNeedUndo:1};me.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins.paragraph=function(){var me=this,block=domUtils.isBlockElm,notExchange=["TD","LI","PRE"],doParagraph=function(range,style,attrs,sourceCmdName){var bookmark=range.createBookmark(),filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(node):!domUtils.isWhitespace(node)},para;range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode;while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){if(current.nodeType==3||!block(current)){tmpRange.setStartBefore(current);while(current&&current!==bookmark2.end&&!block(current)){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !block(node)})}tmpRange.setEndAfter(tmpNode);para=range.document.createElement(style);if(attrs){domUtils.setAttributes(para,attrs);if(sourceCmdName&&sourceCmdName=="customstyle"&&attrs.style){para.style.cssText=attrs.style}}para.appendChild(tmpRange.extractContents());if(domUtils.isEmptyNode(para)){domUtils.fillChar(range.document,para)}tmpRange.insertNode(para);var parent=para.parentNode;if(block(parent)&&!domUtils.isBody(para.parentNode)&&utils.indexOf(notExchange,parent.tagName)==-1){if(!(sourceCmdName&&sourceCmdName=="customstyle")){parent.getAttribute("dir")&&para.setAttribute("dir",parent.getAttribute("dir"));parent.style.cssText&&(para.style.cssText=parent.style.cssText+";"+para.style.cssText);parent.style.textAlign&&!para.style.textAlign&&(para.style.textAlign=parent.style.textAlign);parent.style.textIndent&&!para.style.textIndent&&(para.style.textIndent=parent.style.textIndent);parent.style.padding&&!para.style.padding&&(para.style.padding=parent.style.padding)}if(attrs&&/h\d/i.test(parent.tagName)&&!/h\d/i.test(para.tagName)){domUtils.setAttributes(parent,attrs);if(sourceCmdName&&sourceCmdName=="customstyle"&&attrs.style){parent.style.cssText=attrs.style}domUtils.remove(para,true);para=parent}else{domUtils.remove(para.parentNode,true)}}if(utils.indexOf(notExchange,parent.tagName)!=-1){current=parent}else{current=para}current=domUtils.getNextDomNode(current,false,filterFn)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)};me.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});me.commands.paragraph={execCommand:function(cmdName,style,attrs,sourceCmdName){var range=this.selection.getRange();if(range.collapsed){var txt=this.document.createTextNode("p");range.insertNode(txt);if(browser.ie){var node=txt.previousSibling;if(node&&domUtils.isWhitespace(node)){domUtils.remove(node)}node=txt.nextSibling;if(node&&domUtils.isWhitespace(node)){domUtils.remove(node)}}}range=doParagraph(range,style,attrs,sourceCmdName);if(txt){range.setStartBefore(txt).collapse(true);pN=txt.parentNode;domUtils.remove(txt);if(domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)){domUtils.fillNode(this.document,pN)}}if(browser.gecko&&range.collapsed&&range.startContainer.nodeType==1){var child=range.startContainer.childNodes[range.startOffset];if(child&&child.nodeType==1&&child.tagName.toLowerCase()==style){range.setStart(child,0).collapse(true)}}range.select();return true},queryCommandValue:function(){var node=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return node?node.tagName.toLowerCase():""}}};(function(){var block=domUtils.isBlockElm,getObj=function(editor){return domUtils.filterNodeList(editor.selection.getStartElementPath(),function(n){return n&&n.nodeType==1&&n.getAttribute("dir")})},doDirectionality=function(range,editor,forward){var bookmark,filterFn=function(node){return node.nodeType==1?!domUtils.isBookmarkNode(node):!domUtils.isWhitespace(node)},obj=getObj(editor);if(obj&&range.collapsed){obj.setAttribute("dir",forward);return range}bookmark=range.createBookmark();range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode;while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){if(current.nodeType==3||!block(current)){tmpRange.setStartBefore(current);while(current&&current!==bookmark2.end&&!block(current)){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !block(node)})}tmpRange.setEndAfter(tmpNode);var common=tmpRange.getCommonAncestor();if(!domUtils.isBody(common)&&block(common)){common.setAttribute("dir",forward);current=common}else{var p=range.document.createElement("p");p.setAttribute("dir",forward);var frag=tmpRange.extractContents();p.appendChild(frag);tmpRange.insertNode(p);current=p}current=domUtils.getNextDomNode(current,false,filterFn)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)};UE.commands.directionality={execCommand:function(cmdName,forward){var range=this.selection.getRange();if(range.collapsed){var txt=this.document.createTextNode("d");range.insertNode(txt)}doDirectionality(range,this,forward);if(txt){range.setStartBefore(txt).collapse(true);domUtils.remove(txt)}range.select();return true},queryCommandValue:function(){var node=getObj(this);return node?node.getAttribute("dir"):"ltr"}}})();UE.plugins.horizontal=function(){var me=this;me.commands.horizontal={execCommand:function(cmdName){var me=this;if(me.queryCommandState(cmdName)!==-1){me.execCommand("insertHtml","<hr>");var range=me.selection.getRange(),start=range.startContainer;if(start.nodeType==1&&!start.childNodes[range.startOffset]){var tmp;if(tmp=start.childNodes[range.startOffset-1]){if(tmp.nodeType==1&&tmp.tagName=="HR"){if(me.options.enterTag=="p"){tmp=me.document.createElement("p");range.insertNode(tmp);range.setStart(tmp,0).setCursor()}else{tmp=me.document.createElement("br");range.insertNode(tmp);range.setStartBefore(tmp).setCursor()}}}}return true}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};me.addListener("delkeydown",function(name,evt){var rng=this.selection.getRange();rng.txtToElmBoundary(true);if(domUtils.isStartInblock(rng)){var tmpNode=rng.startContainer;var pre=tmpNode.previousSibling;if(pre&&domUtils.isTagNode(pre,"hr")){domUtils.remove(pre);rng.select();domUtils.preventDefault(evt);return true}}})};UE.commands.time=UE.commands.date={execCommand:function(cmd,format){var date=new Date;function formatTime(date,format){var hh=("0"+date.getHours()).slice(-2),ii=("0"+date.getMinutes()).slice(-2),ss=("0"+date.getSeconds()).slice(-2);format=format||"hh:ii:ss";return format.replace(/hh/ig,hh).replace(/ii/ig,ii).replace(/ss/ig,ss)}function formatDate(date,format){var yyyy=("000"+date.getFullYear()).slice(-4),yy=yyyy.slice(-2),mm=("0"+(date.getMonth()+1)).slice(-2),dd=("0"+date.getDate()).slice(-2);format=format||"yyyy-mm-dd";return format.replace(/yyyy/ig,yyyy).replace(/yy/ig,yy).replace(/mm/ig,mm).replace(/dd/ig,dd)}this.execCommand("insertHtml",cmd=="time"?formatTime(date,format):formatDate(date,format))}};UE.plugins.rowspacing=function(){var me=this;me.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});me.commands.rowspacing={execCommand:function(cmdName,value,dir){this.execCommand("paragraph","p",{style:"margin-"+dir+":"+value+"px"});return true},queryCommandValue:function(cmdName,dir){var pN=domUtils.filterNodeList(this.selection.getStartElementPath(),function(node){return domUtils.isBlockElm(node)}),value;if(pN){value=domUtils.getComputedStyle(pN,"margin-"+dir).replace(/[^\d]/g,"");return !value?0:value}return 0}}};UE.plugins.lineheight=function(){var me=this;me.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]});me.commands.lineheight={execCommand:function(cmdName,value){this.execCommand("paragraph","p",{style:"line-height:"+(value=="1"?"normal":value+"em")});return true},queryCommandValue:function(){var pN=domUtils.filterNodeList(this.selection.getStartElementPath(),function(node){return domUtils.isBlockElm(node)});if(pN){var value=domUtils.getComputedStyle(pN,"line-height");return value=="normal"?1:value.replace(/[^\d.]*/ig,"")}}}};UE.plugins.insertcode=function(){var me=this;me.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",me.document)});me.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"});me.commands.insertcode={execCommand:function(cmd,lang){var me=this,rng=me.selection.getRange(),pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){pre.className="brush:"+lang+";toolbar:false;"}else{var code="";if(rng.collapsed){code=browser.ie&&browser.ie11below?(browser.version<=8?"&nbsp;":""):"<br/>"}else{var frag=rng.extractContents();var div=me.document.createElement("div");div.appendChild(frag);utils.each(UE.filterNode(UE.htmlparser(div.innerHTML.replace(/[\r\t]/g,"")),me.options.filterTxtRules).children,function(node){if(browser.ie&&browser.ie11below&&browser.version>8){if(node.type=="element"){if(node.tagName=="br"){code+="\n"}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){code+="\n"}else{if(!dtd.$empty[node.tagName]){code+=cn.innerText()}}}else{code+=cn.data}});if(!/\n$/.test(code)){code+="\n"}}}}else{code+=node.data+"\n"}if(!node.nextSibling()&&/\n$/.test(code)){code=code.replace(/\n$/,"")}}else{if(browser.ie&&browser.ie11below){if(node.type=="element"){if(node.tagName=="br"){code+="<br>"}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){code+="<br>"}else{if(!dtd.$empty[node.tagName]){code+=cn.innerText()}}}else{code+=cn.data}});if(!/br>$/.test(code)){code+="<br>"}}}}else{code+=node.data+"<br>"}if(!node.nextSibling()&&/<br>$/.test(code)){code=code.replace(/<br>$/,"")}}else{code+=(node.type=="element"?(dtd.$empty[node.tagName]?"":node.innerText()):node.data);if(!/br\/?\s*>$/.test(code)){if(!node.nextSibling()){return}code+="<br>"}}}})}me.execCommand("inserthtml",'<pre id="coder"class="brush:'+lang+';toolbar:false">'+code+"</pre>",true);pre=me.document.getElementById("coder");domUtils.removeAttributes(pre,"id");var tmpNode=pre.previousSibling;if(tmpNode&&(tmpNode.nodeType==3&&tmpNode.nodeValue.length==1&&browser.ie&&browser.version==6||domUtils.isEmptyBlock(tmpNode))){domUtils.remove(tmpNode)}var rng=me.selection.getRange();if(domUtils.isEmptyBlock(pre)){rng.setStart(pre,0).setCursor(false,true)}else{rng.selectNodeContents(pre).select()}}},queryCommandValue:function(){var path=this.selection.getStartElementPath();var lang="";utils.each(path,function(node){if(node.nodeName=="PRE"){var match=node.className.match(/brush:([^;]+)/);lang=match&&match[1]?match[1]:"";return false}});return lang}};me.addInputRule(function(root){utils.each(root.getNodesByTagName("pre"),function(pre){var brs=pre.getNodesByTagName("br");if(brs.length){browser.ie&&browser.ie11below&&browser.version>8&&utils.each(brs,function(br){var txt=UE.uNode.createText("\n");br.parentNode.insertBefore(txt,br);br.parentNode.removeChild(br)});return}if(browser.ie&&browser.ie11below&&browser.version>8){return}var code=pre.innerText().split(/\n/);pre.innerHTML("");utils.each(code,function(c){if(c.length){pre.appendChild(UE.uNode.createText(c))}pre.appendChild(UE.uNode.createElement("br"))})})});me.addOutputRule(function(root){utils.each(root.getNodesByTagName("pre"),function(pre){var code="";utils.each(pre.children,function(n){if(n.type=="text"){code+=n.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,"")}else{if(n.tagName=="br"){code+="\n"}else{code+=(!dtd.$empty[n.tagName]?"":n.innerText())}}});pre.innerText(code.replace(/(&nbsp;|\n)+$/,""))})});me.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};var orgQuery=me.queryCommandState;me.queryCommandState=function(cmd){var me=this;if(!me.notNeedCodeQuery[cmd.toLowerCase()]&&me.selection&&me.queryCommandValue("insertcode")){return -1}return UE.Editor.prototype.queryCommandState.apply(this,arguments)};me.addListener("beforeenterkeydown",function(){var rng=me.selection.getRange();var pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){me.fireEvent("saveScene");if(!rng.collapsed){rng.deleteContents()}if(!browser.ie||browser.ie9above){var tmpNode=me.document.createElement("br"),pre;rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true);var next=tmpNode.nextSibling;if(!next&&(!browser.ie||browser.version>10)){rng.insertNode(tmpNode.cloneNode(false))}else{rng.setStartAfter(tmpNode)}pre=tmpNode.previousSibling;var tmp;while(pre){tmp=pre;pre=pre.previousSibling;if(!pre||pre.nodeName=="BR"){pre=tmp;break}}if(pre){var str="";while(pre&&pre.nodeName!="BR"&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(pre.nodeValue)){str+=pre.nodeValue;pre=pre.nextSibling}if(pre.nodeName!="BR"){var match=pre.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)"));if(match&&match[1]){str+=match[1]}}if(str){str=me.document.createTextNode(str);rng.insertNode(str).setStartAfter(str)}}rng.collapse(true).select(true)}else{if(browser.version>8){var txt=me.document.createTextNode("\n");var start=rng.startContainer;if(rng.startOffset==0){var preNode=start.previousSibling;if(preNode){rng.insertNode(txt);var fillchar=me.document.createTextNode(" ");rng.setStartAfter(txt).insertNode(fillchar).setStart(fillchar,0).collapse(true).select(true)}}else{rng.insertNode(txt).setStartAfter(txt);var fillchar=me.document.createTextNode(" ");start=rng.startContainer.childNodes[rng.startOffset];if(start&&!/^\n/.test(start.nodeValue)){rng.setStartBefore(txt)}rng.insertNode(fillchar).setStart(fillchar,0).collapse(true).select(true)}}else{var tmpNode=me.document.createElement("br");rng.insertNode(tmpNode);rng.insertNode(me.document.createTextNode(domUtils.fillChar));rng.setStartAfter(tmpNode);pre=tmpNode.previousSibling;var tmp;while(pre){tmp=pre;pre=pre.previousSibling;if(!pre||pre.nodeName=="BR"){pre=tmp;break}}if(pre){var str="";while(pre&&pre.nodeName!="BR"&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(pre.nodeValue)){str+=pre.nodeValue;pre=pre.nextSibling}if(pre.nodeName!="BR"){var match=pre.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)"));if(match&&match[1]){str+=match[1]}}str=me.document.createTextNode(str);rng.insertNode(str).setStartAfter(str)}rng.collapse(true).select()}}me.fireEvent("saveScene");return true}});me.addListener("tabkeydown",function(cmd,evt){var rng=me.selection.getRange();var pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){me.fireEvent("saveScene");if(evt.shiftKey){}else{if(!rng.collapsed){var bk=rng.createBookmark();var start=bk.start.previousSibling;while(start){if(pre.firstChild===start&&!domUtils.isBr(start)){pre.insertBefore(me.document.createTextNode("    "),start);break}if(domUtils.isBr(start)){pre.insertBefore(me.document.createTextNode("    "),start.nextSibling);break}start=start.previousSibling}var end=bk.end;start=bk.start.nextSibling;if(pre.firstChild===bk.start){pre.insertBefore(me.document.createTextNode("    "),start.nextSibling)}while(start&&start!==end){if(domUtils.isBr(start)&&start.nextSibling){if(start.nextSibling===end){break}pre.insertBefore(me.document.createTextNode("    "),start.nextSibling)}start=start.nextSibling}rng.moveToBookmark(bk).select()}else{var tmpNode=me.document.createTextNode("    ");rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true).select(true)}}me.fireEvent("saveScene");return true}});me.addListener("beforeinserthtml",function(evtName,html){var me=this,rng=me.selection.getRange(),pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){if(!rng.collapsed){rng.deleteContents()}var htmlstr="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(html),me.options.filterTxtRules).children,function(node){if(node.type=="element"){if(node.tagName=="br"){htmlstr+="\n"}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){htmlstr+="\n"}else{if(!dtd.$empty[node.tagName]){htmlstr+=cn.innerText()}}}else{htmlstr+=cn.data}});if(!/\n$/.test(htmlstr)){htmlstr+="\n"}}}}else{htmlstr+=node.data+"\n"}if(!node.nextSibling()&&/\n$/.test(htmlstr)){htmlstr=htmlstr.replace(/\n$/,"")}});var tmpNode=me.document.createTextNode(utils.html(htmlstr.replace(/&nbsp;/g," ")));rng.insertNode(tmpNode).selectNode(tmpNode).select()}else{var frag=me.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(html),me.options.filterTxtRules).children,function(node){if(node.type=="element"){if(node.tagName=="br"){frag.appendChild(me.document.createElement("br"))}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){frag.appendChild(me.document.createElement("br"))}else{if(!dtd.$empty[node.tagName]){frag.appendChild(me.document.createTextNode(utils.html(cn.innerText().replace(/&nbsp;/g," "))))}}}else{frag.appendChild(me.document.createTextNode(utils.html(cn.data.replace(/&nbsp;/g," "))))}});if(frag.lastChild.nodeName!="BR"){frag.appendChild(me.document.createElement("br"))}}}}else{frag.appendChild(me.document.createTextNode(utils.html(node.data.replace(/&nbsp;/g," "))))}if(!node.nextSibling()&&frag.lastChild.nodeName=="BR"){frag.removeChild(frag.lastChild)}});rng.insertNode(frag).select()}return true}});me.addListener("keydown",function(cmd,evt){var me=this,keyCode=evt.keyCode||evt.which;if(keyCode==40){var rng=me.selection.getRange(),pre,start=rng.startContainer;if(rng.collapsed&&(pre=domUtils.findParentByTagName(rng.startContainer,"pre",true))&&!pre.nextSibling){var last=pre.lastChild;while(last&&last.nodeName=="BR"){last=last.previousSibling}if(last===start||rng.startContainer===pre&&rng.startOffset==pre.childNodes.length){me.execCommand("insertparagraph");domUtils.preventDefault(evt)}}}});me.addListener("delkeydown",function(type,evt){var rng=this.selection.getRange();rng.txtToElmBoundary(true);var start=rng.startContainer;if(domUtils.isTagNode(start,"pre")&&rng.collapsed&&domUtils.isStartInblock(rng)){var p=me.document.createElement("p");domUtils.fillNode(me.document,p);start.parentNode.insertBefore(p,start);domUtils.remove(start);rng.setStart(p,0).setCursor(false,true);domUtils.preventDefault(evt);return true}})};UE.commands.cleardoc={execCommand:function(cmdName){var me=this,enterTag=me.options.enterTag,range=me.selection.getRange();if(enterTag=="br"){me.body.innerHTML="<br/>";range.setStart(me.body,0).setCursor()}else{me.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";range.setStart(me.body.firstChild,0).setCursor(false,true)}setTimeout(function(){me.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(a){var val;if(val=a.getAttr("anchorname")){a.tagName="a";a.setAttr({anchorname:"",name:val,"class":""})}})},inputRule:function(root){utils.each(root.getNodesByTagName("a"),function(a){var val;if((val=a.getAttr("name"))&&!a.getAttr("href")){a.tagName="img";a.setAttr({anchorname:a.getAttr("name"),"class":"anchorclass"});a.setAttr("name")}})},commands:{anchor:{execCommand:function(cmd,name){var range=this.selection.getRange(),img=range.getClosedNode();if(img&&img.getAttribute("anchorname")){if(name){img.setAttribute("anchorname",name)}else{range.setStartBefore(img).setCursor();domUtils.remove(img)}}else{if(name){var anchor=this.document.createElement("img");range.collapse(true);domUtils.setAttributes(anchor,{anchorname:name,"class":"anchorclass"});range.insertNode(anchor).setStartAfter(anchor).setCursor(false,true)}}}}}}});UE.plugins.wordcount=function(){var me=this;me.setOpt("wordCount",true);me.addListener("contentchange",function(){me.fireEvent("wordcount")});var timer;me.addListener("ready",function(){var me=this;domUtils.on(me.body,"keyup",function(evt){var code=evt.keyCode||evt.which,ignores={"16":1,"18":1,"20":1,"37":1,"38":1,"39":1,"40":1};if(code in ignores){return}clearTimeout(timer);timer=setTimeout(function(){me.fireEvent("wordcount")},200)})})};UE.plugins.pagebreak=function(){var me=this,notBreakTags=["td"];me.setOpt("pageBreakTag","_ueditor_page_break_tag_");function fillNode(node){if(domUtils.isEmptyBlock(node)){var firstChild=node.firstChild,tmpNode;while(firstChild&&firstChild.nodeType==1&&domUtils.isEmptyBlock(firstChild)){tmpNode=firstChild;firstChild=firstChild.firstChild}!tmpNode&&(tmpNode=node);domUtils.fillNode(me.document,tmpNode)}}me.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",me.document)});function isHr(node){return node&&node.nodeType==1&&node.tagName=="HR"&&node.className=="pagebreak"}me.addInputRule(function(root){root.traversal(function(node){if(node.type=="text"&&node.data==me.options.pageBreakTag){var hr=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');node.parentNode.insertBefore(hr,node);node.parentNode.removeChild(node)}})});me.addOutputRule(function(node){utils.each(node.getNodesByTagName("hr"),function(n){if(n.getAttr("class")=="pagebreak"){var txt=UE.uNode.createText(me.options.pageBreakTag);n.parentNode.insertBefore(txt,n);n.parentNode.removeChild(n)}})});me.commands.pagebreak={execCommand:function(){var range=me.selection.getRange(),hr=me.document.createElement("hr");domUtils.setAttributes(hr,{"class":"pagebreak",noshade:"noshade",size:"5"});domUtils.unSelectable(hr);var node=domUtils.findParentByTagName(range.startContainer,notBreakTags,true),parents=[],pN;if(node){switch(node.tagName){case"TD":pN=node.parentNode;if(!pN.previousSibling){var table=domUtils.findParentByTagName(pN,"table");table.parentNode.insertBefore(hr,table);parents=domUtils.findParents(hr,true)}else{pN.parentNode.insertBefore(hr,pN);parents=domUtils.findParents(hr)}pN=parents[1];if(hr!==pN){domUtils.breakParent(hr,pN)}me.fireEvent("afteradjusttable",me.document)}}else{if(!range.collapsed){range.deleteContents();var start=range.startContainer;while(!domUtils.isBody(start)&&domUtils.isBlockElm(start)&&domUtils.isEmptyNode(start)){range.setStartBefore(start).collapse(true);domUtils.remove(start);start=range.startContainer}}range.insertNode(hr);var pN=hr.parentNode,nextNode;while(!domUtils.isBody(pN)){domUtils.breakParent(hr,pN);nextNode=hr.nextSibling;if(nextNode&&domUtils.isEmptyBlock(nextNode)){domUtils.remove(nextNode)}pN=hr.parentNode}nextNode=hr.nextSibling;var pre=hr.previousSibling;if(isHr(pre)){domUtils.remove(pre)}else{pre&&fillNode(pre)}if(!nextNode){var p=me.document.createElement("p");hr.parentNode.appendChild(p);domUtils.fillNode(me.document,p);range.setStart(p,0).collapse(true)}else{if(isHr(nextNode)){domUtils.remove(nextNode)}else{fillNode(nextNode)}range.setEndAfter(hr).collapse(false)}range.select(true)}}}};UE.plugin.register("wordimage",function(){var me=this,images=[];return{commands:{wordimage:{execCommand:function(){var images=domUtils.getElementsByTagName(me.body,"img");var urlList=[];for(var i=0,ci;ci=images[i++];){var url=ci.getAttribute("word_img");url&&urlList.push(url)}return urlList},queryCommandState:function(){images=domUtils.getElementsByTagName(me.body,"img");for(var i=0,ci;ci=images[i++];){if(ci.getAttribute("word_img")){return 1}}return -1},notNeedUndo:true}},inputRule:function(root){utils.each(root.getNodesByTagName("img"),function(img){var attrs=img.attrs,flag=parseInt(attrs.width)<128||parseInt(attrs.height)<43,opt=me.options,src=opt.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";if(attrs.src&&/^(?:(file:\/+))/.test(attrs.src)){img.setAttr({width:attrs.width,height:attrs.height,alt:attrs.alt,word_img:attrs.src,src:src,style:"background:url("+(flag?opt.themePath+opt.theme+"/images/word.gif":opt.langPath+opt.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})}})}}});UE.plugins.dragdrop=function(){var me=this;me.ready(function(){domUtils.on(this.body,"dragend",function(){var rng=me.selection.getRange();var node=rng.getClosedNode()||me.selection.getStart();if(node&&node.tagName=="IMG"){var pre=node.previousSibling,next;while(next=node.nextSibling){if(next.nodeType==1&&next.tagName=="SPAN"&&!next.firstChild){domUtils.remove(next)}else{break}}if((pre&&pre.nodeType==1&&!domUtils.isEmptyBlock(pre)||!pre)&&(!next||next&&!domUtils.isEmptyBlock(next))){if(pre&&pre.tagName=="P"&&!domUtils.isEmptyBlock(pre)){pre.appendChild(node);domUtils.moveChild(next,pre);domUtils.remove(next)}else{if(next&&next.tagName=="P"&&!domUtils.isEmptyBlock(next)){next.insertBefore(node,next.firstChild)}}if(pre&&pre.tagName=="P"&&domUtils.isEmptyBlock(pre)){domUtils.remove(pre)}if(next&&next.tagName=="P"&&domUtils.isEmptyBlock(next)){domUtils.remove(next)}rng.selectNode(node).select();me.fireEvent("saveScene")}}})});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){var rng=me.selection.getRange(),node;if(node=domUtils.findParentByTagName(rng.startContainer,"p",true)){if(domUtils.getComputedStyle(node,"text-align")=="center"){domUtils.removeStyle(node,"text-align")}}}})};UE.plugins.undo=function(){var saveSceneTimer;var me=this,maxUndoCount=me.options.maxUndoCount||20,maxInputCount=me.options.maxInputCount||20,fillchar=new RegExp(domUtils.fillChar+"|</hr>","gi");var noNeedFillCharTags={ol:1,ul:1,table:1,tbody:1,tr:1,body:1};var orgState=me.options.autoClearEmptyNode;function compareAddr(indexA,indexB){if(indexA.length!=indexB.length){return 0}for(var i=0,l=indexA.length;i<l;i++){if(indexA[i]!=indexB[i]){return 0}}return 1}function compareRangeAddress(rngAddrA,rngAddrB){if(rngAddrA.collapsed!=rngAddrB.collapsed){return 0}if(!compareAddr(rngAddrA.startAddress,rngAddrB.startAddress)||!compareAddr(rngAddrA.endAddress,rngAddrB.endAddress)){return 0}return 1}function UndoManager(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0){return this.restore(0)}}this.restore(--this.index)}};this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1){return this.restore(this.index)}}this.restore(++this.index)}};this.restore=function(){var me=this.editor;var scene=this.list[this.index];var root=UE.htmlparser(scene.content.replace(fillchar,""));me.options.autoClearEmptyNode=false;me.filterInputRule(root);me.options.autoClearEmptyNode=orgState;me.document.body.innerHTML=root.toHtml();me.fireEvent("afterscencerestore");if(browser.ie){utils.each(domUtils.getElementsByTagName(me.document,"td th caption p"),function(node){if(domUtils.isEmptyNode(node)){domUtils.fillNode(me.document,node)}})}try{var rng=new dom.Range(me.document).moveToAddress(scene.address);rng.select(noNeedFillCharTags[rng.startContainer.nodeName.toLowerCase()])}catch(e){}this.update();this.clearKey();me.fireEvent("reset",true)};this.getScene=function(){var me=this.editor;var rng=me.selection.getRange(),rngAddress=rng.createAddress(false,true);me.fireEvent("beforegetscene");var root=UE.htmlparser(me.body.innerHTML);me.options.autoClearEmptyNode=false;me.filterOutputRule(root);me.options.autoClearEmptyNode=orgState;var cont=root.toHtml();me.fireEvent("aftergetscene");return{address:rngAddress,content:cont}};this.save=function(notCompareRange,notSetCursor){clearTimeout(saveSceneTimer);var currentScene=this.getScene(notSetCursor),lastScene=this.list[this.index];if(lastScene&&lastScene.content!=currentScene.content){me.trigger("contentchange")}if(lastScene&&lastScene.content==currentScene.content&&(notCompareRange?1:compareRangeAddress(lastScene.address,currentScene.address))){return}this.list=this.list.slice(0,this.index+1);this.list.push(currentScene);if(this.list.length>maxUndoCount){this.list.shift()}this.index=this.list.length-1;this.clearKey();this.update()};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.clearKey()};this.clearKey=function(){keycont=0;lastKeyCode=null}}me.undoManger=new UndoManager();me.undoManger.editor=me;function saveScene(){this.undoManger.save()}me.addListener("saveScene",function(){var args=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,args)});me.addListener("reset",function(type,exclude){if(!exclude){this.undoManger.reset()}});me.commands.redo=me.commands.undo={execCommand:function(cmdName){this.undoManger[cmdName]()},queryCommandState:function(cmdName){return this.undoManger["has"+(cmdName.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var keys={16:1,17:1,18:1,37:1,38:1,39:1,40:1},keycont=0,lastKeyCode;var inputType=false;me.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){inputType=true});domUtils.on(this.body,"compositionend",function(){inputType=false})});me.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var isCollapsed=true;me.addListener("keydown",function(type,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(!keys[keyCode]&&!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){if(inputType){return}if(!me.selection.getRange().collapsed){me.undoManger.save(false,true);isCollapsed=false;return}if(me.undoManger.list.length==0){me.undoManger.save(true)}clearTimeout(saveSceneTimer);function save(cont){cont.undoManger.save(false,true);cont.fireEvent("selectionchange")}saveSceneTimer=setTimeout(function(){if(inputType){var interalTimer=setInterval(function(){if(!inputType){save(me);clearInterval(interalTimer)}},300);return}save(me)},200);lastKeyCode=keyCode;keycont++;if(keycont>=maxInputCount){save(me)}}});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(!keys[keyCode]&&!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){if(inputType){return}if(!isCollapsed){this.undoManger.save(false,true);isCollapsed=true}}});me.stopCmdUndo=function(){me.__hasEnterExecCommand=true};me.startCmdUndo=function(){me.__hasEnterExecCommand=false}};UE.plugin.register("copy",function(){var me=this;function initZeroClipboard(){ZeroClipboard.config({debug:false,swfPath:me.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var client=me.zeroclipboard=new ZeroClipboard();client.on("copy",function(e){var client=e.client,rng=me.selection.getRange(),div=document.createElement("div");div.appendChild(rng.cloneContents());client.setText(div.innerText||div.textContent);client.setHtml(div.innerHTML);rng.select()});client.on("mouseover mouseout",function(e){var target=e.target;if(e.type=="mouseover"){domUtils.addClass(target,"edui-state-hover")}else{if(e.type=="mouseout"){domUtils.removeClasses(target,"edui-state-hover")}}});client.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}return{bindEvents:{ready:function(){if(!browser.ie){if(window.ZeroClipboard){initZeroClipboard()}else{utils.loadFile(document,{src:me.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){initZeroClipboard()})}}}},commands:{copy:{execCommand:function(cmd){if(!me.document.execCommand("copy")){alert(me.getLang("copymsg"))}}}}}});UE.plugins.paste=function(){function getClipboardData(callback){var doc=this.document;if(doc.getElementById("baidu_pastebin")){return}var range=this.selection.getRange(),bk=range.createBookmark(),pastebin=doc.createElement("div");pastebin.id="baidu_pastebin";browser.webkit&&pastebin.appendChild(doc.createTextNode(domUtils.fillChar+domUtils.fillChar));doc.body.appendChild(pastebin);bk.start.style.display="";pastebin.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(bk.start).y+"px";range.selectNodeContents(pastebin).select(true);setTimeout(function(){if(browser.webkit){for(var i=0,pastebins=doc.querySelectorAll("#baidu_pastebin"),pi;pi=pastebins[i++];){if(domUtils.isEmptyNode(pi)){domUtils.remove(pi)}else{pastebin=pi;break}}}try{pastebin.parentNode.removeChild(pastebin)}catch(e){}range.moveToBookmark(bk).select(true);callback(pastebin)},0)}var me=this;me.setOpt({retainOnlyLabelPasted:false});var txtContent,htmlContent,address;function getPureHtml(html){return html.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(a,b,tagName,attrs){tagName=tagName.toLowerCase();if({img:1}[tagName]){return a}attrs=attrs.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(str,atr,val){if({src:1,href:1,name:1}[atr.toLowerCase()]){return atr+"="+val+" "}return""});if({span:1,div:1}[tagName]){return""}else{return"<"+b+tagName+" "+utils.trim(attrs)+">"}})}function filter(div){var html;if(div.firstChild){var nodes=domUtils.getElementsByTagName(div,"span");for(var i=0,ni;ni=nodes[i++];){if(ni.id=="_baidu_cut_start"||ni.id=="_baidu_cut_end"){domUtils.remove(ni)}}if(browser.webkit){var brs=div.querySelectorAll("div br");for(var i=0,bi;bi=brs[i++];){var pN=bi.parentNode;if(pN.tagName=="DIV"&&pN.childNodes.length==1){pN.innerHTML="<p><br/></p>";domUtils.remove(pN)}}var divs=div.querySelectorAll("#baidu_pastebin");for(var i=0,di;di=divs[i++];){var tmpP=me.document.createElement("p");di.parentNode.insertBefore(tmpP,di);while(di.firstChild){tmpP.appendChild(di.firstChild)}domUtils.remove(di)}var metas=div.querySelectorAll("meta");for(var i=0,ci;ci=metas[i++];){domUtils.remove(ci)}var brs=div.querySelectorAll("br");for(i=0;ci=brs[i++];){if(/^apple-/i.test(ci.className)){domUtils.remove(ci)}}}if(browser.gecko){var dirtyNodes=div.querySelectorAll("[_moz_dirty]");for(i=0;ci=dirtyNodes[i++];){ci.removeAttribute("_moz_dirty")}}if(!browser.ie){var spans=div.querySelectorAll("span.Apple-style-span");for(var i=0,ci;ci=spans[i++];){domUtils.remove(ci,true)}}html=div.innerHTML;html=UE.filterWord(html);var root=UE.htmlparser(html);if(me.options.filterRules){UE.filterNode(root,me.options.filterRules)}me.filterInputRule(root);if(browser.webkit){var br=root.lastChild();if(br&&br.type=="element"&&br.tagName=="br"){root.removeChild(br)}utils.each(me.body.querySelectorAll("div"),function(node){if(domUtils.isEmptyBlock(node)){domUtils.remove(node,true)}})}html={html:root.toHtml()};me.fireEvent("beforepaste",html,root);if(!html.html){return}root=UE.htmlparser(html.html,true);if(me.queryCommandState("pasteplain")===1){me.execCommand("insertHtml",UE.filterNode(root,me.options.filterTxtRules).toHtml(),true)}else{UE.filterNode(root,me.options.filterTxtRules);txtContent=root.toHtml();htmlContent=html.html;address=me.selection.getRange().createAddress(true);me.execCommand("insertHtml",me.getOpt("retainOnlyLabelPasted")===true?getPureHtml(htmlContent):htmlContent,true)}me.fireEvent("afterpaste",html)}}me.addListener("pasteTransfer",function(cmd,plainType){if(address&&txtContent&&htmlContent&&txtContent!=htmlContent){var range=me.selection.getRange();range.moveToAddress(address,true);if(!range.collapsed){while(!domUtils.isBody(range.startContainer)){var start=range.startContainer;if(start.nodeType==1){start=start.childNodes[range.startOffset];if(!start){range.setStartBefore(range.startContainer);continue}var pre=start.previousSibling;if(pre&&pre.nodeType==3&&new RegExp("^[\n\r\t "+domUtils.fillChar+"]*$").test(pre.nodeValue)){range.setStartBefore(pre)}}if(range.startOffset==0){range.setStartBefore(range.startContainer)}else{break}}while(!domUtils.isBody(range.endContainer)){var end=range.endContainer;if(end.nodeType==1){end=end.childNodes[range.endOffset];if(!end){range.setEndAfter(range.endContainer);continue}var next=end.nextSibling;if(next&&next.nodeType==3&&new RegExp("^[\n\r\t"+domUtils.fillChar+"]*$").test(next.nodeValue)){range.setEndAfter(next)}}if(range.endOffset==range.endContainer[range.endContainer.nodeType==3?"nodeValue":"childNodes"].length){range.setEndAfter(range.endContainer)}else{break}}}range.deleteContents();range.select(true);me.__hasEnterExecCommand=true;var html=htmlContent;if(plainType===2){html=getPureHtml(html)}else{if(plainType){html=txtContent}}me.execCommand("inserthtml",html,true);me.__hasEnterExecCommand=false;var rng=me.selection.getRange();while(!domUtils.isBody(rng.startContainer)&&!rng.startOffset&&rng.startContainer[rng.startContainer.nodeType==3?"nodeValue":"childNodes"].length){rng.setStartBefore(rng.startContainer)}var tmpAddress=rng.createAddress(true);address.endAddress=tmpAddress.startAddress}});me.addListener("ready",function(){domUtils.on(me.body,"cut",function(){var range=me.selection.getRange();if(!range.collapsed&&me.undoManger){me.undoManger.save()}});domUtils.on(me.body,browser.ie||browser.opera?"keydown":"paste",function(e){if((browser.ie||browser.opera)&&((!e.ctrlKey&&!e.metaKey)||e.keyCode!="86")){return}getClipboardData.call(me,function(div){filter(div)})})});me.commands.paste={execCommand:function(cmd){if(browser.ie){getClipboardData.call(me,function(div){filter(div)});me.document.execCommand("paste")}else{alert(me.getLang("pastemsg"))}}}};UE.plugins.pasteplain=function(){var me=this;me.setOpt({pasteplain:false,filterTxtRules:function(){function transP(node){node.tagName="p";node.setStyle()}function removeNode(node){node.parentNode.removeChild(node,true)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(node){var tmpNode,p=UE.uNode.createElement("p");while(tmpNode=node.firstChild()){if(tmpNode.type=="text"||!UE.dom.dtd.$block[tmpNode.tagName]){p.appendChild(tmpNode)}else{if(p.firstChild()){node.parentNode.insertBefore(p,node);p=UE.uNode.createElement("p")}else{node.parentNode.insertBefore(tmpNode,node)}}}if(p.firstChild()){node.parentNode.insertBefore(p,node)}node.parentNode.removeChild(node)},ol:removeNode,ul:removeNode,dl:removeNode,dt:removeNode,dd:removeNode,li:removeNode,caption:transP,th:transP,tr:transP,h1:transP,h2:transP,h3:transP,h4:transP,h5:transP,h6:transP,td:function(node){var txt=!!node.innerText();if(txt){node.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),node)}node.parentNode.removeChild(node,node.innerText())}}}()});var pasteplain=me.options.pasteplain;me.commands.pasteplain={queryCommandState:function(){return pasteplain?1:0},execCommand:function(){pasteplain=!pasteplain|0},notNeedUndo:1}};UE.plugins.list=function(){var me=this,notExchange={TD:1,PRE:1,BLOCKQUOTE:1};var customStyle={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};me.setOpt({autoTransWordToList:false,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:false});function listToArray(list){var arr=[];for(var p in list){arr.push(p)}return arr}var listStyle={OL:listToArray(me.options.insertorderedlist),UL:listToArray(me.options.insertunorderedlist)};var liiconpath=me.options.listiconpath;for(var s in customStyle){if(!me.options.insertorderedlist.hasOwnProperty(s)&&!me.options.insertunorderedlist.hasOwnProperty(s)){delete customStyle[s]}}me.ready(function(){var customCss=[];for(var p in customStyle){if(p=="dash"||p=="dot"){customCss.push("li.list-"+customStyle[p]+"{background-image:url("+liiconpath+customStyle[p]+".gif)}");customCss.push("ul.custom_"+p+"{list-style:none;}ul.custom_"+p+" li{background-position:0 3px;background-repeat:no-repeat}")}else{for(var i=0;i<99;i++){customCss.push("li.list-"+customStyle[p]+i+"{background-image:url("+liiconpath+"list-"+customStyle[p]+i+".gif)}")}customCss.push("ol.custom_"+p+"{list-style:none;}ol.custom_"+p+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(p){case"cn":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:25px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:40px}");customCss.push("li.list-"+p+"-paddingleft-3{padding-left:55px}");break;case"cn1":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:30px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:40px}");customCss.push("li.list-"+p+"-paddingleft-3{padding-left:55px}");break;case"cn2":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:40px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:55px}");customCss.push("li.list-"+p+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:25px}");break;case"num2":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:35px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:40px}");break;case"dash":customCss.push("li.list-"+p+"-paddingleft{padding-left:35px}");break;case"dot":customCss.push("li.list-"+p+"-paddingleft{padding-left:20px}")}}customCss.push(".list-paddingleft-1{padding-left:0}");customCss.push(".list-paddingleft-2{padding-left:"+me.options.listDefaultPaddingLeft+"px}");customCss.push(".list-paddingleft-3{padding-left:"+me.options.listDefaultPaddingLeft*2+"px}");utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+customCss.join("\n"),me.document)});me.ready(function(){domUtils.on(me.body,"cut",function(){setTimeout(function(){var rng=me.selection.getRange(),li;if(!rng.collapsed){if(li=domUtils.findParentByTagName(rng.startContainer,"li",true)){if(!li.nextSibling&&domUtils.isEmptyBlock(li)){var pn=li.parentNode,node;if(node=pn.previousSibling){domUtils.remove(pn);rng.setStartAtLast(node).collapse(true);rng.select(true)}else{if(node=pn.nextSibling){domUtils.remove(pn);rng.setStartAtFirst(node).collapse(true);rng.select(true)}else{var tmpNode=me.document.createElement("p");domUtils.fillNode(me.document,tmpNode);pn.parentNode.insertBefore(tmpNode,pn);domUtils.remove(pn);rng.setStart(tmpNode,0).collapse(true);rng.select(true)}}}}}})})});function getStyle(node){var cls=node.className;if(domUtils.hasClass(node,/custom_/)){return cls.match(/custom_(\w+)/)[1]}return domUtils.getStyle(node,"list-style-type")}me.addListener("beforepaste",function(type,html){var me=this,rng=me.selection.getRange(),li;var root=UE.htmlparser(html.html,true);if(li=domUtils.findParentByTagName(rng.startContainer,"li",true)){var list=li.parentNode,tagName=list.tagName=="OL"?"ul":"ol";utils.each(root.getNodesByTagName(tagName),function(n){n.tagName=list.tagName;n.setAttr();if(n.parentNode===root){type=getStyle(list)||(list.tagName=="OL"?"decimal":"disc")}else{var className=n.parentNode.getAttr("class");if(className&&/custom_/.test(className)){type=className.match(/custom_(\w+)/)[1]}else{type=n.parentNode.getStyle("list-style-type")}if(!type){type=list.tagName=="OL"?"decimal":"disc"}}var index=utils.indexOf(listStyle[list.tagName],type);if(n.parentNode!==root){index=index+1==listStyle[list.tagName].length?0:index+1}var currentStyle=listStyle[list.tagName][index];if(customStyle[currentStyle]){n.setAttr("class","custom_"+currentStyle)}else{n.setStyle("list-style-type",currentStyle)}})}html.html=root.toHtml()});me.getOpt("disablePInList")===true&&me.addOutputRule(function(root){utils.each(root.getNodesByTagName("li"),function(li){var newChildrens=[],index=0;utils.each(li.children,function(n){if(n.tagName=="p"){var tmpNode;while(tmpNode=n.children.pop()){newChildrens.splice(index,0,tmpNode);tmpNode.parentNode=li;lastNode=tmpNode}tmpNode=newChildrens[newChildrens.length-1];if(!tmpNode||tmpNode.type!="element"||tmpNode.tagName!="br"){var br=UE.uNode.createElement("br");br.parentNode=li;newChildrens.push(br)}index=newChildrens.length}});if(newChildrens.length){li.children=newChildrens}})});me.addInputRule(function(root){utils.each(root.getNodesByTagName("li"),function(li){var tmpP=UE.uNode.createElement("p");for(var i=0,ci;ci=li.children[i];){if(ci.type=="text"||dtd.p[ci.tagName]){tmpP.appendChild(ci)}else{if(tmpP.firstChild()){li.insertBefore(tmpP,ci);tmpP=UE.uNode.createElement("p");i=i+2}else{i++}}}if(tmpP.firstChild()&&!tmpP.parentNode||!li.firstChild()){li.appendChild(tmpP)}if(!tmpP.firstChild()){tmpP.innerHTML(browser.ie?"&nbsp;":"<br/>")}var p=li.firstChild();var lastChild=p.lastChild();if(lastChild&&lastChild.type=="text"&&/^\s*$/.test(lastChild.data)){p.removeChild(lastChild)}});if(me.options.autoTransWordToList){var orderlisttype={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},unorderlisttype={square:"n"};function checkListType(content,container){var span=container.firstChild();if(span&&span.type=="element"&&span.tagName=="span"&&/Wingdings|Symbol/.test(span.getStyle("font-family"))){for(var p in unorderlisttype){if(unorderlisttype[p]==span.data){return p}}return"disc"}for(var p in orderlisttype){if(orderlisttype[p].test(content)){return p}}}utils.each(root.getNodesByTagName("p"),function(node){if(node.getAttr("class")!="MsoListParagraph"){return}node.setStyle("margin","");node.setStyle("margin-left","");node.setAttr("class","");function appendLi(list,p,type){if(list.tagName=="ol"){if(browser.ie){var first=p.firstChild();if(first.type=="element"&&first.tagName=="span"&&orderlisttype[type].test(first.innerText())){p.removeChild(first)}}else{p.innerHTML(p.innerHTML().replace(orderlisttype[type],""))}}else{p.removeChild(p.firstChild())}var li=UE.uNode.createElement("li");li.appendChild(p);list.appendChild(li)}var tmp=node,type,cacheNode=node;if(node.parentNode.tagName!="li"&&(type=checkListType(node.innerText(),node))){var list=UE.uNode.createElement(me.options.insertorderedlist.hasOwnProperty(type)?"ol":"ul");if(customStyle[type]){list.setAttr("class","custom_"+type)}else{list.setStyle("list-style-type",type)}while(node&&node.parentNode.tagName!="li"&&checkListType(node.innerText(),node)){tmp=node.nextSibling();if(!tmp){node.parentNode.insertBefore(list,node)}appendLi(list,node,type);node=tmp}if(!list.parentNode&&node&&node.parentNode){node.parentNode.insertBefore(list,node)}}var span=cacheNode.firstChild();if(span&&span.type=="element"&&span.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(span.innerText())){span.parentNode.removeChild(span)}})}});me.addListener("contentchange",function(){adjustListStyle(me.document)});function adjustListStyle(doc,ignore){utils.each(domUtils.getElementsByTagName(doc,"ol ul"),function(node){if(!domUtils.inDoc(node,doc)){return}var parent=node.parentNode;if(parent.tagName==node.tagName){var nodeStyleType=getStyle(node)||(node.tagName=="OL"?"decimal":"disc"),parentStyleType=getStyle(parent)||(parent.tagName=="OL"?"decimal":"disc");if(nodeStyleType==parentStyleType){var styleIndex=utils.indexOf(listStyle[node.tagName],nodeStyleType);styleIndex=styleIndex+1==listStyle[node.tagName].length?0:styleIndex+1;setListStyle(node,listStyle[node.tagName][styleIndex])}}var index=0,type=2;if(domUtils.hasClass(node,/custom_/)){if(!(/[ou]l/i.test(parent.tagName)&&domUtils.hasClass(parent,/custom_/))){type=1}}else{if(/[ou]l/i.test(parent.tagName)&&domUtils.hasClass(parent,/custom_/)){type=3}}var style=domUtils.getStyle(node,"list-style-type");style&&(node.style.cssText="list-style-type:"+style);node.className=utils.trim(node.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+type;utils.each(domUtils.getElementsByTagName(node,"li"),function(li){li.style.cssText&&(li.style.cssText="");if(!li.firstChild){domUtils.remove(li);return}if(li.parentNode!==node){return}index++;if(domUtils.hasClass(node,/custom_/)){var paddingLeft=1,currentStyle=getStyle(node);if(node.tagName=="OL"){if(currentStyle){switch(currentStyle){case"cn":case"cn1":case"cn2":if(index>10&&(index%10==0||index>10&&index<20)){paddingLeft=2}else{if(index>20){paddingLeft=3}}break;case"num2":if(index>9){paddingLeft=2}}}li.className="list-"+customStyle[currentStyle]+index+" list-"+currentStyle+"-paddingleft-"+paddingLeft}else{li.className="list-"+customStyle[currentStyle]+" list-"+currentStyle+"-paddingleft"}}else{li.className=li.className.replace(/list-[\w\-]+/gi,"")}var className=li.getAttribute("class");if(className!==null&&!className.replace(/\s/g,"")){domUtils.removeAttributes(li,"class")}});!ignore&&adjustList(node,node.tagName.toLowerCase(),getStyle(node)||domUtils.getStyle(node,"list-style-type"),true)})}function adjustList(list,tag,style,ignoreEmpty){var nextList=list.nextSibling;if(nextList&&nextList.nodeType==1&&nextList.tagName.toLowerCase()==tag&&(getStyle(nextList)||domUtils.getStyle(nextList,"list-style-type")||(tag=="ol"?"decimal":"disc"))==style){domUtils.moveChild(nextList,list);if(nextList.childNodes.length==0){domUtils.remove(nextList)}}if(nextList&&domUtils.isFillChar(nextList)){domUtils.remove(nextList)}var preList=list.previousSibling;if(preList&&preList.nodeType==1&&preList.tagName.toLowerCase()==tag&&(getStyle(preList)||domUtils.getStyle(preList,"list-style-type")||(tag=="ol"?"decimal":"disc"))==style){domUtils.moveChild(list,preList)}if(preList&&domUtils.isFillChar(preList)){domUtils.remove(preList)}!ignoreEmpty&&domUtils.isEmptyBlock(list)&&domUtils.remove(list);if(getStyle(list)){adjustListStyle(list.ownerDocument,true)}}function setListStyle(list,style){if(customStyle[style]){list.className="custom_"+style}try{domUtils.setStyle(list,"list-style-type",style)}catch(e){}}function clearEmptySibling(node){var tmpNode=node.previousSibling;if(tmpNode&&domUtils.isEmptyBlock(tmpNode)){domUtils.remove(tmpNode)}tmpNode=node.nextSibling;if(tmpNode&&domUtils.isEmptyBlock(tmpNode)){domUtils.remove(tmpNode)}}me.addListener("keydown",function(type,evt){function preventAndSave(){evt.preventDefault?evt.preventDefault():(evt.returnValue=false);me.fireEvent("contentchange");me.undoManger&&me.undoManger.save()}function findList(node,filterFn){while(node&&!domUtils.isBody(node)){if(filterFn(node)){return null}if(node.nodeType==1&&/[ou]l/i.test(node.tagName)){return node}node=node.parentNode}return null}var keyCode=evt.keyCode||evt.which;if(keyCode==13&&!evt.shiftKey){var rng=me.selection.getRange(),parent=domUtils.findParent(rng.startContainer,function(node){return domUtils.isBlockElm(node)},true),li=domUtils.findParentByTagName(rng.startContainer,"li",true);if(parent&&parent.tagName!="PRE"&&!li){var html=parent.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");if(/^\s*1\s*\.[^\d]/.test(html)){parent.innerHTML=html.replace(/^\s*1\s*\./,"");rng.setStartAtLast(parent).collapse(true).select();me.__hasEnterExecCommand=true;me.execCommand("insertorderedlist");me.__hasEnterExecCommand=false}}var range=me.selection.getRange(),start=findList(range.startContainer,function(node){return node.tagName=="TABLE"}),end=range.collapsed?start:findList(range.endContainer,function(node){return node.tagName=="TABLE"});if(start&&end&&start===end){if(!range.collapsed){start=domUtils.findParentByTagName(range.startContainer,"li",true);end=domUtils.findParentByTagName(range.endContainer,"li",true);if(start&&end&&start===end){range.deleteContents();li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li&&domUtils.isEmptyBlock(li)){pre=li.previousSibling;next=li.nextSibling;p=me.document.createElement("p");domUtils.fillNode(me.document,p);parentList=li.parentNode;if(pre&&next){range.setStart(next,0).collapse(true).select(true);domUtils.remove(li)}else{if(!pre&&!next||!pre){parentList.parentNode.insertBefore(p,parentList)}else{li.parentNode.parentNode.insertBefore(p,parentList.nextSibling)}domUtils.remove(li);if(!parentList.firstChild){domUtils.remove(parentList)}range.setStart(p,0).setCursor()}preventAndSave();return}}else{var tmpRange=range.cloneRange(),bk=tmpRange.collapse(false).createBookmark();range.deleteContents();tmpRange.moveToBookmark(bk);var li=domUtils.findParentByTagName(tmpRange.startContainer,"li",true);clearEmptySibling(li);tmpRange.select();preventAndSave();return}}li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li){if(domUtils.isEmptyBlock(li)){bk=range.createBookmark();var parentList=li.parentNode;if(li!==parentList.lastChild){domUtils.breakParent(li,parentList);clearEmptySibling(li)}else{parentList.parentNode.insertBefore(li,parentList.nextSibling);if(domUtils.isEmptyNode(parentList)){domUtils.remove(parentList)}}if(!dtd.$list[li.parentNode.tagName]){if(!domUtils.isBlockElm(li.firstChild)){p=me.document.createElement("p");li.parentNode.insertBefore(p,li);while(li.firstChild){p.appendChild(li.firstChild)}domUtils.remove(li)}else{domUtils.remove(li,true)}}range.moveToBookmark(bk).select()}else{var first=li.firstChild;if(!first||!domUtils.isBlockElm(first)){var p=me.document.createElement("p");!li.firstChild&&domUtils.fillNode(me.document,p);while(li.firstChild){p.appendChild(li.firstChild)}li.appendChild(p);first=p}var span=me.document.createElement("span");range.insertNode(span);domUtils.breakParent(span,li);var nextLi=span.nextSibling;first=nextLi.firstChild;if(!first){p=me.document.createElement("p");domUtils.fillNode(me.document,p);nextLi.appendChild(p);first=p}if(domUtils.isEmptyNode(first)){first.innerHTML="";domUtils.fillNode(me.document,first)}range.setStart(first,0).collapse(true).shrinkBoundary().select();domUtils.remove(span);var pre=nextLi.previousSibling;if(pre&&domUtils.isEmptyBlock(pre)){pre.innerHTML="<p></p>";domUtils.fillNode(me.document,pre.firstChild)}}preventAndSave()}}}if(keyCode==8){range=me.selection.getRange();if(range.collapsed&&domUtils.isStartInblock(range)){tmpRange=range.cloneRange().trimBoundary();li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li&&domUtils.isStartInblock(tmpRange)){start=domUtils.findParentByTagName(range.startContainer,"p",true);if(start&&start!==li.firstChild){var parentList=domUtils.findParentByTagName(start,["ol","ul"]);domUtils.breakParent(start,parentList);clearEmptySibling(start);me.fireEvent("contentchange");range.setStart(start,0).setCursor(false,true);me.fireEvent("saveScene");domUtils.preventDefault(evt);return}if(li&&(pre=li.previousSibling)){if(keyCode==46&&li.childNodes.length){return}if(dtd.$list[pre.tagName]){pre=pre.lastChild}me.undoManger&&me.undoManger.save();first=li.firstChild;if(domUtils.isBlockElm(first)){if(domUtils.isEmptyNode(first)){pre.appendChild(first);range.setStart(first,0).setCursor(false,true);while(li.firstChild){pre.appendChild(li.firstChild)}}else{span=me.document.createElement("span");range.insertNode(span);if(domUtils.isEmptyBlock(pre)){pre.innerHTML=""}domUtils.moveChild(li,pre);range.setStartBefore(span).collapse(true).select(true);domUtils.remove(span)}}else{if(domUtils.isEmptyNode(li)){var p=me.document.createElement("p");pre.appendChild(p);range.setStart(p,0).setCursor()}else{range.setEnd(pre,pre.childNodes.length).collapse().select(true);while(li.firstChild){pre.appendChild(li.firstChild)}}}domUtils.remove(li);me.fireEvent("contentchange");me.fireEvent("saveScene");domUtils.preventDefault(evt);return}if(li&&!li.previousSibling){var parentList=li.parentNode;var bk=range.createBookmark();if(domUtils.isTagNode(parentList.parentNode,"ol ul")){parentList.parentNode.insertBefore(li,parentList);if(domUtils.isEmptyNode(parentList)){domUtils.remove(parentList)}}else{while(li.firstChild){parentList.parentNode.insertBefore(li.firstChild,parentList)}domUtils.remove(li);if(domUtils.isEmptyNode(parentList)){domUtils.remove(parentList)}}range.moveToBookmark(bk).setCursor(false,true);me.fireEvent("contentchange");me.fireEvent("saveScene");domUtils.preventDefault(evt);return}}}}});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==8){var rng=me.selection.getRange(),list;if(list=domUtils.findParentByTagName(rng.startContainer,["ol","ul"],true)){adjustList(list,list.tagName.toLowerCase(),getStyle(list)||domUtils.getComputedStyle(list,"list-style-type"),true)}}});me.addListener("tabkeydown",function(){var range=me.selection.getRange();function checkLevel(li){if(me.options.maxListLevel!=-1){var level=li.parentNode,levelNum=0;while(/[ou]l/i.test(level.tagName)){levelNum++;level=level.parentNode}if(levelNum>=me.options.maxListLevel){return true}}}var li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li){var bk;if(range.collapsed){if(checkLevel(li)){return true}var parentLi=li.parentNode,list=me.document.createElement(parentLi.tagName),index=utils.indexOf(listStyle[list.tagName],getStyle(parentLi)||domUtils.getComputedStyle(parentLi,"list-style-type"));index=index+1==listStyle[list.tagName].length?0:index+1;var currentStyle=listStyle[list.tagName][index];setListStyle(list,currentStyle);if(domUtils.isStartInblock(range)){me.fireEvent("saveScene");bk=range.createBookmark();parentLi.insertBefore(list,li);list.appendChild(li);adjustList(list,list.tagName.toLowerCase(),currentStyle);me.fireEvent("contentchange");range.moveToBookmark(bk).select(true);return true}}else{me.fireEvent("saveScene");bk=range.createBookmark();for(var i=0,closeList,parents=domUtils.findParents(li),ci;ci=parents[i++];){if(domUtils.isTagNode(ci,"ol ul")){closeList=ci;break}}var current=li;if(bk.end){while(current&&!(domUtils.getPosition(current,bk.end)&domUtils.POSITION_FOLLOWING)){if(checkLevel(current)){current=domUtils.getNextDomNode(current,false,null,function(node){return node!==closeList});continue}var parentLi=current.parentNode,list=me.document.createElement(parentLi.tagName),index=utils.indexOf(listStyle[list.tagName],getStyle(parentLi)||domUtils.getComputedStyle(parentLi,"list-style-type"));var currentIndex=index+1==listStyle[list.tagName].length?0:index+1;var currentStyle=listStyle[list.tagName][currentIndex];setListStyle(list,currentStyle);parentLi.insertBefore(list,current);while(current&&!(domUtils.getPosition(current,bk.end)&domUtils.POSITION_FOLLOWING)){li=current.nextSibling;list.appendChild(current);if(!li||domUtils.isTagNode(li,"ol ul")){if(li){while(li=li.firstChild){if(li.tagName=="LI"){break}}}else{li=domUtils.getNextDomNode(current,false,null,function(node){return node!==closeList})}break}current=li}adjustList(list,list.tagName.toLowerCase(),currentStyle);current=li}}me.fireEvent("contentchange");range.moveToBookmark(bk).select();return true}}});function getLi(start){while(start&&!domUtils.isBody(start)){if(start.nodeName=="TABLE"){return null}if(start.nodeName=="LI"){return start}start=start.parentNode}}me.commands.insertorderedlist=me.commands.insertunorderedlist={execCommand:function(command,style){if(!style){style=command.toLowerCase()=="insertorderedlist"?"decimal":"disc"}var me=this,range=this.selection.getRange(),filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br":!domUtils.isWhitespace(node)},tag=command.toLowerCase()=="insertorderedlist"?"ol":"ul",frag=me.document.createDocumentFragment();range.adjustmentBoundary().shrinkBoundary();var bko=range.createBookmark(true),start=getLi(me.document.getElementById(bko.start)),modifyStart=0,end=getLi(me.document.getElementById(bko.end)),modifyEnd=0,startParent,endParent,list,tmp;if(start||end){start&&(startParent=start.parentNode);if(!bko.end){end=start}end&&(endParent=end.parentNode);if(startParent===endParent){while(start!==end){tmp=start;start=start.nextSibling;if(!domUtils.isBlockElm(tmp.firstChild)){var p=me.document.createElement("p");while(tmp.firstChild){p.appendChild(tmp.firstChild)}tmp.appendChild(p)}frag.appendChild(tmp)}tmp=me.document.createElement("span");startParent.insertBefore(tmp,end);if(!domUtils.isBlockElm(end.firstChild)){p=me.document.createElement("p");while(end.firstChild){p.appendChild(end.firstChild)}end.appendChild(p)}frag.appendChild(end);domUtils.breakParent(tmp,startParent);if(domUtils.isEmptyNode(tmp.previousSibling)){domUtils.remove(tmp.previousSibling)}if(domUtils.isEmptyNode(tmp.nextSibling)){domUtils.remove(tmp.nextSibling)}var nodeStyle=getStyle(startParent)||domUtils.getComputedStyle(startParent,"list-style-type")||(command.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(startParent.tagName.toLowerCase()==tag&&nodeStyle==style){for(var i=0,ci,tmpFrag=me.document.createDocumentFragment();ci=frag.firstChild;){if(domUtils.isTagNode(ci,"ol ul")){tmpFrag.appendChild(ci)}else{while(ci.firstChild){tmpFrag.appendChild(ci.firstChild);domUtils.remove(ci)}}}tmp.parentNode.insertBefore(tmpFrag,tmp)}else{list=me.document.createElement(tag);setListStyle(list,style);list.appendChild(frag);tmp.parentNode.insertBefore(list,tmp)}domUtils.remove(tmp);list&&adjustList(list,tag,style);range.moveToBookmark(bko).select();return}if(start){while(start){tmp=start.nextSibling;if(domUtils.isTagNode(start,"ol ul")){frag.appendChild(start)}else{var tmpfrag=me.document.createDocumentFragment(),hasBlock=0;while(start.firstChild){if(domUtils.isBlockElm(start.firstChild)){hasBlock=1}tmpfrag.appendChild(start.firstChild)}if(!hasBlock){var tmpP=me.document.createElement("p");tmpP.appendChild(tmpfrag);frag.appendChild(tmpP)}else{frag.appendChild(tmpfrag)}domUtils.remove(start)}start=tmp}startParent.parentNode.insertBefore(frag,startParent.nextSibling);if(domUtils.isEmptyNode(startParent)){range.setStartBefore(startParent);domUtils.remove(startParent)}else{range.setStartAfter(startParent)}modifyStart=1}if(end&&domUtils.inDoc(endParent,me.document)){start=endParent.firstChild;while(start&&start!==end){tmp=start.nextSibling;if(domUtils.isTagNode(start,"ol ul")){frag.appendChild(start)}else{tmpfrag=me.document.createDocumentFragment();hasBlock=0;while(start.firstChild){if(domUtils.isBlockElm(start.firstChild)){hasBlock=1}tmpfrag.appendChild(start.firstChild)}if(!hasBlock){tmpP=me.document.createElement("p");tmpP.appendChild(tmpfrag);frag.appendChild(tmpP)}else{frag.appendChild(tmpfrag)}domUtils.remove(start)}start=tmp}var tmpDiv=domUtils.createElement(me.document,"div",{tmpDiv:1});domUtils.moveChild(end,tmpDiv);frag.appendChild(tmpDiv);domUtils.remove(end);endParent.parentNode.insertBefore(frag,endParent);range.setEndBefore(endParent);if(domUtils.isEmptyNode(endParent)){domUtils.remove(endParent)}modifyEnd=1}}if(!modifyStart){range.setStartBefore(me.document.getElementById(bko.start))}if(bko.end&&!modifyEnd){range.setEndAfter(me.document.getElementById(bko.end))}range.enlarge(true,function(node){return notExchange[node.tagName]});frag=me.document.createDocumentFragment();var bk=range.createBookmark(),current=domUtils.getNextDomNode(bk.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode,block=domUtils.isBlockElm;while(current&&current!==bk.end&&(domUtils.getPosition(current,bk.end)&domUtils.POSITION_PRECEDING)){if(current.nodeType==3||dtd.li[current.tagName]){if(current.nodeType==1&&dtd.$list[current.tagName]){while(current.firstChild){frag.appendChild(current.firstChild)}tmpNode=domUtils.getNextDomNode(current,false,filterFn);domUtils.remove(current);current=tmpNode;continue}tmpNode=current;tmpRange.setStartBefore(current);while(current&&current!==bk.end&&(!block(current)||domUtils.isBookmarkNode(current))){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !notExchange[node.tagName]})}if(current&&block(current)){tmp=domUtils.getNextDomNode(tmpNode,false,filterFn);if(tmp&&domUtils.isBookmarkNode(tmp)){current=domUtils.getNextDomNode(tmp,false,filterFn);tmpNode=tmp}}tmpRange.setEndAfter(tmpNode);current=domUtils.getNextDomNode(tmpNode,false,filterFn);var li=range.document.createElement("li");li.appendChild(tmpRange.extractContents());if(domUtils.isEmptyNode(li)){var tmpNode=range.document.createElement("p");while(li.firstChild){tmpNode.appendChild(li.firstChild)}li.appendChild(tmpNode)}frag.appendChild(li)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}range.moveToBookmark(bk).collapse(true);list=me.document.createElement(tag);setListStyle(list,style);list.appendChild(frag);range.insertNode(list);adjustList(list,tag,style);for(var i=0,ci,tmpDivs=domUtils.getElementsByTagName(list,"div");ci=tmpDivs[i++];){if(ci.getAttribute("tmpDiv")){domUtils.remove(ci,true)}}range.moveToBookmark(bko).select()},queryCommandState:function(command){var tag=command.toLowerCase()=="insertorderedlist"?"ol":"ul";var path=this.selection.getStartElementPath();for(var i=0,ci;ci=path[i++];){if(ci.nodeName=="TABLE"){return 0}if(tag==ci.nodeName.toLowerCase()){return 1}}return 0},queryCommandValue:function(command){var tag=command.toLowerCase()=="insertorderedlist"?"ol":"ul";var path=this.selection.getStartElementPath(),node;for(var i=0,ci;ci=path[i++];){if(ci.nodeName=="TABLE"){node=null;break}if(tag==ci.nodeName.toLowerCase()){node=ci;break}}return node?getStyle(node)||domUtils.getComputedStyle(node,"list-style-type"):null}}};(function(){var sourceEditors={textarea:function(editor,holder){var textarea=holder.ownerDocument.createElement("textarea");textarea.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;";if(browser.ie&&browser.version<8){textarea.style.width=holder.offsetWidth+"px";textarea.style.height=holder.offsetHeight+"px";holder.onresize=function(){textarea.style.width=holder.offsetWidth+"px";textarea.style.height=holder.offsetHeight+"px"}}holder.appendChild(textarea);return{setContent:function(content){textarea.value=content},getContent:function(){return textarea.value},select:function(){var range;if(browser.ie){range=textarea.createTextRange();range.collapse(true);range.select()}else{textarea.setSelectionRange(0,0);textarea.focus()}},dispose:function(){holder.removeChild(textarea);holder.onresize=null;textarea=null;holder=null}}},codemirror:function(editor,holder){var codeEditor=window.CodeMirror(holder,{mode:"text/html",tabMode:"indent",lineNumbers:true,lineWrapping:true});var dom=codeEditor.getWrapperElement();dom.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;';codeEditor.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;";codeEditor.refresh();return{getCodeMirror:function(){return codeEditor},setContent:function(content){codeEditor.setValue(content)},getContent:function(){return codeEditor.getValue()},select:function(){codeEditor.focus()},dispose:function(){holder.removeChild(dom);dom=null;codeEditor=null}}}};UE.plugins.source=function(){var me=this;var opt=this.options;var sourceMode=false;var sourceEditor;var orgSetContent;opt.sourceEditor=browser.ie?"textarea":(opt.sourceEditor||"codemirror");me.setOpt({sourceEditorFirst:false});function createSourceEditor(holder){return sourceEditors[opt.sourceEditor=="codemirror"&&window.CodeMirror?"codemirror":"textarea"](me,holder)}var bakCssText;var oldGetContent,bakAddress;me.commands.source={execCommand:function(){sourceMode=!sourceMode;if(sourceMode){bakAddress=me.selection.getRange().createAddress(false,true);me.undoManger&&me.undoManger.save(true);if(browser.gecko){me.body.contentEditable=false}bakCssText=me.iframe.style.cssText;me.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;";me.fireEvent("beforegetcontent");var root=UE.htmlparser(me.body.innerHTML);me.filterOutputRule(root);root.traversal(function(node){if(node.type=="element"){switch(node.tagName){case"td":case"th":case"caption":if(node.children&&node.children.length==1){if(node.firstChild().tagName=="br"){node.removeChild(node.firstChild())}}break;case"pre":node.innerText(node.innerText().replace(/&nbsp;/g," "))}}});me.fireEvent("aftergetcontent");var content=root.toHtml(true);sourceEditor=createSourceEditor(me.iframe.parentNode);sourceEditor.setContent(content);orgSetContent=me.setContent;me.setContent=function(html){var root=UE.htmlparser(html);me.filterInputRule(root);html=root.toHtml();sourceEditor.setContent(html)};setTimeout(function(){sourceEditor.select();me.addListener("fullscreenchanged",function(){try{sourceEditor.getCodeMirror().refresh()}catch(e){}})});oldGetContent=me.getContent;me.getContent=function(){return sourceEditor.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{me.iframe.style.cssText=bakCssText;var cont=sourceEditor.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";cont=cont.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(a,b){if(b&&!dtd.$inlineWithA[b.toLowerCase()]){return a.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,"")}return a.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")});me.setContent=orgSetContent;me.setContent(cont);sourceEditor.dispose();sourceEditor=null;me.getContent=oldGetContent;var first=me.body.firstChild;if(!first){me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";first=me.body.firstChild}me.undoManger&&me.undoManger.save(true);if(browser.gecko){var input=document.createElement("input");input.style.cssText="position:absolute;left:0;top:-32768px";document.body.appendChild(input);me.body.contentEditable=false;setTimeout(function(){domUtils.setViewportOffset(input,{left:-32768,top:0});input.focus();setTimeout(function(){me.body.contentEditable=true;me.selection.getRange().moveToAddress(bakAddress).select(true);domUtils.remove(input)})})}else{try{me.selection.getRange().moveToAddress(bakAddress).select(true)}catch(e){}}}this.fireEvent("sourcemodechanged",sourceMode)},queryCommandState:function(){return sourceMode|0},notNeedUndo:1};var oldQueryCommandState=me.queryCommandState;me.queryCommandState=function(cmdName){cmdName=cmdName.toLowerCase();if(sourceMode){return cmdName in {source:1,fullscreen:1}?1:-1}return oldQueryCommandState.apply(this,arguments)};if(opt.sourceEditor=="codemirror"){me.addListener("ready",function(){utils.loadFile(document,{src:opt.codeMirrorJsUrl||opt.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){if(opt.sourceEditorFirst){setTimeout(function(){me.execCommand("source")},0)}});utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:opt.codeMirrorCssUrl||opt.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}})();UE.plugins.enterkey=function(){var hTag,me=this,tag=me.options.enterTag;me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){var range=me.selection.getRange(),start=range.startContainer,doSave;if(!browser.ie){if(/h\d/i.test(hTag)){if(browser.gecko){var h=domUtils.findParentByTagName(start,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],true);if(!h){me.document.execCommand("formatBlock",false,"<p>");doSave=1}}else{if(start.nodeType==1){var tmp=me.document.createTextNode(""),div;range.insertNode(tmp);div=domUtils.findParentByTagName(tmp,"div",true);if(div){var p=me.document.createElement("p");while(div.firstChild){p.appendChild(div.firstChild)}div.parentNode.insertBefore(p,div);domUtils.remove(div);range.setStartBefore(tmp).setCursor();doSave=1}domUtils.remove(tmp)}}if(me.undoManger&&doSave){me.undoManger.save()}}browser.opera&&range.select()}else{me.fireEvent("saveScene",true,true)}}});me.addListener("keydown",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){if(me.fireEvent("beforeenterkeydown")){domUtils.preventDefault(evt);return}me.fireEvent("saveScene",true,true);hTag="";var range=me.selection.getRange();if(!range.collapsed){var start=range.startContainer,end=range.endContainer,startTd=domUtils.findParentByTagName(start,"td",true),endTd=domUtils.findParentByTagName(end,"td",true);if(startTd&&endTd&&startTd!==endTd||!startTd&&endTd||startTd&&!endTd){evt.preventDefault?evt.preventDefault():(evt.returnValue=false);return}}if(tag=="p"){if(!browser.ie){start=domUtils.findParentByTagName(range.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],true);if(!start&&!browser.opera){me.document.execCommand("formatBlock",false,"<p>");if(browser.gecko){range=me.selection.getRange();start=domUtils.findParentByTagName(range.startContainer,"p",true);start&&domUtils.removeDirtyAttr(start)}}else{hTag=start.tagName;start.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(start)}}}else{evt.preventDefault?evt.preventDefault():(evt.returnValue=false);if(!range.collapsed){range.deleteContents();start=range.startContainer;if(start.nodeType==1&&(start=start.childNodes[range.startOffset])){while(start.nodeType==1){if(dtd.$empty[start.tagName]){range.setStartBefore(start).setCursor();if(me.undoManger){me.undoManger.save()}return false}if(!start.firstChild){var br=range.document.createElement("br");start.appendChild(br);range.setStart(start,0).setCursor();if(me.undoManger){me.undoManger.save()}return false}start=start.firstChild}if(start===range.startContainer.childNodes[range.startOffset]){br=range.document.createElement("br");range.insertNode(br).setCursor()}else{range.setStart(start,0).setCursor()}}else{br=range.document.createElement("br");range.insertNode(br).setStartAfter(br).setCursor()}}else{br=range.document.createElement("br");range.insertNode(br);var parent=br.parentNode;if(parent.lastChild===br){br.parentNode.insertBefore(br.cloneNode(true),br);range.setStartBefore(br)}else{range.setStartAfter(br)}range.setCursor()}}}})};UE.plugins.keystrokes=function(){var me=this;var collapsed=true;me.addListener("keydown",function(type,evt){var keyCode=evt.keyCode||evt.which,rng=me.selection.getRange();if(!rng.collapsed&&!(evt.ctrlKey||evt.shiftKey||evt.altKey||evt.metaKey)&&(keyCode>=65&&keyCode<=90||keyCode>=48&&keyCode<=57||keyCode>=96&&keyCode<=111||{13:1,8:1,46:1}[keyCode])){var tmpNode=rng.startContainer;if(domUtils.isFillChar(tmpNode)){rng.setStartBefore(tmpNode)}tmpNode=rng.endContainer;if(domUtils.isFillChar(tmpNode)){rng.setEndAfter(tmpNode)}rng.txtToElmBoundary();if(rng.endContainer&&rng.endContainer.nodeType==1){tmpNode=rng.endContainer.childNodes[rng.endOffset];if(tmpNode&&domUtils.isBr(tmpNode)){rng.setEndAfter(tmpNode)}}if(rng.startOffset==0){tmpNode=rng.startContainer;if(domUtils.isBoundaryNode(tmpNode,"firstChild")){tmpNode=rng.endContainer;if(rng.endOffset==(tmpNode.nodeType==3?tmpNode.nodeValue.length:tmpNode.childNodes.length)&&domUtils.isBoundaryNode(tmpNode,"lastChild")){me.fireEvent("saveScene");me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";rng.setStart(me.body.firstChild,0).setCursor(false,true);me._selectionChange();return}}}}if(keyCode==keymap.Backspace){rng=me.selection.getRange();collapsed=rng.collapsed;if(me.fireEvent("delkeydown",evt)){return}var start,end;if(rng.collapsed&&rng.inFillChar()){start=rng.startContainer;if(domUtils.isFillChar(start)){rng.setStartBefore(start).shrinkBoundary(true).collapse(true);domUtils.remove(start)}else{start.nodeValue=start.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"");rng.startOffset--;rng.collapse(true).select(true)}}if(start=rng.getClosedNode()){me.fireEvent("saveScene");rng.setStartBefore(start);domUtils.remove(start);rng.setCursor();me.fireEvent("saveScene");domUtils.preventDefault(evt);return}if(!browser.ie){start=domUtils.findParentByTagName(rng.startContainer,"table",true);end=domUtils.findParentByTagName(rng.endContainer,"table",true);if(start&&!end||!start&&end||start!==end){evt.preventDefault();return}}}if(keyCode==keymap.Tab){var excludeTagNameForTabKey={ol:1,ul:1,table:1};if(me.fireEvent("tabkeydown",evt)){domUtils.preventDefault(evt);return}var range=me.selection.getRange();me.fireEvent("saveScene");for(var i=0,txt="",tabSize=me.options.tabSize||4,tabNode=me.options.tabNode||"&nbsp;";i<tabSize;i++){txt+=tabNode}var span=me.document.createElement("span");span.innerHTML=txt+domUtils.fillChar;if(range.collapsed){range.insertNode(span.cloneNode(true).firstChild).setCursor(true)}else{var filterFn=function(node){return domUtils.isBlockElm(node)&&!excludeTagNameForTabKey[node.tagName.toLowerCase()]};start=domUtils.findParent(range.startContainer,filterFn,true);end=domUtils.findParent(range.endContainer,filterFn,true);if(start&&end&&start===end){range.deleteContents();range.insertNode(span.cloneNode(true).firstChild).setCursor(true)}else{var bookmark=range.createBookmark();range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn);while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){current.insertBefore(span.cloneNode(true).firstChild,current.firstChild);current=domUtils.getNextDomNode(current,false,filterFn)}range.moveToBookmark(bookmark2).moveToBookmark(bookmark).select()}}domUtils.preventDefault(evt)}if(browser.gecko&&keyCode==46){range=me.selection.getRange();if(range.collapsed){start=range.startContainer;if(domUtils.isEmptyBlock(start)){var parent=start.parentNode;while(domUtils.getChildCount(parent)==1&&!domUtils.isBody(parent)){start=parent;parent=parent.parentNode}if(start===parent.lastChild){evt.preventDefault()}return}}}});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which,rng,me=this;if(keyCode==keymap.Backspace){if(me.fireEvent("delkeyup")){return}rng=me.selection.getRange();if(rng.collapsed){var tmpNode,autoClearTagName=["h1","h2","h3","h4","h5","h6"];if(tmpNode=domUtils.findParentByTagName(rng.startContainer,autoClearTagName,true)){if(domUtils.isEmptyBlock(tmpNode)){var pre=tmpNode.previousSibling;if(pre&&pre.nodeName!="TABLE"){domUtils.remove(tmpNode);rng.setStartAtLast(pre).setCursor(false,true);return}else{var next=tmpNode.nextSibling;if(next&&next.nodeName!="TABLE"){domUtils.remove(tmpNode);rng.setStartAtFirst(next).setCursor(false,true);return}}}}if(domUtils.isBody(rng.startContainer)){var tmpNode=domUtils.createElement(me.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});rng.insertNode(tmpNode).setStart(tmpNode,0).setCursor(false,true)}}if(!collapsed&&(rng.startContainer.nodeType==3||rng.startContainer.nodeType==1&&domUtils.isEmptyBlock(rng.startContainer))){if(browser.ie){var span=rng.document.createElement("span");rng.insertNode(span).setStartBefore(span).collapse(true);rng.select();domUtils.remove(span)}else{rng.select()}}}})};UE.plugins.fiximgclick=(function(){var elementUpdated=false;function Scale(){this.editor=null;this.resizer=null;this.cover=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}(function(){var rect=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];Scale.prototype={init:function(editor){var me=this;me.editor=editor;me.startPos=this.prePos={x:0,y:0};me.dragId=-1;var hands=[],cover=me.cover=document.createElement("div"),resizer=me.resizer=document.createElement("div");cover.id=me.editor.ui.id+"_imagescale_cover";cover.style.cssText="position:absolute;display:none;z-index:"+(me.editor.options.zIndex)+";filter:alpha(opacity=0); opacity:0;background:#CCC;";domUtils.on(cover,"mousedown click",function(){me.hide()});for(i=0;i<8;i++){hands.push('<span class="edui-editor-imagescale-hand'+i+'"></span>')}resizer.id=me.editor.ui.id+"_imagescale";resizer.className="edui-editor-imagescale";resizer.innerHTML=hands.join("");resizer.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+(me.editor.options.zIndex)+";";me.editor.ui.getDom().appendChild(cover);me.editor.ui.getDom().appendChild(resizer);me.initStyle();me.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var me=this;me.startPos.x=me.startPos.y=0;me.isDraging=false},_eventHandler:function(e){var me=this;switch(e.type){case"mousedown":var hand=e.target||e.srcElement,hand;if(hand.className.indexOf("edui-editor-imagescale-hand")!=-1&&me.dragId==-1){me.dragId=hand.className.slice(-1);me.startPos.x=me.prePos.x=e.clientX;me.startPos.y=me.prePos.y=e.clientY;domUtils.on(me.doc,"mousemove",me.proxy(me._eventHandler,me))}break;case"mousemove":if(me.dragId!=-1){me.updateContainerStyle(me.dragId,{x:e.clientX-me.prePos.x,y:e.clientY-me.prePos.y});me.prePos.x=e.clientX;me.prePos.y=e.clientY;elementUpdated=true;me.updateTargetElement()}break;case"mouseup":if(me.dragId!=-1){me.updateContainerStyle(me.dragId,{x:e.clientX-me.prePos.x,y:e.clientY-me.prePos.y});me.updateTargetElement();if(me.target.parentNode){me.attachTo(me.target)}me.dragId=-1}domUtils.un(me.doc,"mousemove",me.proxy(me._eventHandler,me));if(elementUpdated){elementUpdated=false;me.editor.fireEvent("contentchange")}break;default:break}},updateTargetElement:function(){var me=this;domUtils.setStyles(me.target,{width:me.resizer.style.width,height:me.resizer.style.height});me.target.width=parseInt(me.resizer.style.width);me.target.height=parseInt(me.resizer.style.height);me.attachTo(me.target)},updateContainerStyle:function(dir,offset){var me=this,dom=me.resizer,tmp;if(rect[dir][0]!=0){tmp=parseInt(dom.style.left)+offset.x;dom.style.left=me._validScaledProp("left",tmp)+"px"}if(rect[dir][1]!=0){tmp=parseInt(dom.style.top)+offset.y;dom.style.top=me._validScaledProp("top",tmp)+"px"}if(rect[dir][2]!=0){tmp=dom.clientWidth+rect[dir][2]*offset.x;dom.style.width=me._validScaledProp("width",tmp)+"px"}if(rect[dir][3]!=0){tmp=dom.clientHeight+rect[dir][3]*offset.y;dom.style.height=me._validScaledProp("height",tmp)+"px"}},_validScaledProp:function(prop,value){var ele=this.resizer,wrap=document;value=isNaN(value)?0:value;switch(prop){case"left":return value<0?0:(value+ele.clientWidth)>wrap.clientWidth?wrap.clientWidth-ele.clientWidth:value;case"top":return value<0?0:(value+ele.clientHeight)>wrap.clientHeight?wrap.clientHeight-ele.clientHeight:value;case"width":return value<=0?1:(value+ele.offsetLeft)>wrap.clientWidth?wrap.clientWidth-ele.offsetLeft:value;case"height":return value<=0?1:(value+ele.offsetTop)>wrap.clientHeight?wrap.clientHeight-ele.offsetTop:value}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var me=this,editorPos=domUtils.getXY(me.editor.ui.getDom()),iframePos=domUtils.getXY(me.editor.iframe);domUtils.setStyles(me.cover,{width:me.editor.iframe.offsetWidth+"px",height:me.editor.iframe.offsetHeight+"px",top:iframePos.y-editorPos.y+"px",left:iframePos.x-editorPos.x+"px",position:"absolute",display:""})},show:function(targetObj){var me=this;me.resizer.style.display="block";if(targetObj){me.attachTo(targetObj)}domUtils.on(this.resizer,"mousedown",me.proxy(me._eventHandler,me));domUtils.on(me.doc,"mouseup",me.proxy(me._eventHandler,me));me.showCover();me.editor.fireEvent("afterscaleshow",me);me.editor.fireEvent("saveScene")},hide:function(){var me=this;me.hideCover();me.resizer.style.display="none";domUtils.un(me.resizer,"mousedown",me.proxy(me._eventHandler,me));domUtils.un(me.doc,"mouseup",me.proxy(me._eventHandler,me));me.editor.fireEvent("afterscalehide",me)},proxy:function(fn,context){return function(e){return fn.apply(context||this,arguments)}},attachTo:function(targetObj){var me=this,target=me.target=targetObj,resizer=this.resizer,imgPos=domUtils.getXY(target),iframePos=domUtils.getXY(me.editor.iframe),editorPos=domUtils.getXY(resizer.parentNode);domUtils.setStyles(resizer,{width:target.width+"px",height:target.height+"px",left:iframePos.x+imgPos.x-me.editor.document.body.scrollLeft-editorPos.x-parseInt(resizer.style.borderLeftWidth)+"px",top:iframePos.y+imgPos.y-me.editor.document.body.scrollTop-editorPos.y-parseInt(resizer.style.borderTopWidth)+"px"})}}})();return function(){var me=this,imageScale;me.setOpt("imageScaleEnabled",true);if(!browser.ie&&me.options.imageScaleEnabled){me.addListener("click",function(type,e){var range=me.selection.getRange(),img=range.getClosedNode();if(img&&img.tagName=="IMG"&&me.body.contentEditable!="false"){if(img.className.indexOf("edui-faked-music")!=-1||img.getAttribute("anchorname")||domUtils.hasClass(img,"loadingclass")||domUtils.hasClass(img,"loaderrorclass")){return}if(!imageScale){imageScale=new Scale();imageScale.init(me);me.ui.getDom().appendChild(imageScale.resizer);var _keyDownHandler=function(e){imageScale.hide();if(imageScale.target){me.selection.getRange().selectNode(imageScale.target).select()}},_mouseDownHandler=function(e){var ele=e.target||e.srcElement;if(ele&&(ele.className===undefined||ele.className.indexOf("edui-editor-imagescale")==-1)){_keyDownHandler(e)}},timer;me.addListener("afterscaleshow",function(e){me.addListener("beforekeydown",_keyDownHandler);me.addListener("beforemousedown",_mouseDownHandler);domUtils.on(document,"keydown",_keyDownHandler);domUtils.on(document,"mousedown",_mouseDownHandler);me.selection.getNative().removeAllRanges()});me.addListener("afterscalehide",function(e){me.removeListener("beforekeydown",_keyDownHandler);me.removeListener("beforemousedown",_mouseDownHandler);domUtils.un(document,"keydown",_keyDownHandler);domUtils.un(document,"mousedown",_mouseDownHandler);var target=imageScale.target;if(target.parentNode){me.selection.getRange().selectNode(target).select()}});domUtils.on(imageScale.resizer,"mousedown",function(e){me.selection.getNative().removeAllRanges();var ele=e.target||e.srcElement;if(ele&&ele.className.indexOf("edui-editor-imagescale-hand")==-1){timer=setTimeout(function(){imageScale.hide();if(imageScale.target){me.selection.getRange().selectNode(ele).select()}},200)}});domUtils.on(imageScale.resizer,"mouseup",function(e){var ele=e.target||e.srcElement;if(ele&&ele.className.indexOf("edui-editor-imagescale-hand")==-1){clearTimeout(timer)}})}imageScale.show(img)}else{if(imageScale&&imageScale.resizer.style.display!="none"){imageScale.hide()}}})}if(browser.webkit){me.addListener("click",function(type,e){if(e.target.tagName=="IMG"&&me.body.contentEditable!="false"){var range=new dom.Range(me.document);range.selectNode(e.target).select()}})}}})();UE.plugin.register("autolink",function(){var cont=0;return !browser.ie?{bindEvents:{reset:function(){cont=0},keydown:function(type,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(keyCode==32||keyCode==13){var sel=me.selection.getNative(),range=sel.getRangeAt(0).cloneRange(),offset,charCode;var start=range.startContainer;while(start.nodeType==1&&range.startOffset>0){start=range.startContainer.childNodes[range.startOffset-1];if(!start){break}range.setStart(start,start.nodeType==1?start.childNodes.length:start.nodeValue.length);range.collapse(true);start=range.startContainer}do{if(range.startOffset==0){start=range.startContainer.previousSibling;while(start&&start.nodeType==1){start=start.lastChild}if(!start||domUtils.isFillChar(start)){break}offset=start.nodeValue.length}else{start=range.startContainer;offset=range.startOffset}range.setStart(start,offset-1);charCode=range.toString().charCodeAt(0)}while(charCode!=160&&charCode!=32);if(range.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(range.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(range.toString())){break}try{range.setStart(range.startContainer,range.startOffset+1)}catch(e){var start=range.startContainer;while(!(next=start.nextSibling)){if(domUtils.isBody(start)){return}start=start.parentNode}range.setStart(next,0)}}if(domUtils.findParentByTagName(range.startContainer,"a",true)){return}var a=me.document.createElement("a"),text=me.document.createTextNode(" "),href;me.undoManger&&me.undoManger.save();a.appendChild(range.extractContents());a.href=a.innerHTML=a.innerHTML.replace(/<[^>]+>/g,"");href=a.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),"");href=/^(?:https?:\/\/)/ig.test(href)?href:"http://"+href;a.setAttribute("_src",utils.html(href));a.href=utils.html(href);range.insertNode(a);a.parentNode.insertBefore(text,a.nextSibling);range.setStart(text,0);range.collapse(true);sel.removeAllRanges();sel.addRange(range);me.undoManger&&me.undoManger.save()}}}}}:{}},function(){var keyCodes={37:1,38:1,39:1,40:1,13:1,32:1};function checkIsCludeLink(node){if(node.nodeType==3){return null}if(node.nodeName=="A"){return node}var lastChild=node.lastChild;while(lastChild){if(lastChild.nodeName=="A"){return lastChild}if(lastChild.nodeType==3){if(domUtils.isWhitespace(lastChild)){lastChild=lastChild.previousSibling;continue}return null}lastChild=lastChild.lastChild}}browser.ie&&this.addListener("keyup",function(cmd,evt){var me=this,keyCode=evt.keyCode;if(keyCodes[keyCode]){var rng=me.selection.getRange();var start=rng.startContainer;if(keyCode==13){while(start&&!domUtils.isBody(start)&&!domUtils.isBlockElm(start)){start=start.parentNode}if(start&&!domUtils.isBody(start)&&start.nodeName=="P"){var pre=start.previousSibling;if(pre&&pre.nodeType==1){var pre=checkIsCludeLink(pre);if(pre&&!pre.getAttribute("_href")){domUtils.remove(pre,true)}}}}else{if(keyCode==32){if(start.nodeType==3&&/^\s$/.test(start.nodeValue)){start=start.previousSibling;if(start&&start.nodeName=="A"&&!start.getAttribute("_href")){domUtils.remove(start,true)}}}else{start=domUtils.findParentByTagName(start,"a",true);if(start&&!start.getAttribute("_href")){var bk=rng.createBookmark();domUtils.remove(start,true);rng.moveToBookmark(bk).select(true)}}}}})});UE.plugins.autoheight=function(){var me=this;me.autoHeightEnabled=me.options.autoHeightEnabled!==false;if(!me.autoHeightEnabled){return}var bakOverflow,lastHeight=0,options=me.options,currentHeight,timer;function adjustHeight(){var me=this;clearTimeout(timer);if(isFullscreen){return}if(!me.queryCommandState||me.queryCommandState&&me.queryCommandState("source")!=1){timer=setTimeout(function(){var node=me.body.lastChild;while(node&&node.nodeType!=1){node=node.previousSibling}if(node&&node.nodeType==1){node.style.clear="both";currentHeight=Math.max(domUtils.getXY(node).y+node.offsetHeight+25,Math.max(options.minFrameHeight,options.initialFrameHeight));if(currentHeight!=lastHeight){if(currentHeight!==parseInt(me.iframe.parentNode.style.height)){me.iframe.parentNode.style.height=currentHeight+"px"}me.body.style.height=currentHeight+"px";lastHeight=currentHeight}domUtils.removeStyle(node,"clear")}},50)}}var isFullscreen;me.addListener("fullscreenchanged",function(cmd,f){isFullscreen=f});me.addListener("destroy",function(){me.removeListener("contentchange afterinserthtml keyup mouseup",adjustHeight)});me.enableAutoHeight=function(){var me=this;if(!me.autoHeightEnabled){return}var doc=me.document;me.autoHeightEnabled=true;bakOverflow=doc.body.style.overflowY;doc.body.style.overflowY="hidden";me.addListener("contentchange afterinserthtml keyup mouseup",adjustHeight);setTimeout(function(){adjustHeight.call(me)},browser.gecko?100:0);me.fireEvent("autoheightchanged",me.autoHeightEnabled)};me.disableAutoHeight=function(){me.body.style.overflowY=bakOverflow||"";me.removeListener("contentchange",adjustHeight);me.removeListener("keyup",adjustHeight);me.removeListener("mouseup",adjustHeight);me.autoHeightEnabled=false;me.fireEvent("autoheightchanged",me.autoHeightEnabled)};me.on("setHeight",function(){me.disableAutoHeight()});me.addListener("ready",function(){me.enableAutoHeight();var timer;domUtils.on(browser.ie?me.body:me.document,browser.webkit?"dragover":"drop",function(){clearTimeout(timer);timer=setTimeout(function(){adjustHeight.call(me)},100)});var lastScrollY;window.onscroll=function(){if(lastScrollY===null){lastScrollY=this.scrollY}else{if(this.scrollY==0&&lastScrollY!=0){me.window.scrollTo(0,0);lastScrollY=null}}}})};UE.plugins.autofloat=function(){var me=this,lang=me.getLang();me.setOpt({topOffset:0});var optsAutoFloatEnabled=me.options.autoFloatEnabled!==false,topOffset=me.options.topOffset;if(!optsAutoFloatEnabled){return}var uiUtils=UE.ui.uiUtils,LteIE6=browser.ie&&browser.version<=6,quirks=browser.quirks;function checkHasUI(){if(!UE.ui){alert(lang.autofloatMsg);return 0}return 1}function fixIE6FixedPos(){var docStyle=document.body.style;docStyle.backgroundImage='url("about:blank")';docStyle.backgroundAttachment="fixed"}var bakCssText,placeHolder=document.createElement("div"),toolbarBox,orgTop,getPosition,flag=true;function setFloating(){var toobarBoxPos=domUtils.getXY(toolbarBox),origalFloat=domUtils.getComputedStyle(toolbarBox,"position"),origalLeft=domUtils.getComputedStyle(toolbarBox,"left");toolbarBox.style.width=toolbarBox.offsetWidth+"px";toolbarBox.style.zIndex=me.options.zIndex*1+1;toolbarBox.parentNode.insertBefore(placeHolder,toolbarBox);if(LteIE6||(quirks&&browser.ie)){if(toolbarBox.style.position!="absolute"){toolbarBox.style.position="absolute"}toolbarBox.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-orgTop+topOffset+"px"}else{if(browser.ie7Compat&&flag){flag=false;toolbarBox.style.left=domUtils.getXY(toolbarBox).x-document.documentElement.getBoundingClientRect().left+2+"px"}if(toolbarBox.style.position!="fixed"){toolbarBox.style.position="fixed";toolbarBox.style.top=topOffset+"px";((origalFloat=="absolute"||origalFloat=="relative")&&parseFloat(origalLeft))&&(toolbarBox.style.left=toobarBoxPos.x+"px")}}}function unsetFloating(){flag=true;if(placeHolder.parentNode){placeHolder.parentNode.removeChild(placeHolder)}toolbarBox.style.cssText=bakCssText}function updateFloating(){var rect3=getPosition(me.container);var offset=me.options.toolbarTopOffset||0;if(rect3.top<0&&rect3.bottom-toolbarBox.offsetHeight>offset){setFloating()}else{unsetFloating()}}var defer_updateFloating=utils.defer(function(){updateFloating()},browser.ie?200:100,true);me.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],updateFloating);me.removeListener("keydown",defer_updateFloating)});me.addListener("ready",function(){if(checkHasUI(me)){if(!me.ui){return}getPosition=uiUtils.getClientRect;toolbarBox=me.ui.getDom("toolbarbox");orgTop=getPosition(toolbarBox).top;bakCssText=toolbarBox.style.cssText;placeHolder.style.height=toolbarBox.offsetHeight+"px";if(LteIE6){fixIE6FixedPos()}domUtils.on(window,["scroll","resize"],updateFloating);me.addListener("keydown",defer_updateFloating);me.addListener("beforefullscreenchange",function(t,enabled){if(enabled){unsetFloating()}});me.addListener("fullscreenchanged",function(t,enabled){if(!enabled){updateFloating()}});me.addListener("sourcemodechanged",function(t,enabled){setTimeout(function(){updateFloating()},0)});me.addListener("clearDoc",function(){setTimeout(function(){updateFloating()},0)})}})};UE.plugins.video=function(){var me=this;function creatInsertStr(url,width,height,id,align,classname,type){url=utils.unhtmlForUrl(url);align=utils.unhtml(align);classname=utils.unhtml(classname);width=parseInt(width,10)||0;height=parseInt(height,10)||0;var str;switch(type){case"image":str="<img "+(id?'id="'+id+'"':"")+' width="'+width+'" height="'+height+'" _url="'+url+'" class="'+classname.replace(/\bvideo-js\b/,"")+'" src="'+me.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+me.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(align?"float:"+align+";":"")+'" />';break;case"embed":str='<embed type="application/x-shockwave-flash" class="'+classname+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(url)+'" width="'+width+'" height="'+height+'"'+(align?' style="float:'+align+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var ext=url.substr(url.lastIndexOf(".")+1);if(ext=="ogv"){ext="ogg"}str="<video"+(id?' id="'+id+'"':"")+' class="'+classname+' video-js" '+(align?' style="float:'+align+'"':"")+' controls preload="none" width="'+width+'" height="'+height+'" src="'+url+'" data-setup="{}"><source src="'+url+'" type="video/'+ext+'" /></video>';break}return str}function switchImgAndVideo(root,img2video){utils.each(root.getNodesByTagName(img2video?"img":"embed video"),function(node){var className=node.getAttr("class");if(className&&className.indexOf("edui-faked-video")!=-1){var html=creatInsertStr(img2video?node.getAttr("_url"):node.getAttr("src"),node.getAttr("width"),node.getAttr("height"),null,node.getStyle("float")||"",className,img2video?"embed":"image");node.parentNode.replaceChild(UE.uNode.createElement(html),node)}if(className&&className.indexOf("edui-upload-video")!=-1){var html=creatInsertStr(img2video?node.getAttr("_url"):node.getAttr("src"),node.getAttr("width"),node.getAttr("height"),null,node.getStyle("float")||"",className,img2video?"video":"image");node.parentNode.replaceChild(UE.uNode.createElement(html),node)}})}me.addOutputRule(function(root){switchImgAndVideo(root,true)});me.addInputRule(function(root){switchImgAndVideo(root)});me.commands.insertvideo={execCommand:function(cmd,videoObjs,type){videoObjs=utils.isArray(videoObjs)?videoObjs:[videoObjs];var html=[],id="tmpVedio",cl;for(var i=0,vi,len=videoObjs.length;i<len;i++){vi=videoObjs[i];cl=(type=="upload"?"edui-upload-video video-js vjs-default-skin":"edui-faked-video");html.push(creatInsertStr(vi.url,vi.width||420,vi.height||280,id+i,null,cl,"image"))}me.execCommand("inserthtml",html.join(""),true);var rng=this.selection.getRange();for(var i=0,len=videoObjs.length;i<len;i++){var img=this.document.getElementById("tmpVedio"+i);domUtils.removeAttributes(img,"id");rng.selectNode(img).select();me.execCommand("imagefloat",videoObjs[i].align)}},queryCommandState:function(){var img=me.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-video"||img.className.indexOf("edui-upload-video")!=-1);return flag?1:0}}};(function(){var UETable=UE.UETable=function(table){this.table=table;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(table)};UETable.removeSelectedClass=function(cells){utils.each(cells,function(cell){domUtils.removeClasses(cell,"selectTdClass")})};UETable.addSelectedClass=function(cells){utils.each(cells,function(cell){domUtils.addClass(cell,"selectTdClass")})};UETable.isEmptyBlock=function(node){var reg=new RegExp(domUtils.fillChar,"g");if(node[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(reg,"").length>0){return 0}for(var i in dtd.$isNotEmpty){if(dtd.$isNotEmpty.hasOwnProperty(i)){if(node.getElementsByTagName(i).length){return 0}}}return 1};UETable.getWidth=function(cell){if(!cell){return 0}return parseInt(domUtils.getComputedStyle(cell,"width"),10)};UETable.getTableCellAlignState=function(cells){!utils.isArray(cells)&&(cells=[cells]);var result={},status=["align","valign"],tempStatus=null,isSame=true;utils.each(cells,function(cellNode){utils.each(status,function(currentState){tempStatus=cellNode.getAttribute(currentState);if(!result[currentState]&&tempStatus){result[currentState]=tempStatus}else{if(!result[currentState]||(tempStatus!==result[currentState])){isSame=false;return false}}});return isSame});return isSame?result:null};UETable.getTableItemsByRange=function(editor){var start=editor.selection.getStart();if(start&&start.id&&start.id.indexOf("_baidu_bookmark_start_")===0&&start.nextSibling){start=start.nextSibling}var cell=start&&domUtils.findParentByTagName(start,["td","th"],true),tr=cell&&cell.parentNode,caption=start&&domUtils.findParentByTagName(start,"caption",true),table=caption?caption.parentNode:tr&&tr.parentNode.parentNode;return{cell:cell,tr:tr,table:table,caption:caption}};UETable.getUETableBySelected=function(editor){var table=UETable.getTableItemsByRange(editor).table;if(table&&table.ueTable&&table.ueTable.selectedTds.length){return table.ueTable}return null};UETable.getDefaultValue=function(editor,table){var borderMap={thin:"0px",medium:"1px",thick:"2px"},tableBorder,tdPadding,tdBorder,tmpValue;if(!table){table=editor.document.createElement("table");table.insertRow(0).insertCell(0).innerHTML="xxx";editor.body.appendChild(table);var td=table.getElementsByTagName("td")[0];tmpValue=domUtils.getComputedStyle(table,"border-left-width");tableBorder=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"padding-left");tdPadding=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"border-left-width");tdBorder=parseInt(borderMap[tmpValue]||tmpValue,10);domUtils.remove(table);return{tableBorder:tableBorder,tdPadding:tdPadding,tdBorder:tdBorder}}else{td=table.getElementsByTagName("td")[0];tmpValue=domUtils.getComputedStyle(table,"border-left-width");tableBorder=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"padding-left");tdPadding=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"border-left-width");tdBorder=parseInt(borderMap[tmpValue]||tmpValue,10);return{tableBorder:tableBorder,tdPadding:tdPadding,tdBorder:tdBorder}}};UETable.getUETable=function(tdOrTable){var tag=tdOrTable.tagName.toLowerCase();tdOrTable=(tag=="td"||tag=="th"||tag=="caption")?domUtils.findParentByTagName(tdOrTable,"table",true):tdOrTable;if(!tdOrTable.ueTable){tdOrTable.ueTable=new UETable(tdOrTable)}return tdOrTable.ueTable};UETable.cloneCell=function(cell,ignoreMerge,keepPro){if(!cell||utils.isString(cell)){return this.table.ownerDocument.createElement(cell||"td")}var flag=domUtils.hasClass(cell,"selectTdClass");flag&&domUtils.removeClasses(cell,"selectTdClass");var tmpCell=cell.cloneNode(true);if(ignoreMerge){tmpCell.rowSpan=tmpCell.colSpan=1}!keepPro&&domUtils.removeAttributes(tmpCell,"width height");!keepPro&&domUtils.removeAttributes(tmpCell,"style");tmpCell.style.borderLeftStyle="";tmpCell.style.borderTopStyle="";tmpCell.style.borderLeftColor=cell.style.borderRightColor;tmpCell.style.borderLeftWidth=cell.style.borderRightWidth;tmpCell.style.borderTopColor=cell.style.borderBottomColor;tmpCell.style.borderTopWidth=cell.style.borderBottomWidth;flag&&domUtils.addClass(cell,"selectTdClass");return tmpCell};UETable.prototype={getMaxRows:function(){var rows=this.table.rows,maxLen=1;for(var i=0,row;row=rows[i];i++){var currentMax=1;for(var j=0,cj;cj=row.cells[j++];){currentMax=Math.max(cj.rowSpan||1,currentMax)}maxLen=Math.max(currentMax+i,maxLen)}return maxLen},getMaxCols:function(){var rows=this.table.rows,maxLen=0,cellRows={};for(var i=0,row;row=rows[i];i++){var cellsNum=0;for(var j=0,cj;cj=row.cells[j++];){cellsNum+=(cj.colSpan||1);if(cj.rowSpan&&cj.rowSpan>1){for(var k=1;k<cj.rowSpan;k++){if(!cellRows["row_"+(i+k)]){cellRows["row_"+(i+k)]=(cj.colSpan||1)}else{cellRows["row_"+(i+k)]++}}}}cellsNum+=cellRows["row_"+i]||0;maxLen=Math.max(cellsNum,maxLen)}return maxLen},getCellColIndex:function(cell){},getHSideCell:function(cell,right){try{var cellInfo=this.getCellInfo(cell),previewRowIndex,previewColIndex;var len=this.selectedTds.length,range=this.cellsRange;if((!right&&(!len?!cellInfo.colIndex:!range.beginColIndex))||(right&&(!len?(cellInfo.colIndex==(this.colsNum-1)):(range.endColIndex==this.colsNum-1)))){return null}previewRowIndex=!len?cellInfo.rowIndex:range.beginRowIndex;previewColIndex=!right?(!len?(cellInfo.colIndex<1?0:(cellInfo.colIndex-1)):range.beginColIndex-1):(!len?cellInfo.colIndex+1:range.endColIndex+1);return this.getCell(this.indexTable[previewRowIndex][previewColIndex].rowIndex,this.indexTable[previewRowIndex][previewColIndex].cellIndex)}catch(e){showError(e)}},getTabNextCell:function(cell,preRowIndex){var cellInfo=this.getCellInfo(cell),rowIndex=preRowIndex||cellInfo.rowIndex,colIndex=cellInfo.colIndex+1+(cellInfo.colSpan-1),nextCell;try{nextCell=this.getCell(this.indexTable[rowIndex][colIndex].rowIndex,this.indexTable[rowIndex][colIndex].cellIndex)}catch(e){try{rowIndex=rowIndex*1+1;colIndex=0;nextCell=this.getCell(this.indexTable[rowIndex][colIndex].rowIndex,this.indexTable[rowIndex][colIndex].cellIndex)}catch(e){}}return nextCell},getVSideCell:function(cell,bottom,ignoreRange){try{var cellInfo=this.getCellInfo(cell),nextRowIndex,nextColIndex;var len=this.selectedTds.length&&!ignoreRange,range=this.cellsRange;if((!bottom&&(cellInfo.rowIndex==0))||(bottom&&(!len?(cellInfo.rowIndex+cellInfo.rowSpan>this.rowsNum-1):(range.endRowIndex==this.rowsNum-1)))){return null}nextRowIndex=!bottom?(!len?cellInfo.rowIndex-1:range.beginRowIndex-1):(!len?(cellInfo.rowIndex+cellInfo.rowSpan):range.endRowIndex+1);nextColIndex=!len?cellInfo.colIndex:range.beginColIndex;return this.getCell(this.indexTable[nextRowIndex][nextColIndex].rowIndex,this.indexTable[nextRowIndex][nextColIndex].cellIndex)}catch(e){showError(e)}},getSameEndPosCells:function(cell,xOrY){try{var flag=(xOrY.toLowerCase()==="x"),end=domUtils.getXY(cell)[flag?"x":"y"]+cell["offset"+(flag?"Width":"Height")],rows=this.table.rows,cells=null,returns=[];for(var i=0;i<this.rowsNum;i++){cells=rows[i].cells;for(var j=0,tmpCell;tmpCell=cells[j++];){var tmpEnd=domUtils.getXY(tmpCell)[flag?"x":"y"]+tmpCell["offset"+(flag?"Width":"Height")];if(tmpEnd>end&&flag){break}if(cell==tmpCell||end==tmpEnd){if(tmpCell[flag?"colSpan":"rowSpan"]==1){returns.push(tmpCell)}if(flag){break}}}}return returns}catch(e){showError(e)}},setCellContent:function(cell,content){cell.innerHTML=content||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:UETable.cloneCell,getSameStartPosXCells:function(cell){try{var start=domUtils.getXY(cell).x+cell.offsetWidth,rows=this.table.rows,cells,returns=[];for(var i=0;i<this.rowsNum;i++){cells=rows[i].cells;for(var j=0,tmpCell;tmpCell=cells[j++];){var tmpStart=domUtils.getXY(tmpCell).x;if(tmpStart>start){break}if(tmpStart==start&&tmpCell.colSpan==1){returns.push(tmpCell);break}}}return returns}catch(e){showError(e)}},update:function(table){this.table=table||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];var rows=this.table.rows,rowsNum=this.getMaxRows(),dNum=rowsNum-rows.length,colsNum=this.getMaxCols();while(dNum--){this.table.insertRow(rows.length)}this.rowsNum=rowsNum;this.colsNum=colsNum;for(var i=0,len=rows.length;i<len;i++){this.indexTable[i]=new Array(colsNum)}for(var rowIndex=0,row;row=rows[rowIndex];rowIndex++){for(var cellIndex=0,cell,cells=row.cells;cell=cells[cellIndex];cellIndex++){if(cell.rowSpan>rowsNum){cell.rowSpan=rowsNum}var colIndex=cellIndex,rowSpan=cell.rowSpan||1,colSpan=cell.colSpan||1;while(this.indexTable[rowIndex][colIndex]){colIndex++}for(var j=0;j<rowSpan;j++){for(var k=0;k<colSpan;k++){this.indexTable[rowIndex+j][colIndex+k]={rowIndex:rowIndex,cellIndex:cellIndex,colIndex:colIndex,rowSpan:rowSpan,colSpan:colSpan}}}}}for(j=0;j<rowsNum;j++){for(k=0;k<colsNum;k++){if(this.indexTable[j][k]===undefined){row=rows[j];cell=row.cells[row.cells.length-1];cell=cell?cell.cloneNode(true):this.table.ownerDocument.createElement("td");this.setCellContent(cell);if(cell.colSpan!==1){cell.colSpan=1}if(cell.rowSpan!==1){cell.rowSpan=1}row.appendChild(cell);this.indexTable[j][k]={rowIndex:j,cellIndex:cell.cellIndex,colIndex:k,rowSpan:1,colSpan:1}}}}var tds=domUtils.getElementsByTagName(this.table,"td"),selectTds=[];utils.each(tds,function(td){if(domUtils.hasClass(td,"selectTdClass")){selectTds.push(td)}});if(selectTds.length){var start=selectTds[0],end=selectTds[selectTds.length-1],startInfo=this.getCellInfo(start),endInfo=this.getCellInfo(end);this.selectedTds=selectTds;this.cellsRange={beginRowIndex:startInfo.rowIndex,beginColIndex:startInfo.colIndex,endRowIndex:endInfo.rowIndex+endInfo.rowSpan-1,endColIndex:endInfo.colIndex+endInfo.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(var i=1;i<this.table.rows.length;i++){domUtils.removeClasses(this.table.rows[i],"firstRow")}}},getCellInfo:function(cell){if(!cell){return}var cellIndex=cell.cellIndex,rowIndex=cell.parentNode.rowIndex,rowInfo=this.indexTable[rowIndex],numCols=this.colsNum;for(var colIndex=cellIndex;colIndex<numCols;colIndex++){var cellInfo=rowInfo[colIndex];if(cellInfo.rowIndex===rowIndex&&cellInfo.cellIndex===cellIndex){return cellInfo}}},getCell:function(rowIndex,cellIndex){return rowIndex<this.rowsNum&&this.table.rows[rowIndex].cells[cellIndex]||null},deleteCell:function(cell,rowIndex){rowIndex=typeof rowIndex=="number"?rowIndex:cell.parentNode.rowIndex;var row=this.table.rows[rowIndex];row.deleteCell(cell.cellIndex)},getCellsRange:function(cellA,cellB){function checkRange(beginRowIndex,beginColIndex,endRowIndex,endColIndex){var tmpBeginRowIndex=beginRowIndex,tmpBeginColIndex=beginColIndex,tmpEndRowIndex=endRowIndex,tmpEndColIndex=endColIndex,cellInfo,colIndex,rowIndex;if(beginRowIndex>0){for(colIndex=beginColIndex;colIndex<endColIndex;colIndex++){cellInfo=me.indexTable[beginRowIndex][colIndex];rowIndex=cellInfo.rowIndex;if(rowIndex<beginRowIndex){tmpBeginRowIndex=Math.min(rowIndex,tmpBeginRowIndex)}}}if(endColIndex<me.colsNum){for(rowIndex=beginRowIndex;rowIndex<endRowIndex;rowIndex++){cellInfo=me.indexTable[rowIndex][endColIndex];colIndex=cellInfo.colIndex+cellInfo.colSpan-1;if(colIndex>endColIndex){tmpEndColIndex=Math.max(colIndex,tmpEndColIndex)}}}if(endRowIndex<me.rowsNum){for(colIndex=beginColIndex;colIndex<endColIndex;colIndex++){cellInfo=me.indexTable[endRowIndex][colIndex];rowIndex=cellInfo.rowIndex+cellInfo.rowSpan-1;if(rowIndex>endRowIndex){tmpEndRowIndex=Math.max(rowIndex,tmpEndRowIndex)}}}if(beginColIndex>0){for(rowIndex=beginRowIndex;rowIndex<endRowIndex;rowIndex++){cellInfo=me.indexTable[rowIndex][beginColIndex];colIndex=cellInfo.colIndex;if(colIndex<beginColIndex){tmpBeginColIndex=Math.min(cellInfo.colIndex,tmpBeginColIndex)}}}if(tmpBeginRowIndex!=beginRowIndex||tmpBeginColIndex!=beginColIndex||tmpEndRowIndex!=endRowIndex||tmpEndColIndex!=endColIndex){return checkRange(tmpBeginRowIndex,tmpBeginColIndex,tmpEndRowIndex,tmpEndColIndex)}else{return{beginRowIndex:beginRowIndex,beginColIndex:beginColIndex,endRowIndex:endRowIndex,endColIndex:endColIndex}}}try{var me=this,cellAInfo=me.getCellInfo(cellA);if(cellA===cellB){return{beginRowIndex:cellAInfo.rowIndex,beginColIndex:cellAInfo.colIndex,endRowIndex:cellAInfo.rowIndex+cellAInfo.rowSpan-1,endColIndex:cellAInfo.colIndex+cellAInfo.colSpan-1}}var cellBInfo=me.getCellInfo(cellB);var beginRowIndex=Math.min(cellAInfo.rowIndex,cellBInfo.rowIndex),beginColIndex=Math.min(cellAInfo.colIndex,cellBInfo.colIndex),endRowIndex=Math.max(cellAInfo.rowIndex+cellAInfo.rowSpan-1,cellBInfo.rowIndex+cellBInfo.rowSpan-1),endColIndex=Math.max(cellAInfo.colIndex+cellAInfo.colSpan-1,cellBInfo.colIndex+cellBInfo.colSpan-1);return checkRange(beginRowIndex,beginColIndex,endRowIndex,endColIndex)}catch(e){}},getCells:function(range){this.clearSelected();var beginRowIndex=range.beginRowIndex,beginColIndex=range.beginColIndex,endRowIndex=range.endRowIndex,endColIndex=range.endColIndex,cellInfo,rowIndex,colIndex,tdHash={},returnTds=[];for(var i=beginRowIndex;i<=endRowIndex;i++){for(var j=beginColIndex;j<=endColIndex;j++){cellInfo=this.indexTable[i][j];rowIndex=cellInfo.rowIndex;colIndex=cellInfo.colIndex;var key=rowIndex+"|"+colIndex;if(tdHash[key]){continue}tdHash[key]=1;if(rowIndex<i||colIndex<j||rowIndex+cellInfo.rowSpan-1>endRowIndex||colIndex+cellInfo.colSpan-1>endColIndex){return null}returnTds.push(this.getCell(rowIndex,cellInfo.cellIndex))}}return returnTds},clearSelected:function(){UETable.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(range){var cells=this.getCells(range);UETable.addSelectedClass(cells);this.selectedTds=cells;this.cellsRange=range},isFullRow:function(){var range=this.cellsRange;return(range.endColIndex-range.beginColIndex+1)==this.colsNum},isFullCol:function(){var range=this.cellsRange,table=this.table,ths=table.getElementsByTagName("th"),rows=range.endRowIndex-range.beginRowIndex+1;return !ths.length?rows==this.rowsNum:rows==this.rowsNum||(rows==this.rowsNum-1)},getNextCell:function(cell,bottom,ignoreRange){try{var cellInfo=this.getCellInfo(cell),nextRowIndex,nextColIndex;var len=this.selectedTds.length&&!ignoreRange,range=this.cellsRange;if((!bottom&&(cellInfo.rowIndex==0))||(bottom&&(!len?(cellInfo.rowIndex+cellInfo.rowSpan>this.rowsNum-1):(range.endRowIndex==this.rowsNum-1)))){return null}nextRowIndex=!bottom?(!len?cellInfo.rowIndex-1:range.beginRowIndex-1):(!len?(cellInfo.rowIndex+cellInfo.rowSpan):range.endRowIndex+1);nextColIndex=!len?cellInfo.colIndex:range.beginColIndex;return this.getCell(this.indexTable[nextRowIndex][nextColIndex].rowIndex,this.indexTable[nextRowIndex][nextColIndex].cellIndex)}catch(e){showError(e)}},getPreviewCell:function(cell,top){try{var cellInfo=this.getCellInfo(cell),previewRowIndex,previewColIndex;var len=this.selectedTds.length,range=this.cellsRange;if((!top&&(!len?!cellInfo.colIndex:!range.beginColIndex))||(top&&(!len?(cellInfo.rowIndex>(this.colsNum-1)):(range.endColIndex==this.colsNum-1)))){return null}previewRowIndex=!top?(!len?cellInfo.rowIndex:range.beginRowIndex):(!len?(cellInfo.rowIndex<1?0:(cellInfo.rowIndex-1)):range.beginRowIndex);previewColIndex=!top?(!len?(cellInfo.colIndex<1?0:(cellInfo.colIndex-1)):range.beginColIndex-1):(!len?cellInfo.colIndex:range.endColIndex+1);return this.getCell(this.indexTable[previewRowIndex][previewColIndex].rowIndex,this.indexTable[previewRowIndex][previewColIndex].cellIndex)}catch(e){showError(e)}},moveContent:function(cellTo,cellFrom){if(UETable.isEmptyBlock(cellFrom)){return}if(UETable.isEmptyBlock(cellTo)){cellTo.innerHTML=cellFrom.innerHTML;return}var child=cellTo.lastChild;if(child.nodeType==3||!dtd.$block[child.tagName]){cellTo.appendChild(cellTo.ownerDocument.createElement("br"))}while(child=cellFrom.firstChild){cellTo.appendChild(child)}},mergeRight:function(cell){var cellInfo=this.getCellInfo(cell),rightColIndex=cellInfo.colIndex+cellInfo.colSpan,rightCellInfo=this.indexTable[cellInfo.rowIndex][rightColIndex],rightCell=this.getCell(rightCellInfo.rowIndex,rightCellInfo.cellIndex);cell.colSpan=cellInfo.colSpan+rightCellInfo.colSpan;cell.removeAttribute("width");this.moveContent(cell,rightCell);this.deleteCell(rightCell,rightCellInfo.rowIndex);this.update()},mergeDown:function(cell){var cellInfo=this.getCellInfo(cell),downRowIndex=cellInfo.rowIndex+cellInfo.rowSpan,downCellInfo=this.indexTable[downRowIndex][cellInfo.colIndex],downCell=this.getCell(downCellInfo.rowIndex,downCellInfo.cellIndex);cell.rowSpan=cellInfo.rowSpan+downCellInfo.rowSpan;cell.removeAttribute("height");this.moveContent(cell,downCell);this.deleteCell(downCell,downCellInfo.rowIndex);this.update()},mergeRange:function(){var range=this.cellsRange,leftTopCell=this.getCell(range.beginRowIndex,this.indexTable[range.beginRowIndex][range.beginColIndex].cellIndex);if(leftTopCell.tagName=="TH"&&range.endRowIndex!==range.beginRowIndex){var index=this.indexTable,info=this.getCellInfo(leftTopCell);leftTopCell=this.getCell(1,index[1][info.colIndex].cellIndex);range=this.getCellsRange(leftTopCell,this.getCell(index[this.rowsNum-1][info.colIndex].rowIndex,index[this.rowsNum-1][info.colIndex].cellIndex))}var cells=this.getCells(range);for(var i=0,ci;ci=cells[i++];){if(ci!==leftTopCell){this.moveContent(leftTopCell,ci);this.deleteCell(ci)}}leftTopCell.rowSpan=range.endRowIndex-range.beginRowIndex+1;leftTopCell.rowSpan>1&&leftTopCell.removeAttribute("height");leftTopCell.colSpan=range.endColIndex-range.beginColIndex+1;leftTopCell.colSpan>1&&leftTopCell.removeAttribute("width");if(leftTopCell.rowSpan==this.rowsNum&&leftTopCell.colSpan!=1){leftTopCell.colSpan=1}if(leftTopCell.colSpan==this.colsNum&&leftTopCell.rowSpan!=1){var rowIndex=leftTopCell.parentNode.rowIndex;if(this.table.deleteRow){for(var i=rowIndex+1,curIndex=rowIndex+1,len=leftTopCell.rowSpan;i<len;i++){this.table.deleteRow(curIndex)}}else{for(var i=0,len=leftTopCell.rowSpan-1;i<len;i++){var row=this.table.rows[rowIndex+1];row.parentNode.removeChild(row)}}leftTopCell.rowSpan=1}this.update()},insertRow:function(rowIndex,sourceCell){var numCols=this.colsNum,table=this.table,row=table.insertRow(rowIndex),cell,isInsertTitle=typeof sourceCell=="string"&&sourceCell.toUpperCase()=="TH";function replaceTdToTh(colIndex,cell,tableRow){if(colIndex==0){var tr=tableRow.nextSibling||tableRow.previousSibling,th=tr.cells[colIndex];if(th.tagName=="TH"){th=cell.ownerDocument.createElement("th");th.appendChild(cell.firstChild);tableRow.insertBefore(th,cell);domUtils.remove(cell)}}else{if(cell.tagName=="TH"){var td=cell.ownerDocument.createElement("td");td.appendChild(cell.firstChild);tableRow.insertBefore(td,cell);domUtils.remove(cell)}}}if(rowIndex==0||rowIndex==this.rowsNum){for(var colIndex=0;colIndex<numCols;colIndex++){cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);cell.getAttribute("vAlign")&&cell.setAttribute("vAlign",cell.getAttribute("vAlign"));row.appendChild(cell);if(!isInsertTitle){replaceTdToTh(colIndex,cell,row)}}}else{var infoRow=this.indexTable[rowIndex],cellIndex=0;for(colIndex=0;colIndex<numCols;colIndex++){var cellInfo=infoRow[colIndex];if(cellInfo.rowIndex<rowIndex){cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);cell.rowSpan=cellInfo.rowSpan+1}else{cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);row.appendChild(cell)}if(!isInsertTitle){replaceTdToTh(colIndex,cell,row)}}}this.update();return row},deleteRow:function(rowIndex){var row=this.table.rows[rowIndex],infoRow=this.indexTable[rowIndex],colsNum=this.colsNum,count=0;for(var colIndex=0;colIndex<colsNum;){var cellInfo=infoRow[colIndex],cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);if(cell.rowSpan>1){if(cellInfo.rowIndex==rowIndex){var clone=cell.cloneNode(true);clone.rowSpan=cell.rowSpan-1;clone.innerHTML="";cell.rowSpan=1;var nextRowIndex=rowIndex+1,nextRow=this.table.rows[nextRowIndex],insertCellIndex,preMerged=this.getPreviewMergedCellsNum(nextRowIndex,colIndex)-count;if(preMerged<colIndex){insertCellIndex=colIndex-preMerged-1;domUtils.insertAfter(nextRow.cells[insertCellIndex],clone)}else{if(nextRow.cells.length){nextRow.insertBefore(clone,nextRow.cells[0])}}count+=1}}colIndex+=cell.colSpan||1}var deleteTds=[],cacheMap={};for(colIndex=0;colIndex<colsNum;colIndex++){var tmpRowIndex=infoRow[colIndex].rowIndex,tmpCellIndex=infoRow[colIndex].cellIndex,key=tmpRowIndex+"_"+tmpCellIndex;if(cacheMap[key]){continue}cacheMap[key]=1;cell=this.getCell(tmpRowIndex,tmpCellIndex);deleteTds.push(cell)}var mergeTds=[];utils.each(deleteTds,function(td){if(td.rowSpan==1){td.parentNode.removeChild(td)}else{mergeTds.push(td)}});utils.each(mergeTds,function(td){td.rowSpan--});row.parentNode.removeChild(row);this.update()},insertCol:function(colIndex,sourceCell,defaultValue){var rowsNum=this.rowsNum,rowIndex=0,tableRow,cell,backWidth=parseInt((this.table.offsetWidth-(this.colsNum+1)*20-(this.colsNum+1))/(this.colsNum+1),10),isInsertTitleCol=typeof sourceCell=="string"&&sourceCell.toUpperCase()=="TH";function replaceTdToTh(rowIndex,cell,tableRow){if(rowIndex==0){var th=cell.nextSibling||cell.previousSibling;if(th.tagName=="TH"){th=cell.ownerDocument.createElement("th");th.appendChild(cell.firstChild);tableRow.insertBefore(th,cell);domUtils.remove(cell)}}else{if(cell.tagName=="TH"){var td=cell.ownerDocument.createElement("td");td.appendChild(cell.firstChild);tableRow.insertBefore(td,cell);domUtils.remove(cell)}}}var preCell;if(colIndex==0||colIndex==this.colsNum){for(;rowIndex<rowsNum;rowIndex++){tableRow=this.table.rows[rowIndex];preCell=tableRow.cells[colIndex==0?colIndex:tableRow.cells.length];cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);cell.setAttribute("vAlign",cell.getAttribute("vAlign"));preCell&&cell.setAttribute("width",preCell.getAttribute("width"));if(!colIndex){tableRow.insertBefore(cell,tableRow.cells[0])}else{domUtils.insertAfter(tableRow.cells[tableRow.cells.length-1],cell)}if(!isInsertTitleCol){replaceTdToTh(rowIndex,cell,tableRow)}}}else{for(;rowIndex<rowsNum;rowIndex++){var cellInfo=this.indexTable[rowIndex][colIndex];if(cellInfo.colIndex<colIndex){cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);cell.colSpan=cellInfo.colSpan+1}else{tableRow=this.table.rows[rowIndex];preCell=tableRow.cells[cellInfo.cellIndex];cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);cell.setAttribute("vAlign",cell.getAttribute("vAlign"));preCell&&cell.setAttribute("width",preCell.getAttribute("width"));preCell?tableRow.insertBefore(cell,preCell):tableRow.appendChild(cell)}if(!isInsertTitleCol){replaceTdToTh(rowIndex,cell,tableRow)}}}this.update();this.updateWidth(backWidth,defaultValue||{tdPadding:10,tdBorder:1})},updateWidth:function(width,defaultValue){var table=this.table,tmpWidth=UETable.getWidth(table)-defaultValue.tdPadding*2-defaultValue.tdBorder+width;if(tmpWidth<table.ownerDocument.body.offsetWidth){table.setAttribute("width",tmpWidth);return}var tds=domUtils.getElementsByTagName(this.table,"td th");utils.each(tds,function(td){td.setAttribute("width",width)})},deleteCol:function(colIndex){var indexTable=this.indexTable,tableRows=this.table.rows,backTableWidth=this.table.getAttribute("width"),backTdWidth=0,rowsNum=this.rowsNum,cacheMap={};for(var rowIndex=0;rowIndex<rowsNum;){var infoRow=indexTable[rowIndex],cellInfo=infoRow[colIndex],key=cellInfo.rowIndex+"_"+cellInfo.colIndex;if(cacheMap[key]){continue}cacheMap[key]=1;var cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);if(!backTdWidth){backTdWidth=cell&&parseInt(cell.offsetWidth/cell.colSpan,10).toFixed(0)}if(cell.colSpan>1){cell.colSpan--}else{tableRows[rowIndex].deleteCell(cellInfo.cellIndex)}rowIndex+=cellInfo.rowSpan||1}this.table.setAttribute("width",backTableWidth-backTdWidth);this.update()},splitToCells:function(cell){var me=this,cells=this.splitToRows(cell);utils.each(cells,function(cell){me.splitToCols(cell)})},splitToRows:function(cell){var cellInfo=this.getCellInfo(cell),rowIndex=cellInfo.rowIndex,colIndex=cellInfo.colIndex,results=[];cell.rowSpan=1;results.push(cell);for(var i=rowIndex,endRow=rowIndex+cellInfo.rowSpan;i<endRow;i++){if(i==rowIndex){continue}var tableRow=this.table.rows[i],tmpCell=tableRow.insertCell(colIndex-this.getPreviewMergedCellsNum(i,colIndex));tmpCell.colSpan=cellInfo.colSpan;this.setCellContent(tmpCell);tmpCell.setAttribute("vAlign",cell.getAttribute("vAlign"));tmpCell.setAttribute("align",cell.getAttribute("align"));if(cell.style.cssText){tmpCell.style.cssText=cell.style.cssText}results.push(tmpCell)}this.update();return results},getPreviewMergedCellsNum:function(rowIndex,colIndex){var indexRow=this.indexTable[rowIndex],num=0;for(var i=0;i<colIndex;){var colSpan=indexRow[i].colSpan,tmpRowIndex=indexRow[i].rowIndex;num+=(colSpan-(tmpRowIndex==rowIndex?1:0));i+=colSpan}return num},splitToCols:function(cell){var backWidth=(cell.offsetWidth/cell.colSpan-22).toFixed(0),cellInfo=this.getCellInfo(cell),rowIndex=cellInfo.rowIndex,colIndex=cellInfo.colIndex,results=[];cell.colSpan=1;cell.setAttribute("width",backWidth);results.push(cell);for(var j=colIndex,endCol=colIndex+cellInfo.colSpan;j<endCol;j++){if(j==colIndex){continue}var tableRow=this.table.rows[rowIndex],tmpCell=tableRow.insertCell(this.indexTable[rowIndex][j].cellIndex+1);tmpCell.rowSpan=cellInfo.rowSpan;this.setCellContent(tmpCell);tmpCell.setAttribute("vAlign",cell.getAttribute("vAlign"));tmpCell.setAttribute("align",cell.getAttribute("align"));tmpCell.setAttribute("width",backWidth);if(cell.style.cssText){tmpCell.style.cssText=cell.style.cssText}if(cell.tagName=="TH"){var th=cell.ownerDocument.createElement("th");th.appendChild(tmpCell.firstChild);th.setAttribute("vAlign",cell.getAttribute("vAlign"));th.rowSpan=tmpCell.rowSpan;tableRow.insertBefore(th,tmpCell);domUtils.remove(tmpCell)}results.push(tmpCell)}this.update();return results},isLastCell:function(cell,rowsNum,colsNum){rowsNum=rowsNum||this.rowsNum;colsNum=colsNum||this.colsNum;var cellInfo=this.getCellInfo(cell);return((cellInfo.rowIndex+cellInfo.rowSpan)==rowsNum)&&((cellInfo.colIndex+cellInfo.colSpan)==colsNum)},getLastCell:function(cells){cells=cells||this.table.getElementsByTagName("td");var firstInfo=this.getCellInfo(cells[0]);var me=this,last=cells[0],tr=last.parentNode,cellsNum=0,cols=0,rows;utils.each(cells,function(cell){if(cell.parentNode==tr){cols+=cell.colSpan||1}cellsNum+=cell.rowSpan*cell.colSpan||1});rows=cellsNum/cols;utils.each(cells,function(cell){if(me.isLastCell(cell,rows,cols)){last=cell;return false}});return last},selectRow:function(rowIndex){var indexRow=this.indexTable[rowIndex],start=this.getCell(indexRow[0].rowIndex,indexRow[0].cellIndex),end=this.getCell(indexRow[this.colsNum-1].rowIndex,indexRow[this.colsNum-1].cellIndex),range=this.getCellsRange(start,end);this.setSelected(range)},selectTable:function(){var tds=this.table.getElementsByTagName("td"),range=this.getCellsRange(tds[0],tds[tds.length-1]);this.setSelected(range)},setBackground:function(cells,value){if(typeof value==="string"){utils.each(cells,function(cell){cell.style.backgroundColor=value})}else{if(typeof value==="object"){value=utils.extend({repeat:true,colorList:["#ddd","#fff"]},value);var rowIndex=this.getCellInfo(cells[0]).rowIndex,count=0,colors=value.colorList,getColor=function(list,index,repeat){return list[index]?list[index]:repeat?list[index%list.length]:""};for(var i=0,cell;cell=cells[i++];){var cellInfo=this.getCellInfo(cell);cell.style.backgroundColor=getColor(colors,((rowIndex+count)==cellInfo.rowIndex)?count:++count,value.repeat)}}}},removeBackground:function(cells){utils.each(cells,function(cell){cell.style.backgroundColor=""})}};function showError(e){}})();(function(){var UT=UE.UETable,getTableItemsByRange=function(editor){return UT.getTableItemsByRange(editor)},getUETableBySelected=function(editor){return UT.getUETableBySelected(editor)},getDefaultValue=function(editor,table){return UT.getDefaultValue(editor,table)},getUETable=function(tdOrTable){return UT.getUETable(tdOrTable)};UE.commands.inserttable={queryCommandState:function(){return getTableItemsByRange(this).table?-1:0},execCommand:function(cmd,opt){function createTable(opt,tdWidth){var html=[],rowsNum=opt.numRows,colsNum=opt.numCols;for(var r=0;r<rowsNum;r++){html.push("<tr"+(r==0?' class="firstRow"':"")+">");for(var c=0;c<colsNum;c++){html.push('<td width="'+tdWidth+'"  vAlign="'+opt.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>")}html.push("</tr>")}return"<table><tbody>"+html.join("")+"</tbody></table>"}if(!opt){opt=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign})}var me=this;var range=this.selection.getRange(),start=range.startContainer,firstParentBlock=domUtils.findParent(start,function(node){return domUtils.isBlockElm(node)},true)||me.body;var defaultValue=getDefaultValue(me),tableWidth=firstParentBlock.offsetWidth,tdWidth=Math.floor(tableWidth/opt.numCols-defaultValue.tdPadding*2-defaultValue.tdBorder);!opt.tdvalign&&(opt.tdvalign=me.options.tdvalign);me.execCommand("inserthtml",createTable(opt,tdWidth))}};UE.commands.insertparagraphbeforetable={queryCommandState:function(){return getTableItemsByRange(this).cell?0:-1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){var p=this.document.createElement("p");p.innerHTML=browser.ie?"&nbsp;":"<br />";table.parentNode.insertBefore(p,table);this.selection.getRange().setStart(p,0).setCursor()}}};UE.commands.deletetable={queryCommandState:function(){var rng=this.selection.getRange();return domUtils.findParentByTagName(rng.startContainer,"table",true)?0:-1},execCommand:function(cmd,table){var rng=this.selection.getRange();table=table||domUtils.findParentByTagName(rng.startContainer,"table",true);if(table){var next=table.nextSibling;if(!next){next=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});table.parentNode.insertBefore(next,table)}domUtils.remove(table);rng=this.selection.getRange();if(next.nodeType==3){rng.setStartBefore(next)}else{rng.setStart(next,0)}rng.setCursor(false,true);this.fireEvent("tablehasdeleted")}}};UE.commands.cellalign={queryCommandState:function(){return getSelectedArr(this).length?0:-1},execCommand:function(cmd,align){var selectedTds=getSelectedArr(this);if(selectedTds.length){for(var i=0,ci;ci=selectedTds[i++];){ci.setAttribute("align",align)}}}};UE.commands.cellvalign={queryCommandState:function(){return getSelectedArr(this).length?0:-1},execCommand:function(cmd,valign){var selectedTds=getSelectedArr(this);if(selectedTds.length){for(var i=0,ci;ci=selectedTds[i++];){ci.setAttribute("vAlign",valign)}}}};UE.commands.insertcaption={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){return table.getElementsByTagName("caption").length==0?1:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){var caption=this.document.createElement("caption");caption.innerHTML=browser.ie?domUtils.fillChar:"<br/>";table.insertBefore(caption,table.firstChild);var range=this.selection.getRange();range.setStart(caption,0).setCursor()}}};UE.commands.deletecaption={queryCommandState:function(){var rng=this.selection.getRange(),table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){return table.getElementsByTagName("caption").length==0?-1:1}return -1},execCommand:function(){var rng=this.selection.getRange(),table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){domUtils.remove(table.getElementsByTagName("caption")[0]);var range=this.selection.getRange();range.setStart(table.rows[0].cells[0],0).setCursor()}}};UE.commands.inserttitle={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var firstRow=table.rows[0];return firstRow.cells[firstRow.cells.length-1].tagName.toLowerCase()!="th"?0:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){getUETable(table).insertRow(0,"th")}var th=table.getElementsByTagName("th")[0];this.selection.getRange().setStart(th,0).setCursor(false,true)}};UE.commands.deletetitle={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var firstRow=table.rows[0];return firstRow.cells[firstRow.cells.length-1].tagName.toLowerCase()=="th"?0:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){domUtils.remove(table.rows[0])}var td=table.getElementsByTagName("td")[0];this.selection.getRange().setStart(td,0).setCursor(false,true)}};UE.commands.inserttitlecol={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var lastRow=table.rows[table.rows.length-1];return lastRow.getElementsByTagName("th").length?-1:0}return -1},execCommand:function(cmd){var table=getTableItemsByRange(this).table;if(table){getUETable(table).insertCol(0,"th")}resetTdWidth(table,this);var th=table.getElementsByTagName("th")[0];this.selection.getRange().setStart(th,0).setCursor(false,true)}};UE.commands.deletetitlecol={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var lastRow=table.rows[table.rows.length-1];return lastRow.getElementsByTagName("th").length?0:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){for(var i=0;i<table.rows.length;i++){domUtils.remove(table.rows[i].children[0])}}resetTdWidth(table,this);var td=table.getElementsByTagName("td")[0];this.selection.getRange().setStart(td,0).setCursor(false,true)}};UE.commands.mergeright={queryCommandState:function(cmd){var tableItems=getTableItemsByRange(this),table=tableItems.table,cell=tableItems.cell;if(!table||!cell){return -1}var ut=getUETable(table);if(ut.selectedTds.length){return -1}var cellInfo=ut.getCellInfo(cell),rightColIndex=cellInfo.colIndex+cellInfo.colSpan;if(rightColIndex>=ut.colsNum){return -1}var rightCellInfo=ut.indexTable[cellInfo.rowIndex][rightColIndex],rightCell=table.rows[rightCellInfo.rowIndex].cells[rightCellInfo.cellIndex];if(!rightCell||cell.tagName!=rightCell.tagName){return -1}return(rightCellInfo.rowIndex==cellInfo.rowIndex&&rightCellInfo.rowSpan==cellInfo.rowSpan)?0:-1},execCommand:function(cmd){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.mergeRight(cell);rng.moveToBookmark(bk).select()}};UE.commands.mergedown={queryCommandState:function(cmd){var tableItems=getTableItemsByRange(this),table=tableItems.table,cell=tableItems.cell;if(!table||!cell){return -1}var ut=getUETable(table);if(ut.selectedTds.length){return -1}var cellInfo=ut.getCellInfo(cell),downRowIndex=cellInfo.rowIndex+cellInfo.rowSpan;if(downRowIndex>=ut.rowsNum){return -1}var downCellInfo=ut.indexTable[downRowIndex][cellInfo.colIndex],downCell=table.rows[downCellInfo.rowIndex].cells[downCellInfo.cellIndex];if(!downCell||cell.tagName!=downCell.tagName){return -1}return(downCellInfo.colIndex==cellInfo.colIndex&&downCellInfo.colSpan==cellInfo.colSpan)?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.mergeDown(cell);rng.moveToBookmark(bk).select()}};UE.commands.mergecells={queryCommandState:function(){return getUETableBySelected(this)?0:-1},execCommand:function(){var ut=getUETableBySelected(this);if(ut&&ut.selectedTds.length){var cell=ut.selectedTds[0];ut.mergeRange();var rng=this.selection.getRange();if(domUtils.isEmptyBlock(cell)){rng.setStart(cell,0).collapse(true)}else{rng.selectNodeContents(cell)}rng.select()}}};UE.commands.insertrow={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&(cell.tagName=="TD"||(cell.tagName=="TH"&&tableItems.tr!==tableItems.table.rows[0]))&&getUETable(tableItems.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var tableItems=getTableItemsByRange(this),cell=tableItems.cell,table=tableItems.table,ut=getUETable(table),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertRow(cellInfo.rowIndex,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endRowIndex-range.beginRowIndex+1;i<len;i++){ut.insertRow(range.beginRowIndex,cell)}}rng.moveToBookmark(bk).select();if(table.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",table)}}};UE.commands.insertrownext={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&(cell.tagName=="TD")&&getUETable(tableItems.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var tableItems=getTableItemsByRange(this),cell=tableItems.cell,table=tableItems.table,ut=getUETable(table),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertRow(cellInfo.rowIndex+cellInfo.rowSpan,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endRowIndex-range.beginRowIndex+1;i<len;i++){ut.insertRow(range.endRowIndex+1,cell)}}rng.moveToBookmark(bk).select();if(table.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",table)}}};UE.commands.deleterow={queryCommandState:function(){var tableItems=getTableItemsByRange(this);return tableItems.cell?0:-1},execCommand:function(){var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),cellsRange=ut.cellsRange,cellInfo=ut.getCellInfo(cell),preCell=ut.getVSideCell(cell),nextCell=ut.getVSideCell(cell,true),rng=this.selection.getRange();if(utils.isEmptyObject(cellsRange)){ut.deleteRow(cellInfo.rowIndex)}else{for(var i=cellsRange.beginRowIndex;i<cellsRange.endRowIndex+1;i++){ut.deleteRow(cellsRange.beginRowIndex)}}var table=ut.table;if(!table.getElementsByTagName("td").length){var nextSibling=table.nextSibling;domUtils.remove(table);if(nextSibling){rng.setStart(nextSibling,0).setCursor(false,true)}}else{if(cellInfo.rowSpan==1||cellInfo.rowSpan==cellsRange.endRowIndex-cellsRange.beginRowIndex+1){if(nextCell||preCell){rng.selectNodeContents(nextCell||preCell).setCursor(false,true)}}else{var newCell=ut.getCell(cellInfo.rowIndex,ut.indexTable[cellInfo.rowIndex][cellInfo.colIndex].cellIndex);if(newCell){rng.selectNodeContents(newCell).setCursor(false,true)}}}if(table.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",table)}}};UE.commands.insertcol={queryCommandState:function(cmd){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&(cell.tagName=="TD"||(cell.tagName=="TH"&&cell!==tableItems.tr.cells[0]))&&getUETable(tableItems.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(cmd){var rng=this.selection.getRange(),bk=rng.createBookmark(true);if(this.queryCommandState(cmd)==-1){return}var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertCol(cellInfo.colIndex,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endColIndex-range.beginColIndex+1;i<len;i++){ut.insertCol(range.beginColIndex,cell)}}rng.moveToBookmark(bk).select(true)}};UE.commands.insertcolnext={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&getUETable(tableItems.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertCol(cellInfo.colIndex+cellInfo.colSpan,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endColIndex-range.beginColIndex+1;i<len;i++){ut.insertCol(range.endColIndex+1,cell)}}rng.moveToBookmark(bk).select()}};UE.commands.deletecol={queryCommandState:function(){var tableItems=getTableItemsByRange(this);return tableItems.cell?0:-1},execCommand:function(){var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),range=ut.cellsRange,cellInfo=ut.getCellInfo(cell),preCell=ut.getHSideCell(cell),nextCell=ut.getHSideCell(cell,true);if(utils.isEmptyObject(range)){ut.deleteCol(cellInfo.colIndex)}else{for(var i=range.beginColIndex;i<range.endColIndex+1;i++){ut.deleteCol(range.beginColIndex)}}var table=ut.table,rng=this.selection.getRange();if(!table.getElementsByTagName("td").length){var nextSibling=table.nextSibling;domUtils.remove(table);if(nextSibling){rng.setStart(nextSibling,0).setCursor(false,true)}}else{if(domUtils.inDoc(cell,this.document)){rng.setStart(cell,0).setCursor(false,true)}else{if(nextCell&&domUtils.inDoc(nextCell,this.document)){rng.selectNodeContents(nextCell).setCursor(false,true)}else{if(preCell&&domUtils.inDoc(preCell,this.document)){rng.selectNodeContents(preCell).setCursor(true,true)}}}}}};UE.commands.splittocells={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;if(!cell){return -1}var ut=getUETable(tableItems.table);if(ut.selectedTds.length>0){return -1}return cell&&(cell.colSpan>1||cell.rowSpan>1)?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.splitToCells(cell);rng.moveToBookmark(bk).select()}};UE.commands.splittorows={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;if(!cell){return -1}var ut=getUETable(tableItems.table);if(ut.selectedTds.length>0){return -1}return cell&&cell.rowSpan>1?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.splitToRows(cell);rng.moveToBookmark(bk).select()}};UE.commands.splittocols={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;if(!cell){return -1}var ut=getUETable(tableItems.table);if(ut.selectedTds.length>0){return -1}return cell&&cell.colSpan>1?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.splitToCols(cell);rng.moveToBookmark(bk).select()}};UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd){var tableItems=getTableItemsByRange(this),table=tableItems.table;if(table){if(cmd=="adaptbywindow"){resetTdWidth(table,this)}else{var cells=domUtils.getElementsByTagName(table,"td th");utils.each(cells,function(cell){cell.removeAttribute("width")});table.removeAttribute("width")}}}};UE.commands.averagedistributecol={queryCommandState:function(){var ut=getUETableBySelected(this);if(!ut){return -1}return ut.isFullRow()||ut.isFullCol()?0:-1},execCommand:function(cmd){var me=this,ut=getUETableBySelected(me);function getAverageWidth(){var tb=ut.table,averageWidth,sumWidth=0,colsNum=0,tbAttr=getDefaultValue(me,tb);if(ut.isFullRow()){sumWidth=tb.offsetWidth;colsNum=ut.colsNum}else{var begin=ut.cellsRange.beginColIndex,end=ut.cellsRange.endColIndex,node;for(var i=begin;i<=end;){node=ut.selectedTds[i];sumWidth+=node.offsetWidth;i+=node.colSpan;colsNum+=1}}averageWidth=Math.ceil(sumWidth/colsNum)-tbAttr.tdBorder*2-tbAttr.tdPadding*2;return averageWidth}function setAverageWidth(averageWidth){utils.each(domUtils.getElementsByTagName(ut.table,"th"),function(node){node.setAttribute("width","")});var cells=ut.isFullRow()?domUtils.getElementsByTagName(ut.table,"td"):ut.selectedTds;utils.each(cells,function(node){if(node.colSpan==1){node.setAttribute("width",averageWidth)}})}if(ut&&ut.selectedTds.length){setAverageWidth(getAverageWidth())}}};UE.commands.averagedistributerow={queryCommandState:function(){var ut=getUETableBySelected(this);if(!ut){return -1}if(ut.selectedTds&&/th/ig.test(ut.selectedTds[0].tagName)){return -1}return ut.isFullRow()||ut.isFullCol()?0:-1},execCommand:function(cmd){var me=this,ut=getUETableBySelected(me);function getAverageHeight(){var averageHeight,rowNum,sumHeight=0,tb=ut.table,tbAttr=getDefaultValue(me,tb),tdpadding=parseInt(domUtils.getComputedStyle(tb.getElementsByTagName("td")[0],"padding-top"));if(ut.isFullCol()){var captionArr=domUtils.getElementsByTagName(tb,"caption"),thArr=domUtils.getElementsByTagName(tb,"th"),captionHeight,thHeight;if(captionArr.length>0){captionHeight=captionArr[0].offsetHeight}if(thArr.length>0){thHeight=thArr[0].offsetHeight}sumHeight=tb.offsetHeight-(captionHeight||0)-(thHeight||0);rowNum=thArr.length==0?ut.rowsNum:(ut.rowsNum-1)}else{var begin=ut.cellsRange.beginRowIndex,end=ut.cellsRange.endRowIndex,count=0,trs=domUtils.getElementsByTagName(tb,"tr");for(var i=begin;i<=end;i++){sumHeight+=trs[i].offsetHeight;count+=1}rowNum=count}if(browser.ie&&browser.version<9){averageHeight=Math.ceil(sumHeight/rowNum)}else{averageHeight=Math.ceil(sumHeight/rowNum)-tbAttr.tdBorder*2-tdpadding*2}return averageHeight}function setAverageHeight(averageHeight){var cells=ut.isFullCol()?domUtils.getElementsByTagName(ut.table,"td"):ut.selectedTds;utils.each(cells,function(node){if(node.rowSpan==1){node.setAttribute("height",averageHeight)}})}if(ut&&ut.selectedTds.length){setAverageHeight(getAverageHeight())}}};UE.commands.cellalignment={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,data){var me=this,ut=getUETableBySelected(me);if(!ut){var start=me.selection.getStart(),cell=start&&domUtils.findParentByTagName(start,["td","th","caption"],true);if(!/caption/ig.test(cell.tagName)){domUtils.setAttributes(cell,data)}else{cell.style.textAlign=data.align;cell.style.verticalAlign=data.vAlign}me.selection.getRange().setCursor(true)}else{utils.each(ut.selectedTds,function(cell){domUtils.setAttributes(cell,data)})}},queryCommandValue:function(cmd){var activeMenuCell=getTableItemsByRange(this).cell;if(!activeMenuCell){activeMenuCell=getSelectedArr(this)[0]}if(!activeMenuCell){return null}else{var cells=UE.UETable.getUETable(activeMenuCell).selectedTds;!cells.length&&(cells=activeMenuCell);return UE.UETable.getTableCellAlignState(cells)}}};UE.commands.tablealignment={queryCommandState:function(){if(browser.ie&&browser.version<8){return -1}return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,value){var me=this,start=me.selection.getStart(),table=start&&domUtils.findParentByTagName(start,["table"],true);if(table){table.setAttribute("align",value)}}};UE.commands.edittable={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,color){var rng=this.selection.getRange(),table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){var arr=domUtils.getElementsByTagName(table,"td").concat(domUtils.getElementsByTagName(table,"th"),domUtils.getElementsByTagName(table,"caption"));utils.each(arr,function(node){node.style.borderColor=color})}}};UE.commands.edittd={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,bkColor){var me=this,ut=getUETableBySelected(me);if(!ut){var start=me.selection.getStart(),cell=start&&domUtils.findParentByTagName(start,["td","th","caption"],true);if(cell){cell.style.backgroundColor=bkColor}}else{utils.each(ut.selectedTds,function(cell){cell.style.backgroundColor=bkColor})}}};UE.commands.settablebackground={queryCommandState:function(){return getSelectedArr(this).length>1?0:-1},execCommand:function(cmd,value){var cells,ut;cells=getSelectedArr(this);ut=getUETable(cells[0]);ut.setBackground(cells,value)}};UE.commands.cleartablebackground={queryCommandState:function(){var cells=getSelectedArr(this);if(!cells.length){return -1}for(var i=0,cell;cell=cells[i++];){if(cell.style.backgroundColor!==""){return 0}}return -1},execCommand:function(){var cells=getSelectedArr(this),ut=getUETable(cells[0]);ut.removeBackground(cells)}};UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(cmd){var table=getTableItemsByRange(this).table;if(!table){return -1}var interlaced=table.getAttribute("interlaced");if(cmd=="interlacetable"){return(interlaced==="enabled")?-1:0}else{return(!interlaced||interlaced==="disabled")?-1:0}},execCommand:function(cmd,classList){var table=getTableItemsByRange(this).table;if(cmd=="interlacetable"){table.setAttribute("interlaced","enabled");this.fireEvent("interlacetable",table,classList)}else{table.setAttribute("interlaced","disabled");this.fireEvent("uninterlacetable",table)}}};UE.commands.setbordervisible={queryCommandState:function(cmd){var table=getTableItemsByRange(this).table;if(!table){return -1}return 0},execCommand:function(){var table=getTableItemsByRange(this).table;utils.each(domUtils.getElementsByTagName(table,"td"),function(td){td.style.borderWidth="1px";td.style.borderStyle="solid"})}};function resetTdWidth(table,editor){var tds=domUtils.getElementsByTagName(table,"td th");utils.each(tds,function(td){td.removeAttribute("width")});table.setAttribute("width",getTableWidth(editor,true,getDefaultValue(editor,table)));var tdsWidths=[];setTimeout(function(){utils.each(tds,function(td){(td.colSpan==1)&&tdsWidths.push(td.offsetWidth)});utils.each(tds,function(td,i){(td.colSpan==1)&&td.setAttribute("width",tdsWidths[i]+"")})},0)}function getTableWidth(editor,needIEHack,defaultValue){var body=editor.body;return body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(editor.options.offsetWidth||0)}function getSelectedArr(editor){var cell=getTableItemsByRange(editor).cell;if(cell){var ut=getUETable(cell);return ut.selectedTds.length?ut.selectedTds:[cell]}else{return[]}}})();UE.plugins.table=function(){var me=this,tabTimer=null,tableDragTimer=null,tableResizeTimer=null,cellMinWidth=5,isInResizeBuffer=false,cellBorderWidth=5,offsetOfTableCell=10,singleClickState=0,userActionStatus=null,dblclickTime=360,UT=UE.UETable,getUETable=function(tdOrTable){return UT.getUETable(tdOrTable)},getUETableBySelected=function(editor){return UT.getUETableBySelected(editor)},getDefaultValue=function(editor,table){return UT.getDefaultValue(editor,table)},removeSelectedClass=function(cells){return UT.removeSelectedClass(cells)};function showError(e){}me.ready(function(){var me=this;var orgGetText=me.selection.getText;me.selection.getText=function(){var table=getUETableBySelected(me);if(table){var str="";utils.each(table.selectedTds,function(td){str+=td[browser.ie?"innerText":"textContent"]});return str}else{return orgGetText.call(me.selection)}}});var startTd=null,currentTd=null,onDrag="",onBorder=false,dragButton=null,dragOver=false,dragLine=null,dragTd=null;var mousedown=false,needIEHack=true;me.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:me.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:false,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});me.getUETable=getUETable;var commands={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};me.ready(function(){utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",me.document);var tableCopyList,isFullCol,isFullRow;me.addListener("keydown",function(cmd,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(keyCode==8){var ut=getUETableBySelected(me);if(ut&&ut.selectedTds.length){if(ut.isFullCol()){me.execCommand("deletecol")}else{if(ut.isFullRow()){me.execCommand("deleterow")}else{me.fireEvent("delcells")}}domUtils.preventDefault(evt)}var caption=domUtils.findParentByTagName(me.selection.getStart(),"caption",true),range=me.selection.getRange();if(range.collapsed&&caption&&isEmptyBlock(caption)){me.fireEvent("saveScene");var table=caption.parentNode;domUtils.remove(caption);if(table){range.setStart(table.rows[0].cells[0],0).setCursor(false,true)}me.fireEvent("saveScene")}}if(keyCode==46){ut=getUETableBySelected(me);if(ut){me.fireEvent("saveScene");for(var i=0,ci;ci=ut.selectedTds[i++];){domUtils.fillNode(me.document,ci)}me.fireEvent("saveScene");domUtils.preventDefault(evt)}}if(keyCode==13){var rng=me.selection.getRange(),caption=domUtils.findParentByTagName(rng.startContainer,"caption",true);if(caption){var table=domUtils.findParentByTagName(caption,"table");if(!rng.collapsed){rng.deleteContents();me.fireEvent("saveScene")}else{if(caption){rng.setStart(table.rows[0].cells[0],0).setCursor(false,true)}}domUtils.preventDefault(evt);return}if(rng.collapsed){var table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){var cell=table.rows[0].cells[0],start=domUtils.findParentByTagName(me.selection.getStart(),["td","th"],true),preNode=table.previousSibling;if(cell===start&&(!preNode||preNode.nodeType==1&&preNode.tagName=="TABLE")&&domUtils.isStartInblock(rng)){var first=domUtils.findParent(me.selection.getStart(),function(n){return domUtils.isBlockElm(n)},true);if(first&&(/t(h|d)/i.test(first.tagName)||first===start.firstChild)){me.execCommand("insertparagraphbeforetable");domUtils.preventDefault(evt)}}}}}if((evt.ctrlKey||evt.metaKey)&&evt.keyCode=="67"){tableCopyList=null;var ut=getUETableBySelected(me);if(ut){var tds=ut.selectedTds;isFullCol=ut.isFullCol();isFullRow=ut.isFullRow();tableCopyList=[[ut.cloneCell(tds[0],null,true)]];for(var i=1,ci;ci=tds[i];i++){if(ci.parentNode!==tds[i-1].parentNode){tableCopyList.push([ut.cloneCell(ci,null,true)])}else{tableCopyList[tableCopyList.length-1].push(ut.cloneCell(ci,null,true))}}}}});me.addListener("tablehasdeleted",function(){toggleDraggableState(this,false,"",null);if(dragButton){domUtils.remove(dragButton)}});me.addListener("beforepaste",function(cmd,html){var me=this;var rng=me.selection.getRange();if(domUtils.findParentByTagName(rng.startContainer,"caption",true)){var div=me.document.createElement("div");div.innerHTML=html.html;html.html=div[browser.ie9below?"innerText":"textContent"];return}var table=getUETableBySelected(me);if(tableCopyList){me.fireEvent("saveScene");var rng=me.selection.getRange();var td=domUtils.findParentByTagName(rng.startContainer,["td","th"],true),tmpNode,preNode;if(td){var ut=getUETable(td);if(isFullRow){var rowIndex=ut.getCellInfo(td).rowIndex;if(td.tagName=="TH"){rowIndex++}for(var i=0,ci;ci=tableCopyList[i++];){var tr=ut.insertRow(rowIndex++,"td");for(var j=0,cj;cj=ci[j];j++){var cell=tr.cells[j];if(!cell){cell=tr.insertCell(j)}cell.innerHTML=cj.innerHTML;cj.getAttribute("width")&&cell.setAttribute("width",cj.getAttribute("width"));cj.getAttribute("vAlign")&&cell.setAttribute("vAlign",cj.getAttribute("vAlign"));cj.getAttribute("align")&&cell.setAttribute("align",cj.getAttribute("align"));cj.style.cssText&&(cell.style.cssText=cj.style.cssText)}for(var j=0,cj;cj=tr.cells[j];j++){if(!ci[j]){break}cj.innerHTML=ci[j].innerHTML;ci[j].getAttribute("width")&&cj.setAttribute("width",ci[j].getAttribute("width"));ci[j].getAttribute("vAlign")&&cj.setAttribute("vAlign",ci[j].getAttribute("vAlign"));ci[j].getAttribute("align")&&cj.setAttribute("align",ci[j].getAttribute("align"));ci[j].style.cssText&&(cj.style.cssText=ci[j].style.cssText)}}}else{if(isFullCol){cellInfo=ut.getCellInfo(td);var maxColNum=0;for(var j=0,ci=tableCopyList[0],cj;cj=ci[j++];){maxColNum+=cj.colSpan||1}me.__hasEnterExecCommand=true;for(i=0;i<maxColNum;i++){me.execCommand("insertcol")}me.__hasEnterExecCommand=false;td=ut.table.rows[0].cells[cellInfo.cellIndex];if(td.tagName=="TH"){td=ut.table.rows[1].cells[cellInfo.cellIndex]}}for(var i=0,ci;ci=tableCopyList[i++];){tmpNode=td;for(var j=0,cj;cj=ci[j++];){if(td){td.innerHTML=cj.innerHTML;cj.getAttribute("width")&&td.setAttribute("width",cj.getAttribute("width"));cj.getAttribute("vAlign")&&td.setAttribute("vAlign",cj.getAttribute("vAlign"));cj.getAttribute("align")&&td.setAttribute("align",cj.getAttribute("align"));cj.style.cssText&&(td.style.cssText=cj.style.cssText);preNode=td;td=td.nextSibling}else{var cloneTd=cj.cloneNode(true);domUtils.removeAttributes(cloneTd,["class","rowSpan","colSpan"]);preNode.parentNode.appendChild(cloneTd)}}td=ut.getNextCell(tmpNode,true,true);if(!tableCopyList[i]){break}if(!td){var cellInfo=ut.getCellInfo(tmpNode);ut.table.insertRow(ut.table.rows.length);ut.update();td=ut.getVSideCell(tmpNode,true)}}}ut.update()}else{table=me.document.createElement("table");for(var i=0,ci;ci=tableCopyList[i++];){var tr=table.insertRow(table.rows.length);for(var j=0,cj;cj=ci[j++];){cloneTd=UT.cloneCell(cj,null,true);domUtils.removeAttributes(cloneTd,["class"]);tr.appendChild(cloneTd)}if(j==2&&cloneTd.rowSpan>1){cloneTd.rowSpan=1}}var defaultValue=getDefaultValue(me),width=me.body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(me.body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(me.options.offsetWidth||0);me.execCommand("insertHTML","<table  "+(isFullCol&&isFullRow?'width="'+width+'"':"")+">"+table.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}me.fireEvent("contentchange");me.fireEvent("saveScene");html.html="";return true}else{var div=me.document.createElement("div"),tables;div.innerHTML=html.html;tables=div.getElementsByTagName("table");if(domUtils.findParentByTagName(me.selection.getStart(),"table")){utils.each(tables,function(t){domUtils.remove(t)});if(domUtils.findParentByTagName(me.selection.getStart(),"caption",true)){div.innerHTML=div[browser.ie?"innerText":"textContent"]}}else{utils.each(tables,function(table){removeStyleSize(table,true);domUtils.removeAttributes(table,["style","border"]);utils.each(domUtils.getElementsByTagName(table,"td"),function(td){if(isEmptyBlock(td)){domUtils.fillNode(me.document,td)}removeStyleSize(td,true)})})}html.html=div.innerHTML}});me.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(me.body,"table"),function(table){if(table.offsetWidth>me.body.offsetWidth){var defaultValue=getDefaultValue(me,table);table.style.width=me.body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(me.body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(me.options.offsetWidth||0)+"px"}})});me.addListener("blur",function(){tableCopyList=null});var timer;me.addListener("keydown",function(){clearTimeout(timer);timer=setTimeout(function(){var rng=me.selection.getRange(),cell=domUtils.findParentByTagName(rng.startContainer,["th","td"],true);if(cell){var table=cell.parentNode.parentNode.parentNode;if(table.offsetWidth>table.getAttribute("width")){cell.style.wordBreak="break-all"}}},100)});me.addListener("selectionchange",function(){toggleDraggableState(me,false,"",null)});me.addListener("contentchange",function(){var me=this;hideDragLine(me);if(getUETableBySelected(me)){return}var rng=me.selection.getRange();var start=rng.startContainer;start=domUtils.findParentByTagName(start,["td","th"],true);utils.each(domUtils.getElementsByTagName(me.document,"table"),function(table){if(me.fireEvent("excludetable",table)===true){return}table.ueTable=new UT(table);table.onmouseover=function(){me.fireEvent("tablemouseover",table)};table.onmousemove=function(){me.fireEvent("tablemousemove",table);me.options.tableDragable&&toggleDragButton(true,this,me);utils.defer(function(){me.fireEvent("contentchange",50)},true)};table.onmouseout=function(){me.fireEvent("tablemouseout",table);toggleDraggableState(me,false,"",null);hideDragLine(me)};table.onclick=function(evt){evt=me.window.event||evt;var target=getParentTdOrTh(evt.target||evt.srcElement);if(!target){return}var ut=getUETable(target),table=ut.table,cellInfo=ut.getCellInfo(target),cellsRange,rng=me.selection.getRange();if(inTableSide(table,target,evt,true)){var endTdCol=ut.getCell(ut.indexTable[ut.rowsNum-1][cellInfo.colIndex].rowIndex,ut.indexTable[ut.rowsNum-1][cellInfo.colIndex].cellIndex);if(evt.shiftKey&&ut.selectedTds.length){if(ut.selectedTds[0]!==endTdCol){cellsRange=ut.getCellsRange(ut.selectedTds[0],endTdCol);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdCol).select()}}else{if(target!==endTdCol){cellsRange=ut.getCellsRange(target,endTdCol);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdCol).select()}}return}if(inTableSide(table,target,evt)){var endTdRow=ut.getCell(ut.indexTable[cellInfo.rowIndex][ut.colsNum-1].rowIndex,ut.indexTable[cellInfo.rowIndex][ut.colsNum-1].cellIndex);if(evt.shiftKey&&ut.selectedTds.length){if(ut.selectedTds[0]!==endTdRow){cellsRange=ut.getCellsRange(ut.selectedTds[0],endTdRow);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdRow).select()}}else{if(target!==endTdRow){cellsRange=ut.getCellsRange(target,endTdRow);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdRow).select()}}}}});switchBorderColor(me,true)});domUtils.on(me.document,"mousemove",mouseMoveEvent);domUtils.on(me.document,"mouseout",function(evt){var target=evt.target||evt.srcElement;if(target.tagName=="TABLE"){toggleDraggableState(me,false,"",null)}});me.addListener("interlacetable",function(type,table,classList){if(!table){return}var me=this,rows=table.rows,len=rows.length,getClass=function(list,index,repeat){return list[index]?list[index]:repeat?list[index%list.length]:""};for(var i=0;i<len;i++){rows[i].className=getClass(classList||me.options.classList,i,true)}});me.addListener("uninterlacetable",function(type,table){if(!table){return}var me=this,rows=table.rows,classList=me.options.classList,len=rows.length;for(var i=0;i<len;i++){domUtils.removeClasses(rows[i],classList)}});me.addListener("mousedown",mouseDownEvent);me.addListener("mouseup",mouseUpEvent);domUtils.on(me.body,"dragstart",function(evt){mouseUpEvent.call(me,"dragstart",evt)});me.addOutputRule(function(root){utils.each(root.getNodesByTagName("div"),function(n){if(n.getAttr("id")=="ue_tableDragLine"){n.parentNode.removeChild(n)}})});var currentRowIndex=0;me.addListener("mousedown",function(){currentRowIndex=0});me.addListener("tabkeydown",function(){var range=this.selection.getRange(),common=range.getCommonAncestor(true,true),table=domUtils.findParentByTagName(common,"table");if(table){if(domUtils.findParentByTagName(common,"caption",true)){var cell=domUtils.getElementsByTagName(table,"th td");if(cell&&cell.length){range.setStart(cell[0],0).setCursor(false,true)}}else{var cell=domUtils.findParentByTagName(common,["td","th"],true),ua=getUETable(cell);currentRowIndex=cell.rowSpan>1?currentRowIndex:ua.getCellInfo(cell).rowIndex;var nextCell=ua.getTabNextCell(cell,currentRowIndex);if(nextCell){if(isEmptyBlock(nextCell)){range.setStart(nextCell,0).setCursor(false,true)}else{range.selectNodeContents(nextCell).select()}}else{me.fireEvent("saveScene");me.__hasEnterExecCommand=true;this.execCommand("insertrownext");me.__hasEnterExecCommand=false;range=this.selection.getRange();range.setStart(table.rows[table.rows.length-1].cells[0],0).setCursor();me.fireEvent("saveScene")}}return true}});browser.ie&&me.addListener("selectionchange",function(){toggleDraggableState(this,false,"",null)});me.addListener("keydown",function(type,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(keyCode==8||keyCode==46){return}var notCtrlKey=!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey;notCtrlKey&&removeSelectedClass(domUtils.getElementsByTagName(me.body,"td"));var ut=getUETableBySelected(me);if(!ut){return}notCtrlKey&&ut.clearSelected()});me.addListener("beforegetcontent",function(){switchBorderColor(this,false);browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(ci){if(domUtils.isEmptyNode(ci)){ci.innerHTML="&nbsp;"}})});me.addListener("aftergetcontent",function(){switchBorderColor(this,true)});me.addListener("getAllHtml",function(){removeSelectedClass(me.document.getElementsByTagName("td"))});me.addListener("fullscreenchanged",function(type,fullscreen){if(!fullscreen){var ratio=this.body.offsetWidth/document.body.offsetWidth,tables=domUtils.getElementsByTagName(this.body,"table");utils.each(tables,function(table){if(table.offsetWidth<me.body.offsetWidth){return false}var tds=domUtils.getElementsByTagName(table,"td"),backWidths=[];utils.each(tds,function(td){backWidths.push(td.offsetWidth)});for(var i=0,td;td=tds[i];i++){td.setAttribute("width",Math.floor(backWidths[i]*ratio))}table.setAttribute("width",Math.floor(getTableWidth(me,needIEHack,getDefaultValue(me))))})}});var oldExecCommand=me.execCommand;me.execCommand=function(cmd,datatat){var me=this,args=arguments;cmd=cmd.toLowerCase();var ut=getUETableBySelected(me),tds,range=new dom.Range(me.document),cmdFun=me.commands[cmd]||UE.commands[cmd],result;if(!cmdFun){return}if(ut&&!commands[cmd]&&!cmdFun.notNeedUndo&&!me.__hasEnterExecCommand){me.__hasEnterExecCommand=true;me.fireEvent("beforeexeccommand",cmd);tds=ut.selectedTds;var lastState=-2,lastValue=-2,value,state;for(var i=0,td;td=tds[i];i++){if(isEmptyBlock(td)){range.setStart(td,0).setCursor(false,true)}else{range.selectNode(td).select(true)}state=me.queryCommandState(cmd);value=me.queryCommandValue(cmd);if(state!=-1){if(lastState!==state||lastValue!==value){me._ignoreContentChange=true;result=oldExecCommand.apply(me,arguments);me._ignoreContentChange=false}lastState=me.queryCommandState(cmd);lastValue=me.queryCommandValue(cmd);if(domUtils.isEmptyBlock(td)){domUtils.fillNode(me.document,td)}}}range.setStart(tds[0],0).shrinkBoundary(true).setCursor(false,true);me.fireEvent("contentchange");me.fireEvent("afterexeccommand",cmd);me.__hasEnterExecCommand=false;me._selectionChange()}else{result=oldExecCommand.apply(me,arguments)}return result}});function removeStyleSize(obj,replaceToProperty){removeStyle(obj,"width",true);removeStyle(obj,"height",true)}function removeStyle(obj,styleName,replaceToProperty){if(obj.style[styleName]){replaceToProperty&&obj.setAttribute(styleName,parseInt(obj.style[styleName],10));obj.style[styleName]=""}}function getParentTdOrTh(ele){if(ele.tagName=="TD"||ele.tagName=="TH"){return ele}var td;if(td=domUtils.findParentByTagName(ele,"td",true)||domUtils.findParentByTagName(ele,"th",true)){return td}return null}function isEmptyBlock(node){var reg=new RegExp(domUtils.fillChar,"g");if(node[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(reg,"").length>0){return 0}for(var n in dtd.$isNotEmpty){if(node.getElementsByTagName(n).length){return 0}}return 1}function mouseCoords(evt){if(evt.pageX||evt.pageY){return{x:evt.pageX,y:evt.pageY}}return{x:evt.clientX+me.document.body.scrollLeft-me.document.body.clientLeft,y:evt.clientY+me.document.body.scrollTop-me.document.body.clientTop}}function mouseMoveEvent(evt){if(isEditorDisabled()){return}try{var target=getParentTdOrTh(evt.target||evt.srcElement),pos;if(isInResizeBuffer){me.body.style.webkitUserSelect="none";if(Math.abs(userActionStatus.x-evt.clientX)>offsetOfTableCell||Math.abs(userActionStatus.y-evt.clientY)>offsetOfTableCell){clearTableDragTimer();isInResizeBuffer=false;singleClickState=0;tableBorderDrag(evt)}}if(onDrag&&dragTd){singleClickState=0;me.body.style.webkitUserSelect="none";me.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();pos=mouseCoords(evt);toggleDraggableState(me,true,onDrag,pos,target);if(onDrag=="h"){dragLine.style.left=getPermissionX(dragTd,evt)+"px"}else{if(onDrag=="v"){dragLine.style.top=getPermissionY(dragTd,evt)+"px"}}return}if(target){if(me.fireEvent("excludetable",target)===true){return}pos=mouseCoords(evt);var state=getRelation(target,pos),table=domUtils.findParentByTagName(target,"table",true);if(inTableSide(table,target,evt,true)){if(me.fireEvent("excludetable",table)===true){return}me.body.style.cursor="url("+me.options.cursorpath+"h.png),pointer"}else{if(inTableSide(table,target,evt)){if(me.fireEvent("excludetable",table)===true){return}me.body.style.cursor="url("+me.options.cursorpath+"v.png),pointer"}else{me.body.style.cursor="text";var curCell=target;if(/\d/.test(state)){state=state.replace(/\d/,"");target=getUETable(target).getPreviewCell(target,state=="v")}toggleDraggableState(me,target?!!state:false,target?state:"",pos,target)}}}else{toggleDragButton(false,table,me)}}catch(e){showError(e)}}var dragButtonTimer;function toggleDragButton(show,table,editor){if(!show){if(dragOver){return}dragButtonTimer=setTimeout(function(){!dragOver&&dragButton&&dragButton.parentNode&&dragButton.parentNode.removeChild(dragButton)},2000)}else{createDragButton(table,editor)}}function createDragButton(table,editor){var pos=domUtils.getXY(table),doc=table.ownerDocument;if(dragButton&&dragButton.parentNode){return dragButton}dragButton=doc.createElement("div");dragButton.contentEditable=false;dragButton.innerHTML="";dragButton.style.cssText="width:15px;height:15px;background-image:url("+editor.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(pos.y-15)+"px;left:"+(pos.x)+"px;";domUtils.unSelectable(dragButton);dragButton.onmouseover=function(evt){dragOver=true};dragButton.onmouseout=function(evt){dragOver=false};domUtils.on(dragButton,"click",function(type,evt){doClick(evt,this)});domUtils.on(dragButton,"dblclick",function(type,evt){doDblClick(evt)});domUtils.on(dragButton,"dragstart",function(type,evt){domUtils.preventDefault(evt)});var timer;function doClick(evt,button){clearTimeout(timer);timer=setTimeout(function(){editor.fireEvent("tableClicked",table,button)},300)}function doDblClick(evt){clearTimeout(timer);var ut=getUETable(table),start=table.rows[0].cells[0],end=ut.getLastCell(),range=ut.getCellsRange(start,end);editor.selection.getRange().setStart(start,0).setCursor(false,true);ut.setSelected(range)}doc.body.appendChild(dragButton)}function inTableSide(table,cell,evt,top){var pos=mouseCoords(evt),state=getRelation(cell,pos);if(top){var caption=table.getElementsByTagName("caption")[0],capHeight=caption?caption.offsetHeight:0;return(state=="v1")&&((pos.y-domUtils.getXY(table).y-capHeight)<8)}else{return(state=="h1")&&((pos.x-domUtils.getXY(table).x)<8)}}function getPermissionX(dragTd,evt){var ut=getUETable(dragTd);if(ut){var preTd=ut.getSameEndPosCells(dragTd,"x")[0],nextTd=ut.getSameStartPosXCells(dragTd)[0],mouseX=mouseCoords(evt).x,left=(preTd?domUtils.getXY(preTd).x:domUtils.getXY(ut.table).x)+20,right=nextTd?domUtils.getXY(nextTd).x+nextTd.offsetWidth-20:(me.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(me.body,"width"),10));left+=cellMinWidth;right-=cellMinWidth;return mouseX<left?left:mouseX>right?right:mouseX}}function getPermissionY(dragTd,evt){try{var top=domUtils.getXY(dragTd).y,mousePosY=mouseCoords(evt).y;return mousePosY<top?top:mousePosY}catch(e){showError(e)}}function toggleDraggableState(editor,draggable,dir,mousePos,cell){try{editor.body.style.cursor=dir=="h"?"col-resize":dir=="v"?"row-resize":"text";if(browser.ie){if(dir&&!mousedown&&!getUETableBySelected(editor)){getDragLine(editor,editor.document);showDragLineAt(dir,cell)}else{hideDragLine(editor)}}onBorder=draggable}catch(e){showError(e)}}function getResizeLineByUETable(){var lineId="_UETableResizeLine",line=this.document.getElementById(lineId);if(!line){line=this.document.createElement("div");line.id=lineId;line.contnetEditable=false;line.setAttribute("unselectable","on");var styles={width:2*cellBorderWidth+1+"px",position:"absolute","z-index":100000,cursor:"col-resize",background:"red",display:"none"};line.onmouseout=function(){this.style.display="none"};utils.extend(line.style,styles);this.document.body.appendChild(line)}return line}function updateResizeLine(cell,uetable){var line=getResizeLineByUETable.call(this),table=uetable.table,styles={top:domUtils.getXY(table).y+"px",left:domUtils.getXY(cell).x+cell.offsetWidth-cellBorderWidth+"px",display:"block",height:table.offsetHeight+"px"};utils.extend(line.style,styles)}function showResizeLine(cell){var uetable=getUETable(cell);updateResizeLine.call(this,cell,uetable)}function getRelation(ele,mousePos){var elePos=domUtils.getXY(ele);if(!elePos){return""}if(elePos.x+ele.offsetWidth-mousePos.x<cellBorderWidth){return"h"}if(mousePos.x-elePos.x<cellBorderWidth){return"h1"}if(elePos.y+ele.offsetHeight-mousePos.y<cellBorderWidth){return"v"}if(mousePos.y-elePos.y<cellBorderWidth){return"v1"}return""}function mouseDownEvent(type,evt){if(isEditorDisabled()){return}userActionStatus={x:evt.clientX,y:evt.clientY};if(evt.button==2){var ut=getUETableBySelected(me),flag=false;if(ut){var td=getTargetTd(me,evt);utils.each(ut.selectedTds,function(ti){if(ti===td){flag=true}});if(!flag){removeSelectedClass(domUtils.getElementsByTagName(me.body,"th td"));ut.clearSelected()}else{td=ut.selectedTds[0];setTimeout(function(){me.selection.getRange().setStart(td,0).setCursor(false,true)},0)}}}else{tableClickHander(evt)}}function clearTableTimer(){tabTimer&&clearTimeout(tabTimer);tabTimer=null}function tableDbclickHandler(evt){singleClickState=0;evt=evt||me.window.event;var target=getParentTdOrTh(evt.target||evt.srcElement);if(target){var h;if(h=getRelation(target,mouseCoords(evt))){hideDragLine(me);if(h=="h1"){h="h";if(inTableSide(domUtils.findParentByTagName(target,"table"),target,evt)){me.execCommand("adaptbywindow")}else{target=getUETable(target).getPreviewCell(target);if(target){var rng=me.selection.getRange();rng.selectNodeContents(target).setCursor(true,true)}}}if(h=="h"){var ut=getUETable(target),table=ut.table,cells=getCellsByMoveBorder(target,table,true);cells=extractArray(cells,"left");ut.width=ut.offsetWidth;var oldWidth=[],newWidth=[];utils.each(cells,function(cell){oldWidth.push(cell.offsetWidth)});utils.each(cells,function(cell){cell.removeAttribute("width")});window.setTimeout(function(){var changeable=true;utils.each(cells,function(cell,index){var width=cell.offsetWidth;if(width>oldWidth[index]){changeable=false;return false}newWidth.push(width)});var change=changeable?newWidth:oldWidth;utils.each(cells,function(cell,index){cell.width=change[index]-getTabcellSpace()})},0)}}}}function tableClickHander(evt){removeSelectedClass(domUtils.getElementsByTagName(me.body,"td th"));utils.each(me.document.getElementsByTagName("table"),function(t){t.ueTable=null});startTd=getTargetTd(me,evt);if(!startTd){return}var table=domUtils.findParentByTagName(startTd,"table",true);ut=getUETable(table);ut&&ut.clearSelected();if(!onBorder){me.document.body.style.webkitUserSelect="";mousedown=true;me.addListener("mouseover",mouseOverEvent)}else{borderActionHandler(evt)}}function borderActionHandler(evt){if(browser.ie){evt=reconstruct(evt)}clearTableDragTimer();isInResizeBuffer=true;tableDragTimer=setTimeout(function(){tableBorderDrag(evt)},dblclickTime)}function extractArray(originArr,key){var result=[],tmp=null;for(var i=0,len=originArr.length;i<len;i++){tmp=originArr[i][key];if(tmp){result.push(tmp)}}return result}function clearTableDragTimer(){tableDragTimer&&clearTimeout(tableDragTimer);tableDragTimer=null}function reconstruct(obj){var attrs=["pageX","pageY","clientX","clientY","srcElement","target"],newObj={};if(obj){for(var i=0,key,val;key=attrs[i];i++){val=obj[key];val&&(newObj[key]=val)}}return newObj}function tableBorderDrag(evt){isInResizeBuffer=false;startTd=evt.target||evt.srcElement;if(!startTd){return}var state=getRelation(startTd,mouseCoords(evt));if(/\d/.test(state)){state=state.replace(/\d/,"");startTd=getUETable(startTd).getPreviewCell(startTd,state=="v")}hideDragLine(me);getDragLine(me,me.document);me.fireEvent("saveScene");showDragLineAt(state,startTd);mousedown=true;onDrag=state;dragTd=startTd}function mouseUpEvent(type,evt){if(isEditorDisabled()){return}clearTableDragTimer();isInResizeBuffer=false;if(onBorder){singleClickState=++singleClickState%3;userActionStatus={x:evt.clientX,y:evt.clientY};tableResizeTimer=setTimeout(function(){singleClickState>0&&singleClickState--},dblclickTime);if(singleClickState===2){singleClickState=0;tableDbclickHandler(evt);return}}if(evt.button==2){return}var me=this;var range=me.selection.getRange(),start=domUtils.findParentByTagName(range.startContainer,"table",true),end=domUtils.findParentByTagName(range.endContainer,"table",true);if(start||end){if(start===end){start=domUtils.findParentByTagName(range.startContainer,["td","th","caption"],true);end=domUtils.findParentByTagName(range.endContainer,["td","th","caption"],true);if(start!==end){me.selection.clearRange()}}else{me.selection.clearRange()}}mousedown=false;me.document.body.style.webkitUserSelect="";if(onDrag&&dragTd){me.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();singleClickState=0;dragLine=me.document.getElementById("ue_tableDragLine");if(dragLine){var dragTdPos=domUtils.getXY(dragTd),dragLinePos=domUtils.getXY(dragLine);switch(onDrag){case"h":changeColWidth(dragTd,dragLinePos.x-dragTdPos.x);break;case"v":changeRowHeight(dragTd,dragLinePos.y-dragTdPos.y-dragTd.offsetHeight);break;default:}onDrag="";dragTd=null;hideDragLine(me);me.fireEvent("saveScene");return}}if(!startTd){var target=domUtils.findParentByTagName(evt.target||evt.srcElement,"td",true);if(!target){target=domUtils.findParentByTagName(evt.target||evt.srcElement,"th",true)}if(target&&(target.tagName=="TD"||target.tagName=="TH")){if(me.fireEvent("excludetable",target)===true){return}range=new dom.Range(me.document);range.setStart(target,0).setCursor(false,true)}}else{var ut=getUETable(startTd),cell=ut?ut.selectedTds[0]:null;if(cell){range=new dom.Range(me.document);if(domUtils.isEmptyBlock(cell)){range.setStart(cell,0).setCursor(false,true)}else{range.selectNodeContents(cell).shrinkBoundary().setCursor(false,true)}}else{range=me.selection.getRange().shrinkBoundary();if(!range.collapsed){var start=domUtils.findParentByTagName(range.startContainer,["td","th"],true),end=domUtils.findParentByTagName(range.endContainer,["td","th"],true);if(start&&!end||!start&&end||start&&end&&start!==end){range.setCursor(false,true)}}}startTd=null;me.removeListener("mouseover",mouseOverEvent)}me._selectionChange(250,evt)}function mouseOverEvent(type,evt){if(isEditorDisabled()){return}var me=this,tar=evt.target||evt.srcElement;currentTd=domUtils.findParentByTagName(tar,"td",true)||domUtils.findParentByTagName(tar,"th",true);if(startTd&&currentTd&&((startTd.tagName=="TD"&&currentTd.tagName=="TD")||(startTd.tagName=="TH"&&currentTd.tagName=="TH"))&&domUtils.findParentByTagName(startTd,"table")==domUtils.findParentByTagName(currentTd,"table")){var ut=getUETable(currentTd);if(startTd!=currentTd){me.document.body.style.webkitUserSelect="none";me.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var range=ut.getCellsRange(startTd,currentTd);ut.setSelected(range)}else{me.document.body.style.webkitUserSelect="";ut.clearSelected()}}evt.preventDefault?evt.preventDefault():(evt.returnValue=false)}function setCellHeight(cell,height,backHeight){var lineHight=parseInt(domUtils.getComputedStyle(cell,"line-height"),10),tmpHeight=backHeight+height;height=tmpHeight<lineHight?lineHight:tmpHeight;if(cell.style.height){cell.style.height=""}cell.rowSpan==1?cell.setAttribute("height",height):(cell.removeAttribute&&cell.removeAttribute("height"))}function getWidth(cell){if(!cell){return 0}return parseInt(domUtils.getComputedStyle(cell,"width"),10)}function changeColWidth(cell,changeValue){var ut=getUETable(cell);if(ut){var table=ut.table,cells=getCellsByMoveBorder(cell,table);table.style.width="";table.removeAttribute("width");changeValue=correctChangeValue(changeValue,cell,cells);if(cell.nextSibling){var i=0;utils.each(cells,function(cellGroup){cellGroup.left.width=(+cellGroup.left.width)+changeValue;cellGroup.right&&(cellGroup.right.width=(+cellGroup.right.width)-changeValue)})}else{utils.each(cells,function(cellGroup){cellGroup.left.width-=-changeValue})}}}function isEditorDisabled(){return me.body.contentEditable==="false"}function changeRowHeight(td,changeValue){if(Math.abs(changeValue)<10){return}var ut=getUETable(td);if(ut){var cells=ut.getSameEndPosCells(td,"y"),backHeight=cells[0]?cells[0].offsetHeight:0;for(var i=0,cell;cell=cells[i++];){setCellHeight(cell,changeValue,backHeight)}}}function getCellsByMoveBorder(cell,table,isContainMergeCell){if(!table){table=domUtils.findParentByTagName(cell,"table")}if(!table){return null}var index=domUtils.getNodeIndex(cell),temp=cell,rows=table.rows,colIndex=0;while(temp){if(temp.nodeType===1){colIndex+=(temp.colSpan||1)}temp=temp.previousSibling}temp=null;var borderCells=[];utils.each(rows,function(tabRow){var cells=tabRow.cells,currIndex=0;utils.each(cells,function(tabCell){currIndex+=(tabCell.colSpan||1);if(currIndex===colIndex){borderCells.push({left:tabCell,right:tabCell.nextSibling||null});return false}else{if(currIndex>colIndex){if(isContainMergeCell){borderCells.push({left:tabCell})}return false}}})});return borderCells}function getMinWidthByTableCells(cells){var minWidth=Number.MAX_VALUE;for(var i=0,curCell;curCell=cells[i];i++){minWidth=Math.min(minWidth,curCell.width||getTableCellWidth(curCell))}return minWidth}function correctChangeValue(changeValue,relatedCell,cells){changeValue-=getTabcellSpace();if(changeValue<0){return 0}changeValue-=getTableCellWidth(relatedCell);var direction=changeValue<0?"left":"right";changeValue=Math.abs(changeValue);utils.each(cells,function(cellGroup){var curCell=cellGroup[direction];if(curCell){changeValue=Math.min(changeValue,getTableCellWidth(curCell)-cellMinWidth)}});changeValue=changeValue<0?0:changeValue;return direction==="left"?-changeValue:changeValue}function getTableCellWidth(cell){var width=0,offset=0,width=cell.offsetWidth-getTabcellSpace();if(!cell.nextSibling){width-=getTableCellOffset(cell)}width=width<0?0:width;try{cell.width=width}catch(e){}return width}function getTableCellOffset(cell){tab=domUtils.findParentByTagName(cell,"table",false);if(tab.offsetVal===undefined){var prev=cell.previousSibling;if(prev){tab.offsetVal=cell.offsetWidth-prev.offsetWidth===UT.borderWidth?UT.borderWidth:0}else{tab.offsetVal=0}}return tab.offsetVal}function getTabcellSpace(){if(UT.tabcellSpace===undefined){var cell=null,tab=me.document.createElement("table"),tbody=me.document.createElement("tbody"),trow=me.document.createElement("tr"),tabcell=me.document.createElement("td"),mirror=null;tabcell.style.cssText="border: 0;";tabcell.width=1;trow.appendChild(tabcell);trow.appendChild(mirror=tabcell.cloneNode(false));tbody.appendChild(trow);tab.appendChild(tbody);tab.style.cssText="visibility: hidden;";me.body.appendChild(tab);UT.paddingSpace=tabcell.offsetWidth-1;var tmpTabWidth=tab.offsetWidth;tabcell.style.cssText="";mirror.style.cssText="";UT.borderWidth=(tab.offsetWidth-tmpTabWidth)/3;UT.tabcellSpace=UT.paddingSpace+UT.borderWidth;me.body.removeChild(tab)}getTabcellSpace=function(){return UT.tabcellSpace};return UT.tabcellSpace}function getDragLine(editor,doc){if(mousedown){return}dragLine=editor.document.createElement("div");domUtils.setAttributes(dragLine,{id:"ue_tableDragLine",unselectable:"on",contenteditable:false,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"});editor.body.appendChild(dragLine)}function hideDragLine(editor){if(mousedown){return}var line;while(line=editor.document.getElementById("ue_tableDragLine")){domUtils.remove(line)}}function showDragLineAt(state,cell){if(!cell){return}var table=domUtils.findParentByTagName(cell,"table"),caption=table.getElementsByTagName("caption"),width=table.offsetWidth,height=table.offsetHeight-(caption.length>0?caption[0].offsetHeight:0),tablePos=domUtils.getXY(table),cellPos=domUtils.getXY(cell),css;switch(state){case"h":css="height:"+height+"px;top:"+(tablePos.y+(caption.length>0?caption[0].offsetHeight:0))+"px;left:"+(cellPos.x+cell.offsetWidth);dragLine.style.cssText=css+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":css="width:"+width+"px;left:"+tablePos.x+"px;top:"+(cellPos.y+cell.offsetHeight);dragLine.style.cssText=css+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)";break;default:}}function switchBorderColor(editor,flag){var tableArr=domUtils.getElementsByTagName(editor.body,"table"),color;for(var i=0,node;node=tableArr[i++];){var td=domUtils.getElementsByTagName(node,"td");if(td[0]){if(flag){color=(td[0].style.borderColor).replace(/\s/g,"");if(/(#ffffff)|(rgb\(255,255,255\))/ig.test(color)){domUtils.addClass(node,"noBorderTable")}}else{domUtils.removeClasses(node,"noBorderTable")}}}}function getTableWidth(editor,needIEHack,defaultValue){var body=editor.body;return body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(editor.options.offsetWidth||0)}function getTargetTd(editor,evt){var target=domUtils.findParentByTagName(evt.target||evt.srcElement,["td","th"],true),dir=null;if(!target){return null}dir=getRelation(target,mouseCoords(evt));if(!target){return null}if(dir==="h1"&&target.previousSibling){var position=domUtils.getXY(target),cellWidth=target.offsetWidth;if(Math.abs(position.x+cellWidth-evt.clientX)>cellWidth/3){target=target.previousSibling}}else{if(dir==="v1"&&target.parentNode.previousSibling){var position=domUtils.getXY(target),cellHeight=target.offsetHeight;if(Math.abs(position.y+cellHeight-evt.clientY)>cellHeight/3){target=target.parentNode.previousSibling.firstChild}}}return target&&!(editor.fireEvent("excludetable",target)===true)?target:null}};UE.UETable.prototype.sortTable=function(sortByCellIndex,compareFn){var table=this.table,rows=table.rows,trArray=[],flag=rows[0].cells[0].tagName==="TH",lastRowIndex=0;if(this.selectedTds.length){var range=this.cellsRange,len=range.endRowIndex+1;for(var i=range.beginRowIndex;i<len;i++){trArray[i]=rows[i]}trArray.splice(0,range.beginRowIndex);lastRowIndex=(range.endRowIndex+1)===this.rowsNum?0:range.endRowIndex+1}else{for(var i=0,len=rows.length;i<len;i++){trArray[i]=rows[i]}}var Fn={reversecurrent:function(td1,td2){return 1},orderbyasc:function(td1,td2){var value1=td1.innerText||td1.textContent,value2=td2.innerText||td2.textContent;return value1.localeCompare(value2)},reversebyasc:function(td1,td2){var value1=td1.innerHTML,value2=td2.innerHTML;return value2.localeCompare(value1)},orderbynum:function(td1,td2){var value1=td1[browser.ie?"innerText":"textContent"].match(/\d+/),value2=td2[browser.ie?"innerText":"textContent"].match(/\d+/);if(value1){value1=+value1[0]}if(value2){value2=+value2[0]}return(value1||0)-(value2||0)},reversebynum:function(td1,td2){var value1=td1[browser.ie?"innerText":"textContent"].match(/\d+/),value2=td2[browser.ie?"innerText":"textContent"].match(/\d+/);if(value1){value1=+value1[0]}if(value2){value2=+value2[0]}return(value2||0)-(value1||0)}};table.setAttribute("data-sort-type",compareFn&&typeof compareFn==="string"&&Fn[compareFn]?compareFn:"");flag&&trArray.splice(0,1);trArray=utils.sort(trArray,function(tr1,tr2){var result;if(compareFn&&typeof compareFn==="function"){result=compareFn.call(this,tr1.cells[sortByCellIndex],tr2.cells[sortByCellIndex])}else{if(compareFn&&typeof compareFn==="number"){result=1}else{if(compareFn&&typeof compareFn==="string"&&Fn[compareFn]){result=Fn[compareFn].call(this,tr1.cells[sortByCellIndex],tr2.cells[sortByCellIndex])}else{result=Fn.orderbyasc.call(this,tr1.cells[sortByCellIndex],tr2.cells[sortByCellIndex])}}}return result});var fragment=table.ownerDocument.createDocumentFragment();for(var j=0,len=trArray.length;j<len;j++){fragment.appendChild(trArray[j])}var tbody=table.getElementsByTagName("tbody")[0];if(!lastRowIndex){tbody.appendChild(fragment)}else{tbody.insertBefore(fragment,rows[lastRowIndex-range.endRowIndex+range.beginRowIndex-1])}};UE.plugins.tablesort=function(){var me=this,UT=UE.UETable,getUETable=function(tdOrTable){return UT.getUETable(tdOrTable)},getTableItemsByRange=function(editor){return UT.getTableItemsByRange(editor)};me.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+me.options.themePath+me.options.theme+"/images/sortable.png);}",me.document);me.addListener("afterexeccommand",function(type,cmd){if(cmd=="mergeright"||cmd=="mergedown"||cmd=="mergecells"){this.execCommand("disablesort")}})});UE.commands.sorttable={queryCommandState:function(){var me=this,tableItems=getTableItemsByRange(me);if(!tableItems.cell){return -1}var table=tableItems.table,cells=table.getElementsByTagName("td");for(var i=0,cell;cell=cells[i++];){if(cell.rowSpan!=1||cell.colSpan!=1){return -1}}return 0},execCommand:function(cmd,fn){var me=this,range=me.selection.getRange(),bk=range.createBookmark(true),tableItems=getTableItemsByRange(me),cell=tableItems.cell,ut=getUETable(tableItems.table),cellInfo=ut.getCellInfo(cell);ut.sortTable(cellInfo.cellIndex,fn);range.moveToBookmark(bk);try{range.select()}catch(e){}}};UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(cmd){var table=getTableItemsByRange(this).table;if(table&&cmd=="enablesort"){var cells=domUtils.getElementsByTagName(table,"th td");for(var i=0;i<cells.length;i++){if(cells[i].getAttribute("colspan")>1||cells[i].getAttribute("rowspan")>1){return -1}}}return !table?-1:cmd=="enablesort"^table.getAttribute("data-sort")!="sortEnabled"?-1:0},execCommand:function(cmd){var table=getTableItemsByRange(this).table;table.setAttribute("data-sort",cmd=="enablesort"?"sortEnabled":"sortDisabled");cmd=="enablesort"?domUtils.addClass(table,"sortEnabled"):domUtils.removeClasses(table,"sortEnabled")}}};UE.plugins.contextmenu=function(){var me=this;me.setOpt("enableContextMenu",true);if(me.getOpt("enableContextMenu")===false){return}var lang=me.getLang("contextMenu"),menu,items=me.options.contextMenu||[{label:lang.selectall,cmdName:"selectall"},{label:lang.cleardoc,cmdName:"cleardoc",exec:function(){if(confirm(lang.confirmclear)){this.execCommand("cleardoc")}}},"-",{label:lang.unlink,cmdName:"unlink"},"-",{group:lang.paragraph,icon:"justifyjustify",subMenu:[{label:lang.justifyleft,cmdName:"justify",value:"left"},{label:lang.justifyright,cmdName:"justify",value:"right"},{label:lang.justifycenter,cmdName:"justify",value:"center"},{label:lang.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:lang.table,icon:"table",subMenu:[{label:lang.inserttable,cmdName:"inserttable"},{label:lang.deletetable,cmdName:"deletetable"},"-",{label:lang.deleterow,cmdName:"deleterow"},{label:lang.deletecol,cmdName:"deletecol"},{label:lang.insertcol,cmdName:"insertcol"},{label:lang.insertcolnext,cmdName:"insertcolnext"},{label:lang.insertrow,cmdName:"insertrow"},{label:lang.insertrownext,cmdName:"insertrownext"},"-",{label:lang.insertcaption,cmdName:"insertcaption"},{label:lang.deletecaption,cmdName:"deletecaption"},{label:lang.inserttitle,cmdName:"inserttitle"},{label:lang.deletetitle,cmdName:"deletetitle"},{label:lang.inserttitlecol,cmdName:"inserttitlecol"},{label:lang.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:lang.mergecells,cmdName:"mergecells"},{label:lang.mergeright,cmdName:"mergeright"},{label:lang.mergedown,cmdName:"mergedown"},"-",{label:lang.splittorows,cmdName:"splittorows"},{label:lang.splittocols,cmdName:"splittocols"},{label:lang.splittocells,cmdName:"splittocells"},"-",{label:lang.averageDiseRow,cmdName:"averagedistributerow"},{label:lang.averageDisCol,cmdName:"averagedistributecol"},"-",{label:lang.edittd,cmdName:"edittd",exec:function(){if(UE.ui.edittd){new UE.ui.edittd(this)}this.getDialog("edittd").open()}},{label:lang.edittable,cmdName:"edittable",exec:function(){if(UE.ui.edittable){new UE.ui.edittable(this)}this.getDialog("edittable").open()}},{label:lang.setbordervisible,cmdName:"setbordervisible"}]},{group:lang.tablesort,icon:"tablesort",subMenu:[{label:lang.enablesort,cmdName:"enablesort"},{label:lang.disablesort,cmdName:"disablesort"},"-",{label:lang.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:lang.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:lang.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:lang.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:lang.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:lang.borderbk,icon:"borderBack",subMenu:[{label:lang.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:lang.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:lang.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#bbb","#ccc"]})}},{label:lang.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:lang.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["red","blue"]})}},{label:lang.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:lang.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:lang.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:lang.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:lang.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:lang.tableright,value:"right"}]},"-",{label:lang.insertparagraphbefore,cmdName:"insertparagraph",value:true},{label:lang.insertparagraphafter,cmdName:"insertparagraph"},{label:lang.copy,cmdName:"copy"},{label:lang.paste,cmdName:"paste"}];if(!items.length){return}var uiUtils=UE.ui.uiUtils;me.addListener("contextmenu",function(type,evt){var offset=uiUtils.getViewportOffsetByEvent(evt);me.fireEvent("beforeselectionchange");if(menu){menu.destroy()}for(var i=0,ti,contextItems=[];ti=items[i];i++){var last;(function(item){if(item=="-"){if((last=contextItems[contextItems.length-1])&&last!=="-"){contextItems.push("-")}}else{if(item.hasOwnProperty("group")){for(var j=0,cj,subMenu=[];cj=item.subMenu[j];j++){(function(subItem){if(subItem=="-"){if((last=subMenu[subMenu.length-1])&&last!=="-"){subMenu.push("-")}else{subMenu.splice(subMenu.length-1)}}else{if((me.commands[subItem.cmdName]||UE.commands[subItem.cmdName]||subItem.query)&&(subItem.query?subItem.query():me.queryCommandState(subItem.cmdName))>-1){subMenu.push({label:subItem.label||me.getLang("contextMenu."+subItem.cmdName+(subItem.value||""))||"",className:"edui-for-"+subItem.cmdName+(subItem.className?(" edui-for-"+subItem.cmdName+"-"+subItem.className):""),onclick:subItem.exec?function(){subItem.exec.call(me)}:function(){me.execCommand(subItem.cmdName,subItem.value)}})}}})(cj)}if(subMenu.length){function getLabel(){switch(item.icon){case"table":return me.getLang("contextMenu.table");case"justifyjustify":return me.getLang("contextMenu.paragraph");case"aligntd":return me.getLang("contextMenu.aligntd");case"aligntable":return me.getLang("contextMenu.aligntable");case"tablesort":return lang.tablesort;case"borderBack":return lang.borderbk;default:return""}}contextItems.push({label:getLabel(),className:"edui-for-"+item.icon,subMenu:{items:subMenu,editor:me}})}}else{if((me.commands[item.cmdName]||UE.commands[item.cmdName]||item.query)&&(item.query?item.query.call(me):me.queryCommandState(item.cmdName))>-1){contextItems.push({label:item.label||me.getLang("contextMenu."+item.cmdName),className:"edui-for-"+(item.icon?item.icon:item.cmdName+(item.value||"")),onclick:item.exec?function(){item.exec.call(me)}:function(){me.execCommand(item.cmdName,item.value)}})}}}})(ti)}if(contextItems[contextItems.length-1]=="-"){contextItems.pop()}menu=new UE.ui.Menu({items:contextItems,className:"edui-contextmenu",editor:me});menu.render();menu.showAt(offset);me.fireEvent("aftershowcontextmenu",menu);domUtils.preventDefault(evt);if(browser.ie){var ieRange;try{ieRange=me.selection.getNative().createRange()}catch(e){return}if(ieRange.item){var range=new dom.Range(me.document);range.selectNode(ieRange.item(0)).select(true,true)}}});me.addListener("aftershowcontextmenu",function(type,menu){if(me.zeroclipboard){var items=menu.items;for(var key in items){if(items[key].className=="edui-for-copy"){me.zeroclipboard.clip(items[key].getDom())}}}})};UE.plugins.shortcutmenu=function(){var me=this,menu,items=me.options.shortcutMenu||[];if(!items.length){return}me.addListener("contextmenu mouseup",function(type,e){var me=this,customEvt={type:type,target:e.target||e.srcElement,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY};setTimeout(function(){var rng=me.selection.getRange();if(rng.collapsed===false||type=="contextmenu"){if(!menu){menu=new baidu.editor.ui.ShortCutMenu({editor:me,items:items,theme:me.options.theme,className:"edui-shortcutmenu"});menu.render();me.fireEvent("afterrendershortcutmenu",menu)}menu.show(customEvt,!!UE.plugins.contextmenu)}});if(type=="contextmenu"){domUtils.preventDefault(e);if(browser.ie9below){var ieRange;try{ieRange=me.selection.getNative().createRange()}catch(e){return}if(ieRange.item){var range=new dom.Range(me.document);range.selectNode(ieRange.item(0)).select(true,true)}}}});me.addListener("keydown",function(type){if(type=="keydown"){menu&&!menu.isHidden&&menu.hide()}})};UE.plugins.basestyle=function(){var basestyles={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},getObj=function(editor,tagNames){return domUtils.filterNodeList(editor.selection.getStartElementPath(),tagNames)},me=this;me.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"});me.addInputRule(function(root){utils.each(root.getNodesByTagName("b i"),function(node){switch(node.tagName){case"b":node.tagName="strong";break;case"i":node.tagName="em"}})});for(var style in basestyles){(function(cmd,tagNames){me.commands[cmd]={execCommand:function(cmdName){var range=me.selection.getRange(),obj=getObj(this,tagNames);if(range.collapsed){if(obj){var tmpText=me.document.createTextNode("");range.insertNode(tmpText).removeInlineStyle(tagNames);range.setStartBefore(tmpText);domUtils.remove(tmpText)}else{var tmpNode=range.document.createElement(tagNames[0]);if(cmdName=="superscript"||cmdName=="subscript"){tmpText=me.document.createTextNode("");range.insertNode(tmpText).removeInlineStyle(["sub","sup"]).setStartBefore(tmpText).collapse(true)}range.insertNode(tmpNode).setStart(tmpNode,0)}range.collapse(true)}else{if(cmdName=="superscript"||cmdName=="subscript"){if(!obj||obj.tagName.toLowerCase()!=cmdName){range.removeInlineStyle(["sub","sup"])}}obj?range.removeInlineStyle(tagNames):range.applyInlineStyle(tagNames[0])}range.select()},queryCommandState:function(){return getObj(this,tagNames)?1:0}}})(style,basestyles[style])}};UE.plugins.elementpath=function(){var currentLevel,tagNames,me=this;me.setOpt("elementPathEnabled",true);if(!me.options.elementPathEnabled){return}me.commands.elementpath={execCommand:function(cmdName,level){var start=tagNames[level],range=me.selection.getRange();currentLevel=level*1;range.selectNode(start).select()},queryCommandValue:function(){var parents=[].concat(this.selection.getStartElementPath()).reverse(),names=[];tagNames=parents;for(var i=0,ci;ci=parents[i];i++){if(ci.nodeType==3){continue}var name=ci.tagName.toLowerCase();if(name=="img"&&ci.getAttribute("anchorname")){name="anchor"}names[i]=name;if(currentLevel==i){currentLevel=-1;break}}return names}}};UE.plugins.formatmatch=function(){var me=this,list=[],img,flag=0;me.addListener("reset",function(){list=[];flag=0});function addList(type,evt){if(browser.webkit){var target=evt.target.tagName=="IMG"?evt.target:null}function addFormat(range){if(text){range.selectNode(text)}return range.applyInlineStyle(list[list.length-1].tagName,null,list)}me.undoManger&&me.undoManger.save();var range=me.selection.getRange(),imgT=target||range.getClosedNode();if(img&&imgT&&imgT.tagName=="IMG"){imgT.style.cssText+=";float:"+(img.style.cssFloat||img.style.styleFloat||"none")+";display:"+(img.style.display||"inline");img=null}else{if(!img){var collapsed=range.collapsed;if(collapsed){var text=me.document.createTextNode("match");range.insertNode(text).select()}me.__hasEnterExecCommand=true;var removeFormatAttributes=me.options.removeFormatAttributes;me.options.removeFormatAttributes="";me.execCommand("removeformat");me.options.removeFormatAttributes=removeFormatAttributes;me.__hasEnterExecCommand=false;range=me.selection.getRange();if(list.length){addFormat(range)}if(text){range.setStartBefore(text).collapse(true)}range.select();text&&domUtils.remove(text)}}me.undoManger&&me.undoManger.save();me.removeListener("mouseup",addList);flag=0}me.commands.formatmatch={execCommand:function(cmdName){if(flag){flag=0;list=[];me.removeListener("mouseup",addList);return}var range=me.selection.getRange();img=range.getClosedNode();if(!img||img.tagName!="IMG"){range.collapse(true).shrinkBoundary();var start=range.startContainer;list=domUtils.findParents(start,true,function(node){return !domUtils.isBlockElm(node)&&node.nodeType==1});for(var i=0,ci;ci=list[i];i++){if(ci.tagName=="A"){list.splice(i,1);break}}}me.addListener("mouseup",addList);flag=1},queryCommandState:function(){return flag},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){var me=this;var _blockElm={table:1,tbody:1,tr:1,ol:1,ul:1};function findTextInString(textContent,opt,currentIndex){var str=opt.searchStr;if(opt.dir==-1){textContent=textContent.split("").reverse().join("");str=str.split("").reverse().join("");currentIndex=textContent.length-currentIndex}var reg=new RegExp(str,"g"+(opt.casesensitive?"":"i")),match;while(match=reg.exec(textContent)){if(match.index>=currentIndex){return opt.dir==-1?textContent.length-match.index-opt.searchStr.length:match.index}}return -1}function findTextBlockElm(node,currentIndex,opt){var textContent,index,methodName=opt.all||opt.dir==1?"getNextDomNode":"getPreDomNode";if(domUtils.isBody(node)){node=node.firstChild}var first=1;while(node){textContent=node.nodeType==3?node.nodeValue:node[browser.ie?"innerText":"textContent"];index=findTextInString(textContent,opt,currentIndex);first=0;if(index!=-1){return{node:node,index:index}}node=domUtils[methodName](node);while(node&&_blockElm[node.nodeName.toLowerCase()]){node=domUtils[methodName](node,true)}if(node){currentIndex=opt.dir==-1?(node.nodeType==3?node.nodeValue:node[browser.ie?"innerText":"textContent"]).length:0}}}function findNTextInBlockElm(node,index,str){var currentIndex=0,currentNode=node.firstChild,currentNodeLength=0,result;while(currentNode){if(currentNode.nodeType==3){currentNodeLength=currentNode.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;currentIndex+=currentNodeLength;if(currentIndex>=index){return{node:currentNode,index:currentNodeLength-(currentIndex-index)}}}else{if(!dtd.$empty[currentNode.tagName]){currentNodeLength=currentNode[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;currentIndex+=currentNodeLength;if(currentIndex>=index){result=findNTextInBlockElm(currentNode,currentNodeLength-(currentIndex-index),str);if(result){return result}}}}currentNode=domUtils.getNextDomNode(currentNode)}}function searchReplace(me,opt){var rng=me.selection.getRange(),startBlockNode,searchStr=opt.searchStr,span=me.document.createElement("span");span.innerHTML="$$ueditor_searchreplace_key$$";rng.shrinkBoundary(true);if(!rng.collapsed){rng.select();var rngText=me.selection.getText();if(new RegExp("^"+opt.searchStr+"$",(opt.casesensitive?"":"i")).test(rngText)){if(opt.replaceStr!=undefined){replaceText(rng,opt.replaceStr);rng.select();return true}else{rng.collapse(opt.dir==-1)}}}rng.insertNode(span);rng.enlargeToBlockElm(true);startBlockNode=rng.startContainer;var currentIndex=startBlockNode[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");rng.setStartBefore(span);domUtils.remove(span);var result=findTextBlockElm(startBlockNode,currentIndex,opt);if(result){var rngStart=findNTextInBlockElm(result.node,result.index,searchStr);var rngEnd=findNTextInBlockElm(result.node,result.index+searchStr.length,searchStr);rng.setStart(rngStart.node,rngStart.index).setEnd(rngEnd.node,rngEnd.index);if(opt.replaceStr!==undefined){replaceText(rng,opt.replaceStr)}rng.select();return true}else{rng.setCursor()}}function replaceText(rng,str){str=me.document.createTextNode(str);rng.deleteContents().insertNode(str)}return{commands:{searchreplace:{execCommand:function(cmdName,opt){utils.extend(opt,{all:false,casesensitive:false,dir:1},true);var num=0;if(opt.all){var rng=me.selection.getRange(),first=me.body.firstChild;if(first&&first.nodeType==1){rng.setStart(first,0);rng.shrinkBoundary(true)}else{if(first.nodeType==3){rng.setStartBefore(first)}}rng.collapse(true).select(true);if(opt.replaceStr!==undefined){me.fireEvent("saveScene")}while(searchReplace(this,opt)){num++}if(num){me.fireEvent("saveScene")}}else{if(opt.replaceStr!==undefined){me.fireEvent("saveScene")}if(searchReplace(this,opt)){num++}if(num){me.fireEvent("saveScene")}}return num},notNeedUndo:1}}}});UE.plugins.customstyle=function(){var me=this;me.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});me.commands.customstyle={execCommand:function(cmdName,obj){var me=this,tagName=obj.tag,node=domUtils.findParent(me.selection.getStart(),function(node){return node.getAttribute("label")},true),range,bk,tmpObj={};for(var p in obj){if(obj[p]!==undefined){tmpObj[p]=obj[p]}}delete tmpObj.tag;if(node&&node.getAttribute("label")==obj.label){range=this.selection.getRange();bk=range.createBookmark();if(range.collapsed){if(dtd.$block[node.tagName]){var fillNode=me.document.createElement("p");domUtils.moveChild(node,fillNode);node.parentNode.insertBefore(fillNode,node);domUtils.remove(node)}else{domUtils.remove(node,true)}}else{var common=domUtils.getCommonAncestor(bk.start,bk.end),nodes=domUtils.getElementsByTagName(common,tagName);if(new RegExp(tagName,"i").test(common.tagName)){nodes.push(common)}for(var i=0,ni;ni=nodes[i++];){if(ni.getAttribute("label")==obj.label){var ps=domUtils.getPosition(ni,bk.start),pe=domUtils.getPosition(ni,bk.end);if((ps&domUtils.POSITION_FOLLOWING||ps&domUtils.POSITION_CONTAINS)&&(pe&domUtils.POSITION_PRECEDING||pe&domUtils.POSITION_CONTAINS)){if(dtd.$block[tagName]){var fillNode=me.document.createElement("p");domUtils.moveChild(ni,fillNode);ni.parentNode.insertBefore(fillNode,ni)}}domUtils.remove(ni,true)}}node=domUtils.findParent(common,function(node){return node.getAttribute("label")==obj.label},true);if(node){domUtils.remove(node,true)}}range.moveToBookmark(bk).select()}else{if(dtd.$block[tagName]){this.execCommand("paragraph",tagName,tmpObj,"customstyle");range=me.selection.getRange();if(!range.collapsed){range.collapse();node=domUtils.findParent(me.selection.getStart(),function(node){return node.getAttribute("label")==obj.label},true);var pNode=me.document.createElement("p");domUtils.insertAfter(node,pNode);domUtils.fillNode(me.document,pNode);range.setStart(pNode,0).setCursor()}}else{range=me.selection.getRange();if(range.collapsed){node=me.document.createElement(tagName);domUtils.setAttributes(node,tmpObj);range.insertNode(node).setStart(node,0).setCursor();return}bk=range.createBookmark();range.applyInlineStyle(tagName,tmpObj).moveToBookmark(bk).select()}}},queryCommandValue:function(){var parent=domUtils.filterNodeList(this.selection.getStartElementPath(),function(node){return node.getAttribute("label")});return parent?parent.getAttribute("label"):""}};me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==32||keyCode==13){var range=me.selection.getRange();if(range.collapsed){var node=domUtils.findParent(me.selection.getStart(),function(node){return node.getAttribute("label")},true);if(node&&dtd.$block[node.tagName]&&domUtils.isEmptyNode(node)){var p=me.document.createElement("p");domUtils.insertAfter(node,p);domUtils.fillNode(me.document,p);domUtils.remove(node);range.setStart(p,0).setCursor()}}}})};UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;if(me.options.catchRemoteImageEnable===false){return}me.setOpt({catchRemoteImageEnable:false});me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")});me.addListener("catchRemoteImage",function(){var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName");var remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(src,urls){if(src.indexOf(location.host)!=-1||/(^\.)|(^\/)/.test(src)){return true}if(urls){for(var j=0,url;url=urls[j++];){if(src.indexOf(url)!==-1){return true}}}return false};for(var i=0,ci;ci=imgs[i++];){if(ci.getAttribute("word_img")){continue}var src=ci.getAttribute("_src")||ci.src||"";if(/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)){remoteImages.push(src)}}if(remoteImages.length){catchremoteimage(remoteImages,{success:function(r){try{var info=r.state!==undefined?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];){oldSrc=ci.getAttribute("_src")||ci.src||"";for(j=0;cj=list[j++];){if(oldSrc==cj.source&&cj.state=="SUCCESS"){newSrc=catcherUrlPrefix+cj.url;domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}}}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})}function catchremoteimage(imgs,callbacks){var params=utils.serializeParam(me.queryCommandValue("serverparam"))||"",url=utils.formatUrl(catcherActionUrl+(catcherActionUrl.indexOf("?")==-1?"?":"&")+params),isJsonp=utils.isCrossDomainUrl(url),opt={method:"POST",dataType:isJsonp?"jsonp":"",timeout:60000,onsuccess:callbacks.success,onerror:callbacks.error};opt[catcherFieldName]=imgs;ajax.request(url,opt)}})};UE.plugin.register("snapscreen",function(){var me=this;var snapplugin;function getLocation(url){var search,a=document.createElement("a"),params=utils.serializeParam(me.queryCommandValue("serverparam"))||"";a.href=url;if(browser.ie){a.href=a.href}search=a.search;if(params){search=search+(search.indexOf("?")==-1?"?":"&")+params;search=search.replace(/[&]+/ig,"&")}return{port:a.port,hostname:a.hostname,path:a.pathname+search||+a.hash}}return{commands:{snapscreen:{execCommand:function(cmd){var url,local,res;var lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container;var doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;";snapplugin.setAttribute("width","0");snapplugin.setAttribute("height","0");container.appendChild(snapplugin)}function onSuccess(rs){try{rs=eval("("+rs+")");if(rs.state=="SUCCESS"){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else{alert(rs.state)}}catch(e){alert(lang.callBackErrorMsg)}}url=me.getActionUrl(me.getOpt("snapscreenActionName"));local=getLocation(url);setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(e){me.ui._dialogs.snapscreenDialog.open();return}onSuccess(res)},50)},queryCommandState:function(){return(navigator.userAgent.indexOf("Windows",0)!=-1)?0:-1}}}}});UE.commands.insertparagraph={execCommand:function(cmdName,front){var me=this,range=me.selection.getRange(),start=range.startContainer,tmpNode;while(start){if(domUtils.isBody(start)){break}tmpNode=start;start=start.parentNode}if(tmpNode){var p=me.document.createElement("p");if(front){tmpNode.parentNode.insertBefore(p,tmpNode)}else{tmpNode.parentNode.insertBefore(p,tmpNode.nextSibling)}domUtils.fillNode(me.document,p);range.setStart(p,0).setCursor(false,true)}}};UE.plugin.register("webapp",function(){var me=this;function createInsertStr(obj,toEmbed){return !toEmbed?'<img title="'+obj.title+'" width="'+obj.width+'" height="'+obj.height+'" src="'+me.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+obj.logo+'" style="background:url('+obj.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+obj.url+'" '+(obj.align&&!obj.cssfloat?'align="'+obj.align+'"':"")+(obj.cssfloat?'style="float:'+obj.cssfloat+'"':"")+"/>":'<iframe class="edui-faked-webapp" title="'+obj.title+'" '+(obj.align&&!obj.cssfloat?'align="'+obj.align+'"':"")+(obj.cssfloat?'style="float:'+obj.cssfloat+'"':"")+'width="'+obj.width+'" height="'+obj.height+'"  scrolling="no" frameborder="0" src="'+obj.url+'" logo_url = "'+obj.logo+'"></iframe>'}return{outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(node){var html;if(node.getAttr("class")=="edui-faked-webapp"){html=createInsertStr({title:node.getAttr("title"),width:node.getAttr("width"),height:node.getAttr("height"),align:node.getAttr("align"),cssfloat:node.getStyle("float"),url:node.getAttr("_url"),logo:node.getAttr("_logo_url")},true);var embed=UE.uNode.createElement(html);node.parentNode.replaceChild(embed,node)}})},inputRule:function(root){utils.each(root.getNodesByTagName("iframe"),function(node){if(node.getAttr("class")=="edui-faked-webapp"){var img=UE.uNode.createElement(createInsertStr({title:node.getAttr("title"),width:node.getAttr("width"),height:node.getAttr("height"),align:node.getAttr("align"),cssfloat:node.getStyle("float"),url:node.getAttr("src"),logo:node.getAttr("logo_url")}));node.parentNode.replaceChild(img,node)}})},commands:{webapp:{execCommand:function(cmd,obj){var me=this,str=createInsertStr(utils.extend(obj,{align:"none"}),false);me.execCommand("inserthtml",str)},queryCommandState:function(){var me=this,img=me.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-webapp");return flag?1:0}}}}});UE.plugins.template=function(){UE.commands.template={execCommand:function(cmd,obj){obj.html&&this.execCommand("inserthtml",obj.html)}};this.addListener("click",function(type,evt){var el=evt.target||evt.srcElement,range=this.selection.getRange();var tnode=domUtils.findParent(el,function(node){if(node.className&&domUtils.hasClass(node,"ue_t")){return node}},true);tnode&&range.selectNode(tnode).shrinkBoundary().select()});this.addListener("keydown",function(type,evt){var range=this.selection.getRange();if(!range.collapsed){if(!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){var tnode=domUtils.findParent(range.startContainer,function(node){if(node.className&&domUtils.hasClass(node,"ue_t")){return node}},true);if(tnode){domUtils.removeClasses(tnode,["ue_t"])}}}})};UE.plugin.register("music",function(){var me=this;function creatInsertStr(url,width,height,align,cssfloat,toEmbed){return !toEmbed?"<img "+(align&&!cssfloat?'align="'+align+'"':"")+(cssfloat?'style="float:'+cssfloat+'"':"")+' width="'+width+'" height="'+height+'" _url="'+url+'" class="edui-faked-music" src="'+me.options.langPath+me.options.lang+'/images/music.png" />':'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+url+'" width="'+width+'" height="'+height+'" '+(align&&!cssfloat?'align="'+align+'"':"")+(cssfloat?'style="float:'+cssfloat+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >'}return{outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(node){var html;if(node.getAttr("class")=="edui-faked-music"){var cssfloat=node.getStyle("float");var align=node.getAttr("align");html=creatInsertStr(node.getAttr("_url"),node.getAttr("width"),node.getAttr("height"),align,cssfloat,true);var embed=UE.uNode.createElement(html);node.parentNode.replaceChild(embed,node)}})},inputRule:function(root){utils.each(root.getNodesByTagName("embed"),function(node){if(node.getAttr("class")=="edui-faked-music"){var cssfloat=node.getStyle("float");var align=node.getAttr("align");html=creatInsertStr(node.getAttr("src"),node.getAttr("width"),node.getAttr("height"),align,cssfloat,false);var img=UE.uNode.createElement(html);node.parentNode.replaceChild(img,node)}})},commands:{music:{execCommand:function(cmd,musicObj){var me=this,str=creatInsertStr(musicObj.url,musicObj.width||400,musicObj.height||95,"none",false);me.execCommand("inserthtml",str)},queryCommandState:function(){var me=this,img=me.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-music");return flag?1:0}}}}});UE.plugin.register("autoupload",function(){function sendAndInsertFile(file,editor){var me=editor;var fieldName,urlPrefix,maxSize,allowFiles,actionUrl,loadingHtml,errorHandler,successHandler,filetype=/image\/\w+/i.test(file.type)?"image":"file",loadingId="loading_"+(+new Date()).toString(36);fieldName=me.getOpt(filetype+"FieldName");urlPrefix=me.getOpt(filetype+"UrlPrefix");maxSize=me.getOpt(filetype+"MaxSize");allowFiles=me.getOpt(filetype+"AllowFiles");actionUrl=me.getActionUrl(me.getOpt(filetype+"ActionName"));errorHandler=function(title){var loader=me.document.getElementById(loadingId);loader&&domUtils.remove(loader);me.fireEvent("showmessage",{id:loadingId,content:title,type:"error",timeout:4000})};if(filetype=="image"){loadingHtml='<img class="loadingclass" id="'+loadingId+'" src="'+me.options.themePath+me.options.theme+'/images/spacer.gif" title="'+(me.getLang("autoupload.loading")||"")+'" >';successHandler=function(data){var link=urlPrefix+data.url,loader=me.document.getElementById(loadingId);if(loader){loader.setAttribute("src",link);loader.setAttribute("_src",link);loader.setAttribute("title",data.title||"");loader.setAttribute("alt",data.original||"");loader.removeAttribute("id");domUtils.removeClasses(loader,"loadingclass")}}}else{loadingHtml='<p><img class="loadingclass" id="'+loadingId+'" src="'+me.options.themePath+me.options.theme+'/images/spacer.gif" title="'+(me.getLang("autoupload.loading")||"")+'" ></p>';successHandler=function(data){var link=urlPrefix+data.url,loader=me.document.getElementById(loadingId);var rng=me.selection.getRange(),bk=rng.createBookmark();rng.selectNode(loader).select();me.execCommand("insertfile",{url:link});rng.moveToBookmark(bk).select()}}me.execCommand("inserthtml",loadingHtml);if(!me.getOpt(filetype+"ActionName")){errorHandler(me.getLang("autoupload.errorLoadConfig"));return}if(file.size>maxSize){errorHandler(me.getLang("autoupload.exceedSizeError"));return}var fileext=file.name?file.name.substr(file.name.lastIndexOf(".")):"";if((fileext&&filetype!="image")||(allowFiles&&(allowFiles.join("")+".").indexOf(fileext.toLowerCase()+".")==-1)){errorHandler(me.getLang("autoupload.exceedTypeError"));return}var xhr=new XMLHttpRequest(),fd=new FormData(),params=utils.serializeParam(me.queryCommandValue("serverparam"))||"",url=utils.formatUrl(actionUrl+(actionUrl.indexOf("?")==-1?"?":"&")+params);fd.append(fieldName,file,file.name||("blob."+file.type.substr("image/".length)));fd.append("type","ajax");xhr.open("post",url,true);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.addEventListener("load",function(e){try{var json=(new Function("return "+utils.trim(e.target.response)))();if(json.state=="SUCCESS"&&json.url){successHandler(json)}else{errorHandler(json.state)}}catch(er){errorHandler(me.getLang("autoupload.loadError"))}});xhr.send(fd)}function getPasteImage(e){return e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length==1&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null}function getDropImage(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}return{outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(n){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(n.getAttr("class"))){n.parentNode.removeChild(n)}});utils.each(root.getNodesByTagName("p"),function(n){if(/\bloadpara\b/.test(n.getAttr("class"))){n.parentNode.removeChild(n)}})},bindEvents:{ready:function(e){var me=this;if(window.FormData&&window.FileReader){domUtils.on(me.body,"paste drop",function(e){var hasImg=false,items;items=e.type=="paste"?getPasteImage(e):getDropImage(e);if(items){var len=items.length,file;while(len--){file=items[len];if(file.getAsFile){file=file.getAsFile()}if(file&&file.size>0){sendAndInsertFile(file,me);hasImg=true}}hasImg&&e.preventDefault()}});domUtils.on(me.body,"dragover",function(e){if(e.dataTransfer.types[0]=="Files"){e.preventDefault()}});utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)}}}}});UE.plugin.register("autosave",function(){var me=this,lastSaveTime=new Date(),MIN_TIME=20,saveKey=null;function save(editor){var saveData;if(new Date()-lastSaveTime<MIN_TIME){return}if(!editor.hasContents()){saveKey&&me.removePreferences(saveKey);return}lastSaveTime=new Date();editor._saveFlag=null;saveData=me.body.innerHTML;if(editor.fireEvent("beforeautosave",{content:saveData})===false){return}me.setPreferences(saveKey,saveData);editor.fireEvent("afterautosave",{content:saveData})}return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var _suffix="-drafts-data",key=null;if(me.key){key=me.key+_suffix}else{key=(me.container.parentNode.id||"ue-common")+_suffix}saveKey=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+key},contentchange:function(){if(!me.getOpt("enableAutoSave")){return}if(!saveKey){return}if(me._saveFlag){window.clearTimeout(me._saveFlag)}if(me.options.saveInterval>0){me._saveFlag=window.setTimeout(function(){save(me)},me.options.saveInterval)}else{save(me)}}},commands:{clearlocaldata:{execCommand:function(cmd,name){if(saveKey&&me.getPreferences(saveKey)){me.removePreferences(saveKey)}},notNeedUndo:true,ignoreContentChange:true},getlocaldata:{execCommand:function(cmd,name){return saveKey?me.getPreferences(saveKey)||"":""},notNeedUndo:true,ignoreContentChange:true},drafts:{execCommand:function(cmd,name){if(saveKey){me.body.innerHTML=me.getPreferences(saveKey)||"<p>"+domUtils.fillHtml+"</p>";me.focus(true)}},queryCommandState:function(){return saveKey?(me.getPreferences(saveKey)===null?-1:0):-1},notNeedUndo:true,ignoreContentChange:true}}}});UE.plugin.register("charts",function(){var me=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(cmd,data){var tableNode=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true),flagText=[],config={};if(!tableNode){return false}if(!validData(tableNode)){me.fireEvent("chartserror");return false}config.title=data.title||"";config.subTitle=data.subTitle||"";config.xTitle=data.xTitle||"";config.yTitle=data.yTitle||"";config.suffix=data.suffix||"";config.tip=data.tip||"";config.dataFormat=data.tableDataFormat||"";config.chartType=data.chartType||0;for(var key in config){if(!config.hasOwnProperty(key)){continue}flagText.push(key+":"+config[key])}tableNode.setAttribute("data-chart",flagText.join(";"));domUtils.addClass(tableNode,"edui-charts-table")},queryCommandState:function(cmd,name){var tableNode=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true);return tableNode&&validData(tableNode)?0:-1}}},inputRule:function(root){utils.each(root.getNodesByTagName("table"),function(tableNode){if(tableNode.getAttr("data-chart")!==undefined){tableNode.setAttr("style")}})},outputRule:function(root){utils.each(root.getNodesByTagName("table"),function(tableNode){if(tableNode.getAttr("data-chart")!==undefined){tableNode.setAttr("style","display: none;")}})}};function validData(table){var firstRows=null,cellCount=0;if(table.rows.length<2){return false}if(table.rows[0].cells.length<2){return false}firstRows=table.rows[0].cells;cellCount=firstRows.length;for(var i=0,cell;cell=firstRows[i];i++){if(cell.tagName.toLowerCase()!=="th"){return false}}for(var i=1,row;row=table.rows[i];i++){if(row.cells.length!=cellCount){return false}if(row.cells[0].tagName.toLowerCase()!=="th"){return false}for(var j=1,cell;cell=row.cells[j];j++){var value=utils.trim((cell.innerText||cell.textContent||""));value=value.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,"");if(!/^\d*\.?\d+$/.test(value)){return false}}}return true}});UE.plugin.register("section",function(){function Section(option){this.tag="";this.level=-1,this.dom=null;this.nextSection=null;this.previousSection=null;this.parentSection=null;this.startAddress=[];this.endAddress=[];this.children=[]}function getSection(option){var section=new Section();return utils.extend(section,option)}function getNodeFromAddress(startAddress,root){var current=root;for(var i=0;i<startAddress.length;i++){if(!current.childNodes){return null}current=current.childNodes[startAddress[i]]}return current}var me=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){me.fireEvent("updateSections")}},bindEvents:{ready:function(){me.fireEvent("updateSections");domUtils.on(me.body,"drop paste",function(){me.fireEvent("updateSections")})},afterexeccommand:function(type,cmd){if(cmd=="paragraph"){me.fireEvent("updateSections")}},keyup:function(type,e){var me=this,range=me.selection.getRange();if(range.collapsed!=true){me.fireEvent("updateSections")}else{var keyCode=e.keyCode||e.which;if(keyCode==13||keyCode==8||keyCode==46){me.fireEvent("updateSections")}}}},commands:{getsections:{execCommand:function(cmd,levels){var levelFn=levels||["h1","h2","h3","h4","h5","h6"];for(var i=0;i<levelFn.length;i++){if(typeof levelFn[i]=="string"){levelFn[i]=function(fn){return function(node){return node.tagName==fn.toUpperCase()}}(levelFn[i])}else{if(typeof levelFn[i]!="function"){levelFn[i]=function(node){return null}}}}function getSectionLevel(node){for(var i=0;i<levelFn.length;i++){if(levelFn[i](node)){return i}}return -1}var me=this,Directory=getSection({level:-1,title:"root"}),previous=Directory;function traversal(node,Directory){var level,tmpSection=null,parent,child,children=node.childNodes;for(var i=0,len=children.length;i<len;i++){child=children[i];level=getSectionLevel(child);if(level>=0){var address=me.selection.getRange().selectNode(child).createAddress(true).startAddress,current=getSection({tag:child.tagName,title:child.innerText||child.textContent||"",level:level,dom:child,startAddress:utils.clone(address,[]),endAddress:utils.clone(address,[]),children:[]});previous.nextSection=current;current.previousSection=previous;parent=previous;while(level<=parent.level){parent=parent.parentSection}current.parentSection=parent;parent.children.push(current);tmpSection=previous=current}else{child.nodeType===1&&traversal(child,Directory);tmpSection&&tmpSection.endAddress[tmpSection.endAddress.length-1]++}}}traversal(me.body,Directory);return Directory},notNeedUndo:true},movesection:{execCommand:function(cmd,sourceSection,targetSection,isAfter){var me=this,targetAddress,target;if(!sourceSection||!targetSection||targetSection.level==-1){return}targetAddress=isAfter?targetSection.endAddress:targetSection.startAddress;target=getNodeFromAddress(targetAddress,me.body);if(!targetAddress||!target||isContainsAddress(sourceSection.startAddress,sourceSection.endAddress,targetAddress)){return}var startNode=getNodeFromAddress(sourceSection.startAddress,me.body),endNode=getNodeFromAddress(sourceSection.endAddress,me.body),current,nextNode;if(isAfter){current=endNode;while(current&&!(domUtils.getPosition(startNode,current)&domUtils.POSITION_FOLLOWING)){nextNode=current.previousSibling;domUtils.insertAfter(target,current);if(current==startNode){break}current=nextNode}}else{current=startNode;while(current&&!(domUtils.getPosition(current,endNode)&domUtils.POSITION_FOLLOWING)){nextNode=current.nextSibling;target.parentNode.insertBefore(current,target);if(current==endNode){break}current=nextNode}}me.fireEvent("updateSections");function isContainsAddress(startAddress,endAddress,addressTarget){var isAfterStartAddress=false,isBeforeEndAddress=false;for(var i=0;i<startAddress.length;i++){if(i>=addressTarget.length){break}if(addressTarget[i]>startAddress[i]){isAfterStartAddress=true;break}else{if(addressTarget[i]<startAddress[i]){break}}}for(var i=0;i<endAddress.length;i++){if(i>=addressTarget.length){break}if(addressTarget[i]<startAddress[i]){isBeforeEndAddress=true;break}else{if(addressTarget[i]>startAddress[i]){break}}}return isAfterStartAddress&&isBeforeEndAddress}}},deletesection:{execCommand:function(cmd,section,keepChildren){var me=this;if(!section){return}function getNodeFromAddress(startAddress){var current=me.body;for(var i=0;i<startAddress.length;i++){if(!current.childNodes){return null}current=current.childNodes[startAddress[i]]}return current}var startNode=getNodeFromAddress(section.startAddress),endNode=getNodeFromAddress(section.endAddress),current=startNode,nextNode;if(!keepChildren){while(current&&domUtils.inDoc(endNode,me.document)&&!(domUtils.getPosition(current,endNode)&domUtils.POSITION_FOLLOWING)){nextNode=current.nextSibling;domUtils.remove(current);current=nextNode}}else{domUtils.remove(current)}me.fireEvent("updateSections")}},selectsection:{execCommand:function(cmd,section){if(!section&&!section.dom){return false}var me=this,range=me.selection.getRange(),address={startAddress:utils.clone(section.startAddress,[]),endAddress:utils.clone(section.endAddress,[])};address.endAddress[address.endAddress.length-1]++;range.moveToAddress(address).select().scrollToView();return true},notNeedUndo:true},scrolltosection:{execCommand:function(cmd,section){if(!section&&!section.dom){return false}var me=this,range=me.selection.getRange(),address={startAddress:section.startAddress,endAddress:section.endAddress};address.endAddress[address.endAddress.length-1]++;range.moveToAddress(address).scrollToView();return true},notNeedUndo:true}}}});UE.plugin.register("simpleupload",function(){var me=this,isLoaded=false,containerBtn;function initUploadBtn(){var w=containerBtn.offsetWidth||20,h=containerBtn.offsetHeight||20,btnIframe=document.createElement("iframe"),btnStyle="display:block;width:"+w+"px;height:"+h+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(btnIframe,"load",function(){var timestrap=(+new Date()).toString(36),wrapper,btnIframeDoc,btnIframeBody;btnIframeDoc=(btnIframe.contentDocument||btnIframe.contentWindow.document);btnIframeBody=btnIframeDoc.body;wrapper=btnIframeDoc.createElement("div");wrapper.innerHTML='<form id="edui_form_'+timestrap+'" target="edui_iframe_'+timestrap+'" method="POST" enctype="multipart/form-data" action="'+me.getOpt("serverUrl")+'" style="'+btnStyle+'"><input id="edui_input_'+timestrap+'" type="file" accept="image/*" name="'+me.options.imageFieldName+'" style="'+btnStyle+'"></form><iframe id="edui_iframe_'+timestrap+'" name="edui_iframe_'+timestrap+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>';wrapper.className="edui-"+me.options.theme;wrapper.id=me.ui.id+"_iframeupload";btnIframeBody.style.cssText=btnStyle;btnIframeBody.style.width=w+"px";btnIframeBody.style.height=h+"px";btnIframeBody.appendChild(wrapper);if(btnIframeBody.parentNode){btnIframeBody.parentNode.style.width=w+"px";btnIframeBody.parentNode.style.height=w+"px"}var form=btnIframeDoc.getElementById("edui_form_"+timestrap);var input=btnIframeDoc.getElementById("edui_input_"+timestrap);var iframe=btnIframeDoc.getElementById("edui_iframe_"+timestrap);domUtils.on(input,"change",function(){if(!input.value){return}var loadingId="loading_"+(+new Date()).toString(36);var params=utils.serializeParam(me.queryCommandValue("serverparam"))||"";var imageActionUrl=me.getActionUrl(me.getOpt("imageActionName"));var allowFiles=me.getOpt("imageAllowFiles");me.focus();me.execCommand("inserthtml",'<img class="loadingclass" id="'+loadingId+'" src="'+me.options.themePath+me.options.theme+'/images/spacer.gif" title="'+(me.getLang("simpleupload.loading")||"")+'" >');function callback(){try{var link,json,loader,body=(iframe.contentDocument||iframe.contentWindow.document).body,result=body.innerText||body.textContent||"";json=(new Function("return "+result))();link=me.options.imageUrlPrefix+json.url;if(json.state=="SUCCESS"&&json.url){loader=me.document.getElementById(loadingId);loader.setAttribute("src",link);loader.setAttribute("_src",link);loader.setAttribute("title",json.title||"");loader.setAttribute("alt",json.original||"");loader.removeAttribute("id");domUtils.removeClasses(loader,"loadingclass")}else{showErrorLoader&&showErrorLoader(json.state)}}catch(er){showErrorLoader&&showErrorLoader(me.getLang("simpleupload.loadError"))}form.reset();domUtils.un(iframe,"load",callback)}function showErrorLoader(title){if(loadingId){var loader=me.document.getElementById(loadingId);loader&&domUtils.remove(loader);me.fireEvent("showmessage",{id:loadingId,content:title,type:"error",timeout:4000})}}if(!me.getOpt("imageActionName")){errorHandler(me.getLang("autoupload.errorLoadConfig"));return}var filename=input.value,fileext=filename?filename.substr(filename.lastIndexOf(".")):"";if(!fileext||(allowFiles&&(allowFiles.join("")+".").indexOf(fileext.toLowerCase()+".")==-1)){showErrorLoader(me.getLang("simpleupload.exceedTypeError"));return}domUtils.on(iframe,"load",callback);form.action=utils.formatUrl(imageActionUrl+(imageActionUrl.indexOf("?")==-1?"?":"&")+params);form.submit()});var stateTimer;me.addListener("selectionchange",function(){clearTimeout(stateTimer);stateTimer=setTimeout(function(){var state=me.queryCommandState("simpleupload");if(state==-1){input.disabled="disabled"}else{input.disabled=false}},400)});isLoaded=true});btnIframe.style.cssText=btnStyle;containerBtn.appendChild(btnIframe)}return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(type,container){containerBtn=container;me.afterConfigReady(initUploadBtn)}},outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(n){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(n.getAttr("class"))){n.parentNode.removeChild(n)}})},commands:{simpleupload:{queryCommandState:function(){return isLoaded?0:-1}}}}});UE.plugin.register("serverparam",function(){var me=this,serverParam={};return{commands:{serverparam:{execCommand:function(cmd,key,value){if(key===undefined||key===null){serverParam={}}else{if(utils.isString(key)){if(value===undefined||value===null){delete serverParam[key]}else{serverParam[key]=value}}else{if(utils.isObject(key)){utils.extend(serverParam,key,true)}else{if(utils.isFunction(key)){utils.extend(serverParam,key(),true)}}}}},queryCommandValue:function(){return serverParam||{}}}}}});UE.plugin.register("insertfile",function(){var me=this;function getFileIcon(url){var ext=url.substr(url.lastIndexOf(".")+1).toLowerCase(),maps={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return maps[ext]?maps[ext]:maps.txt}return{commands:{insertfile:{execCommand:function(command,filelist){filelist=utils.isArray(filelist)?filelist:[filelist];var i,item,icon,title,html="",URL=me.getOpt("UEDITOR_HOME_URL"),iconDir=URL+(URL.substr(URL.length-1)=="/"?"":"/")+"dialogs/attachment/fileTypeImages/";for(i=0;i<filelist.length;i++){item=filelist[i];icon=iconDir+getFileIcon(item.url);title=item.title||item.url.substr(item.url.lastIndexOf("/")+1);html+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+icon+'" _src="'+icon+'" /><a style="font-size:12px; color:#0066cc;" href="'+item.url+'" title="'+title+'">'+title+"</a></p>"}me.execCommand("insertHtml",html)}}}}});UE.plugins.xssFilter=function(){var config=UEDITOR_CONFIG;var whitList=config.whitList;function filter(node){var tagName=node.tagName;var attrs=node.attrs;if(!whitList.hasOwnProperty(tagName)){node.parentNode.removeChild(node);return false}UE.utils.each(attrs,function(val,key){if(whitList[tagName].indexOf(key)===-1){node.setAttr(key)}})}if(whitList&&config.xssFilterRules){this.options.filterRules=function(){var result={};UE.utils.each(whitList,function(val,key){result[key]=function(node){return filter(node)}});return result}()}var tagList=[];UE.utils.each(whitList,function(val,key){tagList.push(key)});if(whitList&&config.inputXssFilter){this.addInputRule(function(root){root.traversal(function(node){if(node.type!=="element"){return false}filter(node)})})}if(whitList&&config.outputXssFilter){this.addOutputRule(function(root){root.traversal(function(node){if(node.type!=="element"){return false}filter(node)})})}};var baidu=baidu||{};baidu.editor=baidu.editor||{};UE.ui=baidu.editor.ui={};(function(){var browser=baidu.editor.browser,domUtils=baidu.editor.dom.domUtils;var magic="$EDITORUI";var root=window[magic]={};var uidMagic="ID"+magic;var uidCount=0;var uiUtils=baidu.editor.ui.uiUtils={uid:function(obj){return(obj?obj[uidMagic]||(obj[uidMagic]=++uidCount):++uidCount)},hook:function(fn,callback){var dg;if(fn&&fn._callbacks){dg=fn}else{dg=function(){var q;if(fn){q=fn.apply(this,arguments)}var callbacks=dg._callbacks;var k=callbacks.length;while(k--){var r=callbacks[k].apply(this,arguments);if(q===undefined){q=r}}return q};dg._callbacks=[]}dg._callbacks.push(callback);return dg},createElementByHtml:function(html){var el=document.createElement("div");el.innerHTML=html;el=el.firstChild;el.parentNode.removeChild(el);return el},getViewportElement:function(){return(browser.ie&&browser.quirks)?document.body:document.documentElement},getClientRect:function(element){var bcr;try{bcr=element.getBoundingClientRect()}catch(e){bcr={left:0,top:0,height:0,width:0}}var rect={left:Math.round(bcr.left),top:Math.round(bcr.top),height:Math.round(bcr.bottom-bcr.top),width:Math.round(bcr.right-bcr.left)};var doc;while((doc=element.ownerDocument)!==document&&(element=domUtils.getWindow(doc).frameElement)){bcr=element.getBoundingClientRect();rect.left+=bcr.left;rect.top+=bcr.top}rect.bottom=rect.top+rect.height;rect.right=rect.left+rect.width;return rect},getViewportRect:function(){var viewportEl=uiUtils.getViewportElement();var width=(window.innerWidth||viewportEl.clientWidth)|0;var height=(window.innerHeight||viewportEl.clientHeight)|0;return{left:0,top:0,height:height,width:width,bottom:height,right:width}},setViewportOffset:function(element,offset){var rect;var fixedLayer=uiUtils.getFixedLayer();if(element.parentNode===fixedLayer){element.style.left=offset.left+"px";element.style.top=offset.top+"px"}else{domUtils.setViewportOffset(element,offset)}},getEventOffset:function(evt){var el=evt.target||evt.srcElement;var rect=uiUtils.getClientRect(el);var offset=uiUtils.getViewportOffsetByEvent(evt);return{left:offset.left-rect.left,top:offset.top-rect.top}},getViewportOffsetByEvent:function(evt){var el=evt.target||evt.srcElement;var frameEl=domUtils.getWindow(el).frameElement;var offset={left:evt.clientX,top:evt.clientY};if(frameEl&&el.ownerDocument!==document){var rect=uiUtils.getClientRect(frameEl);offset.left+=rect.left;offset.top+=rect.top}return offset},setGlobal:function(id,obj){root[id]=obj;return magic+'["'+id+'"]'},unsetGlobal:function(id){delete root[id]},copyAttributes:function(tgt,src){var attributes=src.attributes;var k=attributes.length;while(k--){var attrNode=attributes[k];if(attrNode.nodeName!="style"&&attrNode.nodeName!="class"&&(!browser.ie||attrNode.specified)){tgt.setAttribute(attrNode.nodeName,attrNode.nodeValue)}}if(src.className){domUtils.addClass(tgt,src.className)}if(src.style.cssText){tgt.style.cssText+=";"+src.style.cssText}},removeStyle:function(el,styleName){if(el.style.removeProperty){el.style.removeProperty(styleName)}else{if(el.style.removeAttribute){el.style.removeAttribute(styleName)}else{throw""}}},contains:function(elA,elB){return elA&&elB&&(elA===elB?false:(elA.contains?elA.contains(elB):elA.compareDocumentPosition(elB)&16))},startDrag:function(evt,callbacks,doc){var doc=doc||document;var startX=evt.clientX;var startY=evt.clientY;function handleMouseMove(evt){var x=evt.clientX-startX;var y=evt.clientY-startY;callbacks.ondragmove(x,y,evt);if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=true}}if(doc.addEventListener){function handleMouseUp(evt){doc.removeEventListener("mousemove",handleMouseMove,true);doc.removeEventListener("mouseup",handleMouseUp,true);window.removeEventListener("mouseup",handleMouseUp,true);callbacks.ondragstop()}doc.addEventListener("mousemove",handleMouseMove,true);doc.addEventListener("mouseup",handleMouseUp,true);window.addEventListener("mouseup",handleMouseUp,true);evt.preventDefault()}else{var elm=evt.srcElement;elm.setCapture();function releaseCaptrue(){elm.releaseCapture();elm.detachEvent("onmousemove",handleMouseMove);elm.detachEvent("onmouseup",releaseCaptrue);elm.detachEvent("onlosecaptrue",releaseCaptrue);callbacks.ondragstop()}elm.attachEvent("onmousemove",handleMouseMove);elm.attachEvent("onmouseup",releaseCaptrue);elm.attachEvent("onlosecaptrue",releaseCaptrue);evt.returnValue=false}callbacks.ondragstart()},getFixedLayer:function(){var layer=document.getElementById("edui_fixedlayer");if(layer==null){layer=document.createElement("div");layer.id="edui_fixedlayer";document.body.appendChild(layer);if(browser.ie&&browser.version<=8){layer.style.position="absolute";bindFixedLayer();setTimeout(updateFixedOffset)}else{layer.style.position="fixed"}layer.style.left="0";layer.style.top="0";layer.style.width="0";layer.style.height="0"}return layer},makeUnselectable:function(element){if(browser.opera||(browser.ie&&browser.version<9)){element.unselectable="on";if(element.hasChildNodes()){for(var i=0;i<element.childNodes.length;i++){if(element.childNodes[i].nodeType==1){uiUtils.makeUnselectable(element.childNodes[i])}}}}else{if(element.style.MozUserSelect!==undefined){element.style.MozUserSelect="none"}else{if(element.style.WebkitUserSelect!==undefined){element.style.WebkitUserSelect="none"}else{if(element.style.KhtmlUserSelect!==undefined){element.style.KhtmlUserSelect="none"}}}}}};function updateFixedOffset(){var layer=document.getElementById("edui_fixedlayer");uiUtils.setViewportOffset(layer,{left:0,top:0})}function bindFixedLayer(adjOffset){domUtils.on(window,"scroll",updateFixedOffset);domUtils.on(window,"resize",baidu.editor.utils.defer(updateFixedOffset,0,true))}})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,EventBase=baidu.editor.EventBase,UIBase=baidu.editor.ui.UIBase=function(){};UIBase.prototype={className:"",uiName:"",initOptions:function(options){var me=this;for(var k in options){me[k]=options[k]}this.id=this.id||"edui"+uiUtils.uid()},initUIBase:function(){this._globalKey=utils.unhtml(uiUtils.setGlobal(this.id,this))},render:function(holder){var html=this.renderHtml();var el=uiUtils.createElementByHtml(html);var list=domUtils.getElementsByTagName(el,"*");var theme="edui-"+(this.theme||this.editor.options.theme);var layer=document.getElementById("edui_fixedlayer");for(var i=0,node;node=list[i++];){domUtils.addClass(node,theme)}domUtils.addClass(el,theme);if(layer){layer.className="";domUtils.addClass(layer,theme)}var seatEl=this.getDom();if(seatEl!=null){seatEl.parentNode.replaceChild(el,seatEl);uiUtils.copyAttributes(el,seatEl)}else{if(typeof holder=="string"){holder=document.getElementById(holder)}holder=holder||uiUtils.getFixedLayer();domUtils.addClass(holder,theme);holder.appendChild(el)}this.postRender()},getDom:function(name){if(!name){return document.getElementById(this.id)}else{return document.getElementById(this.id+"_"+name)}},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(tpl){var prefix="edui-"+this.uiName;return(tpl.replace(/##/g,this.id).replace(/%%-/g,this.uiName?prefix+"-":"").replace(/%%/g,(this.uiName?prefix:"")+" "+this.className).replace(/\$\$/g,this._globalKey))},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var box=this.getDom();if(box){baidu.editor.dom.domUtils.remove(box)}uiUtils.unsetGlobal(this.id)}};utils.inherits(UIBase,EventBase)})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,Separator=baidu.editor.ui.Separator=function(options){this.initOptions(options);this.initSeparator()};Separator.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};utils.inherits(Separator,UIBase)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,uiUtils=baidu.editor.ui.uiUtils;var Mask=baidu.editor.ui.Mask=function(options){this.initOptions(options);this.initUIBase()};Mask.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var me=this;domUtils.on(window,"resize",function(){setTimeout(function(){if(!me.isHidden()){me._fill()}})})},show:function(zIndex){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=zIndex},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return false},_onClick:function(e,target){this.fireEvent("click",e,target)},_fill:function(){var el=this.getDom();var vpRect=uiUtils.getViewportRect();el.style.width=vpRect.width+"px";el.style.height=vpRect.height+"px"}};utils.inherits(Mask,UIBase)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,Popup=baidu.editor.ui.Popup=function(options){this.initOptions(options);this.initPopup()};var allPopups=[];function closeAllPopup(evt,el){for(var i=0;i<allPopups.length;i++){var pop=allPopups[i];if(!pop.isHidden()){if(pop.queryAutoHide(el)!==false){if(evt&&/scroll/ig.test(evt.type)&&pop.className=="edui-wordpastepop"){return}pop.hide()}}}if(allPopups.length){pop.editor.fireEvent("afterhidepop")}}Popup.postHide=closeAllPopup;var ANCHOR_CLASSES=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];Popup.prototype={SHADOW_RADIUS:5,content:null,_hidden:false,autoRender:true,canSideLeft:true,canSideUp:true,initPopup:function(){this.initUIBase();allPopups.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){if(this.content){if(typeof this.content=="string"){return this.content}return this.content.renderHtml()}else{return""}},_UIBase_postRender:UIBase.prototype.postRender,postRender:function(){if(this.content instanceof UIBase){this.content.postRender()}if(this.captureWheel&&!this.captured){this.captured=true;var winHeight=(document.documentElement.clientHeight||document.body.clientHeight)-80,_height=this.getDom().offsetHeight,_top=uiUtils.getClientRect(this.combox.getDom()).top,content=this.getDom("content"),ifr=this.getDom("body").getElementsByTagName("iframe"),me=this;ifr.length&&(ifr=ifr[0]);while(_top+_height>winHeight){_height-=30}content.style.height=_height+"px";ifr&&(ifr.style.height=_height+"px");if(window.XMLHttpRequest){domUtils.on(content,("onmousewheel" in document.body)?"mousewheel":"DOMMouseScroll",function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(e.wheelDelta){content.scrollTop-=(e.wheelDelta/120)*60}else{content.scrollTop-=(e.detail/-3)*60}})}else{domUtils.on(this.getDom(),"mousewheel",function(e){e.returnValue=false;me.getDom("content").scrollTop-=(e.wheelDelta/120)*60})}}this.fireEvent("postRenderAfter");this.hide(true);this._UIBase_postRender()},_doAutoRender:function(){if(!this.getDom()&&this.autoRender){this.render()}},mesureSize:function(){var box=this.getDom("content");return uiUtils.getClientRect(box)},fitSize:function(){if(this.captureWheel&&this.sized){return this.__size}this.sized=true;var popBodyEl=this.getDom("body");popBodyEl.style.width="";popBodyEl.style.height="";var size=this.mesureSize();if(this.captureWheel){popBodyEl.style.width=-(-20-size.width)+"px";var height=parseInt(this.getDom("content").style.height,10);!window.isNaN(height)&&(size.height=height)}else{popBodyEl.style.width=size.width+"px"}popBodyEl.style.height=size.height+"px";this.__size=size;this.captureWheel&&(this.getDom("content").style.overflow="auto");return size},showAnchor:function(element,hoz){this.showAnchorRect(uiUtils.getClientRect(element),hoz)},showAnchorRect:function(rect,hoz,adj){this._doAutoRender();var vpRect=uiUtils.getViewportRect();this.getDom().style.visibility="hidden";this._show();var popSize=this.fitSize();var sideLeft,sideUp,left,top;if(hoz){sideLeft=this.canSideLeft&&(rect.right+popSize.width>vpRect.right&&rect.left>popSize.width);sideUp=this.canSideUp&&(rect.top+popSize.height>vpRect.bottom&&rect.bottom>popSize.height);left=(sideLeft?rect.left-popSize.width:rect.right);top=(sideUp?rect.bottom-popSize.height:rect.top)}else{sideLeft=this.canSideLeft&&(rect.right+popSize.width>vpRect.right&&rect.left>popSize.width);sideUp=this.canSideUp&&(rect.top+popSize.height>vpRect.bottom&&rect.bottom>popSize.height);left=(sideLeft?rect.right-popSize.width:rect.left);top=(sideUp?rect.top-popSize.height:rect.bottom)}var popEl=this.getDom();uiUtils.setViewportOffset(popEl,{left:left,top:top});domUtils.removeClasses(popEl,ANCHOR_CLASSES);popEl.className+=" "+ANCHOR_CLASSES[(sideUp?1:0)*2+(sideLeft?1:0)];if(this.editor){popEl.style.zIndex=this.editor.container.style.zIndex*1+10;baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=popEl.style.zIndex-1}this.getDom().style.visibility="visible"},showAt:function(offset){var left=offset.left;var top=offset.top;var rect={left:left,top:top,right:left,bottom:top,height:0,width:0};this.showAnchorRect(rect,false,true)},_show:function(){if(this._hidden){var box=this.getDom();box.style.display="";this._hidden=false;this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(notNofity){if(!this._hidden&&this.getDom()){this.getDom().style.display="none";this._hidden=true;if(!notNofity){this.fireEvent("hide")}}},queryAutoHide:function(el){return !el||!uiUtils.contains(this.getDom(),el)}};utils.inherits(Popup,UIBase);domUtils.on(document,"mousedown",function(evt){var el=evt.target||evt.srcElement;closeAllPopup(evt,el)});domUtils.on(window,"scroll",function(evt,el){closeAllPopup(evt,el)})})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,ColorPicker=baidu.editor.ui.ColorPicker=function(options){this.initOptions(options);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};ColorPicker.prototype={getHtmlTpl:function(){return genColorPicker(this.noColorText,this.editor)},_onTableClick:function(evt){var tgt=evt.target||evt.srcElement;var color=tgt.getAttribute("data-color");if(color){this.fireEvent("pickcolor",color)}},_onTableOver:function(evt){var tgt=evt.target||evt.srcElement;var color=tgt.getAttribute("data-color");if(color){this.getDom("preview").style.backgroundColor=color}},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};utils.inherits(ColorPicker,UIBase);var COLORS=("ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,").split(",");function genColorPicker(noColorText,editor){var html='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+noColorText+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+editor.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >';for(var i=0;i<COLORS.length;i++){if(i&&i%10===0){html+="</tr>"+(i==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+editor.getLang("standardColor")+"</td></tr>":"")+"<tr"+(i==60?' class="edui-colorpicker-tablefirstrow"':"")+">"}html+=i<70?'<td style="padding: 0 2px;"><a hidefocus title="'+COLORS[i]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+COLORS[i]+'" style="background-color:#'+COLORS[i]+";border:solid #ccc;"+(i<10||i>=60?"border-width:1px;":i>=10&&i<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':""}html+="</tr></table></div>";return html}})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase;var TablePicker=baidu.editor.ui.TablePicker=function(options){this.initOptions(options);this.initTablePicker()};TablePicker.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var me=this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:UIBase.prototype.render,render:function(holder){this._UIBase_render(holder);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(numCols,numRows){var style=this.getDom("overlay").style;var sideLen=this.lengthOfCellSide;style.width=numCols*sideLen+"px";style.height=numRows*sideLen+"px";var label=this.getDom("label");label.innerHTML=numCols+this.editor.getLang("t_col")+" x "+numRows+this.editor.getLang("t_row");this.numCols=numCols;this.numRows=numRows},_onMouseOver:function(evt,el){var rel=evt.relatedTarget||evt.fromElement;if(!uiUtils.contains(el,rel)&&el!==rel){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility=""}},_onMouseOut:function(evt,el){var rel=evt.relatedTarget||evt.toElement;if(!uiUtils.contains(el,rel)&&el!==rel){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility="hidden"}},_onMouseMove:function(evt,el){var style=this.getDom("overlay").style;var offset=uiUtils.getEventOffset(evt);var sideLen=this.lengthOfCellSide;var numCols=Math.ceil(offset.left/sideLen);var numRows=Math.ceil(offset.top/sideLen);this._track(numCols,numRows)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};utils.inherits(TablePicker,UIBase)})();(function(){var browser=baidu.editor.browser,domUtils=baidu.editor.dom.domUtils,uiUtils=baidu.editor.ui.uiUtils;var TPL_STATEFUL='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(browser.ie?(' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"'):(' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"'));baidu.editor.ui.Stateful={alwalysHoverable:false,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var tpl=this._Stateful_dGetHtmlTpl();return tpl.replace(/stateful/g,function(){return TPL_STATEFUL})},Stateful_onMouseEnter:function(evt,el){this.target=el;if(!this.isDisabled()||this.alwalysHoverable){this.addState("hover");this.fireEvent("over")}},Stateful_onMouseLeave:function(evt,el){if(!this.isDisabled()||this.alwalysHoverable){this.removeState("hover");this.removeState("active");this.fireEvent("out")}},Stateful_onMouseOver:function(evt,el){var rel=evt.relatedTarget;if(!uiUtils.contains(el,rel)&&el!==rel){this.Stateful_onMouseEnter(evt,el)}},Stateful_onMouseOut:function(evt,el){var rel=evt.relatedTarget;if(!uiUtils.contains(el,rel)&&el!==rel){this.Stateful_onMouseLeave(evt,el)}},Stateful_onMouseDown:function(evt,el){if(!this.isDisabled()){this.addState("active")}},Stateful_onMouseUp:function(evt,el){if(!this.isDisabled()){this.removeState("active")}},Stateful_postRender:function(){if(this.disabled&&!this.hasState("disabled")){this.addState("disabled")}},hasState:function(state){return domUtils.hasClass(this.getStateDom(),"edui-state-"+state)},addState:function(state){if(!this.hasState(state)){this.getStateDom().className+=" edui-state-"+state}},removeState:function(state){if(this.hasState(state)){domUtils.removeClasses(this.getStateDom(),["edui-state-"+state])}},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(checked){if(!this.isDisabled()&&checked){this.addState("checked")}else{this.removeState("checked")}},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(disabled){if(disabled){this.removeState("hover");this.removeState("checked");this.removeState("active");this.addState("disabled")}else{this.removeState("disabled")}}}})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,Stateful=baidu.editor.ui.Stateful,Button=baidu.editor.ui.Button=function(options){if(options.name){var btnName=options.name;var cssRules=options.cssRules;if(!options.className){options.className="edui-for-"+btnName}options.cssRules=".edui-default  .edui-for-"+btnName+" .edui-icon {"+cssRules+"}"}this.initOptions(options);this.initButton()};Button.prototype={uiName:"button",label:"",title:"",showIcon:true,showText:true,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();if(this.cssRules){utils.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(e){var target=e.target||e.srcElement,tagName=target&&target.tagName&&target.tagName.toLowerCase();if(tagName=="input"||tagName=="object"||tagName=="object"){return false}},_onClick:function(){if(!this.isDisabled()){this.fireEvent("click")}},setTitle:function(text){var label=this.getDom("label");label.innerHTML=text}};utils.inherits(Button,UIBase);utils.extend(Button.prototype,Stateful)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,Stateful=baidu.editor.ui.Stateful,SplitButton=baidu.editor.ui.SplitButton=function(options){this.initOptions(options);this.initSplitButton()};SplitButton.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();var me=this;if(this.popup!=null){var popup=this.popup;this.popup=null;this.setPopup(popup)}},_UIBase_postRender:UIBase.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(popup){if(this.popup===popup){return}if(this.popup!=null){this.popup.dispose()}popup.addListener("show",utils.bind(this._onPopupShow,this));popup.addListener("hide",utils.bind(this._onPopupHide,this));popup.addListener("postrender",utils.bind(function(){popup.getDom("body").appendChild(uiUtils.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(uiUtils.getClientRect(this.getDom()).width+20)+'px"></div>'));popup.getDom().className+=" "+this.className},this));this.popup=popup},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var rect=uiUtils.getClientRect(this.getDom());rect.top-=this.popup.SHADOW_RADIUS;rect.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(rect)},_onArrowClick:function(event,el){if(!this.isDisabled()){this.showPopup()}},_onButtonClick:function(){if(!this.isDisabled()){this.fireEvent("buttonclick")}}};utils.inherits(SplitButton,UIBase);utils.extend(SplitButton.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,ColorPicker=baidu.editor.ui.ColorPicker,Popup=baidu.editor.ui.Popup,SplitButton=baidu.editor.ui.SplitButton,ColorButton=baidu.editor.ui.ColorButton=function(options){this.initOptions(options);this.initColorButton()};ColorButton.prototype={initColorButton:function(){var me=this;this.popup=new Popup({content:new ColorPicker({noColorText:me.editor.getLang("clearColor"),editor:me.editor,onpickcolor:function(t,color){me._onPickColor(color)},onpicknocolor:function(t,color){me._onPickNoColor(color)}}),editor:me.editor});this.initSplitButton()},_SplitButton_postRender:SplitButton.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(uiUtils.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));this.getDom().className+=" edui-colorbutton"},setColor:function(color){this.getDom("colorlump").style.backgroundColor=color;this.color=color},_onPickColor:function(color){if(this.fireEvent("pickcolor",color)!==false){this.setColor(color);this.popup.hide()}},_onPickNoColor:function(color){if(this.fireEvent("picknocolor")!==false){this.popup.hide()}}};utils.inherits(ColorButton,SplitButton)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,TablePicker=baidu.editor.ui.TablePicker,SplitButton=baidu.editor.ui.SplitButton,TableButton=baidu.editor.ui.TableButton=function(options){this.initOptions(options);this.initTableButton()};TableButton.prototype={initTableButton:function(){var me=this;this.popup=new Popup({content:new TablePicker({editor:me.editor,onpicktable:function(t,numCols,numRows){me._onPickTable(numCols,numRows)}}),editor:me.editor});this.initSplitButton()},_onPickTable:function(numCols,numRows){if(this.fireEvent("picktable",numCols,numRows)!==false){this.popup.hide()}}};utils.inherits(TableButton,SplitButton)})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase;var AutoTypeSetPicker=baidu.editor.ui.AutoTypeSetPicker=function(options){this.initOptions(options);this.initAutoTypeSetPicker()};AutoTypeSetPicker.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var me=this.editor,opt=me.options.autotypeset,lang=me.getLang("autoTypeSet");var textAlignInputName="textAlignValue"+me.uid,imageBlockInputName="imageBlockLineValue"+me.uid,symbolConverInputName="symbolConverValue"+me.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(opt.mergeEmptyline?"checked":"")+">"+lang.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(opt.removeEmptyline?"checked":"")+">"+lang.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(opt.removeClass?"checked":"")+">"+lang.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(opt.indent?"checked":"")+">"+lang.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(opt.textAlign?"checked":"")+">"+lang.alignment+'</td><td colspan="2" id="'+textAlignInputName+'"><input type="radio" name="'+textAlignInputName+'" value="left" '+((opt.textAlign&&opt.textAlign=="left")?"checked":"")+">"+me.getLang("justifyleft")+'<input type="radio" name="'+textAlignInputName+'" value="center" '+((opt.textAlign&&opt.textAlign=="center")?"checked":"")+">"+me.getLang("justifycenter")+'<input type="radio" name="'+textAlignInputName+'" value="right" '+((opt.textAlign&&opt.textAlign=="right")?"checked":"")+">"+me.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(opt.imageBlockLine?"checked":"")+">"+lang.imageFloat+'</td><td nowrap id="'+imageBlockInputName+'"><input type="radio" name="'+imageBlockInputName+'" value="none" '+((opt.imageBlockLine&&opt.imageBlockLine=="none")?"checked":"")+">"+me.getLang("default")+'<input type="radio" name="'+imageBlockInputName+'" value="left" '+((opt.imageBlockLine&&opt.imageBlockLine=="left")?"checked":"")+">"+me.getLang("justifyleft")+'<input type="radio" name="'+imageBlockInputName+'" value="center" '+((opt.imageBlockLine&&opt.imageBlockLine=="center")?"checked":"")+">"+me.getLang("justifycenter")+'<input type="radio" name="'+imageBlockInputName+'" value="right" '+((opt.imageBlockLine&&opt.imageBlockLine=="right")?"checked":"")+">"+me.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(opt.clearFontSize?"checked":"")+">"+lang.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(opt.clearFontFamily?"checked":"")+">"+lang.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(opt.removeEmptyNode?"checked":"")+">"+lang.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(opt.pasteFilter?"checked":"")+">"+lang.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(opt.bdc2sb||opt.tobdc?"checked":"")+">"+lang.symbol+'</td><td id="'+symbolConverInputName+'"><input type="radio" name="bdc" value="bdc2sb" '+(opt.bdc2sb?"checked":"")+">"+lang.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(opt.tobdc?"checked":"")+">"+lang.tobdc+'</td><td nowrap align="right"><button >'+lang.run+"</button></td></tr></table></div></div>"},_UIBase_render:UIBase.prototype.render};utils.inherits(AutoTypeSetPicker,UIBase)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,AutoTypeSetPicker=baidu.editor.ui.AutoTypeSetPicker,SplitButton=baidu.editor.ui.SplitButton,AutoTypeSetButton=baidu.editor.ui.AutoTypeSetButton=function(options){this.initOptions(options);this.initAutoTypeSetButton()};function getPara(me){var opt={},cont=me.getDom(),editorId=me.editor.uid,inputType=null,attrName=null,ipts=domUtils.getElementsByTagName(cont,"input");for(var i=ipts.length-1,ipt;ipt=ipts[i--];){inputType=ipt.getAttribute("type");if(inputType=="checkbox"){attrName=ipt.getAttribute("name");opt[attrName]&&delete opt[attrName];if(ipt.checked){var attrValue=document.getElementById(attrName+"Value"+editorId);if(attrValue){if(/input/ig.test(attrValue.tagName)){opt[attrName]=attrValue.value}else{var iptChilds=attrValue.getElementsByTagName("input");for(var j=iptChilds.length-1,iptchild;iptchild=iptChilds[j--];){if(iptchild.checked){opt[attrName]=iptchild.value;break}}}}else{opt[attrName]=true}}else{opt[attrName]=false}}else{opt[ipt.getAttribute("value")]=ipt.checked}}var selects=domUtils.getElementsByTagName(cont,"select");for(var i=0,si;si=selects[i++];){var attr=si.getAttribute("name");opt[attr]=opt[attr]?si.value:""}utils.extend(me.editor.options.autotypeset,opt);me.editor.setPreferences("autotypeset",opt)}AutoTypeSetButton.prototype={initAutoTypeSetButton:function(){var me=this;this.popup=new Popup({content:new AutoTypeSetPicker({editor:me.editor}),editor:me.editor,hide:function(){if(!this._hidden&&this.getDom()){getPara(this);this.getDom().style.display="none";this._hidden=true;this.fireEvent("hide")}}});var flag=0;this.popup.addListener("postRenderAfter",function(){var popupUI=this;if(flag){return}var cont=this.getDom(),btn=cont.getElementsByTagName("button")[0];btn.onclick=function(){getPara(popupUI);me.editor.execCommand("autotypeset");popupUI.hide()};domUtils.on(cont,"click",function(e){var target=e.target||e.srcElement,editorId=me.editor.uid;if(target&&target.tagName=="INPUT"){if(target.name=="imageBlockLine"||target.name=="textAlign"||target.name=="symbolConver"){var checked=target.checked,radioTd=document.getElementById(target.name+"Value"+editorId),radios=radioTd.getElementsByTagName("input"),defalutSelect={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"};for(var i=0;i<radios.length;i++){if(checked){if(radios[i].value==defalutSelect[target.name]){radios[i].checked="checked"}}else{radios[i].checked=false}}}if(target.name==("imageBlockLineValue"+editorId)||target.name==("textAlignValue"+editorId)||target.name=="bdc"){var checkboxs=target.parentNode.previousSibling.getElementsByTagName("input");checkboxs&&(checkboxs[0].checked=true)}getPara(popupUI)}});flag=1});this.initSplitButton()}};utils.inherits(AutoTypeSetButton,SplitButton)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,Stateful=baidu.editor.ui.Stateful,UIBase=baidu.editor.ui.UIBase;var CellAlignPicker=baidu.editor.ui.CellAlignPicker=function(options){this.initOptions(options);this.initSelected();this.initCellAlignPicker()};CellAlignPicker.prototype={initSelected:function(){var status={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3},result=-1;if(this.selected){this.selectedIndex=status.valign[this.selected.valign]*status.count+status.align[this.selected.align]}},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){var alignType=["left","center","right"],COUNT=9,tempClassName=null,tempIndex=-1,tmpl=[];for(var i=0;i<COUNT;i++){tempClassName=this.selectedIndex===i?' class="edui-cellalign-selected" ':"";tempIndex=i%3;tempIndex===0&&tmpl.push("<tr>");tmpl.push('<td index="'+i+'" '+tempClassName+' stateful><div class="edui-icon edui-'+alignType[tempIndex]+'"></div></td>');tempIndex===2&&tmpl.push("</tr>")}return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+tmpl.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(evt){var target=evt.target||evt.srcElement;if(/icon/.test(target.className)){this.items[target.parentNode.getAttribute("index")].onclick();Popup.postHide(evt)}},_UIBase_render:UIBase.prototype.render};utils.inherits(CellAlignPicker,UIBase);utils.extend(CellAlignPicker.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,Stateful=baidu.editor.ui.Stateful,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase;var PastePicker=baidu.editor.ui.PastePicker=function(options){this.initOptions(options);this.initPastePicker()};PastePicker.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(param){this.editor.ui._isTransfer=true;this.editor.fireEvent("pasteTransfer",param)},_onClick:function(cur){var node=domUtils.getNextDomNode(cur),screenHt=uiUtils.getViewportRect().height,subPop=uiUtils.getClientRect(node);if((subPop.top+subPop.height)>screenHt){node.style.top=(-subPop.height-cur.offsetHeight)+"px"}else{node.style.top=""}if(/hidden/ig.test(domUtils.getComputedStyle(node,"visibility"))){node.style.visibility="visible";domUtils.addClass(cur,"edui-state-opened")}else{node.style.visibility="hidden";domUtils.removeClasses(cur,"edui-state-opened")}},_UIBase_render:UIBase.prototype.render};utils.inherits(PastePicker,UIBase);utils.extend(PastePicker.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase,Toolbar=baidu.editor.ui.Toolbar=function(options){this.initOptions(options);this.initToolbar()};Toolbar.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(item,index){if(index===undefined){this.items.push(item)}else{this.items.splice(index,0,item)}},getHtmlTpl:function(){var buff=[];for(var i=0;i<this.items.length;i++){buff[i]=this.items[i].renderHtml()}return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+buff.join("")+"</div>"},postRender:function(){var box=this.getDom();for(var i=0;i<this.items.length;i++){this.items[i].postRender()}uiUtils.makeUnselectable(box)},_onMouseDown:function(e){var target=e.target||e.srcElement,tagName=target&&target.tagName&&target.tagName.toLowerCase();if(tagName=="input"||tagName=="object"||tagName=="object"){return false}}};utils.inherits(Toolbar,UIBase)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase,Popup=baidu.editor.ui.Popup,Stateful=baidu.editor.ui.Stateful,CellAlignPicker=baidu.editor.ui.CellAlignPicker,Menu=baidu.editor.ui.Menu=function(options){this.initOptions(options);this.initMenu()};var menuSeparator={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return true}};Menu.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item=="-"){this.items[i]=this.getSeparator()}else{if(!(item instanceof MenuItem)){item.editor=this.editor;item.theme=this.editor.options.theme;this.items[i]=this.createItem(item)}}}},getSeparator:function(){return menuSeparator},createItem:function(item){item.menu=this;return new MenuItem(item)},_Popup_getContentHtmlTpl:Popup.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0){return this._Popup_getContentHtmlTpl()}var buff=[];for(var i=0;i<this.items.length;i++){var item=this.items[i];buff[i]=item.renderHtml()}return('<div class="%%-body">'+buff.join("")+"</div>")},_Popup_postRender:Popup.prototype.postRender,postRender:function(){var me=this;for(var i=0;i<this.items.length;i++){var item=this.items[i];item.ownerMenu=this;item.postRender()}domUtils.on(this.getDom(),"mouseover",function(evt){evt=evt||event;var rel=evt.relatedTarget||evt.fromElement;var el=me.getDom();if(!uiUtils.contains(el,rel)&&el!==rel){me.fireEvent("over")}});this._Popup_postRender()},queryAutoHide:function(el){if(el){if(uiUtils.contains(this.getDom(),el)){return false}for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item.queryAutoHide(el)===false){return false}}}},clearItems:function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];clearTimeout(item._showingTimer);clearTimeout(item._closingTimer);if(item.subMenu){item.subMenu.destroy()}}this.items=[]},destroy:function(){if(this.getDom()){domUtils.remove(this.getDom())}this.clearItems()},dispose:function(){this.destroy()}};utils.inherits(Menu,Popup);var MenuItem=baidu.editor.ui.MenuItem=function(options){this.initOptions(options);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof Menu)){if(options.className&&options.className.indexOf("aligntd")!=-1){var me=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new Popup({content:new CellAlignPicker(this.subMenu),parentMenu:me,editor:me.editor,destroy:function(){if(this.getDom()){domUtils.remove(this.getDom())}}});this.subMenu.addListener("postRenderAfter",function(){domUtils.on(this.getDom(),"mouseover",function(){me.addState("opened")})})}else{this.subMenu=new Menu(this.subMenu)}}};MenuItem.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:true,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var me=this;this.addListener("over",function(){me.ownerMenu.fireEvent("submenuover",me);if(me.subMenu){me.delayShowSubMenu()}});if(this.subMenu){this.getDom().className+=" edui-hassubmenu";this.subMenu.render();this.addListener("out",function(){me.delayHideSubMenu()});this.subMenu.addListener("over",function(){clearTimeout(me._closingTimer);me._closingTimer=null;me.addState("opened")});this.ownerMenu.addListener("hide",function(){me.hideSubMenu()});this.ownerMenu.addListener("submenuover",function(t,subMenu){if(subMenu!==me){me.delayHideSubMenu()}});this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide;this.subMenu.queryAutoHide=function(el){if(el&&uiUtils.contains(me.getDom(),el)){return false}return this._bakQueryAutoHide(el)}}this.getDom().style.tabIndex="-1";uiUtils.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var me=this;if(!me.isDisabled()){me.addState("opened");clearTimeout(me._showingTimer);clearTimeout(me._closingTimer);me._closingTimer=null;me._showingTimer=setTimeout(function(){me.showSubMenu()},250)}},delayHideSubMenu:function(){var me=this;if(!me.isDisabled()){me.removeState("opened");clearTimeout(me._showingTimer);if(!me._closingTimer){me._closingTimer=setTimeout(function(){if(!me.hasState("opened")){me.hideSubMenu()}me._closingTimer=null},400)}}},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(el){if(this.subMenu&&this.hasState("opened")){return this.subMenu.queryAutoHide(el)}},_onClick:function(event,this_){if(this.hasState("disabled")){return}if(this.fireEvent("click",event,this_)!==false){if(this.subMenu){this.showSubMenu()}else{Popup.postHide(event)}}},showSubMenu:function(){var rect=uiUtils.getClientRect(this.getDom());rect.right-=5;rect.left+=2;rect.width-=7;rect.top-=4;rect.bottom+=4;rect.height+=8;this.subMenu.showAnchorRect(rect,true,true)},hideSubMenu:function(){this.subMenu.hide()}};utils.inherits(MenuItem,UIBase);utils.extend(MenuItem.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,Menu=baidu.editor.ui.Menu,SplitButton=baidu.editor.ui.SplitButton,Combox=baidu.editor.ui.Combox=function(options){this.initOptions(options);this.initCombox()};Combox.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var me=this;this.items=this.items||[];for(var i=0;i<this.items.length;i++){var item=this.items[i];item.uiName="listitem";item.index=i;item.onclick=function(){me.selectByIndex(this.index)}}this.popup=new Menu({items:this.items,uiName:"list",editor:this.editor,captureWheel:true,combox:this});this.initSplitButton()},_SplitButton_postRender:SplitButton.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var rect=uiUtils.getClientRect(this.getDom());rect.top+=1;rect.bottom-=1;rect.height-=2;this.popup.showAnchorRect(rect)},getValue:function(){return this.value},setValue:function(value){var index=this.indexByValue(value);if(index!=-1){this.selectedIndex=index;this.setLabel(this.items[index].label);this.value=this.items[index].value}else{this.selectedIndex=-1;this.setLabel(this.getLabelForUnknowValue(value));this.value=value}},setLabel:function(label){this.getDom("button_body").innerHTML=label;this.label=label},getLabelForUnknowValue:function(value){return value},indexByValue:function(value){for(var i=0;i<this.items.length;i++){if(value==this.items[i].value){return i}}return -1},getItem:function(index){return this.items[index]},selectByIndex:function(index){if(index<this.items.length&&this.fireEvent("select",index)!==false){this.selectedIndex=index;this.value=this.items[index].value;this.setLabel(this.items[index].label)}}};utils.inherits(Combox,SplitButton)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,uiUtils=baidu.editor.ui.uiUtils,Mask=baidu.editor.ui.Mask,UIBase=baidu.editor.ui.UIBase,Button=baidu.editor.ui.Button,Dialog=baidu.editor.ui.Dialog=function(options){if(options.name){var name=options.name;var cssRules=options.cssRules;if(!options.className){options.className="edui-for-"+name}if(cssRules){options.cssRules=".edui-default .edui-for-"+name+" .edui-dialog-content  {"+cssRules+"}"}}this.initOptions(utils.extend({autoReset:true,draggable:true,onok:function(){},oncancel:function(){},onclose:function(t,ok){return ok?this.onok():this.oncancel()},holdScroll:false},options));this.initDialog()};var modalMask;var dragMask;var activeDialog;Dialog.prototype={draggable:false,uiName:"dialog",initDialog:function(){var me=this,theme=this.editor.options.theme;if(this.cssRules){utils.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}this.initUIBase();this.modalMask=(modalMask||(modalMask=new Mask({className:"edui-dialog-modalmask",theme:theme,onclick:function(){activeDialog&&activeDialog.close(false)}})));this.dragMask=(dragMask||(dragMask=new Mask({className:"edui-dialog-dragmask",theme:theme})));this.closeButton=new Button({className:"edui-dialog-closebutton",title:me.closeDialog,theme:theme,onclick:function(){me.close(false)}});this.fullscreen&&this.initResizeEvent();if(this.buttons){for(var i=0;i<this.buttons.length;i++){if(!(this.buttons[i] instanceof Button)){this.buttons[i]=new Button(utils.extend(this.buttons[i],{editor:this.editor},true))}}}},initResizeEvent:function(){var me=this;domUtils.on(window,"resize",function(){if(me._hidden||me._hidden===undefined){return}if(me.__resizeTimer){window.clearTimeout(me.__resizeTimer)}me.__resizeTimer=window.setTimeout(function(){me.__resizeTimer=null;var dialogWrapNode=me.getDom(),contentNode=me.getDom("content"),wrapRect=UE.ui.uiUtils.getClientRect(dialogWrapNode),contentRect=UE.ui.uiUtils.getClientRect(contentNode),vpRect=uiUtils.getViewportRect();contentNode.style.width=(vpRect.width-wrapRect.width+contentRect.width)+"px";contentNode.style.height=(vpRect.height-wrapRect.height+contentRect.height)+"px";dialogWrapNode.style.width=vpRect.width+"px";dialogWrapNode.style.height=vpRect.height+"px";me.fireEvent("resize")},100)})},fitSize:function(){var popBodyEl=this.getDom("body");var size=this.mesureSize();popBodyEl.style.width=size.width+"px";popBodyEl.style.height=size.height+"px";return size},safeSetOffset:function(offset){var me=this;var el=me.getDom();var vpRect=uiUtils.getViewportRect();var rect=uiUtils.getClientRect(el);var left=offset.left;if(left+rect.width>vpRect.right){left=vpRect.right-rect.width}var top=offset.top;if(top+rect.height>vpRect.bottom){top=vpRect.bottom-rect.height}el.style.left=Math.max(left,0)+"px";el.style.top=Math.max(top,0)+"px"},showAtCenter:function(){var vpRect=uiUtils.getViewportRect();if(!this.fullscreen){this.getDom().style.display="";var popSize=this.fitSize();var titleHeight=this.getDom("titlebar").offsetHeight|0;var left=vpRect.width/2-popSize.width/2;var top=vpRect.height/2-(popSize.height-titleHeight)/2-titleHeight;var popEl=this.getDom();this.safeSetOffset({left:Math.max(left|0,0),top:Math.max(top|0,0)});if(!domUtils.hasClass(popEl,"edui-state-centered")){popEl.className+=" edui-state-centered"}}else{var dialogWrapNode=this.getDom(),contentNode=this.getDom("content");dialogWrapNode.style.display="block";var wrapRect=UE.ui.uiUtils.getClientRect(dialogWrapNode),contentRect=UE.ui.uiUtils.getClientRect(contentNode);dialogWrapNode.style.left="-100000px";contentNode.style.width=(vpRect.width-wrapRect.width+contentRect.width)+"px";contentNode.style.height=(vpRect.height-wrapRect.height+contentRect.height)+"px";dialogWrapNode.style.width=vpRect.width+"px";dialogWrapNode.style.height=vpRect.height+"px";dialogWrapNode.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX="hidden";document.documentElement.style.overflowY="hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}this._show()},getContentHtml:function(){var contentHtml="";if(typeof this.content=="string"){contentHtml=this.content}else{if(this.iframeUrl){contentHtml='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'}}return contentHtml},getHtmlTpl:function(){var footHtml="";if(this.buttons){var buff=[];for(var i=0;i<this.buttons.length;i++){buff[i]=this.buttons[i].renderHtml()}footHtml='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+buff.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(!this.fullscreen?'class="%%"':'class="%%-wrap edui-dialog-fullscreen-flag"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+footHtml+"</div></div></div>"},postRender:function(){if(!this.modalMask.getDom()){this.modalMask.render();this.modalMask.hide()}if(!this.dragMask.getDom()){this.dragMask.render();this.dragMask.hide()}var me=this;this.addListener("show",function(){me.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){me.modalMask.hide()});if(this.buttons){for(var i=0;i<this.buttons.length;i++){this.buttons[i].postRender()}}domUtils.on(window,"resize",function(){setTimeout(function(){if(!me.isHidden()){me.safeSetOffset(uiUtils.getClientRect(me.getDom()))}})});this._hide()},mesureSize:function(){var body=this.getDom("body");var width=uiUtils.getClientRect(this.getDom("content")).width;var dialogBodyStyle=body.style;dialogBodyStyle.width=width;return uiUtils.getClientRect(body)},_onTitlebarMouseDown:function(evt,el){if(this.draggable){var rect;var vpRect=uiUtils.getViewportRect();var me=this;uiUtils.startDrag(evt,{ondragstart:function(){rect=uiUtils.getClientRect(me.getDom());me.getDom("contmask").style.visibility="visible";me.dragMask.show(me.getDom().style.zIndex-1)},ondragmove:function(x,y){var left=rect.left+x;var top=rect.top+y;me.safeSetOffset({left:left,top:top})},ondragstop:function(){me.getDom("contmask").style.visibility="hidden";domUtils.removeClasses(me.getDom(),["edui-state-centered"]);me.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){if(this._hidden){this.getDom().style.display="";this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10);this._hidden=false;this.fireEvent("show");baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4}},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var wrapNode=this.getDom();wrapNode.style.display="none";wrapNode.style.zIndex="";wrapNode.style.width="";wrapNode.style.height="";this._hidden=true;this.fireEvent("hide")}},open:function(){if(this.autoReset){try{this.reset()}catch(e){this.render();this.open()}}this.showAtCenter();if(this.iframeUrl){try{this.getDom("iframe").focus()}catch(ex){}}activeDialog=this},_onCloseButtonClick:function(evt,el){this.close(false)},close:function(ok){if(this.fireEvent("close",ok)!==false){if(this.fullscreen){document.documentElement.style.overflowX=this._originalContext.html.overflowX;document.documentElement.style.overflowY=this._originalContext.html.overflowY;document.body.style.overflowX=this._originalContext.body.overflowX;document.body.style.overflowY=this._originalContext.body.overflowY;delete this._originalContext}this._hide();var content=this.getDom("content");var iframe=this.getDom("iframe");if(content&&iframe){var doc=iframe.contentDocument||iframe.contentWindow.document;doc&&(doc.body.innerHTML="");domUtils.remove(content)}}}};utils.inherits(Dialog,UIBase)})();(function(){var utils=baidu.editor.utils,Menu=baidu.editor.ui.Menu,SplitButton=baidu.editor.ui.SplitButton,MenuButton=baidu.editor.ui.MenuButton=function(options){this.initOptions(options);this.initMenuButton()};MenuButton.prototype={initMenuButton:function(){var me=this;this.uiName="menubutton";this.popup=new Menu({items:me.items,className:me.className,editor:me.editor});this.popup.addListener("show",function(){var list=this;for(var i=0;i<list.items.length;i++){list.items[i].removeState("checked");if(list.items[i].value==me._value){list.items[i].addState("checked");this.value=me._value}}});this.initSplitButton()},setValue:function(value){this._value=value}};utils.inherits(MenuButton,SplitButton)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,SplitButton=baidu.editor.ui.SplitButton,MultiMenuPop=baidu.editor.ui.MultiMenuPop=function(options){this.initOptions(options);this.initMultiMenu()};MultiMenuPop.prototype={initMultiMenu:function(){var me=this;this.popup=new Popup({content:"",editor:me.editor,iframe_rendered:false,onshow:function(){if(!this.iframe_rendered){this.iframe_rendered=true;this.getDom("content").innerHTML='<iframe id="'+me.id+'_iframe" src="'+me.iframeUrl+'" frameborder="0"></iframe>';me.editor.container.style.zIndex&&(this.getDom().style.zIndex=me.editor.container.style.zIndex*1+1)}}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};utils.inherits(MultiMenuPop,SplitButton)})();(function(){var UI=baidu.editor.ui,UIBase=UI.UIBase,uiUtils=UI.uiUtils,utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils;var allMenus=[],timeID,isSubMenuShow=false;var ShortCutMenu=UI.ShortCutMenu=function(options){this.initOptions(options);this.initShortCutMenu()};ShortCutMenu.postHide=hideAllMenu;ShortCutMenu.prototype={isHidden:true,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();allMenus.push(this)},initEvent:function(){var me=this,doc=me.editor.document;domUtils.on(doc,"mousemove",function(e){if(me.isHidden===false){if(me.getSubMenuMark()||me.eventType=="contextmenu"){return}var flag=true,el=me.getDom(),wt=el.offsetWidth,ht=el.offsetHeight,distanceX=wt/2+me.SPACE,distanceY=ht/2,x=Math.abs(e.screenX-me.left),y=Math.abs(e.screenY-me.top);clearTimeout(timeID);timeID=setTimeout(function(){if(y>0&&y<distanceY){me.setOpacity(el,"1")}else{if(y>distanceY&&y<distanceY+70){me.setOpacity(el,"0.5");flag=false}else{if(y>distanceY+70&&y<distanceY+140){me.hide()}}}if(flag&&x>0&&x<distanceX){me.setOpacity(el,"1")}else{if(x>distanceX&&x<distanceX+70){me.setOpacity(el,"0.5")}else{if(x>distanceX+70&&x<distanceX+140){me.hide()}}}})}});if(browser.chrome){domUtils.on(doc,"mouseout",function(e){var relatedTgt=e.relatedTarget||e.toElement;if(relatedTgt==null||relatedTgt.tagName=="HTML"){me.hide()}})}me.editor.addListener("afterhidepop",function(){if(!me.isHidden){isSubMenuShow=true}})},initItems:function(){if(utils.isArray(this.items)){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i].toLowerCase();if(UI[item]){this.items[i]=new UI[item](this.editor);this.items[i].className+=" edui-shortcutsubmenu "}}}},setOpacity:function(el,value){if(browser.ie&&browser.version<9){el.style.filter="alpha(opacity = "+parseFloat(value)*100+");"}else{el.style.opacity=value}},getSubMenuMark:function(){isSubMenuShow=false;var layerEle=uiUtils.getFixedLayer();var list=domUtils.getElementsByTagName(layerEle,"div",function(node){return domUtils.hasClass(node,"edui-shortcutsubmenu edui-popup")});for(var i=0,node;node=list[i++];){if(node.style.display!="none"){isSubMenuShow=true}}return isSubMenuShow},show:function(e,hasContextmenu){var me=this,offset={},el=this.getDom(),fixedlayer=uiUtils.getFixedLayer();function setPos(offset){if(offset.left<0){offset.left=0}if(offset.top<0){offset.top=0}el.style.cssText="position:absolute;left:"+offset.left+"px;top:"+offset.top+"px;"}function setPosByCxtMenu(menu){if(!menu.tagName){menu=menu.getDom()}offset.left=parseInt(menu.style.left);offset.top=parseInt(menu.style.top);offset.top-=el.offsetHeight+15;setPos(offset)}me.eventType=e.type;el.style.cssText="display:block;left:-9999px";if(e.type=="contextmenu"&&hasContextmenu){var menu=domUtils.getElementsByTagName(fixedlayer,"div","edui-contextmenu")[0];if(menu){setPosByCxtMenu(menu)}else{me.editor.addListener("aftershowcontextmenu",function(type,menu){setPosByCxtMenu(menu)})}}else{offset=uiUtils.getViewportOffsetByEvent(e);offset.top-=el.offsetHeight+me.SPACE;offset.left+=me.SPACE+20;setPos(offset);me.setOpacity(el,0.2)}me.isHidden=false;me.left=e.screenX+el.offsetWidth/2-me.SPACE;me.top=e.screenY-(el.offsetHeight/2)-me.SPACE;if(me.editor){el.style.zIndex=me.editor.container.style.zIndex*1+10;fixedlayer.style.zIndex=el.style.zIndex-1}},hide:function(){if(this.getDom()){this.getDom().style.display="none"}this.isHidden=true},postRender:function(){if(utils.isArray(this.items)){for(var i=0,item;item=this.items[i++];){item.postRender()}}},getHtmlTpl:function(){var buff;if(utils.isArray(this.items)){buff=[];for(var i=0;i<this.items.length;i++){buff[i]=this.items[i].renderHtml()}buff=buff.join("")}else{buff=this.items}return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+buff+"</div>"}};utils.inherits(ShortCutMenu,UIBase);function hideAllMenu(e){var tgt=e.target||e.srcElement,cur=domUtils.findParent(tgt,function(node){return domUtils.hasClass(node,"edui-shortcutmenu")||domUtils.hasClass(node,"edui-popup")},true);if(!cur){for(var i=0,menu;menu=allMenus[i++];){menu.hide()}}}domUtils.on(document,"mousedown",function(e){hideAllMenu(e)});domUtils.on(window,"scroll",function(e){hideAllMenu(e)})})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,Breakline=baidu.editor.ui.Breakline=function(options){this.initOptions(options);this.initSeparator()};Breakline.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};utils.inherits(Breakline,UIBase)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,Message=baidu.editor.ui.Message=function(options){this.initOptions(options);this.initMessage()};Message.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(opt){var me=this;if(!opt.keepshow){clearTimeout(this.timer);me.timer=setTimeout(function(){me.hide()},opt.timeout||4000)}opt.content!==undefined&&me.setContent(opt.content);opt.type!==undefined&&me.setType(opt.type);me.show()},postRender:function(){var me=this,closer=this.getDom("closer");closer&&domUtils.on(closer,"click",function(){me.hide()})},setContent:function(content){this.getDom("content").innerHTML=content},setType:function(type){type=type||"info";var body=this.getDom("body");body.className=body.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+type)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var arr=this.getDom("body").match(/edui-message-type-([\w-]+)/);return arr?arr[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var dom=this.getDom();if(dom){dom.style.display="none";dom.parentNode&&dom.parentNode.removeChild(dom)}}};utils.inherits(Message,UIBase)})();(function(){var utils=baidu.editor.utils;var editorui=baidu.editor.ui;var _Dialog=editorui.Dialog;editorui.buttons={};editorui.Dialog=function(options){var dialog=new _Dialog(options);dialog.addListener("hide",function(){if(dialog.editor){var editor=dialog.editor;try{if(browser.gecko){var y=editor.window.scrollY,x=editor.window.scrollX;editor.body.focus();editor.window.scrollTo(x,y)}else{editor.focus()}}catch(ex){}}});return dialog};var iframeUrlMap={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"};var btnCmds=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"];for(var i=0,ci;ci=btnCmds[i++];){ci=ci.toLowerCase();editorui[ci]=function(cmd){return function(editor){var ui=new editorui.Button({className:"edui-for-"+cmd,title:editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd)||"",onclick:function(){editor.execCommand(cmd)},theme:editor.options.theme,showText:false});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){var state=editor.queryCommandState(cmd);if(state==-1){ui.setDisabled(true);ui.setChecked(false)}else{if(!uiReady){ui.setDisabled(false);ui.setChecked(state)}}});return ui}}(ci)}editorui.cleardoc=function(editor){var ui=new editorui.Button({className:"edui-for-cleardoc",title:editor.options.labelMap.cleardoc||editor.getLang("labelMap.cleardoc")||"",theme:editor.options.theme,onclick:function(){if(confirm(editor.getLang("confirmClear"))){editor.execCommand("cleardoc")}}});editorui.buttons.cleardoc=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("cleardoc")==-1)});return ui};var typeset={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var p in typeset){(function(cmd,val){for(var i=0,ci;ci=val[i++];){(function(cmd2){editorui[cmd.replace("float","")+cmd2]=function(editor){var ui=new editorui.Button({className:"edui-for-"+cmd.replace("float","")+cmd2,title:editor.options.labelMap[cmd.replace("float","")+cmd2]||editor.getLang("labelMap."+cmd.replace("float","")+cmd2)||"",theme:editor.options.theme,onclick:function(){editor.execCommand(cmd,cmd2)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){ui.setDisabled(editor.queryCommandState(cmd)==-1);ui.setChecked(editor.queryCommandValue(cmd)==cmd2&&!uiReady)});return ui}})(ci)}})(p,typeset[p])}for(var i=0,ci;ci=["backcolor","forecolor"][i++];){editorui[ci]=function(cmd){return function(editor){var ui=new editorui.ColorButton({className:"edui-for-"+cmd,color:"default",title:editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd)||"",editor:editor,onpickcolor:function(t,color){editor.execCommand(cmd,color)},onpicknocolor:function(){editor.execCommand(cmd,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){editor.execCommand(cmd,this.color)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState(cmd)==-1)});return ui}}(ci)}var dialogBtns={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var p in dialogBtns){(function(type,vals){for(var i=0,ci;ci=vals[i++];){if(browser.opera&&ci==="searchreplace"){continue}(function(cmd){editorui[cmd]=function(editor,iframeUrl,title){iframeUrl=iframeUrl||(editor.options.iframeUrlMap||{})[cmd]||iframeUrlMap[cmd];title=editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd)||"";var dialog;if(iframeUrl){dialog=new editorui.Dialog(utils.extend({iframeUrl:editor.ui.mapUrl(iframeUrl),editor:editor,className:"edui-for-"+cmd,title:title,holdScroll:cmd==="insertimage",fullscreen:/charts|preview/.test(cmd),closeDialog:editor.getLang("closeDialog")},type=="ok"?{buttons:[{className:"edui-okbutton",label:editor.getLang("ok"),editor:editor,onclick:function(){dialog.close(true)}},{className:"edui-cancelbutton",label:editor.getLang("cancel"),editor:editor,onclick:function(){dialog.close(false)}}]}:{}));editor.ui._dialogs[cmd+"Dialog"]=dialog}var ui=new editorui.Button({className:"edui-for-"+cmd,title:title,onclick:function(){if(dialog){switch(cmd){case"wordimage":var images=editor.execCommand("wordimage");if(images&&images.length){dialog.render();dialog.open()}break;case"scrawl":if(editor.queryCommandState("scrawl")!=-1){dialog.render();dialog.open()}break;default:dialog.render();dialog.open()}}},theme:editor.options.theme,disabled:(cmd=="scrawl"&&editor.queryCommandState("scrawl")==-1)||(cmd=="charts")});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){var unNeedCheckState={edittable:1};if(cmd in unNeedCheckState){return}var state=editor.queryCommandState(cmd);if(ui.getDom()){ui.setDisabled(state==-1);ui.setChecked(state)}});return ui}})(ci.toLowerCase())}})(p,dialogBtns[p])}editorui.snapscreen=function(editor,iframeUrl,title){title=editor.options.labelMap.snapscreen||editor.getLang("labelMap.snapscreen")||"";var ui=new editorui.Button({className:"edui-for-snapscreen",title:title,onclick:function(){editor.execCommand("snapscreen")},theme:editor.options.theme});editorui.buttons.snapscreen=ui;iframeUrl=iframeUrl||(editor.options.iframeUrlMap||{})["snapscreen"]||iframeUrlMap.snapscreen;if(iframeUrl){var dialog=new editorui.Dialog({iframeUrl:editor.ui.mapUrl(iframeUrl),editor:editor,className:"edui-for-snapscreen",title:title,buttons:[{className:"edui-okbutton",label:editor.getLang("ok"),editor:editor,onclick:function(){dialog.close(true)}},{className:"edui-cancelbutton",label:editor.getLang("cancel"),editor:editor,onclick:function(){dialog.close(false)}}]});dialog.render();editor.ui._dialogs.snapscreenDialog=dialog}editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("snapscreen")==-1)});return ui};editorui.insertcode=function(editor,list,title){list=editor.options.insertcode||[];title=editor.options.labelMap.insertcode||editor.getLang("labelMap.insertcode")||"";var items=[];utils.each(list,function(key,val){items.push({label:key,value:val,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var ui=new editorui.Combox({editor:editor,items:items,onselect:function(t,index){editor.execCommand("insertcode",this.items[index].value)},onbuttonclick:function(){this.showPopup()},title:title,initValue:title,className:"edui-for-insertcode",indexByValue:function(value){if(value){for(var i=0,ci;ci=this.items[i];i++){if(ci.value.indexOf(value)!=-1){return i}}}return -1}});editorui.buttons.insertcode=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("insertcode");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("insertcode");if(!value){ui.setValue(title);return}value&&(value=value.replace(/['"]/g,"").split(",")[0]);ui.setValue(value)}}});return ui};editorui.fontfamily=function(editor,list,title){list=editor.options.fontfamily||[];title=editor.options.labelMap.fontfamily||editor.getLang("labelMap.fontfamily")||"";if(!list.length){return}for(var i=0,ci,items=[];ci=list[i];i++){var langLabel=editor.getLang("fontfamily")[ci.name]||"";(function(key,val){items.push({label:key,value:val,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+utils.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(ci.label||langLabel,ci.val)}var ui=new editorui.Combox({editor:editor,items:items,onselect:function(t,index){editor.execCommand("FontFamily",this.items[index].value)},onbuttonclick:function(){this.showPopup()},title:title,initValue:title,className:"edui-for-fontfamily",indexByValue:function(value){if(value){for(var i=0,ci;ci=this.items[i];i++){if(ci.value.indexOf(value)!=-1){return i}}}return -1}});editorui.buttons.fontfamily=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("FontFamily");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("FontFamily");value&&(value=value.replace(/['"]/g,"").split(",")[0]);ui.setValue(value)}}});return ui};editorui.fontsize=function(editor,list,title){title=editor.options.labelMap.fontsize||editor.getLang("labelMap.fontsize")||"";list=list||editor.options.fontsize||[];if(!list.length){return}var items=[];for(var i=0;i<list.length;i++){var size=list[i]+"px";items.push({label:size,value:size,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var ui=new editorui.Combox({editor:editor,items:items,title:title,initValue:title,onselect:function(t,index){editor.execCommand("FontSize",this.items[index].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});editorui.buttons.fontsize=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("FontSize");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);ui.setValue(editor.queryCommandValue("FontSize"))}}});return ui};editorui.paragraph=function(editor,list,title){title=editor.options.labelMap.paragraph||editor.getLang("labelMap.paragraph")||"";list=editor.options.paragraph||[];if(utils.isEmptyObject(list)){return}var items=[];for(var i in list){items.push({value:i,label:list[i]||editor.getLang("paragraph")[i],theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}})}var ui=new editorui.Combox({editor:editor,items:items,title:title,initValue:title,className:"edui-for-paragraph",onselect:function(t,index){editor.execCommand("Paragraph",this.items[index].value)},onbuttonclick:function(){this.showPopup()}});editorui.buttons.paragraph=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("Paragraph");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("Paragraph");var index=ui.indexByValue(value);if(index!=-1){ui.setValue(value)}else{ui.setValue(ui.initValue)}}}});return ui};editorui.customstyle=function(editor){var list=editor.options.customstyle||[],title=editor.options.labelMap.customstyle||editor.getLang("labelMap.customstyle")||"";if(!list.length){return}var langCs=editor.getLang("customstyle");for(var i=0,items=[],t;t=list[i++];){(function(t){var ck={};ck.label=t.label?t.label:langCs[t.name];ck.style=t.style;ck.className=t.className;ck.tag=t.tag;items.push({label:ck.label,value:ck,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+ck.tag+" "+(ck.className?' class="'+ck.className+'"':"")+(ck.style?' style="'+ck.style+'"':"")+">"+ck.label+"</"+ck.tag+"></div>"}})})(t)}var ui=new editorui.Combox({editor:editor,items:items,title:title,initValue:title,className:"edui-for-customstyle",onselect:function(t,index){editor.execCommand("customstyle",this.items[index].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(value){for(var i=0,ti;ti=this.items[i++];){if(ti.label==value){return i-1}}return -1}});editorui.buttons.customstyle=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("customstyle");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("customstyle");var index=ui.indexByValue(value);if(index!=-1){ui.setValue(value)}else{ui.setValue(ui.initValue)}}}});return ui};editorui.inserttable=function(editor,iframeUrl,title){title=editor.options.labelMap.inserttable||editor.getLang("labelMap.inserttable")||"";var ui=new editorui.TableButton({editor:editor,title:title,className:"edui-for-inserttable",onpicktable:function(t,numCols,numRows){editor.execCommand("InsertTable",{numRows:numRows,numCols:numCols,border:1})},onbuttonclick:function(){this.showPopup()}});editorui.buttons.inserttable=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("inserttable")==-1)});return ui};editorui.lineheight=function(editor){var val=editor.options.lineheight||[];if(!val.length){return}for(var i=0,ci,items=[];ci=val[i++];){items.push({label:ci,value:ci,theme:editor.options.theme,onclick:function(){editor.execCommand("lineheight",this.value)}})}var ui=new editorui.MenuButton({editor:editor,className:"edui-for-lineheight",title:editor.options.labelMap.lineheight||editor.getLang("labelMap.lineheight")||"",items:items,onbuttonclick:function(){var value=editor.queryCommandValue("LineHeight")||this.value;editor.execCommand("LineHeight",value)}});editorui.buttons.lineheight=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState("LineHeight");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("LineHeight");value&&ui.setValue((value+"").replace(/cm/,""));ui.setChecked(state)}});return ui};var rowspacings=["top","bottom"];for(var r=0,ri;ri=rowspacings[r++];){(function(cmd){editorui["rowspacing"+cmd]=function(editor){var val=editor.options["rowspacing"+cmd]||[];if(!val.length){return null}for(var i=0,ci,items=[];ci=val[i++];){items.push({label:ci,value:ci,theme:editor.options.theme,onclick:function(){editor.execCommand("rowspacing",this.value,cmd)}})}var ui=new editorui.MenuButton({editor:editor,className:"edui-for-rowspacing"+cmd,title:editor.options.labelMap["rowspacing"+cmd]||editor.getLang("labelMap.rowspacing"+cmd)||"",items:items,onbuttonclick:function(){var value=editor.queryCommandValue("rowspacing",cmd)||this.value;editor.execCommand("rowspacing",value,cmd)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState("rowspacing",cmd);if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("rowspacing",cmd);value&&ui.setValue((value+"").replace(/%/,""));ui.setChecked(state)}});return ui}})(ri)}var lists=["insertorderedlist","insertunorderedlist"];for(var l=0,cl;cl=lists[l++];){(function(cmd){editorui[cmd]=function(editor){var vals=editor.options[cmd],_onMenuClick=function(){editor.execCommand(cmd,this.value)},items=[];for(var i in vals){items.push({label:vals[i]||editor.getLang()[cmd][i]||"",value:i,theme:editor.options.theme,onclick:_onMenuClick})}var ui=new editorui.MenuButton({editor:editor,className:"edui-for-"+cmd,title:editor.getLang("labelMap."+cmd)||"",items:items,onbuttonclick:function(){var value=editor.queryCommandValue(cmd)||this.value;editor.execCommand(cmd,value)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState(cmd);if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue(cmd);ui.setValue(value);ui.setChecked(state)}});return ui}})(cl)}editorui.fullscreen=function(editor,title){title=editor.options.labelMap.fullscreen||editor.getLang("labelMap.fullscreen")||"";var ui=new editorui.Button({className:"edui-for-fullscreen",title:title,theme:editor.options.theme,onclick:function(){if(editor.ui){editor.ui.setFullScreen(!editor.ui.isFullScreen())}this.setChecked(editor.ui.isFullScreen())}});editorui.buttons.fullscreen=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState("fullscreen");ui.setDisabled(state==-1);ui.setChecked(editor.ui.isFullScreen())});return ui};editorui.emotion=function(editor,iframeUrl){var cmd="emotion";var ui=new editorui.MultiMenuPop({title:editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd+"")||"",editor:editor,className:"edui-for-"+cmd,iframeUrl:editor.ui.mapUrl(iframeUrl||(editor.options.iframeUrlMap||{})[cmd]||iframeUrlMap[cmd])});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState(cmd)==-1)});return ui};editorui.autotypeset=function(editor){var ui=new editorui.AutoTypeSetButton({editor:editor,title:editor.options.labelMap.autotypeset||editor.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){editor.execCommand("autotypeset")}});editorui.buttons.autotypeset=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("autotypeset")==-1)});return ui};editorui.simpleupload=function(editor){var name="simpleupload",ui=new editorui.Button({className:"edui-for-"+name,title:editor.options.labelMap[name]||editor.getLang("labelMap."+name)||"",onclick:function(){},theme:editor.options.theme,showText:false});editorui.buttons[name]=ui;editor.addListener("ready",function(){var b=ui.getDom("body"),iconSpan=b.children[0];editor.fireEvent("simpleuploadbtnready",iconSpan)});editor.addListener("selectionchange",function(type,causeByUi,uiReady){var state=editor.queryCommandState(name);if(state==-1){ui.setDisabled(true);ui.setChecked(false)}else{if(!uiReady){ui.setDisabled(false);ui.setChecked(state)}}});return ui}})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase,domUtils=baidu.editor.dom.domUtils;var nodeStack=[];function EditorUI(options){this.initOptions(options);this.initEditorUI()}EditorUI.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var editor=this.editor,me=this;editor.addListener("ready",function(){editor.getDialog=function(name){return editor.ui._dialogs[name+"Dialog"]};domUtils.on(editor.window,"scroll",function(evt){baidu.editor.ui.Popup.postHide(evt)});editor.ui._actualFrameWidth=editor.options.initialFrameWidth;UE.browser.ie&&UE.browser.version===6&&editor.container.ownerDocument.execCommand("BackgroundImageCache",false,true);if(editor.options.elementPathEnabled){editor.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+editor.getLang("elementPathTip")+":</div>"}if(editor.options.wordCount){function countFn(){setCount(editor,me);domUtils.un(editor.document,"click",arguments.callee)}domUtils.on(editor.document,"click",countFn);editor.ui.getDom("wordcount").innerHTML=editor.getLang("wordCountTip")}editor.ui._scale();if(editor.options.scaleEnabled){if(editor.autoHeightEnabled){editor.disableAutoHeight()}me.enableScale()}else{me.disableScale()}if(!editor.options.elementPathEnabled&&!editor.options.wordCount&&!editor.options.scaleEnabled){editor.ui.getDom("elementpath").style.display="none";editor.ui.getDom("wordcount").style.display="none";editor.ui.getDom("scale").style.display="none"}if(!editor.selection.isFocus()){return}editor.fireEvent("selectionchange",false,true)});editor.addListener("mousedown",function(t,evt){var el=evt.target||evt.srcElement;baidu.editor.ui.Popup.postHide(evt,el);baidu.editor.ui.ShortCutMenu.postHide(evt)});editor.addListener("delcells",function(){if(UE.ui.edittip){new UE.ui.edittip(editor)}editor.getDialog("edittip").open()});var pastePop,isPaste=false,timer;editor.addListener("afterpaste",function(){if(editor.queryCommandState("pasteplain")){return}if(baidu.editor.ui.PastePicker){pastePop=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:editor}),editor:editor,className:"edui-wordpastepop"});pastePop.render()}isPaste=true});editor.addListener("afterinserthtml",function(){clearTimeout(timer);timer=setTimeout(function(){if(pastePop&&(isPaste||editor.ui._isTransfer)){if(pastePop.isHidden()){var span=domUtils.createElement(editor.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"}),range=editor.selection.getRange();range.insertNode(span);var tmp=getDomNode(span,"firstChild","previousSibling");tmp&&pastePop.showAnchor(tmp.nodeType==3?tmp.parentNode:tmp);domUtils.remove(span)}else{pastePop.show()}delete editor.ui._isTransfer;isPaste=false}},200)});editor.addListener("contextmenu",function(t,evt){baidu.editor.ui.Popup.postHide(evt)});editor.addListener("keydown",function(t,evt){if(pastePop){pastePop.dispose(evt)}var keyCode=evt.keyCode||evt.which;if(evt.altKey&&keyCode==90){UE.ui.buttons.fullscreen.onclick()}});editor.addListener("wordcount",function(type){setCount(this,me)});function setCount(editor,ui){editor.setOpt({wordCount:true,maximumWords:10000,wordCountMsg:editor.options.wordCountMsg||editor.getLang("wordCountMsg"),wordOverFlowMsg:editor.options.wordOverFlowMsg||editor.getLang("wordOverFlowMsg")});var opt=editor.options,max=opt.maximumWords,msg=opt.wordCountMsg,errMsg=opt.wordOverFlowMsg,countDom=ui.getDom("wordcount");if(!opt.wordCount){return}var count=editor.getContentLength(true);if(count>max){countDom.innerHTML=errMsg;editor.fireEvent("wordcountoverflow")}else{countDom.innerHTML=msg.replace("{#leave}",max-count).replace("{#count}",count)}}editor.addListener("selectionchange",function(){if(editor.options.elementPathEnabled){me[(editor.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"]()}if(editor.options.scaleEnabled){me[(editor.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()}});var popup=new baidu.editor.ui.Popup({editor:editor,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();editor.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(name){this.hide();editor.ui._dialogs[name]&&editor.ui._dialogs[name].open()},_onImgSetFloat:function(value){this.hide();editor.execCommand("imagefloat",value)},_setIframeAlign:function(value){var frame=popup.anchorEl;var newFrame=frame.cloneNode(true);switch(value){case -2:newFrame.setAttribute("align","");break;case -1:newFrame.setAttribute("align","left");break;case 1:newFrame.setAttribute("align","right");break}frame.parentNode.insertBefore(newFrame,frame);domUtils.remove(frame);popup.anchorEl=newFrame;popup.showAnchor(popup.anchorEl)},_updateIframe:function(){var frame=editor._iframe=popup.anchorEl;if(domUtils.hasClass(frame,"ueditor_baidumap")){editor.selection.getRange().selectNode(frame).select();editor.ui._dialogs.mapDialog.open();popup.hide()}else{editor.ui._dialogs.insertframeDialog.open();popup.hide()}},_onRemoveButtonClick:function(cmdName){editor.execCommand(cmdName);this.hide()},queryAutoHide:function(el){if(el&&el.ownerDocument==editor.document){if(el.tagName.toLowerCase()=="img"||domUtils.findParentByTagName(el,"a",true)){return el!==popup.anchorEl}}return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,el)}});popup.render();if(editor.options.imagePopup){editor.addListener("mouseover",function(t,evt){evt=evt||window.event;var el=evt.target||evt.srcElement;if(editor.ui._dialogs.insertframeDialog&&/iframe/ig.test(el.tagName)){var html=popup.formatHtml("<nobr>"+editor.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+editor.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+editor.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+editor.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+editor.getLang("modify")+"</span></nobr>");if(html){popup.getDom("content").innerHTML=html;popup.anchorEl=el;popup.showAnchor(popup.anchorEl)}else{popup.hide()}}});editor.addListener("selectionchange",function(t,causeByUi){if(!causeByUi){return}var html="",str="",img=editor.selection.getRange().getClosedNode(),dialogs=editor.ui._dialogs;if(img&&img.tagName=="IMG"){var dialogName="insertimageDialog";if(img.className.indexOf("edui-faked-video")!=-1||img.className.indexOf("edui-upload-video")!=-1){dialogName="insertvideoDialog"}if(img.className.indexOf("edui-faked-webapp")!=-1){dialogName="webappDialog"}if(img.src.indexOf("http://api.map.baidu.com")!=-1){dialogName="mapDialog"}if(img.className.indexOf("edui-faked-music")!=-1){dialogName="musicDialog"}if(img.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1){dialogName="gmapDialog"}if(img.getAttribute("anchorname")){dialogName="anchorDialog";html=popup.formatHtml("<nobr>"+editor.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+editor.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+editor.getLang("delete")+"</span></nobr>")}if(img.getAttribute("word_img")){editor.word_img=[img.getAttribute("word_img")];dialogName="wordimageDialog"}if(domUtils.hasClass(img,"loadingclass")||domUtils.hasClass(img,"loaderrorclass")){dialogName=""}if(!dialogs[dialogName]){return}str="<nobr>"+editor.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+editor.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+editor.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+editor.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+editor.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+dialogName+'\');" class="edui-clickable">'+editor.getLang("modify")+"</span></nobr>";!html&&(html=popup.formatHtml(str))}if(editor.ui._dialogs.linkDialog){var link=editor.queryCommandValue("link");var url;if(link&&(url=(link.getAttribute("_href")||link.getAttribute("href",2)))){var txt=url;if(url.length>30){txt=url.substring(0,20)+"..."}if(html){html+='<div style="height:5px;"></div>'}html+=popup.formatHtml("<nobr>"+editor.getLang("anthorMsg")+': <a target="_blank" href="'+url+'" title="'+url+'" >'+txt+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+editor.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+editor.getLang("clear")+"</span></nobr>");popup.showAnchor(link)}}if(html){popup.getDom("content").innerHTML=html;popup.anchorEl=img||link;popup.showAnchor(popup.anchorEl)}else{popup.hide()}})}},_initToolbars:function(){var editor=this.editor;var toolbars=this.toolbars||[];var toolbarUis=[];for(var i=0;i<toolbars.length;i++){var toolbar=toolbars[i];var toolbarUi=new baidu.editor.ui.Toolbar({theme:editor.options.theme});for(var j=0;j<toolbar.length;j++){var toolbarItem=toolbar[j];var toolbarItemUi=null;if(typeof toolbarItem=="string"){toolbarItem=toolbarItem.toLowerCase();if(toolbarItem=="|"){toolbarItem="Separator"}if(toolbarItem=="||"){toolbarItem="Breakline"}if(baidu.editor.ui[toolbarItem]){toolbarItemUi=new baidu.editor.ui[toolbarItem](editor)}if(toolbarItem=="fullscreen"){if(toolbarUis&&toolbarUis[0]){toolbarUis[0].items.splice(0,0,toolbarItemUi)}else{toolbarItemUi&&toolbarUi.items.splice(0,0,toolbarItemUi)}continue}}else{toolbarItemUi=toolbarItem}if(toolbarItemUi&&toolbarItemUi.id){toolbarUi.add(toolbarItemUi)}}toolbarUis[i]=toolbarUi}utils.each(UE._customizeUI,function(obj,key){var itemUI,index;if(obj.id&&obj.id!=editor.key){return false}itemUI=obj.execFn.call(editor,editor,key);if(itemUI){index=obj.index;if(index===undefined){index=toolbarUi.items.length}toolbarUi.add(itemUI,index)}});this.toolbars=toolbarUis},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){var buff=[];for(var i=0;i<this.toolbars.length;i++){buff.push(this.toolbars[i].renderHtml())}return buff.join("")},setFullScreen:function(fullscreen){var editor=this.editor,container=editor.container.parentNode.parentNode;if(this._fullscreen!=fullscreen){this._fullscreen=fullscreen;this.editor.fireEvent("beforefullscreenchange",fullscreen);if(baidu.editor.browser.gecko){var bk=editor.selection.getRange().createBookmark()}if(fullscreen){while(container.tagName!="BODY"){var position=baidu.editor.dom.domUtils.getComputedStyle(container,"position");nodeStack.push(position);container.style.position="static";container=container.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=editor.iframe.parentNode.offsetWidth;if(this._bakAutoHeight){editor.autoHeightEnabled=false;this.editor.disableAutoHeight()}document.documentElement.style.overflow="hidden";window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;editor.iframe.parentNode.style.width="";this._updateFullScreen()}else{while(container.tagName!="BODY"){container.style.position=nodeStack.shift();container=container.parentNode}this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;if(this._bakAutoHeight){editor.autoHeightEnabled=true;this.editor.enableAutoHeight()}document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;editor.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&editor.body.contentEditable==="true"){var input=document.createElement("input");document.body.appendChild(input);editor.body.contentEditable=false;setTimeout(function(){input.focus();setTimeout(function(){editor.body.contentEditable=true;editor.fireEvent("fullscreenchanged",fullscreen);editor.selection.getRange().moveToBookmark(bk).select(true);baidu.editor.dom.domUtils.remove(input);fullscreen&&window.scroll(0,0)},0)},0)}if(editor.body.contentEditable==="true"){this.editor.fireEvent("fullscreenchanged",fullscreen);this.triggerLayout()}}},_updateFullScreen:function(){if(this._fullscreen){var vpRect=uiUtils.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+vpRect.width+"px;height:"+vpRect.height+"px;z-index:"+(this.getDom().style.zIndex*1+100);uiUtils.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(vpRect.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),true);if(browser.gecko){try{window.onresize()}catch(e){}}}},_updateElementPath:function(){var bottom=this.getDom("elementpath"),list;if(this.elementPathEnabled&&(list=this.editor.queryCommandValue("elementpath"))){var buff=[];for(var i=0,ci;ci=list[i];i++){buff[i]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+i+'&quot;);">'+ci+"</span>")}bottom.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+buff.join(" &gt; ")+"</div>"}else{bottom.style.display="none"}},disableElementPath:function(){var bottom=this.getDom("elementpath");bottom.innerHTML="";bottom.style.display="none";this.elementPathEnabled=false},enableElementPath:function(){var bottom=this.getDom("elementpath");bottom.style.display="";this.elementPathEnabled=true;this._updateElementPath()},_scale:function(){var doc=document,editor=this.editor,editorHolder=editor.container,editorDocument=editor.document,toolbarBox=this.getDom("toolbarbox"),bottombar=this.getDom("bottombar"),scale=this.getDom("scale"),scalelayer=this.getDom("scalelayer");var isMouseMove=false,position=null,minEditorHeight=0,minEditorWidth=editor.options.minFrameWidth,pageX=0,pageY=0,scaleWidth=0,scaleHeight=0;function down(){position=domUtils.getXY(editorHolder);if(!minEditorHeight){minEditorHeight=editor.options.minFrameHeight+toolbarBox.offsetHeight+bottombar.offsetHeight}scalelayer.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+editorHolder.offsetWidth+"px;height:"+editorHolder.offsetHeight+"px;z-index:"+(editor.options.zIndex+1);domUtils.on(doc,"mousemove",move);domUtils.on(editorDocument,"mouseup",up);domUtils.on(doc,"mouseup",up)}var me=this;this.editor.addListener("fullscreenchanged",function(e,fullScreen){if(fullScreen){me.disableScale()}else{if(me.editor.options.scaleEnabled){me.enableScale();var tmpNode=me.editor.document.createElement("span");me.editor.body.appendChild(tmpNode);me.editor.body.style.height=Math.max(domUtils.getXY(tmpNode).y,me.editor.iframe.offsetHeight-20)+"px";domUtils.remove(tmpNode)}}});function move(event){clearSelection();var e=event||window.event;pageX=e.pageX||(doc.documentElement.scrollLeft+e.clientX);pageY=e.pageY||(doc.documentElement.scrollTop+e.clientY);scaleWidth=pageX-position.x;scaleHeight=pageY-position.y;if(scaleWidth>=minEditorWidth){isMouseMove=true;scalelayer.style.width=scaleWidth+"px"}if(scaleHeight>=minEditorHeight){isMouseMove=true;scalelayer.style.height=scaleHeight+"px"}}function up(){if(isMouseMove){isMouseMove=false;editor.ui._actualFrameWidth=scalelayer.offsetWidth-2;editorHolder.style.width=editor.ui._actualFrameWidth+"px";editor.setHeight(scalelayer.offsetHeight-bottombar.offsetHeight-toolbarBox.offsetHeight-2,true)}if(scalelayer){scalelayer.style.display="none"}clearSelection();domUtils.un(doc,"mousemove",move);domUtils.un(editorDocument,"mouseup",up);domUtils.un(doc,"mouseup",up)}function clearSelection(){if(browser.ie){doc.selection.clear()}else{window.getSelection().removeAllRanges()}}this.enableScale=function(){if(editor.queryCommandState("source")==1){return}scale.style.display="";this.scaleEnabled=true;domUtils.on(scale,"mousedown",down)};this.disableScale=function(){scale.style.display="none";this.scaleEnabled=false;domUtils.un(scale,"mousedown",down)}},isFullScreen:function(){return this._fullscreen},postRender:function(){UIBase.prototype.postRender.call(this);for(var i=0;i<this.toolbars.length;i++){this.toolbars[i].postRender()}var me=this;var timerId,domUtils=baidu.editor.dom.domUtils,updateFullScreenTime=function(){clearTimeout(timerId);timerId=setTimeout(function(){me._updateFullScreen()})};domUtils.on(window,"resize",updateFullScreenTime);me.addListener("destroy",function(){domUtils.un(window,"resize",updateFullScreenTime);clearTimeout(timerId)})},showToolbarMsg:function(msg,flag){this.getDom("toolbarmsg_label").innerHTML=msg;this.getDom("toolbarmsg").style.display="";if(!flag){var w=this.getDom("upload_dialog");w.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(url){return url?url.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var dom=this.getDom();if(dom.style.zoom=="1"){dom.style.zoom="100%"}else{dom.style.zoom="1"}}};utils.inherits(EditorUI,baidu.editor.ui.UIBase);var instances={};UE.ui.Editor=function(options){var editor=new UE.Editor(options);editor.options.editor=editor;utils.loadFile(document,{href:editor.options.themePath+editor.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var oldRender=editor.render;editor.render=function(holder){if(holder.constructor===String){editor.key=holder;instances[holder]=editor}utils.domReady(function(){editor.langIsReady?renderUI():editor.addListener("langReady",renderUI);function renderUI(){editor.setOpt({labelMap:editor.options.labelMap||editor.getLang("labelMap")});new EditorUI(editor.options);if(holder){if(holder.constructor===String){holder=document.getElementById(holder)}holder&&holder.getAttribute("name")&&(editor.options.textarea=holder.getAttribute("name"));if(holder&&/script|textarea/ig.test(holder.tagName)){var newDiv=document.createElement("div");holder.parentNode.insertBefore(newDiv,holder);var cont=holder.value||holder.innerHTML;editor.options.initialContent=/^[\t\r\n ]*$/.test(cont)?editor.options.initialContent:cont.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");holder.className&&(newDiv.className=holder.className);holder.style.cssText&&(newDiv.style.cssText=holder.style.cssText);if(/textarea/i.test(holder.tagName)){editor.textarea=holder;editor.textarea.style.display="none"}else{holder.parentNode.removeChild(holder)}if(holder.id){newDiv.id=holder.id;domUtils.removeAttributes(holder,"id")}holder=newDiv;holder.innerHTML=""}}domUtils.addClass(holder,"edui-"+editor.options.theme);editor.ui.render(holder);var opt=editor.options;editor.container=editor.ui.getDom();var parents=domUtils.findParents(holder,true);var displays=[];for(var i=0,ci;ci=parents[i];i++){displays[i]=ci.style.display;ci.style.display="block"}if(opt.initialFrameWidth){opt.minFrameWidth=opt.initialFrameWidth}else{opt.minFrameWidth=opt.initialFrameWidth=holder.offsetWidth;var styleWidth=holder.style.width;if(/%$/.test(styleWidth)){opt.initialFrameWidth=styleWidth}}if(opt.initialFrameHeight){opt.minFrameHeight=opt.initialFrameHeight}else{opt.initialFrameHeight=opt.minFrameHeight=holder.offsetHeight}for(var i=0,ci;ci=parents[i];i++){ci.style.display=displays[i]}if(holder.style.height){holder.style.height=""}editor.container.style.width=opt.initialFrameWidth+(/%$/.test(opt.initialFrameWidth)?"":"px");editor.container.style.zIndex=opt.zIndex;oldRender.call(editor,editor.ui.getDom("iframeholder"));editor.fireEvent("afteruiready")}})};return editor};UE.getEditor=function(id,opt){var editor=instances[id];if(!editor){editor=instances[id]=new UE.ui.Editor(opt);editor.render(id)}return editor};UE.delEditor=function(id){var editor;if(editor=instances[id]){editor.key&&editor.destroy();delete instances[id]}};UE.registerUI=function(uiName,fn,index,editorId){utils.each(uiName.split(/\s+/),function(name){UE._customizeUI[name]={id:editorId,execFn:fn,index:index}})}})();UE.registerUI("message",function(editor){var editorui=baidu.editor.ui;var Message=editorui.Message;var holder;var _messageItems=[];var me=editor;me.addListener("ready",function(){holder=document.getElementById(me.ui.id+"_message_holder");updateHolderPos();setTimeout(function(){updateHolderPos()},500)});me.addListener("showmessage",function(type,opt){opt=utils.isString(opt)?{content:opt}:opt;var message=new Message({timeout:opt.timeout,type:opt.type,content:opt.content,keepshow:opt.keepshow,editor:me}),mid=opt.id||("msg_"+(+new Date()).toString(36));message.render(holder);_messageItems[mid]=message;message.reset(opt);updateHolderPos();return mid});me.addListener("updatemessage",function(type,id,opt){opt=utils.isString(opt)?{content:opt}:opt;var message=_messageItems[id];message.render(holder);message&&message.reset(opt)});me.addListener("hidemessage",function(type,id){var message=_messageItems[id];message&&message.hide()});function updateHolderPos(){var toolbarbox=me.ui.getDom("toolbarbox");if(toolbarbox){holder.style.top=toolbarbox.offsetHeight+3+"px"}holder.style.zIndex=Math.max(me.options.zIndex,me.iframe.style.zIndex)+1}});UE.registerUI("autosave",function(editor){var timer=null,uid=null;editor.on("afterautosave",function(){clearTimeout(timer);timer=setTimeout(function(){if(uid){editor.trigger("hidemessage",uid)}uid=editor.trigger("showmessage",{content:editor.getLang("autosave.success"),timeout:2000})},2000)})})})();UE.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"首行缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",fontborder:"字符边框",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",deletecaption:"删除表格标题",inserttitle:"插入标题",mergecells:"合并多个单元格",deletetable:"删除表格",cleardoc:"清空文档",insertparagraphbeforetable:"表格前插入行",insertcode:"代码语言",fontfamily:"字体",fontsize:"字号",paragraph:"段落格式",simpleupload:"单图上传",insertimage:"多图上传",edittable:"表格属性",edittd:"单元格属性",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittip:"编辑提示",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦",music:"音乐",inserttable:"插入表格",drafts:"从草稿箱加载",charts:"图表"},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:"一,二,三....",cn1:"一),二),三)....",cn2:"(一),(二),(三)....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 大圆圈",disc:"● 小黑点",square:"■ 小方块 ",dash:"— 破折号",dot:" 。 小圆圈"},paragraph:{p:"段落",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},autoupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},simpleupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",loadconfigError:"获取后台配置项请求出错，上传功能将不能正常使用！",loadconfigFormatError:"后台配置项返回格式出错，上传功能将不能正常使用！",loadconfigHttpError:"请求后台配置项http错误，上传功能将不能正常使用！",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},insertcode:{as3:"ActionScript 3",bash:"Bash/Shell",cpp:"C/C++",css:"CSS",cf:"ColdFusion","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"HTML",java:"Java",jfx:"JavaFX",js:"JavaScript",pl:"Perl",php:"PHP",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"Visual Basic",xml:"XML"},confirmClear:"确定清空当前文档么？",contextMenu:{"delete":"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",aligntd:"单元格对齐方式",aligntable:"表格对齐方式",tableleft:"左浮动",tablecenter:"居中显示",tableright:"右浮动",edittd:"单元格属性",setbordervisible:"设置表格边线可见",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",inserttable:"插入表格",deletetable:"删除表格",insertparagraphbefore:"前插入段落",insertparagraphafter:"后插入段落",deleterow:"删除当前行",deletecol:"删除当前列",insertrow:"前插入行",insertcol:"左插入列",insertrownext:"后插入行",insertcolnext:"右插入列",insertcaption:"插入表格名称",deletecaption:"删除表格名称",inserttitle:"插入表格标题行",deletetitle:"删除表格标题行",inserttitlecol:"插入表格标题列",deletetitlecol:"删除表格标题列",averageDiseRow:"平均分布各行",averageDisCol:"平均分布各列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",tablesort:"表格排序",enablesort:"设置表格可排序",disablesort:"取消表格可排序",reversecurrent:"逆序当前",orderbyasc:"按ASCII字符升序",reversebyasc:"按ASCII字符降序",orderbynum:"按数值大小升序",reversebynum:"按数值大小降序",borderbk:"边框底纹",setcolor:"表格隔行变色",unsetcolor:"取消表格隔行变色",setbackground:"选区背景隔行",unsetbackground:"取消选区背景",redandblue:"红蓝相间",threecolorgradient:"三色渐变",copy:"复制(Ctrl + c)",copymsg:"浏览器不支持,请使用 'Ctrl + c'",paste:"粘贴(Ctrl + v)",pastemsg:"浏览器不支持,请使用 'Ctrl + v'"},copymsg:"浏览器不支持,请使用 'Ctrl + c'",pastemsg:"浏览器不支持,请使用 'Ctrl + v'",anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性","default":"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",clear:"清除",anchorMsg:"锚点","delete":"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",pasteOpt:"粘贴选项",pasteSourceFormat:"保留源格式",tagFormat:"只保留标签",pasteTextFormat:"只保留文本",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"首行缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行",symbol:"符号转换",bdc2sb:"全角转半角",tobdc:"半角转全角"},background:{"static":{lang_background_normal:"背景设置",lang_background_local:"在线图片",lang_background_set:"选项",lang_background_none:"无背景色",lang_background_colored:"有背景色",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{"static":{lang_tab_remote:"插入图片",lang_tab_upload:"本地上传",lang_tab_online:"在线管理",lang_tab_search:"图片搜索",lang_input_url:"地 址：",lang_input_size:"大 小：",lang_input_width:"宽度",lang_input_height:"高度",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_align:"图片浮动方式：",lang_imgLoading:"　图片加载中……",lang_start_upload:"开始上传",lock:{title:"锁定宽高比例"},searchType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},searchTxt:{value:"请输入搜索关键词"},searchBtn:{value:"百度一下"},searchReset:{value:"清空搜索"},noneAlign:{title:"无浮动"},leftAlign:{title:"左浮动"},rightAlign:{title:"右浮动"},centerAlign:{title:"居中独占一行"}},uploadSelectFile:"点击选择图片",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",uploadNoPreview:"不能预览",updateStatusReady:"选中_张图片，共_KB。",updateStatusConfirm:"已成功上传_张照片，_张照片上传失败",updateStatusFinish:"共_张（_KB），_张上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错",remoteLockError:"宽高不正确,不能所定比例",numError:"请输入正确的长度或者宽度值！例如：123，400",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",searchRemind:"请输入搜索关键词",searchLoading:"图片加载中，请稍后……",searchRetry:" :( ，抱歉，没有找到图片！请重试一次！"},attachment:{"static":{lang_tab_upload:"上传附件",lang_tab_online:"在线附件",lang_start_upload:"开始上传",lang_drop_remind:"可以将文件拖到这里，单次最多可选100个文件"},uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"已成功上传_个文件，_个文件上传失败",updateStatusFinish:"共_个（_KB），_个上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},insertvideo:{"static":{lang_tab_insertV:"插入视频",lang_tab_searchV:"搜索视频",lang_tab_uploadV:"上传视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"},lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"},lang_upload_size:"视频尺寸",lang_upload_width:"宽度",lang_upload_height:"高度",lang_upload_alignment:"对齐方式",lang_format_advice:"建议使用mp4格式."},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动",'"default"':"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",browseFiles:"浏览文件",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型不允许！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……",uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"成功上传_个，_个失败",updateStatusFinish:"共_个(_KB)，_个成功上传",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至ueditor.config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{"static":{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{"static":{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},music:{"static":{lang_input_tips:"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",J_searchBtn:{value:"搜索歌曲"}},emptyTxt:"未搜索到相关音乐结果，请换一个关键词试试。",chapter:"歌曲",singer:"歌手",special:"专辑",listenTest:"试听"},anchor:{"static":{lang_input_anchorName:"锚点名字："}},charts:{"static":{lang_data_source:"数据源：",lang_chart_format:"图表格式：",lang_data_align:"数据对齐方式",lang_chart_align_same:"数据源与图表X轴Y轴一致",lang_chart_align_reverse:"数据源与图表X轴Y轴相反",lang_chart_title:"图表标题",lang_chart_main_title:"主标题：",lang_chart_sub_title:"子标题：",lang_chart_x_title:"X轴标题：",lang_chart_y_title:"Y轴标题：",lang_chart_tip:"提示文字",lang_cahrt_tip_prefix:"提示文字前缀：",lang_cahrt_tip_description:"仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀",lang_chart_data_unit:"数据单位",lang_chart_data_unit_title:"单位：",lang_chart_data_unit_description:"显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃",lang_chart_type:"图表类型：",lang_prev_btn:"上一个",lang_next_btn:"下一个"}},emotion:{"static":{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{"static":{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{"static":{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_visualEnter:"软回车",lang_Txt_fullscreen:"全屏"}},insertframe:{"static":{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{"static":{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{"static":{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索",lang_dynamicmap:"插入动态地图"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{"static":{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_searchReg:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_searchReg1:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{"static":{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},spechars:{"static":{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",yyyb:"英语音标",zyzf:"其他"},edittable:{"static":{lang_tableStyle:"表格样式",lang_insertCaption:"添加表格名称行",lang_insertTitle:"添加表格标题行",lang_insertTitleCol:"添加表格标题列",lang_orderbycontent:"使表格内容可排序",lang_tableSize:"自动调整表格尺寸",lang_autoSizeContent:"按表格文字自适应",lang_autoSizePage:"按页面宽度自适应",lang_example:"示例",lang_borderStyle:"表格边框",lang_color:"颜色:"},captionName:"表格名称",titleName:"标题",cellsName:"内容",errorMsg:"有合并单元格，不可排序"},edittip:{"static":{lang_delRow:"删除整行",lang_delCol:"删除整列"}},edittd:{"static":{lang_tdBkColor:"背景颜色:"}},formula:{"static":{}},wordimage:{"static":{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}},autosave:{saving:"保存中...",success:"本地保存成功"}};(function(b){b.fn.obpmDateField=function(){return this.each(function(){var z=jQuery(this);var u=z.attr("_id");var K=z.attr("_name");var g=z.attr("_fieldType");var F="";var e=z.attr("_class");var D=z.attr("limit");var y=z.attr("value");var l=z.attr("_displayType");var v=z.attr("readOnlyShowValOnly");var d=z.attr("_textType");var E=z.attr("_dateFmt");var H=z.attr("_getPrevName");var J=z.attr("_getPrevNameMinDate");var A=z.attr("_skin");var c=z.attr("_minDate");var w=z.attr("_maxDate");var q=z.attr("_noPatternHms");var f=z.attr("_isRefreshOnChanged");var I=z.attr("_subGridView");var G=z.attr("_hiddenValue");var s=z.attr("_discript");s=s?s:K;var C=z.attr("_isCommonFilter");C=(C=="true");var B;var h;if(B){B=B.replace(/"([^"]*)"/g,"$1")}y=y?y:"";f=(f=="true");H=(H=="true");q=(q=="true");I=(I=="true");if(E=="yyyy"&&E.length==4){_dateFmt="YYYY";h="width: 150px;"}if(E=="yyyy-MM"&&E.length==7){_dateFmt="YYYY-MM";h="width: 150px;"}if(E=="yyyy-MM-dd"&&E.length==10){_dateFmt="YYYY-MM-DD";h="width: 150px;"}if(E=="yyyy-MM-dd HH:mm"&&E.length==16){_dateFmt="YYYY-MM-DD HH:mm";h="width: 210px"}if(E=="yyyy-MM-dd HH:mm:ss"&&E.length==19){_dateFmt="YYYY-MM-DD HH:mm:ss";h="width: 210px;"}if(E=="HH:mm:ss"&&E.length==8){_dateFmt="HH:mm:ss";h="width: 150px;"}var m="";if(l!=PermissionType_HIDDEN&&d.toLowerCase()!="hidden"){var t=getOtherAttrs(z[0]);function p(L,M){if(L=="yyyy"&&trim(M).length==4){M=trim(M)+"-01-01 00:00:00"}if(L=="yyyy-MM"&&trim(M).length==7){M=trim(M)+"-01 00:00:00"}if(L=="yyyy-MM-dd"&&trim(M).length==10){M=trim(M)+" 00:00:00"}if(L=="yyyy-MM-dd HH:mm"&&trim(M).length==16){M=trim(M)+":00"}if(L=="HH:mm:ss"&&trim(M).length==8){M="1900-01-01 "+M}return M}function r(ac){var Y=ac.find("input").attr("dateFmt");if(Y=="yyyy"&&Y.length==4){_dateFmt="YYYY"}if(Y=="yyyy-MM"&&Y.length==7){_dateFmt="YYYY-MM"}if(Y=="yyyy-MM-dd"&&Y.length==10){_dateFmt="YYYY-MM-DD"}if(Y=="yyyy-MM-dd HH:mm"&&Y.length==16){_dateFmt="YYYY-MM-DD HH:mm"}if(Y=="yyyy-MM-dd HH:mm:ss"&&Y.length==19){_dateFmt="YYYY-MM-DD HH:mm:ss"}if(Y=="HH:mm:ss"&&Y.length==8){_dateFmt="HH:mm:ss"}var U=b("#"+J);var W=U.val();var T=U.attr("dateFmt");if(W&&W!=""){c=W}if(W==""||W==undefined){c="1900-01-01 00:00:00"}c=p(T,c);var aa=jQuery("input[min_name='"+u+"']");var L=aa.attr("dateFmt");if(aa.size()>0){var Z="";var N="";aa.each(function(){var ag=jQuery(this).val();var ad=jQuery(this).attr("name");if(ag!=""){var af=new Date(ag.replace(/-/g,"/"));var ae=new Date(Z.replace(/-/g,"/"));Z=(af>ae)?Z:ag;N=(af>ae)?N:ad}});w=Z;dateName=N}var ab=new Date(c.replace(/-/g,"/"));var O=new Date(w.replace(/-/g,"/"));if(ab>O){var P=jQuery("#"+J).attr("name");alert(P+" 不能大于 "+dateName);return false}if(w==""){w="2099-12-31 23:59:59"}if(L=="yyyy"&&trim(w).length==4){w=trim(w)+"-01-01 23:59:59"}if(L=="yyyy-MM"&&trim(w).length==7){w=trim(w)+"-01 23:59:59"}if(L=="yyyy-MM-dd"&&trim(w).length==10){w=trim(w)+" 23:59:59"}if(L=="yyyy-MM-dd HH:mm"&&trim(w).length==16){w=trim(w)+":59"}if(L=="HH:mm:ss"&&trim(w).length==8){w="0000-00-00 "+w}if(ac.data("DateTimePicker")){ac.data("DateTimePicker").destroy()}var M=w.split(/[- :]/);var S=new Date(M[0],M[1]-1,M[2],M[3],M[4],M[5]);var V=c.split(/[- :]/);var Q=new Date(V[0],V[1]-1,V[2],"0","0","0");ac.parent(".grid-column-edit").parent().css("overflow","");var X;if(Q-new Date()<0){X=false}else{X=c}var R=0;ac.datetimepicker({format:_dateFmt,minDate:q?Q:"1900-01-01 00:00:00",maxDate:q?S:"2099-12-31 23:59:59",defaultDate:X,locale:"zh-cn",showClose:true,icons:{previous:"",next:"",up:"timepicker-up",down:"timepicker-down",time:"selectTime",close:"btn-close"},tooltips:{close:"确认"}}).on("dp.show",function(af){var al=b(af.target).find("input").val();var ae=b(af.target).find("input").attr("min_name");var aj=b(af.target).find("input").attr("datefmt");if(al==""){if(ae==undefined){var ah=b(af.target).find("input").attr("id");var ag=b("input[min_name='"+ah+"']");if(ag.size()>0){al=ag.val()}}else{al=b("input#"+ae).val()}}if(aj=="yyyy-MM-dd HH:mm"&&aj.length==16){b(af.target).find(".bootstrap-datetimepicker-widget").find("li.picker-switch").find("span.selectTime").html("&nbsp;"+al.substring(11,16))}if(aj=="yyyy-MM-dd HH:mm:ss"&&aj.length==19){b(af.target).find(".bootstrap-datetimepicker-widget").find("li.picker-switch").find("span.selectTime").html("&nbsp;"+al.substring(11,19))}if(aj=="HH:mm:ss"&&aj.length==8){b(af.target).find(".bootstrap-datetimepicker-widget").find("li.picker-switch").find("span.selectTime").html("&nbsp;"+al)}var ai=b(af.target).offset();var ad=b(af.target).find(".bootstrap-datetimepicker-widget");var ak=ai.top+b(af.target).height()+ad.height();if(typeof(isSubGridView)!="undefined"){b(af.target).css("position","static");b(af.target).parents(".obpm-isedit").css("position","relative")}}).on("dp.hide",function(ag){var af=b(ag.target).find("input").val();af=p(Y,af);if(af<c&&af!=""){var ad=b(ag.target).find("input").attr("name");if(R==0){alert(ad+" 不能小于 "+c)}R++;return false}if(typeof(isSubGridView)!="undefined"){b(ag.target).css("position","");b(ag.target).parents(".obpm-isedit").css("position","")}if(f){var ae=b(this).find("input").attr("id");if(I){dy_view_refresh(ae)}else{dy_refresh(ae)}}});ac.data("DateTimePicker").show()}m+="<div class='input-group date' ";if(B){m+=" style='word-break: initial;vertical-align: middle;display: inline-table;"+B+""}else{m+=" style='word-break: initial;vertical-align: middle;display: inline-table;"+h+""}if(l==PermissionType_READONLY||d.toLowerCase()=="readonly"||l==PermissionType_DISABLED){if(v=="true"){m+=";display:none;"}}m+=" '>";if(d.toLowerCase()=="hidden"){m+="<input type='hidden'"}else{m+="<input type='text'"}m+=" id='"+u+"' value='"+y+"' isCommonFilter='"+C+"' limit='"+D+"' name='"+K+"' discript='"+s+"' classname='"+F+"' fieldType='"+g+"' class='form-control "+e+"'";m+=" isRefreshOnChanged='"+f+"' dateFmt='"+E+"' "+t;if(l==PermissionType_READONLY||d.toLowerCase()=="readonly"||l==PermissionType_DISABLED||d.toLowerCase()=="disabled"||d.toLowerCase()=="hidden"||l==PermissionType_HIDDEN){m+=" readonly='readonly'"}if(J){m+=' min_name="'+J+'"'}m+=" /><span class='input-group-addon'><span class='glyphicon glyphicon-calendar'></span></span></div>";var x=b(m);if(!I){x.bind("blur",function(){if(typeof(dateCompareVal)=="function"){dateCompareVal(this)}})}x.bind("click",function(){r(jQuery(this))}).replaceAll(z);if(l==PermissionType_READONLY||d.toLowerCase()=="readonly"||l==PermissionType_DISABLED){if(v=="true"){x.after("<span id='"+K+"_show' >"+y+"</span>")}}}else{m+="<input type='hidden' name=\""+K+'" value="'+y+'" /><span>'+G+"</span>";b(m).replaceAll(z)}})}})(jQuery);(function(M){var aa,aQ="2.9.0",bh=(typeof global!=="undefined"&&(typeof window==="undefined"||window===global.window))?global:this,aB,ai=Math.round,aW=Object.prototype.hasOwnProperty,aq,G=0,m=1,a9=2,F=3,aN=4,D=5,ae=6,az={},a2=[],aA=(typeof module!=="undefined"&&module&&module.exports),f=/^\/?Date\((\-?\d+)/i,bl=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,aS=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,aE=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,ap=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,p=/\d\d?/,ar=/\d{1,3}/,N=/\d{1,4}/,br=/[+\-]?\d{1,6}/,bf=/\d+/,S=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,x=/Z|[\+\-]\d\d:?\d\d/gi,t=/T/i,B=/[\+\-]?\d+/,a4=/[\+\-]?\d+(\.\d{1,3})?/,ao=/\d/,A=/\d\d/,bj=/\d{3}/,a3=/\d{4}/,aw=/[+-]?\d{6}/,al=/[+-]?\d+/,a0=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,af="YYYY-MM-DDTHH:mm:ssZ",bi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Q=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],an=/([\+\-]|\d\d)/gi,aU="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),L={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},g={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},be={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ay={},H={s:45,m:45,h:22,d:26,M:11},a8="DDD w W M D d".split(" "),aC="M D H h m s w W".split(" "),ba={M:function(){return this.month()+1},MMM:function(bx){return this.localeData().monthsShort(this,bx)},MMMM:function(bx){return this.localeData().months(this,bx)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(bx){return this.localeData().weekdaysMin(this,bx)},ddd:function(bx){return this.localeData().weekdaysShort(this,bx)},dddd:function(bx){return this.localeData().weekdays(this,bx)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return T(this.year()%100,2)},YYYY:function(){return T(this.year(),4)},YYYYY:function(){return T(this.year(),5)},YYYYYY:function(){var by=this.year(),bx=by>=0?"+":"-";return bx+T(Math.abs(by),6)},gg:function(){return T(this.weekYear()%100,2)},gggg:function(){return T(this.weekYear(),4)},ggggg:function(){return T(this.weekYear(),5)},GG:function(){return T(this.isoWeekYear()%100,2)},GGGG:function(){return T(this.isoWeekYear(),4)},GGGGG:function(){return T(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return V(this.milliseconds()/100)},SS:function(){return T(V(this.milliseconds()/10),2)},SSS:function(){return T(this.milliseconds(),3)},SSSS:function(){return T(this.milliseconds(),3)},Z:function(){var by=this.utcOffset(),bx="+";if(by<0){by=-by;bx="-"}return bx+T(V(by/60),2)+":"+T(V(by)%60,2)},ZZ:function(){var by=this.utcOffset(),bx="+";if(by<0){by=-by;bx="-"}return bx+T(V(by/60),2)+T(V(by)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},b={},ag=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],am=false;function a5(by,bx,bz){switch(arguments.length){case 2:return by!=null?by:bx;case 3:return by!=null?by:bx!=null?bx:bz;default:throw new Error("Implement me")}}function bb(by,bx){return aW.call(by,bx)}function au(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function bw(bx){if(aa.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+bx)}}function bu(by,bx){var bz=true;return aO(function(){if(bz){bw(by);bz=false}return bx.apply(this,arguments)},bx)}function h(bx,by){if(!b[bx]){bw(by);b[bx]=true}}function X(by,bx){return function(bz){return T(by.call(this,bz),bx)}}function q(bx,by){return function(bz){return this.localeData().ordinal(bx.call(this,bz),by)}}function r(by,bx){var bC=((bx.year()-by.year())*12)+(bx.month()-by.month()),bz=by.clone().add(bC,"months"),bA,bB;if(bx-bz<0){bA=by.clone().add(bC-1,"months");bB=(bx-bz)/(bz-bA)}else{bA=by.clone().add(bC+1,"months");bB=(bx-bz)/(bA-bz)}return -(bC+bB)}while(a8.length){aq=a8.pop();ba[aq+"o"]=q(ba[aq],aq)}while(aC.length){aq=aC.pop();ba[aq+aq]=X(ba[aq],2)}ba.DDDD=X(ba.DDD,3);function bk(bx,bz,bA){var by;if(bA==null){return bz}if(bx.meridiemHour!=null){return bx.meridiemHour(bz,bA)}else{if(bx.isPM!=null){by=bx.isPM(bA);if(by&&bz<12){bz+=12}if(!by&&bz===12){bz=0}return bz}else{return bz}}}function ak(){}function U(by,bx){if(bx!==false){bo(by)}aY(this,by);this._d=new Date(+by._d);if(am===false){am=true;aa.updateOffset(this);am=false}}function at(bC){var bE=u(bC),bD=bE.year||0,by=bE.quarter||0,bz=bE.month||0,bx=bE.week||0,bH=bE.day||0,bF=bE.hour||0,bB=bE.minute||0,bG=bE.second||0,bA=bE.millisecond||0;this._milliseconds=+bA+bG*1000+bB*60000+bF*3600000;this._days=+bH+bx*7;this._months=+bz+by*3+bD*12;this._data={};this._locale=aa.localeData();this._bubble()}function aO(by,bx){for(var bz in bx){if(bb(bx,bz)){by[bz]=bx[bz]}}if(bb(bx,"toString")){by.toString=bx.toString}if(bb(bx,"valueOf")){by.valueOf=bx.valueOf}return by}function aY(bB,bA){var bx,bz,by;if(typeof bA._isAMomentObject!=="undefined"){bB._isAMomentObject=bA._isAMomentObject}if(typeof bA._i!=="undefined"){bB._i=bA._i}if(typeof bA._f!=="undefined"){bB._f=bA._f}if(typeof bA._l!=="undefined"){bB._l=bA._l}if(typeof bA._strict!=="undefined"){bB._strict=bA._strict}if(typeof bA._tzm!=="undefined"){bB._tzm=bA._tzm}if(typeof bA._isUTC!=="undefined"){bB._isUTC=bA._isUTC}if(typeof bA._offset!=="undefined"){bB._offset=bA._offset}if(typeof bA._pf!=="undefined"){bB._pf=bA._pf}if(typeof bA._locale!=="undefined"){bB._locale=bA._locale}if(a2.length>0){for(bx in a2){bz=a2[bx];by=bA[bz];if(typeof by!=="undefined"){bB[bz]=by}}}return bB}function v(bx){if(bx<0){return Math.ceil(bx)}else{return Math.floor(bx)}}function T(bB,bA,bz){var by=""+Math.abs(bB),bx=bB>=0;while(by.length<bA){by="0"+by}return(bx?(bz?"+":""):"-")+by}function e(bz,bx){var by={milliseconds:0,months:0};by.months=bx.month()-bz.month()+(bx.year()-bz.year())*12;if(bz.clone().add(by.months,"M").isAfter(bx)){--by.months}by.milliseconds=+bx-+(bz.clone().add(by.months,"M"));return by}function ah(bz,bx){var by;bx=I(bx,bz);if(bz.isBefore(bx)){by=e(bz,bx)}else{by=e(bx,bz);by.milliseconds=-by.milliseconds;by.months=-by.months}return by}function ab(by,bx){return function(bC,bB){var bA,bz;if(bB!==null&&!isNaN(+bB)){h(bx,"moment()."+bx+"(period, number) is deprecated. Please use moment()."+bx+"(number, period).");bz=bC;bC=bB;bB=bz}bC=typeof bC==="string"?+bC:bC;bA=aa.duration(bC,bB);P(this,bA,by);return this}}function P(bz,bC,bB,bA){var by=bC._milliseconds,bD=bC._days,bx=bC._months;bA=bA==null?true:bA;if(by){bz._d.setTime(+bz._d+by*bB)}if(bD){a6(bz,"Date",bv(bz,"Date")+bD*bB)}if(bx){bq(bz,bv(bz,"Month")+bx*bB)}if(bA){aa.updateOffset(bz,bD||bx)}}function c(bx){return Object.prototype.toString.call(bx)==="[object Array]"}function l(bx){return Object.prototype.toString.call(bx)==="[object Date]"||bx instanceof Date}function a7(bC,bB,by){var bx=Math.min(bC.length,bB.length),bz=Math.abs(bC.length-bB.length),bD=0,bA;for(bA=0;bA<bx;bA++){if((by&&bC[bA]!==bB[bA])||(!by&&V(bC[bA])!==V(bB[bA]))){bD++}}return bD+bz}function bd(by){if(by){var bx=by.toLowerCase().replace(/(.)s$/,"$1");by=g[by]||be[bx]||bx}return by}function u(bz){var by={},bx,bA;for(bA in bz){if(bb(bz,bA)){bx=bd(bA);if(bx){by[bx]=bz[bA]}}}return by}function aK(by){var bx,bz;if(by.indexOf("week")===0){bx=7;bz="day"}else{if(by.indexOf("month")===0){bx=12;bz="month"}else{return}}aa[by]=function(bE,bB){var bD,bA,bF=aa._locale[by],bC=[];if(typeof bE==="number"){bB=bE;bE=M}bA=function(bH){var bG=aa().utc().set(bz,bH);return bF.call(aa._locale,bG,bE||"")};if(bB!=null){return bA(bB)}else{for(bD=0;bD<bx;bD++){bC.push(bA(bD))}return bC}}}function V(bx){var bz=+bx,by=0;if(bz!==0&&isFinite(bz)){if(bz>=0){by=Math.floor(bz)}else{by=Math.ceil(bz)}}return by}function bm(bx,by){return new Date(Date.UTC(bx,by+1,0)).getUTCDate()}function aT(bx,bz,by){return K(aa([bx,11,31+bz-by]),bz,by).week}function bg(bx){return aZ(bx)?366:365}function aZ(bx){return(bx%4===0&&bx%100!==0)||bx%400===0}function bo(bx){var by;if(bx._a&&bx._pf.overflow===-2){by=bx._a[m]<0||bx._a[m]>11?m:bx._a[a9]<1||bx._a[a9]>bm(bx._a[G],bx._a[m])?a9:bx._a[F]<0||bx._a[F]>24||(bx._a[F]===24&&(bx._a[aN]!==0||bx._a[D]!==0||bx._a[ae]!==0))?F:bx._a[aN]<0||bx._a[aN]>59?aN:bx._a[D]<0||bx._a[D]>59?D:bx._a[ae]<0||bx._a[ae]>999?ae:-1;if(bx._pf._overflowDayOfYear&&(by<G||by>a9)){by=a9}bx._pf.overflow=by}}function aP(bx){if(bx._isValid==null){bx._isValid=!isNaN(bx._d.getTime())&&bx._pf.overflow<0&&!bx._pf.empty&&!bx._pf.invalidMonth&&!bx._pf.nullInput&&!bx._pf.invalidFormat&&!bx._pf.userInvalidated;if(bx._strict){bx._isValid=bx._isValid&&bx._pf.charsLeftOver===0&&bx._pf.unusedTokens.length===0&&bx._pf.bigHour===M}}return bx._isValid}function a1(bx){return bx?bx.toLowerCase().replace("_","-"):bx}function aH(bC){var bA=0,by,bB,bx,bz;while(bA<bC.length){bz=a1(bC[bA]).split("-");by=bz.length;bB=a1(bC[bA+1]);bB=bB?bB.split("-"):null;while(by>0){bx=d(bz.slice(0,by).join("-"));if(bx){return bx}if(bB&&bB.length>=by&&a7(bz,bB,true)>=by-1){break}by--}bA++}return null}function d(bx){var bz=null;if(!az[bx]&&aA){try{bz=aa.locale();require("./locale/"+bx);aa.locale(bz)}catch(by){}}return az[bx]}function I(bx,by){var bz,bA;if(by._isUTC){bz=by.clone();bA=(aa.isMoment(bx)||l(bx)?+bx:+aa(bx))-(+bz);bz._d.setTime(+bz._d+bA);aa.updateOffset(bz,false);return bz}else{return aa(bx).local()}}aO(ak.prototype,{set:function(bx){var bz,by;for(by in bx){bz=bx[by];if(typeof bz==="function"){this[by]=bz}else{this["_"+by]=bz}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(bx){return this._months[bx.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(bx){return this._monthsShort[bx.month()]},monthsParse:function(by,bC,bx){var bz,bB,bA;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(bz=0;bz<12;bz++){bB=aa.utc([2000,bz]);if(bx&&!this._longMonthsParse[bz]){this._longMonthsParse[bz]=new RegExp("^"+this.months(bB,"").replace(".","")+"$","i");this._shortMonthsParse[bz]=new RegExp("^"+this.monthsShort(bB,"").replace(".","")+"$","i")}if(!bx&&!this._monthsParse[bz]){bA="^"+this.months(bB,"")+"|^"+this.monthsShort(bB,"");this._monthsParse[bz]=new RegExp(bA.replace(".",""),"i")}if(bx&&bC==="MMMM"&&this._longMonthsParse[bz].test(by)){return bz}else{if(bx&&bC==="MMM"&&this._shortMonthsParse[bz].test(by)){return bz}else{if(!bx&&this._monthsParse[bz].test(by)){return bz}}}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(bx){return this._weekdays[bx.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(bx){return this._weekdaysShort[bx.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(bx){return this._weekdaysMin[bx.day()]},weekdaysParse:function(bA){var bx,bz,by;if(!this._weekdaysParse){this._weekdaysParse=[]}for(bx=0;bx<7;bx++){if(!this._weekdaysParse[bx]){bz=aa([2000,1]).day(bx);by="^"+this.weekdays(bz,"")+"|^"+this.weekdaysShort(bz,"")+"|^"+this.weekdaysMin(bz,"");this._weekdaysParse[bx]=new RegExp(by.replace(".",""),"i")}if(this._weekdaysParse[bx].test(bA)){return bx}}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(by){var bx=this._longDateFormat[by];if(!bx&&this._longDateFormat[by.toUpperCase()]){bx=this._longDateFormat[by.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(bz){return bz.slice(1)});this._longDateFormat[by]=bx}return bx},isPM:function(bx){return((bx+"").toLowerCase().charAt(0)==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(bx,by,bz){if(bx>11){return bz?"pm":"PM"}else{return bz?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(bz,bA,by){var bx=this._calendar[bz];return typeof bx==="function"?bx.apply(bA,[by]):bx},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(bA,bz,by,bB){var bx=this._relativeTime[by];return(typeof bx==="function")?bx(bA,bz,by,bB):bx.replace(/%d/i,bA)},pastFuture:function(bz,bx){var by=this._relativeTime[bz>0?"future":"past"];return typeof by==="function"?by(bx):by.replace(/%s/i,bx)},ordinal:function(bx){return this._ordinal.replace("%d",bx)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(bx){return bx},postformat:function(bx){return bx},week:function(bx){return K(bx,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function ax(bx){if(bx.match(/\[[\s\S]/)){return bx.replace(/^\[|\]$/g,"")}return bx.replace(/\\/g,"")}function C(bz){var bA=bz.match(aE),bx,by;for(bx=0,by=bA.length;bx<by;bx++){if(ba[bA[bx]]){bA[bx]=ba[bA[bx]]}else{bA[bx]=ax(bA[bx])}}return function(bC){var bB="";for(bx=0;bx<by;bx++){bB+=bA[bx] instanceof Function?bA[bx].call(bC,bz):bA[bx]}return bB}}function aD(bx,by){if(!bx.isValid()){return bx.localeData().invalidDate()}by=bs(by,bx.localeData());if(!ay[by]){ay[by]=C(by)}return ay[by](bx)}function bs(bA,bx){var by=5;function bz(bB){return bx.longDateFormat(bB)||bB}ap.lastIndex=0;while(by>=0&&ap.test(bA)){bA=bA.replace(ap,bz);ap.lastIndex=0;by-=1}return bA}function aI(bA,bz){var by,bx=bz._strict;switch(bA){case"Q":return ao;case"DDDD":return bj;case"YYYY":case"GGGG":case"gggg":return bx?a3:N;case"Y":case"G":case"g":return al;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return bx?aw:br;case"S":if(bx){return ao}case"SS":if(bx){return A}case"SSS":if(bx){return bj}case"DDD":return ar;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return S;case"a":case"A":return bz._locale._meridiemParse;case"x":return B;case"X":return a4;case"Z":case"ZZ":return x;case"T":return t;case"SSSS":return bf;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return bx?A:p;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return p;case"Do":return bx?bz._locale._ordinalParse:bz._locale._ordinalParseLenient;default:by=new RegExp(bp(aM(bA.replace("\\","")),"i"));return by}}function aV(by){by=by||"";var bx=(by.match(x)||[]),bB=bx[bx.length-1]||[],bA=(bB+"").match(an)||["-",0,0],bz=+(bA[1]*60)+V(bA[2]);return bA[0]==="+"?bz:-bz}function aL(bB,bz,bA){var by,bx=bA._a;switch(bB){case"Q":if(bz!=null){bx[m]=(V(bz)-1)*3}break;case"M":case"MM":if(bz!=null){bx[m]=V(bz)-1}break;case"MMM":case"MMMM":by=bA._locale.monthsParse(bz,bB,bA._strict);if(by!=null){bx[m]=by}else{bA._pf.invalidMonth=bz}break;case"D":case"DD":if(bz!=null){bx[a9]=V(bz)}break;case"Do":if(bz!=null){bx[a9]=V(parseInt(bz.match(/\d{1,2}/)[0],10))}break;case"DDD":case"DDDD":if(bz!=null){bA._dayOfYear=V(bz)}break;case"YY":bx[G]=aa.parseTwoDigitYear(bz);break;case"YYYY":case"YYYYY":case"YYYYYY":bx[G]=V(bz);break;case"a":case"A":bA._meridiem=bz;break;case"h":case"hh":bA._pf.bigHour=true;case"H":case"HH":bx[F]=V(bz);break;case"m":case"mm":bx[aN]=V(bz);break;case"s":case"ss":bx[D]=V(bz);break;case"S":case"SS":case"SSS":case"SSSS":bx[ae]=V(("0."+bz)*1000);break;case"x":bA._d=new Date(V(bz));break;case"X":bA._d=new Date(parseFloat(bz)*1000);break;case"Z":case"ZZ":bA._useUTC=true;bA._tzm=aV(bz);break;case"dd":case"ddd":case"dddd":by=bA._locale.weekdaysParse(bz);if(by!=null){bA._w=bA._w||{};bA._w.d=by}else{bA._pf.invalidWeekday=bz}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":bB=bB.substr(0,1);case"gggg":case"GGGG":case"GGGGG":bB=bB.substr(0,2);if(bz){bA._w=bA._w||{};bA._w[bB]=V(bz)}break;case"gg":case"GG":bA._w=bA._w||{};bA._w[bB]=aa.parseTwoDigitYear(bz)}}function ac(bz){var bx,bB,bA,bC,bE,bD,by;bx=bz._w;if(bx.GG!=null||bx.W!=null||bx.E!=null){bE=1;bD=4;bB=a5(bx.GG,bz._a[G],K(aa(),1,4).year);bA=a5(bx.W,1);bC=a5(bx.E,1)}else{bE=bz._locale._week.dow;bD=bz._locale._week.doy;bB=a5(bx.gg,bz._a[G],K(aa(),bE,bD).year);bA=a5(bx.w,1);if(bx.d!=null){bC=bx.d;if(bC<bE){++bA}}else{if(bx.e!=null){bC=bx.e+bE}else{bC=bE}}}by=E(bB,bA,bC,bD,bE);bz._a[G]=by.year;bz._dayOfYear=by.dayOfYear}function av(bB){var bC,bA,bz=[],by,bx;if(bB._d){return}by=w(bB);if(bB._w&&bB._a[a9]==null&&bB._a[m]==null){ac(bB)}if(bB._dayOfYear){bx=a5(bB._a[G],by[G]);if(bB._dayOfYear>bg(bx)){bB._pf._overflowDayOfYear=true}bA=R(bx,0,bB._dayOfYear);bB._a[m]=bA.getUTCMonth();bB._a[a9]=bA.getUTCDate()}for(bC=0;bC<3&&bB._a[bC]==null;++bC){bB._a[bC]=bz[bC]=by[bC]}for(;bC<7;bC++){bB._a[bC]=bz[bC]=(bB._a[bC]==null)?(bC===2?1:0):bB._a[bC]}if(bB._a[F]===24&&bB._a[aN]===0&&bB._a[D]===0&&bB._a[ae]===0){bB._nextDay=true;bB._a[F]=0}bB._d=(bB._useUTC?R:aF).apply(null,bz);if(bB._tzm!=null){bB._d.setUTCMinutes(bB._d.getUTCMinutes()-bB._tzm)}if(bB._nextDay){bB._a[F]=24}}function aR(by){var bx;if(by._d){return}bx=u(by._i);by._a=[bx.year,bx.month,bx.day||bx.date,bx.hour,bx.minute,bx.second,bx.millisecond];av(by)}function w(by){var bx=new Date();if(by._useUTC){return[bx.getUTCFullYear(),bx.getUTCMonth(),bx.getUTCDate()]}else{return[bx.getFullYear(),bx.getMonth(),bx.getDate()]}}function Z(bz){if(bz._f===aa.ISO_8601){aG(bz);return}bz._a=[];bz._pf.empty=true;var bC=""+bz._i,bB,by,bF,bA,bE,bx=bC.length,bD=0;bF=bs(bz._f,bz._locale).match(aE)||[];for(bB=0;bB<bF.length;bB++){bA=bF[bB];by=(bC.match(aI(bA,bz))||[])[0];if(by){bE=bC.substr(0,bC.indexOf(by));if(bE.length>0){bz._pf.unusedInput.push(bE)}bC=bC.slice(bC.indexOf(by)+by.length);bD+=by.length}if(ba[bA]){if(by){bz._pf.empty=false}else{bz._pf.unusedTokens.push(bA)}aL(bA,by,bz)}else{if(bz._strict&&!by){bz._pf.unusedTokens.push(bA)}}}bz._pf.charsLeftOver=bx-bD;if(bC.length>0){bz._pf.unusedInput.push(bC)}if(bz._pf.bigHour===true&&bz._a[F]<=12){bz._pf.bigHour=M}bz._a[F]=bk(bz._locale,bz._a[F],bz._meridiem);av(bz);bo(bz)}function aM(bx){return bx.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(by,bC,bB,bA,bz){return bC||bB||bA||bz})}function bp(bx){return bx.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function bc(bx){var bB,bz,bA,by,bC;if(bx._f.length===0){bx._pf.invalidFormat=true;bx._d=new Date(NaN);return}for(by=0;by<bx._f.length;by++){bC=0;bB=aY({},bx);if(bx._useUTC!=null){bB._useUTC=bx._useUTC}bB._pf=au();bB._f=bx._f[by];Z(bB);if(!aP(bB)){continue}bC+=bB._pf.charsLeftOver;bC+=bB._pf.unusedTokens.length*10;bB._pf.score=bC;if(bA==null||bC<bA){bA=bC;bz=bB}}aO(bx,bz||bB)}function aG(bA){var bB,bx,bz=bA._i,by=a0.exec(bz);if(by){bA._pf.iso=true;for(bB=0,bx=bi.length;bB<bx;bB++){if(bi[bB][1].exec(bz)){bA._f=bi[bB][0]+(by[6]||" ");break}}for(bB=0,bx=Q.length;bB<bx;bB++){if(Q[bB][1].exec(bz)){bA._f+=Q[bB][0];break}}if(bz.match(x)){bA._f+="Z"}Z(bA)}else{bA._isValid=false}}function s(bx){aG(bx);if(bx._isValid===false){delete bx._isValid;aa.createFromInputFallback(bx)}}function O(bx,bA){var bz=[],by;for(by=0;by<bx.length;++by){bz.push(bA(bx[by],by))}return bz}function Y(bz){var by=bz._i,bx;if(by===M){bz._d=new Date()}else{if(l(by)){bz._d=new Date(+by)}else{if((bx=f.exec(by))!==null){bz._d=new Date(+bx[1])}else{if(typeof by==="string"){s(bz)}else{if(c(by)){bz._a=O(by.slice(0),function(bA){return parseInt(bA,10)});av(bz)}else{if(typeof(by)==="object"){aR(bz)}else{if(typeof(by)==="number"){bz._d=new Date(by)}else{aa.createFromInputFallback(bz)}}}}}}}}function aF(bE,bx,bC,bB,bD,bA,bz){var by=new Date(bE,bx,bC,bB,bD,bA,bz);if(bE<1970){by.setFullYear(bE)}return by}function R(by){var bx=new Date(Date.UTC.apply(null,arguments));if(by<1970){bx.setUTCFullYear(by)}return bx}function bn(by,bx){if(typeof by==="string"){if(!isNaN(by)){by=parseInt(by,10)}else{by=bx.weekdaysParse(by);if(typeof by!=="number"){return null}}}return by}function aX(by,bA,bz,bB,bx){return bx.relativeTime(bA||1,!!bz,by,bB)}function J(bB,by,bF){var bz=aa.duration(bB).abs(),bG=ai(bz.as("s")),bA=ai(bz.as("m")),bE=ai(bz.as("h")),bH=ai(bz.as("d")),bx=ai(bz.as("M")),bC=ai(bz.as("y")),bD=bG<H.s&&["s",bG]||bA===1&&["m"]||bA<H.m&&["mm",bA]||bE===1&&["h"]||bE<H.h&&["hh",bE]||bH===1&&["d"]||bH<H.d&&["dd",bH]||bx===1&&["M"]||bx<H.M&&["MM",bx]||bC===1&&["y"]||["yy",bC];bD[2]=by;bD[3]=+bB>0;bD[4]=bF;return aX.apply({},bD)}function K(bB,bz,bC){var by=bC-bz,bx=bC-bB.day(),bA;if(bx>by){bx-=7}if(bx<by-7){bx+=7}bA=aa(bB).add(bx,"d");return{week:Math.ceil(bA.dayOfYear()/7),year:bA.year()}}function E(bB,bA,bC,bE,bx){var bD=R(bB,0,1).getUTCDay(),bz,by;bD=bD===0?7:bD;bC=bC!=null?bC:bx;bz=bx-bD+(bD>bE?7:0)-(bD<bx?7:0);by=7*(bA-1)+(bC-bx)+bz+1;return{year:by>0?bB:bB-1,dayOfYear:by>0?by:bg(bB-1)+by}}function W(by){var bx=by._i,bA=by._f,bz;by._locale=by._locale||aa.localeData(by._l);if(bx===null||(bA===M&&bx==="")){return aa.invalid({nullInput:true})}if(typeof bx==="string"){by._i=bx=by._locale.preparse(bx)}if(aa.isMoment(bx)){return new U(bx,true)}else{if(bA){if(c(bA)){bc(by)}else{Z(by)}}else{Y(by)}}bz=new U(by);if(bz._nextDay){bz.add(1,"d");bz._nextDay=M}return bz}aa=function(bz,bA,bx,by){var bB;if(typeof(bx)==="boolean"){by=bx;bx=M}bB={};bB._isAMomentObject=true;bB._i=bz;bB._f=bA;bB._l=bx;bB._strict=by;bB._isUTC=false;bB._pf=au();return W(bB)};aa.suppressDeprecationWarnings=false;aa.createFromInputFallback=bu("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(bx){bx._d=new Date(bx._i+(bx._useUTC?" UTC":""))});function aJ(bz,bA){var by,bx;if(bA.length===1&&c(bA[0])){bA=bA[0]}if(!bA.length){return aa()}by=bA[0];for(bx=1;bx<bA.length;++bx){if(bA[bx][bz](by)){by=bA[bx]}}return by}aa.min=function(){var bx=[].slice.call(arguments,0);return aJ("isBefore",bx)};aa.max=function(){var bx=[].slice.call(arguments,0);return aJ("isAfter",bx)};aa.utc=function(bz,bA,bx,by){var bB;if(typeof(bx)==="boolean"){by=bx;bx=M}bB={};bB._isAMomentObject=true;bB._useUTC=true;bB._isUTC=true;bB._l=bx;bB._i=bz;bB._f=bA;bB._strict=by;bB._pf=au();return W(bB).utc()};aa.unix=function(bx){return aa(bx*1000)};aa.duration=function(bz,bD){var bE=bz,bC=null,by,bB,bA,bx;if(aa.isDuration(bz)){bE={ms:bz._milliseconds,d:bz._days,M:bz._months}}else{if(typeof bz==="number"){bE={};if(bD){bE[bD]=bz}else{bE.milliseconds=bz}}else{if(!!(bC=bl.exec(bz))){by=(bC[1]==="-")?-1:1;bE={y:0,d:V(bC[a9])*by,h:V(bC[F])*by,m:V(bC[aN])*by,s:V(bC[D])*by,ms:V(bC[ae])*by}}else{if(!!(bC=aS.exec(bz))){by=(bC[1]==="-")?-1:1;bA=function(bG){var bF=bG&&parseFloat(bG.replace(",","."));return(isNaN(bF)?0:bF)*by};bE={y:bA(bC[2]),M:bA(bC[3]),d:bA(bC[4]),h:bA(bC[5]),m:bA(bC[6]),s:bA(bC[7]),w:bA(bC[8])}}else{if(bE==null){bE={}}else{if(typeof bE==="object"&&("from" in bE||"to" in bE)){bx=ah(aa(bE.from),aa(bE.to));bE={};bE.ms=bx.milliseconds;bE.M=bx.months}}}}}}bB=new at(bE);if(aa.isDuration(bz)&&bb(bz,"_locale")){bB._locale=bz._locale}return bB};aa.version=aQ;aa.defaultFormat=af;aa.ISO_8601=function(){};aa.momentProperties=a2;aa.updateOffset=function(){};aa.relativeTimeThreshold=function(bx,by){if(H[bx]===M){return false}if(by===M){return H[bx]}H[bx]=by;return true};aa.lang=bu("moment.lang is deprecated. Use moment.locale instead.",function(bx,by){return aa.locale(bx,by)});aa.locale=function(by,bx){var bz;if(by){if(typeof(bx)!=="undefined"){bz=aa.defineLocale(by,bx)}else{bz=aa.localeData(by)}if(bz){aa.duration._locale=aa._locale=bz}}return aa._locale._abbr};aa.defineLocale=function(by,bx){if(bx!==null){bx.abbr=by;if(!az[by]){az[by]=new ak()}az[by].set(bx);aa.locale(by);return az[by]}else{delete az[by];return null}};aa.langData=bu("moment.langData is deprecated. Use moment.localeData instead.",function(bx){return aa.localeData(bx)});aa.localeData=function(by){var bx;if(by&&by._locale&&by._locale._abbr){by=by._locale._abbr}if(!by){return aa._locale}if(!c(by)){bx=d(by);if(bx){return bx}by=[by]}return aH(by)};aa.isMoment=function(bx){return bx instanceof U||(bx!=null&&bb(bx,"_isAMomentObject"))};aa.isDuration=function(bx){return bx instanceof at};for(aq=ag.length-1;aq>=0;--aq){aK(ag[aq])}aa.normalizeUnits=function(bx){return bd(bx)};aa.invalid=function(by){var bx=aa.utc(NaN);if(by!=null){aO(bx._pf,by)}else{bx._pf.userInvalidated=true}return bx};aa.parseZone=function(){return aa.apply(null,arguments).parseZone()};aa.parseTwoDigitYear=function(bx){return V(bx)+(V(bx)>68?1900:2000)};aa.isDate=l;aO(aa.fn=U.prototype,{clone:function(){return aa(this)},valueOf:function(){return +this._d-((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var bx=aa(this).utc();if(0<bx.year()&&bx.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return aD(bx,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return aD(bx,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var bx=this;return[bx.year(),bx.month(),bx.date(),bx.hours(),bx.minutes(),bx.seconds(),bx.milliseconds()]},isValid:function(){return aP(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&a7(this._a,(this._isUTC?aa.utc(this._a):aa(this._a)).toArray())>0}return false},parsingFlags:function(){return aO({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(bx){return this.utcOffset(0,bx)},local:function(bx){if(this._isUTC){this.utcOffset(0,bx);this._isUTC=false;if(bx){this.subtract(this._dateUtcOffset(),"m")}}return this},format:function(by){var bx=aD(this,by||aa.defaultFormat);return this.localeData().postformat(bx)},add:ab(1,"add"),subtract:ab(-1,"subtract"),diff:function(bD,bC,bF){var bB=I(bD,this),bz=(bB.utcOffset()-this.utcOffset())*60000,by,bE,bx,bA;bC=bd(bC);if(bC==="year"||bC==="month"||bC==="quarter"){bx=r(this,bB);if(bC==="quarter"){bx=bx/3}else{if(bC==="year"){bx=bx/12}}}else{bE=this-bB;bx=bC==="second"?bE/1000:bC==="minute"?bE/60000:bC==="hour"?bE/3600000:bC==="day"?(bE-bz)/86400000:bC==="week"?(bE-bz)/604800000:bE}return bF?bx:v(bx)},from:function(by,bx){return aa.duration({to:this,from:by}).locale(this.locale()).humanize(!bx)},fromNow:function(bx){return this.from(aa(),bx)},calendar:function(bB){var by=bB||aa(),bx=I(by,this).startOf("day"),bA=this.diff(bx,"days",true),bz=bA<-6?"sameElse":bA<-1?"lastWeek":bA<0?"lastDay":bA<1?"sameDay":bA<2?"nextDay":bA<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(bz,this,aa(by)))},isLeapYear:function(){return aZ(this.year())},isDST:function(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset())},day:function(by){var bx=this._isUTC?this._d.getUTCDay():this._d.getDay();if(by!=null){by=bn(by,this.localeData());return this.add(by-bx,"d")}else{return bx}},month:z("Month",true),startOf:function(bx){bx=bd(bx);switch(bx){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(bx==="week"){this.weekday(0)}else{if(bx==="isoWeek"){this.isoWeekday(1)}}if(bx==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this},endOf:function(bx){bx=bd(bx);if(bx===M||bx==="millisecond"){return this}return this.startOf(bx).add(1,(bx==="isoWeek"?"week":bx)).subtract(1,"ms")},isAfter:function(by,bx){var bz;bx=bd(typeof bx!=="undefined"?bx:"millisecond");if(bx==="millisecond"){by=aa.isMoment(by)?by:aa(by);return +this>+by}else{bz=aa.isMoment(by)?+by:+aa(by);return bz<+this.clone().startOf(bx)}},isBefore:function(by,bx){var bz;bx=bd(typeof bx!=="undefined"?bx:"millisecond");if(bx==="millisecond"){by=aa.isMoment(by)?by:aa(by);return +this<+by}else{bz=aa.isMoment(by)?+by:+aa(by);return +this.clone().endOf(bx)<bz}},isBetween:function(bz,by,bx){return this.isAfter(bz,bx)&&this.isBefore(by,bx)},isSame:function(by,bx){var bz;bx=bd(bx||"millisecond");if(bx==="millisecond"){by=aa.isMoment(by)?by:aa(by);return +this===+by}else{bz=+aa(by);return +(this.clone().startOf(bx))<=bz&&bz<=+(this.clone().endOf(bx))}},min:bu("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(bx){bx=aa.apply(null,arguments);return bx<this?this:bx}),max:bu("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(bx){bx=aa.apply(null,arguments);return bx>this?this:bx}),zone:bu("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(bx,by){if(bx!=null){if(typeof bx!=="string"){bx=-bx}this.utcOffset(bx,by);return this}else{return -this.utcOffset()}}),utcOffset:function(bx,bA){var bz=this._offset||0,by;if(bx!=null){if(typeof bx==="string"){bx=aV(bx)}if(Math.abs(bx)<16){bx=bx*60}if(!this._isUTC&&bA){by=this._dateUtcOffset()}this._offset=bx;this._isUTC=true;if(by!=null){this.add(by,"m")}if(bz!==bx){if(!bA||this._changeInProgress){P(this,aa.duration(bx-bz,"m"),1,false)}else{if(!this._changeInProgress){this._changeInProgress=true;aa.updateOffset(this,true);this._changeInProgress=null}}}return this}else{return this._isUTC?bz:this._dateUtcOffset()}},isLocal:function(){return !this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&this._offset===0},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.utcOffset(this._tzm)}else{if(typeof this._i==="string"){this.utcOffset(aV(this._i))}}return this},hasAlignedHourOffset:function(bx){if(!bx){bx=0}else{bx=aa(bx).utcOffset()}return(this.utcOffset()-bx)%60===0},daysInMonth:function(){return bm(this.year(),this.month())},dayOfYear:function(bx){var by=ai((aa(this).startOf("day")-aa(this).startOf("year"))/86400000)+1;return bx==null?by:this.add((bx-by),"d")},quarter:function(bx){return bx==null?Math.ceil((this.month()+1)/3):this.month((bx-1)*3+this.month()%3)},weekYear:function(bx){var by=K(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return bx==null?by:this.add((bx-by),"y")},isoWeekYear:function(bx){var by=K(this,1,4).year;return bx==null?by:this.add((bx-by),"y")},week:function(bx){var by=this.localeData().week(this);return bx==null?by:this.add((bx-by)*7,"d")},isoWeek:function(bx){var by=K(this,1,4).week;return bx==null?by:this.add((bx-by)*7,"d")},weekday:function(bx){var by=(this.day()+7-this.localeData()._week.dow)%7;return bx==null?by:this.add(bx-by,"d")},isoWeekday:function(bx){return bx==null?this.day()||7:this.day(this.day()%7?bx:bx-7)},isoWeeksInYear:function(){return aT(this.year(),1,4)},weeksInYear:function(){var bx=this.localeData()._week;return aT(this.year(),bx.dow,bx.doy)},get:function(bx){bx=bd(bx);return this[bx]()},set:function(bx,bz){var by;if(typeof bx==="object"){for(by in bx){this.set(by,bx[by])}}else{bx=bd(bx);if(typeof this[bx]==="function"){this[bx](bz)}}return this},locale:function(by){var bx;if(by===M){return this._locale._abbr}else{bx=aa.localeData(by);if(bx!=null){this._locale=bx}return this}},lang:bu("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(bx){if(bx===M){return this.localeData()}else{return this.locale(bx)}}),localeData:function(){return this._locale},_dateUtcOffset:function(){return -Math.round(this._d.getTimezoneOffset()/15)*15}});function bq(bx,by){var bz;if(typeof by==="string"){by=bx.localeData().monthsParse(by);if(typeof by!=="number"){return bx}}bz=Math.min(bx.date(),bm(bx.year(),by));bx._d["set"+(bx._isUTC?"UTC":"")+"Month"](by,bz);return bx}function bv(by,bx){return by._d["get"+(by._isUTC?"UTC":"")+bx]()}function a6(by,bx,bz){if(bx==="Month"){return bq(by,bz)}else{return by._d["set"+(by._isUTC?"UTC":"")+bx](bz)}}function z(bx,by){return function(bz){if(bz!=null){a6(this,bx,bz);aa.updateOffset(this,by);return this}else{return bv(this,bx)}}}aa.fn.millisecond=aa.fn.milliseconds=z("Milliseconds",false);aa.fn.second=aa.fn.seconds=z("Seconds",false);aa.fn.minute=aa.fn.minutes=z("Minutes",false);aa.fn.hour=aa.fn.hours=z("Hours",true);aa.fn.date=z("Date",true);aa.fn.dates=bu("dates accessor is deprecated. Use date instead.",z("Date",true));aa.fn.year=z("FullYear",true);aa.fn.years=bu("years accessor is deprecated. Use year instead.",z("FullYear",true));aa.fn.days=aa.fn.day;aa.fn.months=aa.fn.month;aa.fn.weeks=aa.fn.week;aa.fn.isoWeeks=aa.fn.isoWeek;aa.fn.quarters=aa.fn.quarter;aa.fn.toJSON=aa.fn.toISOString;aa.fn.isUTC=aa.fn.isUtc;function y(bx){return bx*400/146097}function bt(bx){return bx*146097/400}aO(aa.duration.fn=at.prototype,{_bubble:function(){var bz=this._milliseconds,bE=this._days,bx=this._months,bC=this._data,bD,bB,by,bA=0;bC.milliseconds=bz%1000;bD=v(bz/1000);bC.seconds=bD%60;bB=v(bD/60);bC.minutes=bB%60;by=v(bB/60);bC.hours=by%24;bE+=v(by/24);bA=v(y(bE));bE-=v(bt(bA));bx+=v(bE/30);bE%=30;bA+=v(bx/12);bx%=12;bC.days=bE;bC.months=bx;bC.years=bA},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return v(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+V(this._months/12)*31536000000},humanize:function(by){var bx=J(this,!by,this.localeData());if(by){bx=this.localeData().pastFuture(+this,bx)}return this.localeData().postformat(bx)},add:function(bx,bz){var by=aa.duration(bx,bz);this._milliseconds+=by._milliseconds;this._days+=by._days;this._months+=by._months;this._bubble();return this},subtract:function(bx,bz){var by=aa.duration(bx,bz);this._milliseconds-=by._milliseconds;this._days-=by._days;this._months-=by._months;this._bubble();return this},get:function(bx){bx=bd(bx);return this[bx.toLowerCase()+"s"]()},as:function(by){var bz,bx;by=bd(by);if(by==="month"||by==="year"){bz=this._days+this._milliseconds/86400000;bx=this._months+y(bz)*12;return by==="month"?bx:bx/12}else{bz=this._days+Math.round(bt(this._months/12));switch(by){case"week":return bz/7+this._milliseconds/604800000;case"day":return bz+this._milliseconds/86400000;case"hour":return bz*24+this._milliseconds/3600000;case"minute":return bz*24*60+this._milliseconds/60000;case"second":return bz*24*60*60+this._milliseconds/1000;case"millisecond":return Math.floor(bz*24*60*60*1000)+this._milliseconds;default:throw new Error("Unknown unit "+by)}}},lang:aa.fn.lang,locale:aa.fn.locale,toIsoString:bu("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var bA=Math.abs(this.years()),bx=Math.abs(this.months()),bC=Math.abs(this.days()),by=Math.abs(this.hours()),bz=Math.abs(this.minutes()),bB=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(bA?bA+"Y":"")+(bx?bx+"M":"")+(bC?bC+"D":"")+((by||bz||bB)?"T":"")+(by?by+"H":"")+(bz?bz+"M":"")+(bB?bB+"S":"")},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}});aa.duration.fn.toString=aa.duration.fn.toISOString;function aj(bx){aa.duration.fn[bx]=function(){return this._data[bx]}}for(aq in L){if(bb(L,aq)){aj(aq.toLowerCase())}}aa.duration.fn.asMilliseconds=function(){return this.as("ms")};aa.duration.fn.asSeconds=function(){return this.as("s")};aa.duration.fn.asMinutes=function(){return this.as("m")};aa.duration.fn.asHours=function(){return this.as("h")};aa.duration.fn.asDays=function(){return this.as("d")};aa.duration.fn.asWeeks=function(){return this.as("weeks")};aa.duration.fn.asMonths=function(){return this.as("M")};aa.duration.fn.asYears=function(){return this.as("y")};aa.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(bz){var bx=bz%10,by=(V(bz%100/10)===1)?"th":(bx===1)?"st":(bx===2)?"nd":(bx===3)?"rd":"th";return bz+by}});(function(bx){bx(aa)}(function(bx){return bx.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(by){return/^nm$/i.test(by)},meridiem:function(by,bz,bA){if(by<12){return bA?"vm":"VM"}else{return bA?"nm":"NM"}},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(by){return by+((by===1||by===8||by>=20)?"ste":"de")},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"١","2":"٢","3":"٣","4":"٤","5":"٥","6":"٦","7":"٧","8":"٨","9":"٩","0":"٠"},by={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};return bz.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiemParse:/ص|م/,isPM:function(bA){return"م"===bA},meridiem:function(bA,bC,bB){if(bA<12){return"ص"}else{return"م"}},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(bA){return bA.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(bB){return by[bB]}).replace(/،/g,",")},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bD){var by={"1":"١","2":"٢","3":"٣","4":"٤","5":"٥","6":"٦","7":"٧","8":"٨","9":"٩","0":"٠"},bC={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},bA=function(bE){return bE===0?0:bE===1?1:bE===2?2:bE%100>=3&&bE%100<=10?3:bE%100>=11?4:5},bB={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},bz=function(bE){return function(bH,bG,bF,bJ){var bI=bA(bH),bK=bB[bE][bA(bH)];if(bI===2){bK=bK[bG?0:1]}return bK.replace(/%d/i,bH)}},bx=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"];return bD.defineLocale("ar",{months:bx,monthsShort:bx,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiemParse:/ص|م/,isPM:function(bE){return"م"===bE},meridiem:function(bE,bG,bF){if(bE<12){return"ص"}else{return"م"}},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:bz("s"),m:bz("m"),mm:bz("m"),h:bz("h"),hh:bz("h"),d:bz("d"),dd:bz("d"),M:bz("M"),MM:bz("M"),y:bz("y"),yy:bz("y")},preparse:function(bE){return bE.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(bF){return bC[bF]}).replace(/،/g,",")},postformat:function(bE){return bE.replace(/\d/g,function(bF){return by[bF]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}));(function(bx){bx(aa)}(function(by){var bx={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};return by.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(bz){return/^(gündüz|axşam)$/.test(bz)},meridiem:function(bz,bB,bA){if(bz<4){return"gecə"}else{if(bz<12){return"səhər"}else{if(bz<17){return"gündüz"}else{return"axşam"}}}},ordinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(bB){if(bB===0){return bB+"-ıncı"}var bA=bB%10,bz=bB%100-bA,bC=bB>=100?100:null;return bB+(bx[bA]||bx[bz]||bx[bC])},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bA){function by(bE,bD){var bC=bE.split("_");return bD%10===1&&bD%100!==11?bC[0]:(bD%10>=2&&bD%10<=4&&(bD%100<10||bD%100>=20)?bC[1]:bC[2])}function bB(bE,bD,bC){var bF={mm:bD?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:bD?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"};if(bC==="m"){return bD?"хвіліна":"хвіліну"}else{if(bC==="h"){return bD?"гадзіна":"гадзіну"}else{return bE+" "+by(bF[bC],+bE)}}}function bz(bD,bF){var bC={nominative:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_"),accusative:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_")},bE=(/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(bF)?"accusative":"nominative";return bC[bE][bD.month()]}function bx(bC,bF){var bD={nominative:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),accusative:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_")},bE=(/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/).test(bF)?"accusative":"nominative";return bD[bE][bC.day()]}return bA.defineLocale("be",{months:bz,monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:bx,weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:bB,mm:bB,h:bB,hh:bB,d:"дзень",dd:bB,M:"месяц",MM:bB,y:"год",yy:bB},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(bC){return/^(дня|вечара)$/.test(bC)},meridiem:function(bC,bE,bD){if(bC<4){return"ночы"}else{if(bC<12){return"раніцы"}else{if(bC<17){return"дня"}else{return"вечара"}}}},ordinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(bC,bD){switch(bD){case"M":case"d":case"DDD":case"w":case"W":return(bC%10===2||bC%10===3)&&(bC%100!==12&&bC%100!==13)?bC+"-і":bC+"-ы";case"D":return bC+"-га";default:return bC}},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(bA){var bz=bA%10,by=bA%100;if(bA===0){return bA+"-ев"}else{if(by===0){return bA+"-ен"}else{if(by>10&&by<20){return bA+"-ти"}else{if(bz===1){return bA+"-ви"}else{if(bz===2){return bA+"-ри"}else{if(bz===7||bz===8){return bA+"-ми"}else{return bA+"-ти"}}}}}}},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"১","2":"২","3":"৩","4":"৪","5":"৫","6":"৬","7":"৭","8":"৮","9":"৯","0":"০"},by={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};return bz.defineLocale("bn",{months:"জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি".split("_"),weekdaysMin:"রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কএক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(bA){return bA.replace(/[১২৩৪৫৬৭৮৯০]/g,function(bB){return by[bB]})},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]})},meridiemParse:/রাত|শকাল|দুপুর|বিকেল|রাত/,isPM:function(bA){return/^(দুপুর|বিকেল|রাত)$/.test(bA)},meridiem:function(bA,bC,bB){if(bA<4){return"রাত"}else{if(bA<10){return"শকাল"}else{if(bA<17){return"দুপুর"}else{if(bA<20){return"বিকেল"}else{return"রাত"}}}}},week:{dow:0,doy:6}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"༡","2":"༢","3":"༣","4":"༤","5":"༥","6":"༦","7":"༧","8":"༨","9":"༩","0":"༠"},by={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};return bz.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(bA){return bA.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,function(bB){return by[bB]})},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]})},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,isPM:function(bA){return/^(ཉིན་གུང|དགོང་དག|མཚན་མོ)$/.test(bA)},meridiem:function(bA,bC,bB){if(bA<4){return"མཚན་མོ"}else{if(bA<10){return"ཞོགས་ཀས"}else{if(bA<17){return"ཉིན་གུང"}else{if(bA<20){return"དགོང་དག"}else{return"མཚན་མོ"}}}}},week:{dow:0,doy:6}})}));(function(bx){bx(aa)}(function(bB){function bC(bF,bE,bD){var bG={mm:"munutenn",MM:"miz",dd:"devezh"};return bF+" "+bx(bG[bD],bF)}function bA(bD){switch(by(bD)){case 1:case 3:case 4:case 5:case 9:return bD+" bloaz";default:return bD+" vloaz"}}function by(bD){if(bD>9){return by(bD%10)}return bD}function bx(bE,bD){if(bD===2){return bz(bE)}return bE}function bz(bE){var bD={m:"v",b:"v",d:"z"};if(bD[bE.charAt(0)]===M){return bE}return bD[bE.charAt(0)]+bE.substring(1)}return bB.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:bC,h:"un eur",hh:"%d eur",d:"un devezh",dd:bC,M:"ur miz",MM:bC,y:"ur bloaz",yy:bA},ordinalParse:/\d{1,2}(añ|vet)/,ordinal:function(bE){var bD=(bE===1)?"añ":"vet";return bE+bD},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){function by(bC,bB,bA){var bz=bC+" ";switch(bA){case"m":return bB?"jedna minuta":"jedne minute";case"mm":if(bC===1){bz+="minuta"}else{if(bC===2||bC===3||bC===4){bz+="minute"}else{bz+="minuta"}}return bz;case"h":return bB?"jedan sat":"jednog sata";case"hh":if(bC===1){bz+="sat"}else{if(bC===2||bC===3||bC===4){bz+="sata"}else{bz+="sati"}}return bz;case"dd":if(bC===1){bz+="dan"}else{bz+="dana"}return bz;case"MM":if(bC===1){bz+="mjesec"}else{if(bC===2||bC===3||bC===4){bz+="mjeseca"}else{bz+="mjeseci"}}return bz;case"yy":if(bC===1){bz+="godina"}else{if(bC===2||bC===3||bC===4){bz+="godine"}else{bz+="godina"}}return bz}}return bx.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:by,mm:by,h:by,hh:by,d:"dan",dd:by,M:"mjesec",MM:by,y:"godinu",yy:by},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+((this.hours()!==1)?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+((this.hours()!==1)?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+((this.hours()!==1)?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+((this.hours()!==1)?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+((this.hours()!==1)?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(bz,bA){var by=(bz===1)?"r":(bz===2)?"n":(bz===3)?"r":(bz===4)?"t":"è";if(bA==="w"||bA==="W"){by="a"}return bz+by},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bA){var bx="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),bz="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");function by(bC){return(bC>1)&&(bC<5)&&(~~(bC/10)!==1)}function bB(bF,bE,bD,bG){var bC=bF+" ";switch(bD){case"s":return(bE||bG)?"pár sekund":"pár sekundami";case"m":return bE?"minuta":(bG?"minutu":"minutou");case"mm":if(bE||bG){return bC+(by(bF)?"minuty":"minut")}else{return bC+"minutami"}break;case"h":return bE?"hodina":(bG?"hodinu":"hodinou");case"hh":if(bE||bG){return bC+(by(bF)?"hodiny":"hodin")}else{return bC+"hodinami"}break;case"d":return(bE||bG)?"den":"dnem";case"dd":if(bE||bG){return bC+(by(bF)?"dny":"dní")}else{return bC+"dny"}break;case"M":return(bE||bG)?"měsíc":"měsícem";case"MM":if(bE||bG){return bC+(by(bF)?"měsíce":"měsíců")}else{return bC+"měsíci"}break;case"y":return(bE||bG)?"rok":"rokem";case"yy":if(bE||bG){return bC+(by(bF)?"roky":"let")}else{return bC+"lety"}break}}return bA.defineLocale("cs",{months:bx,monthsShort:bz,monthsParse:(function(bC,bE){var bD,bF=[];for(bD=0;bD<12;bD++){bF[bD]=new RegExp("^"+bC[bD]+"$|^"+bE[bD]+"$","i")}return bF}(bx,bz)),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:bB,m:bB,mm:bB,h:bB,hh:bB,d:bB,dd:bB,M:bB,MM:bB,y:bB,yy:bB},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("cv",{months:"кăрлач_нарăс_пуш_ака_май_çĕртме_утă_çурла_авăн_юпа_чӳк_раштав".split("_"),monthsShort:"кăр_нар_пуш_ака_май_çĕр_утă_çур_ав_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кĕçнерникун_эрнекун_шăматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кĕç_эрн_шăм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кç_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ]",LLL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT",LLLL:"dddd, YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ĕнер] LT [сехетре]",nextWeek:"[Çитес] dddd LT [сехетре]",lastWeek:"[Иртнĕ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(bz){var by=/сехет$/i.exec(bz)?"рен":/çул$/i.exec(bz)?"тан":"ран";return bz+by},past:"%s каялла",s:"пĕр-ик çеккунт",m:"пĕр минут",mm:"%d минут",h:"пĕр сехет",hh:"%d сехет",d:"пĕр кун",dd:"%d кун",M:"пĕр уйăх",MM:"%d уйăх",y:"пĕр çул",yy:"%d çул"},ordinalParse:/\d{1,2}-мĕш/,ordinal:"%d-мĕш",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(bA){var by=bA,bz="",bB=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];if(by>20){if(by===40||by===50||by===60||by===80||by===100){bz="fed"}else{bz="ain"}}else{if(by>0){bz=bB[by]}}return bA+bz},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(by){function bx(bB,bA,bz,bD){var bC={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[bB+" Tage",bB+" Tagen"],M:["ein Monat","einem Monat"],MM:[bB+" Monate",bB+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[bB+" Jahre",bB+" Jahren"]};return bA?bC[bz][0]:bC[bz][1]}return by.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:bx,mm:"%d Minuten",h:bx,hh:"%d Stunden",d:bx,dd:bx,M:bx,MM:bx,y:bx,yy:bx},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(by){function bx(bB,bA,bz,bD){var bC={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[bB+" Tage",bB+" Tagen"],M:["ein Monat","einem Monat"],MM:[bB+" Monate",bB+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[bB+" Jahre",bB+" Jahren"]};return bA?bC[bz][0]:bC[bz][1]}return by.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:bx,mm:"%d Minuten",h:bx,hh:"%d Stunden",d:bx,dd:bx,M:bx,MM:bx,y:bx,yy:bx},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(bz,by){if(/D/.test(by.substring(0,by.indexOf("MMMM")))){return this._monthsGenitiveEl[bz.month()]}else{return this._monthsNominativeEl[bz.month()]}},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(by,bz,bA){if(by>11){return bA?"μμ":"ΜΜ"}else{return bA?"πμ":"ΠΜ"}},isPM:function(by){return((by+"").toLowerCase()[0]==="μ")},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(bA,bB){var bz=this._calendarEl[bA],by=bB&&bB.hours();if(typeof bz==="function"){bz=bz.apply(bB)}return bz.replace("{}",(by%12===1?"στη":"στις"))},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(bA){var by=bA%10,bz=(~~(bA%100/10)===1)?"th":(by===1)?"st":(by===2)?"nd":(by===3)?"rd":"th";return bA+bz},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(bA){var by=bA%10,bz=(~~(bA%100/10)===1)?"th":(by===1)?"st":(by===2)?"nd":(by===3)?"rd":"th";return bA+bz}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(bA){var by=bA%10,bz=(~~(bA%100/10)===1)?"th":(by===1)?"st":(by===2)?"nd":(by===3)?"rd":"th";return bA+bz},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiemParse:/[ap]\.t\.m/i,isPM:function(by){return by.charAt(0).toLowerCase()==="p"},meridiem:function(by,bz,bA){if(by>11){return bA?"p.t.m.":"P.T.M."}else{return bA?"a.t.m.":"A.T.M."}},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bz){var by="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),bx="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return bz.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(bA,bB){if(/-MMM-/.test(bB)){return bx[bA.month()]}else{return by[bA.month()]}},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+((this.hours()!==1)?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+((this.hours()!==1)?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+((this.hours()!==1)?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+((this.hours()!==1)?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+((this.hours()!==1)?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(by){function bx(bB,bA,bz,bD){var bC={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[bB+" minuti",bB+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[bB+" tunni",bB+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[bB+" kuu",bB+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[bB+" aasta",bB+" aastat"]};if(bA){return bC[bz][2]?bC[bz][2]:bC[bz][1]}return bD?bC[bz][0]:bC[bz][1]}return by.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:bx,m:bx,mm:bx,h:bx,hh:bx,d:bx,dd:"%d päeva",M:bx,MM:bx,y:bx,yy:bx},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"۱","2":"۲","3":"۳","4":"۴","5":"۵","6":"۶","7":"۷","8":"۸","9":"۹","0":"۰"},by={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};return bz.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک\u200cشنبه_دوشنبه_سه\u200cشنبه_چهارشنبه_پنج\u200cشنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک\u200cشنبه_دوشنبه_سه\u200cشنبه_چهارشنبه_پنج\u200cشنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(bA){return/بعد از ظهر/.test(bA)},meridiem:function(bA,bC,bB){if(bA<12){return"قبل از ظهر"}else{return"بعد از ظهر"}},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(bA){return bA.replace(/[۰-۹]/g,function(bB){return by[bB]}).replace(/،/g,",")},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]}).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}));(function(bx){bx(aa)}(function(bA){var bz="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),by=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",bz[7],bz[8],bz[9]];function bB(bF,bE,bD,bG){var bC="";switch(bD){case"s":return bG?"muutaman sekunnin":"muutama sekunti";case"m":return bG?"minuutin":"minuutti";case"mm":bC=bG?"minuutin":"minuuttia";break;case"h":return bG?"tunnin":"tunti";case"hh":bC=bG?"tunnin":"tuntia";break;case"d":return bG?"päivän":"päivä";case"dd":bC=bG?"päivän":"päivää";break;case"M":return bG?"kuukauden":"kuukausi";case"MM":bC=bG?"kuukauden":"kuukautta";break;case"y":return bG?"vuoden":"vuosi";case"yy":bC=bG?"vuoden":"vuotta";break}bC=bx(bF,bG)+" "+bC;return bC}function bx(bC,bD){return bC<10?(bD?by[bC]:bz[bC]):bC}return bA.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:bB,m:bB,mm:bB,h:bB,hh:bB,d:bB,dd:bB,M:bB,MM:bB,y:bB,yy:bB},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(by){return by+(by===1?"er":"")}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(by){return by+(by===1?"er":"")},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bz){var by="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),bx="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");return bz.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(bA,bB){if(/-MMM-/.test(bB)){return bx[bA.month()]}else{return by[bA.month()]}},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(bA){return bA+((bA===1||bA===8||bA>=20)?"ste":"de")},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+((this.hours()!==1)?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+((this.hours()!==1)?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+((this.hours()!==1)?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+((this.hours()!==1)?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+((this.hours()!==1)?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(by){if(by==="uns segundos"){return"nuns segundos"}return"en "+by},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY LT",LLLL:"dddd, D [ב]MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(by){if(by===2){return"שעתיים"}return by+" שעות"},d:"יום",dd:function(by){if(by===2){return"יומיים"}return by+" ימים"},M:"חודש",MM:function(by){if(by===2){return"חודשיים"}return by+" חודשים"},y:"שנה",yy:function(by){if(by===2){return"שנתיים"}else{if(by%10===0&&by!==10){return by+" שנה"}}return by+" שנים"}}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"१","2":"२","3":"३","4":"४","5":"५","6":"६","7":"७","8":"८","9":"९","0":"०"},by={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return bz.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(bA){return bA.replace(/[१२३४५६७८९०]/g,function(bB){return by[bB]})},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]})},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(bA,bB){if(bA===12){bA=0}if(bB==="रात"){return bA<4?bA:bA+12}else{if(bB==="सुबह"){return bA}else{if(bB==="दोपहर"){return bA>=10?bA:bA+12}else{if(bB==="शाम"){return bA+12}}}}},meridiem:function(bA,bC,bB){if(bA<4){return"रात"}else{if(bA<10){return"सुबह"}else{if(bA<17){return"दोपहर"}else{if(bA<20){return"शाम"}else{return"रात"}}}}},week:{dow:0,doy:6}})}));(function(bx){bx(aa)}(function(bx){function by(bC,bB,bA){var bz=bC+" ";switch(bA){case"m":return bB?"jedna minuta":"jedne minute";case"mm":if(bC===1){bz+="minuta"}else{if(bC===2||bC===3||bC===4){bz+="minute"}else{bz+="minuta"}}return bz;case"h":return bB?"jedan sat":"jednog sata";case"hh":if(bC===1){bz+="sat"}else{if(bC===2||bC===3||bC===4){bz+="sata"}else{bz+="sati"}}return bz;case"dd":if(bC===1){bz+="dan"}else{bz+="dana"}return bz;case"MM":if(bC===1){bz+="mjesec"}else{if(bC===2||bC===3||bC===4){bz+="mjeseca"}else{bz+="mjeseci"}}return bz;case"yy":if(bC===1){bz+="godina"}else{if(bC===2||bC===3||bC===4){bz+="godine"}else{bz+="godina"}}return bz}}return bx.defineLocale("hr",{months:"sječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:by,mm:by,h:by,hh:by,d:"dan",dd:by,M:"mjesec",MM:by,y:"godinu",yy:by},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bz){var by="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function bA(bE,bD,bC,bG){var bB=bE,bF;switch(bC){case"s":return(bG||bD)?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(bG||bD?" perc":" perce");case"mm":return bB+(bG||bD?" perc":" perce");case"h":return"egy"+(bG||bD?" óra":" órája");case"hh":return bB+(bG||bD?" óra":" órája");case"d":return"egy"+(bG||bD?" nap":" napja");case"dd":return bB+(bG||bD?" nap":" napja");case"M":return"egy"+(bG||bD?" hónap":" hónapja");case"MM":return bB+(bG||bD?" hónap":" hónapja");case"y":return"egy"+(bG||bD?" év":" éve");case"yy":return bB+(bG||bD?" év":" éve")}return""}function bx(bB){return(bB?"":"[múlt] ")+"["+by[this.day()]+"] LT[-kor]"}return bz.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiemParse:/de|du/i,isPM:function(bB){return bB.charAt(1).toLowerCase()==="u"},meridiem:function(bB,bC,bD){if(bB<12){return bD===true?"de":"DE"}else{return bD===true?"du":"DU"}},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return bx.call(this,true)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return bx.call(this,false)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:bA,m:bA,mm:bA,h:bA,hh:bA,d:bA,dd:bA,M:bA,MM:bA,y:bA,yy:bA},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bA){function bz(bC,bE){var bB={nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")},bD=(/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(bE)?"accusative":"nominative";return bB[bD][bC.month()]}function by(bB,bD){var bC="հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_");return bC[bB.month()]}function bx(bB,bD){var bC="կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_");return bC[bB.day()]}return bA.defineLocale("hy-am",{months:bz,monthsShort:by,weekdays:bx,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., LT",LLLL:"dddd, D MMMM YYYY թ., LT"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(bB){return/^(ցերեկվա|երեկոյան)$/.test(bB)},meridiem:function(bB){if(bB<4){return"գիշերվա"}else{if(bB<12){return"առավոտվա"}else{if(bB<17){return"ցերեկվա"}else{return"երեկոյան"}}}},ordinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(bB,bC){switch(bC){case"DDD":case"w":case"W":case"DDDo":if(bB===1){return bB+"-ին"}return bB+"-րդ";default:return bB}},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(by,bz){if(by===12){by=0}if(bz==="pagi"){return by}else{if(bz==="siang"){return by>=11?by:by+12}else{if(bz==="sore"||bz==="malam"){return by+12}}}},meridiem:function(by,bz,bA){if(by<11){return"pagi"}else{if(by<15){return"siang"}else{if(by<19){return"sore"}else{return"malam"}}}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(by){function bx(bA){if(bA%100===11){return true}else{if(bA%10===1){return false}}return true}function bz(bD,bC,bB,bE){var bA=bD+" ";switch(bB){case"s":return bC||bE?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return bC?"mínúta":"mínútu";case"mm":if(bx(bD)){return bA+(bC||bE?"mínútur":"mínútum")}else{if(bC){return bA+"mínúta"}}return bA+"mínútu";case"hh":if(bx(bD)){return bA+(bC||bE?"klukkustundir":"klukkustundum")}return bA+"klukkustund";case"d":if(bC){return"dagur"}return bE?"dag":"degi";case"dd":if(bx(bD)){if(bC){return bA+"dagar"}return bA+(bE?"daga":"dögum")}else{if(bC){return bA+"dagur"}}return bA+(bE?"dag":"degi");case"M":if(bC){return"mánuður"}return bE?"mánuð":"mánuði";case"MM":if(bx(bD)){if(bC){return bA+"mánuðir"}return bA+(bE?"mánuði":"mánuðum")}else{if(bC){return bA+"mánuður"}}return bA+(bE?"mánuð":"mánuði");case"y":return bC||bE?"ár":"ári";case"yy":if(bx(bD)){return bA+(bC||bE?"ár":"árum")}return bA+(bC||bE?"ár":"ári")}}return by.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:bz,m:bz,mm:bz,h:"klukkustund",hh:bz,d:bz,dd:bz,M:bz,MM:bz,y:bz,yy:bz},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(by){return((/^[0-9].+$/).test(by)?"tra":"in")+" "+by},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"LTs秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiemParse:/午前|午後/i,isPM:function(by){return by==="午後"},meridiem:function(by,bA,bz){if(by<12){return"午前"}else{return"午後"}},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}));(function(bx){bx(aa)}(function(bz){function by(bB,bD){var bA={nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},bC=(/D[oD] *MMMM?/).test(bD)?"accusative":"nominative";return bA[bC][bB.month()]}function bx(bA,bD){var bB={nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")},bC=(/(წინა|შემდეგ)/).test(bD)?"accusative":"nominative";return bB[bC][bA.day()]}return bz.defineLocale("ka",{months:by,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:bx,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(bA){return(/(წამი|წუთი|საათი|წელი)/).test(bA)?bA.replace(/ი$/,"ში"):bA+"ში"},past:function(bA){if((/(წამი|წუთი|საათი|დღე|თვე)/).test(bA)){return bA.replace(/(ი|ე)$/,"ის წინ")}if((/წელი/).test(bA)){return bA.replace(/წელი$/,"წლის წინ")}},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(bA){if(bA===0){return bA}if(bA===1){return bA+"-ლი"}if((bA<20)||(bA<=100&&(bA%20===0))||(bA%100===0)){return"მე-"+bA}return bA+"-ე"},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 LT",LLLL:"YYYY년 MMMM D일 dddd LT"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(by){return by==="오후"},meridiem:function(by,bA,bz){return by<12?"오전":"오후"}})}));(function(bx){bx(aa)}(function(bB){function by(bE,bD,bC,bG){var bF={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return bD?bF[bC][0]:bF[bC][1]}function bA(bC){var bD=bC.substr(0,bC.indexOf(" "));if(bz(bD)){return"a "+bC}return"an "+bC}function bx(bC){var bD=bC.substr(0,bC.indexOf(" "));if(bz(bD)){return"viru "+bC}return"virun "+bC}function bz(bD){bD=parseInt(bD,10);if(isNaN(bD)){return false}if(bD<0){return true}else{if(bD<10){if(4<=bD&&bD<=7){return true}return false}else{if(bD<100){var bC=bD%10,bE=bD/10;if(bC===0){return bz(bE)}return bz(bC)}else{if(bD<10000){while(bD>=10){bD=bD/10}return bz(bD)}else{bD=bD/1000;return bz(bD)}}}}}return bB.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:bA,past:bx,s:"e puer Sekonnen",m:by,mm:"%d Minutten",h:by,hh:"%d Stonnen",d:by,dd:"%d Deeg",M:by,MM:"%d Méint",y:by,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bF){var bD={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"},bA="sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_");function bB(bI,bH,bG,bJ){if(bH){return"kelios sekundės"}else{return bJ?"kelių sekundžių":"kelias sekundes"}}function bC(bI,bH,bG,bJ){return bH?bx(bG)[0]:(bJ?bx(bG)[1]:bx(bG)[2])}function bE(bG){return bG%10===0||(bG>10&&bG<20)}function bx(bG){return bD[bG].split("_")}function bz(bJ,bI,bH,bK){var bG=bJ+" ";if(bJ===1){return bG+bC(bJ,bI,bH[0],bK)}else{if(bI){return bG+(bE(bJ)?bx(bH)[1]:bx(bH)[0])}else{if(bK){return bG+bx(bH)[1]}else{return bG+(bE(bJ)?bx(bH)[1]:bx(bH)[2])}}}}function by(bI,bH){var bJ=bH.indexOf("dddd HH:mm")===-1,bG=bA[bI.day()];return bJ?bG:bG.substring(0,bG.length-2)+"į"}return bF.defineLocale("lt",{months:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:by,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:bB,m:bC,mm:bz,h:bC,hh:bz,d:bC,dd:bz,M:bC,MM:bz,y:bC,yy:bz},ordinalParse:/\d{1,2}-oji/,ordinal:function(bG){return bG+"-oji"},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bz){var bx={mm:"minūti_minūtes_minūte_minūtes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mēnesi_mēnešus_mēnesis_mēneši",yy:"gadu_gadus_gads_gadi"};function by(bE,bD,bC){var bB=bE.split("_");if(bC){return bD%10===1&&bD!==11?bB[2]:bB[3]}else{return bD%10===1&&bD!==11?bB[0]:bB[1]}}function bA(bD,bC,bB){return bD+" "+by(bx[bB],bD,bC)}return bz.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vēlāk",past:"%s agrāk",s:"dažas sekundes",m:"minūti",mm:bA,h:"stundu",hh:bA,d:"dienu",dd:bA,M:"mēnesi",MM:bA,y:"gadu",yy:bA},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(bA){var bz=bA%10,by=bA%100;if(bA===0){return bA+"-ев"}else{if(by===0){return bA+"-ен"}else{if(by>10&&by<20){return bA+"-ти"}else{if(bz===1){return bA+"-ви"}else{if(bz===2){return bA+"-ри"}else{if(bz===7||bz===8){return bA+"-ми"}else{return bA+"-ти"}}}}}}},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,isPM:function(by){return/^(ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി)$/.test(by)},meridiem:function(by,bA,bz){if(by<4){return"രാത്രി"}else{if(by<12){return"രാവിലെ"}else{if(by<17){return"ഉച്ച കഴിഞ്ഞ്"}else{if(by<20){return"വൈകുന്നേരം"}else{return"രാത്രി"}}}}}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"१","2":"२","3":"३","4":"४","5":"५","6":"६","7":"७","8":"८","9":"९","0":"०"},by={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return bz.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(bA){return bA.replace(/[१२३४५६७८९०]/g,function(bB){return by[bB]})},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]})},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(bA,bB){if(bA===12){bA=0}if(bB==="रात्री"){return bA<4?bA:bA+12}else{if(bB==="सकाळी"){return bA}else{if(bB==="दुपारी"){return bA>=10?bA:bA+12}else{if(bB==="सायंकाळी"){return bA+12}}}}},meridiem:function(bA,bC,bB){if(bA<4){return"रात्री"}else{if(bA<10){return"सकाळी"}else{if(bA<17){return"दुपारी"}else{if(bA<20){return"सायंकाळी"}else{return"रात्री"}}}}},week:{dow:0,doy:6}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(by,bz){if(by===12){by=0}if(bz==="pagi"){return by}else{if(bz==="tengahari"){return by>=11?by:by+12}else{if(bz==="petang"||bz==="malam"){return by+12}}}},meridiem:function(by,bz,bA){if(by<11){return"pagi"}else{if(by<15){return"tengahari"}else{if(by<19){return"petang"}else{return"malam"}}}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"၁","2":"၂","3":"၃","4":"၄","5":"၅","6":"၆","7":"၇","8":"၈","9":"၉","0":"၀"},by={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};return bz.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_င်္ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_င်္ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(bA){return bA.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,function(bB){return by[bB]})},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]})},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tirs_ons_tors_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",LTS:"LT.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bz){var bx={"1":"१","2":"२","3":"३","4":"४","5":"५","6":"६","7":"७","8":"८","9":"९","0":"०"},by={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return bz.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(bA){return bA.replace(/[१२३४५६७८९०]/g,function(bB){return by[bB]})},postformat:function(bA){return bA.replace(/\d/g,function(bB){return bx[bB]})},meridiemParse:/राती|बिहान|दिउँसो|बेलुका|साँझ|राती/,meridiemHour:function(bA,bB){if(bA===12){bA=0}if(bB==="राती"){return bA<3?bA:bA+12}else{if(bB==="बिहान"){return bA}else{if(bB==="दिउँसो"){return bA>=10?bA:bA+12}else{if(bB==="बेलुका"||bB==="साँझ"){return bA+12}}}}},meridiem:function(bA,bC,bB){if(bA<3){return"राती"}else{if(bA<10){return"बिहान"}else{if(bA<15){return"दिउँसो"}else{if(bA<18){return"बेलुका"}else{if(bA<20){return"साँझ"}else{return"राती"}}}}}},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bz){var by="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),bx="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return bz.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(bA,bB){if(/-MMM-/.test(bB)){return bx[bA.month()]}else{return by[bA.month()]}},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(bA){return bA+((bA===1||bA===8||bA>=20)?"ste":"de")},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bA){var bz="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),bx="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function by(bC){return(bC%10<5)&&(bC%10>1)&&((~~(bC/10)%10)!==1)}function bB(bF,bE,bD){var bC=bF+" ";switch(bD){case"m":return bE?"minuta":"minutę";case"mm":return bC+(by(bF)?"minuty":"minut");case"h":return bE?"godzina":"godzinę";case"hh":return bC+(by(bF)?"godziny":"godzin");case"MM":return bC+(by(bF)?"miesiące":"miesięcy");case"yy":return bC+(by(bF)?"lata":"lat")}}return bA.defineLocale("pl",{months:function(bD,bC){if(/D MMMM/.test(bC)){return bx[bD.month()]}else{return bz[bD.month()]}},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:bB,mm:bB,h:bB,hh:bB,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:bB,y:"rok",yy:bB},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [às] LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return(this.day()===0||this.day()===6)?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return(this.day()===0||this.day()===6)?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){function by(bB,bA,bz){var bD={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},bC=" ";if(bB%100>=20||(bB>=100&&bB%100===0)){bC=" de "}return bB+bC+bD[bz]}return bx.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:by,h:"o oră",hh:by,d:"o zi",dd:by,M:"o lună",MM:by,y:"un an",yy:by},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bB){function bz(bF,bE){var bD=bF.split("_");return bE%10===1&&bE%100!==11?bD[0]:(bE%10>=2&&bE%10<=4&&(bE%100<10||bE%100>=20)?bD[1]:bD[2])}function bC(bF,bE,bD){var bG={mm:bE?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};if(bD==="m"){return bE?"минута":"минуту"}else{return bF+" "+bz(bG[bD],+bF)}}function bA(bE,bG){var bD={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},bF=(/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(bG)?"accusative":"nominative";return bD[bF][bE.month()]}function by(bD,bG){var bF={nominative:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},bE=(/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(bG)?"accusative":"nominative";return bF[bE][bD.month()]}function bx(bD,bG){var bE={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},bF=(/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/).test(bG)?"accusative":"nominative";return bE[bF][bD.day()]}return bB.defineLocale("ru",{months:bA,monthsShort:by,weekdays:bx,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return this.day()===2?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(bD){if(bD.week()!==this.week()){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}}else{if(this.day()===2){return"[Во] dddd [в] LT"}else{return"[В] dddd [в] LT"}}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:bC,mm:bC,h:"час",hh:bC,d:"день",dd:bC,M:"месяц",MM:bC,y:"год",yy:bC},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(bD){return/^(дня|вечера)$/.test(bD)},meridiem:function(bD,bF,bE){if(bD<4){return"ночи"}else{if(bD<12){return"утра"}else{if(bD<17){return"дня"}else{return"вечера"}}}},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(bD,bE){switch(bE){case"M":case"d":case"DDD":return bD+"-й";case"D":return bD+"-го";case"w":case"W":return bD+"-я";default:return bD}},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bA){var bx="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),bz="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function by(bC){return(bC>1)&&(bC<5)}function bB(bF,bE,bD,bG){var bC=bF+" ";switch(bD){case"s":return(bE||bG)?"pár sekúnd":"pár sekundami";case"m":return bE?"minúta":(bG?"minútu":"minútou");case"mm":if(bE||bG){return bC+(by(bF)?"minúty":"minút")}else{return bC+"minútami"}break;case"h":return bE?"hodina":(bG?"hodinu":"hodinou");case"hh":if(bE||bG){return bC+(by(bF)?"hodiny":"hodín")}else{return bC+"hodinami"}break;case"d":return(bE||bG)?"deň":"dňom";case"dd":if(bE||bG){return bC+(by(bF)?"dni":"dní")}else{return bC+"dňami"}break;case"M":return(bE||bG)?"mesiac":"mesiacom";case"MM":if(bE||bG){return bC+(by(bF)?"mesiace":"mesiacov")}else{return bC+"mesiacmi"}break;case"y":return(bE||bG)?"rok":"rokom";case"yy":if(bE||bG){return bC+(by(bF)?"roky":"rokov")}else{return bC+"rokmi"}break}}return bA.defineLocale("sk",{months:bx,monthsShort:bz,monthsParse:(function(bC,bE){var bD,bF=[];for(bD=0;bD<12;bD++){bF[bD]=new RegExp("^"+bC[bD]+"$|^"+bE[bD]+"$","i")}return bF}(bx,bz)),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:bB,m:bB,mm:bB,h:bB,hh:bB,d:bB,dd:bB,M:bB,MM:bB,y:bB,yy:bB},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){function by(bC,bB,bA){var bz=bC+" ";switch(bA){case"m":return bB?"ena minuta":"eno minuto";case"mm":if(bC===1){bz+="minuta"}else{if(bC===2){bz+="minuti"}else{if(bC===3||bC===4){bz+="minute"}else{bz+="minut"}}}return bz;case"h":return bB?"ena ura":"eno uro";case"hh":if(bC===1){bz+="ura"}else{if(bC===2){bz+="uri"}else{if(bC===3||bC===4){bz+="ure"}else{bz+="ur"}}}return bz;case"dd":if(bC===1){bz+="dan"}else{bz+="dni"}return bz;case"MM":if(bC===1){bz+="mesec"}else{if(bC===2){bz+="meseca"}else{if(bC===3||bC===4){bz+="mesece"}else{bz+="mesecev"}}}return bz;case"yy":if(bC===1){bz+="leto"}else{if(bC===2){bz+="leti"}else{if(bC===3||bC===4){bz+="leta"}else{bz+="let"}}}return bz}}return bx.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejšnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"%s nazaj",s:"nekaj sekund",m:by,mm:by,h:by,hh:by,d:"en dan",dd:by,M:"en mesec",MM:by,y:"eno leto",yy:by},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(by){return by.charAt(0)==="M"},meridiem:function(by,bz,bA){return by<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(by){var bx={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(bA,bz){return bA===1?bz[0]:(bA>=2&&bA<=4?bz[1]:bz[2])},translate:function(bC,bA,bz){var bB=bx.words[bz];if(bz.length===1){return bA?bB[0]:bB[1]}else{return bC+" "+bx.correctGrammaticalCase(bC,bB)}}};return by.defineLocale("sr-cyrl",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){var bz=["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"];return bz[this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:bx.translate,mm:bx.translate,h:bx.translate,hh:bx.translate,d:"дан",dd:bx.translate,M:"месец",MM:bx.translate,y:"годину",yy:bx.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(by){var bx={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(bA,bz){return bA===1?bz[0]:(bA>=2&&bA<=4?bz[1]:bz[2])},translate:function(bC,bA,bz){var bB=bx.words[bz];if(bz.length===1){return bA?bB[0]:bB[1]}else{return bC+" "+bx.correctGrammaticalCase(bC,bB)}}};return by.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var bz=["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return bz[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:bx.translate,mm:bx.translate,h:bx.translate,hh:bx.translate,d:"dan",dd:bx.translate,M:"mesec",MM:bx.translate,y:"godinu",yy:bx.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"dddd LT",lastWeek:"[Förra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(bA){var by=bA%10,bz=(~~(bA%100/10)===1)?"e":(by===1)?"a":(by===2)?"a":(by===3)?"e":"e";return bA+bz},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinalParse:/\d{1,2}வது/,ordinal:function(by){return by+"வது"},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(by,bA,bz){if(by<2){return" யாமம்"}else{if(by<6){return" வைகறை"}else{if(by<10){return" காலை"}else{if(by<14){return" நண்பகல்"}else{if(by<18){return" எற்பாடு"}else{if(by<22){return" மாலை"}else{return" யாமம்"}}}}}}},meridiemHour:function(by,bz){if(by===12){by=0}if(bz==="யாமம்"){return by<2?by:by+12}else{if(bz==="வைகறை"||bz==="காலை"){return by}else{if(bz==="நண்பகல்"){return by>=10?by:by+12}else{return by+12}}}},week:{dow:0,doy:6}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",LTS:"LT s วินาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา LT",LLLL:"วันddddที่ D MMMM YYYY เวลา LT"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(by){return by==="หลังเที่ยง"},meridiem:function(by,bA,bz){if(by<12){return"ก่อนเที่ยง"}else{return"หลังเที่ยง"}},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(by){return by},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(by){var bx={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};return by.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(bB){if(bB===0){return bB+"'ıncı"}var bA=bB%10,bz=bB%100-bA,bC=bB>=100?100:null;return bB+(bx[bA]||bx[bz]||bx[bC])},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}));(function(bx){bx(aa)}(function(bB){function bz(bF,bE){var bD=bF.split("_");return bE%10===1&&bE%100!==11?bD[0]:(bE%10>=2&&bE%10<=4&&(bE%100<10||bE%100>=20)?bD[1]:bD[2])}function bC(bF,bE,bD){var bG={mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};if(bD==="m"){return bE?"хвилина":"хвилину"}else{if(bD==="h"){return bE?"година":"годину"}else{return bF+" "+bz(bG[bD],+bF)}}}function bA(bE,bG){var bD={nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")},bF=(/D[oD]? *MMMM?/).test(bG)?"accusative":"nominative";return bD[bF][bE.month()]}function bx(bD,bG){var bE={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},bF=(/(\[[ВвУу]\]) ?dddd/).test(bG)?"accusative":((/\[?(?:минулої|наступної)? ?\] ?dddd/).test(bG)?"genitive":"nominative");return bE[bF][bD.day()]}function by(bD){return function(){return bD+"о"+(this.hours()===11?"б":"")+"] LT"}}return bB.defineLocale("uk",{months:bA,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:bx,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., LT",LLLL:"dddd, D MMMM YYYY р., LT"},calendar:{sameDay:by("[Сьогодні "),nextDay:by("[Завтра "),lastDay:by("[Вчора "),nextWeek:by("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return by("[Минулої] dddd [").call(this);case 1:case 2:case 4:return by("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:bC,mm:bC,h:"годину",hh:bC,d:"день",dd:bC,M:"місяць",MM:bC,y:"рік",yy:bC},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(bD){return/^(дня|вечора)$/.test(bD)},meridiem:function(bD,bF,bE){if(bD<4){return"ночі"}else{if(bD<12){return"ранку"}else{if(bD<17){return"дня"}else{return"вечора"}}}},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(bD,bE){switch(bE){case"M":case"d":case"DDD":case"w":case"W":return bD+"-й";case"D":return bD+"-го";default:return bD}},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY LT",LLLL:"dddd, D MMMM [năm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(by){return by},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(by,bz){if(by===12){by=0}if(bz==="凌晨"||bz==="早上"||bz==="上午"){return by}else{if(bz==="下午"||bz==="晚上"){return by+12}else{return by>=11?by:by+12}}},meridiem:function(by,bA,bz){var bB=by*100+bA;if(bB<600){return"凌晨"}else{if(bB<900){return"早上"}else{if(bB<1130){return"上午"}else{if(bB<1230){return"中午"}else{if(bB<1800){return"下午"}else{return"晚上"}}}}}},calendar:{sameDay:function(){return this.minutes()===0?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return this.minutes()===0?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return this.minutes()===0?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var by,bz;by=bx().startOf("week");bz=this.unix()-by.unix()>=7*24*3600?"[下]":"[本]";return this.minutes()===0?bz+"dddAh点整":bz+"dddAh点mm"},lastWeek:function(){var by,bz;by=bx().startOf("week");bz=this.unix()<by.unix()?"[上]":"[本]";return this.minutes()===0?bz+"dddAh点整":bz+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(by,bz){switch(bz){case"d":case"D":case"DDD":return by+"日";case"M":return by+"月";case"w":case"W":return by+"周";default:return by}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})}));(function(bx){bx(aa)}(function(bx){return bx.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/早上|上午|中午|下午|晚上/,meridiemHour:function(by,bz){if(by===12){by=0}if(bz==="早上"||bz==="上午"){return by}else{if(bz==="中午"){return by>=11?by:by+12}else{if(bz==="下午"||bz==="晚上"){return by+12}}}},meridiem:function(by,bA,bz){var bB=by*100+bA;if(bB<900){return"早上"}else{if(bB<1130){return"上午"}else{if(bB<1230){return"中午"}else{if(bB<1800){return"下午"}else{return"晚上"}}}}},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(by,bz){switch(bz){case"d":case"D":case"DDD":return by+"日";case"M":return by+"月";case"w":case"W":return by+"週";default:return by}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})}));aa.locale("en");function ad(bx){if(typeof ender!=="undefined"){return}aB=bh.moment;if(bx){bh.moment=bu("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",aa)}else{bh.moment=aa}}if(aA){module.exports=aa}else{if(typeof define==="function"&&define.amd){define(function(by,bx,bz){if(bz.config&&bz.config()&&bz.config().noGlobal===true){bh.moment=aB}return aa});ad(true)}else{ad()}}}).call(this);
/*! version : 4.17.42
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery","moment"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"),require("moment"))}else{if(typeof jQuery==="undefined"){throw"bootstrap-datetimepicker requires jQuery to be loaded first"}if(typeof moment==="undefined"){throw"bootstrap-datetimepicker requires Moment.js to be loaded first"}b(jQuery,moment)}}}(function(c,d){if(!d){throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first")}var b=function(B,I){var v={},ar,am,Y=true,p,at=false,T=false,l,aa=0,D,ax,y,aj=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],au=["days","months","years","decades"],z=["top","bottom","auto"],m=["left","right","auto"],aw=["default","top","bottom"],J={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},ap={},E=function(aB){var aA;if(aB===undefined||aB===null){aA=d()}else{if(u()){aA=d.tz(aB,ax,I.useStrict,I.timeZone)}else{aA=d(aB,ax,I.useStrict)}}if(u()){aA.tz(I.timeZone)}return aA},an=function(aA){if(typeof aA!=="string"||aA.length>1){throw new TypeError("isEnabled expects a single character string parameter")}switch(aA){case"y":return D.indexOf("Y")!==-1;case"M":return D.indexOf("M")!==-1;case"d":return D.toLowerCase().indexOf("d")!==-1;case"h":case"H":return D.toLowerCase().indexOf("h")!==-1;case"m":return D.indexOf("m")!==-1;case"s":return D.indexOf("s")!==-1;default:return false}},M=function(){return(an("h")||an("m")||an("s"))},u=function(){return d.tz!==undefined&&I.timeZone!==undefined&&I.timeZone!==null&&I.timeZone!==""},S=function(){return(an("y")||an("M")||an("d"))},r=function(){var aB=c("<thead>").append(c("<tr>").append(c("<th>").addClass("prev").attr("data-action","previous").append(c("<span>").addClass(I.icons.previous))).append(c("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",(I.calendarWeeks?"6":"5"))).append(c("<th>").addClass("next").attr("data-action","next").append(c("<span>").addClass(I.icons.next)))),aA=c("<tbody>").append(c("<tr>").append(c("<td>").attr("colspan",(I.calendarWeeks?"8":"7"))));return[c("<div>").addClass("datepicker-days").append(c("<table>").addClass("table-condensed").append(aB).append(c("<tbody>"))),c("<div>").addClass("datepicker-months").append(c("<table>").addClass("table-condensed").append(aB.clone()).append(aA.clone())),c("<div>").addClass("datepicker-years").append(c("<table>").addClass("table-condensed").append(aB.clone()).append(aA.clone())),c("<div>").addClass("datepicker-decades").append(c("<table>").addClass("table-condensed").append(aB.clone()).append(aA.clone()))]},W=function(){var aA=c("<tr>"),aB=c("<tr>"),aC=c("<tr>");if(an("h")){aA.append(c("<td>").append(c("<a>").attr({href:"#",tabindex:"-1",title:I.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(c("<span>").addClass(I.icons.up))));aB.append(c("<td>").append(c("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:I.tooltips.pickHour}).attr("data-action","showHours")));aC.append(c("<td>").append(c("<a>").attr({href:"#",tabindex:"-1",title:I.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(c("<span>").addClass(I.icons.down))))}if(an("m")){if(an("h")){aA.append(c("<td>").addClass("separator"));aB.append(c("<td>").addClass("separator").html(":"));aC.append(c("<td>").addClass("separator"))}aA.append(c("<td>").append(c("<a>").attr({href:"#",tabindex:"-1",title:I.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(c("<span>").addClass(I.icons.up))));aB.append(c("<td>").append(c("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:I.tooltips.pickMinute}).attr("data-action","showMinutes")));aC.append(c("<td>").append(c("<a>").attr({href:"#",tabindex:"-1",title:I.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(c("<span>").addClass(I.icons.down))))}if(an("s")){if(an("m")){aA.append(c("<td>").addClass("separator"));aB.append(c("<td>").addClass("separator").html(":"));aC.append(c("<td>").addClass("separator"))}aA.append(c("<td>").append(c("<a>").attr({href:"#",tabindex:"-1",title:I.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(c("<span>").addClass(I.icons.up))));aB.append(c("<td>").append(c("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:I.tooltips.pickSecond}).attr("data-action","showSeconds")));aC.append(c("<td>").append(c("<a>").attr({href:"#",tabindex:"-1",title:I.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(c("<span>").addClass(I.icons.down))))}if(!l){aA.append(c("<td>").addClass("separator"));aB.append(c("<td>").append(c("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:I.tooltips.togglePeriod})));aC.append(c("<td>").addClass("separator"))}return c("<div>").addClass("timepicker-picker").append(c("<table>").addClass("table-condensed").append([aA,aB,aC]))},X=function(){var aB=c("<div>").addClass("timepicker-hours").append(c("<table>").addClass("table-condensed")),aA=c("<div>").addClass("timepicker-minutes").append(c("<table>").addClass("table-condensed")),aD=c("<div>").addClass("timepicker-seconds").append(c("<table>").addClass("table-condensed")),aC=[W()];if(an("h")){aC.push(aB)}if(an("m")){aC.push(aA)}if(an("s")){aC.push(aD)}return aC},ai=function(){var aA=[];if(I.showTodayButton){aA.push(c("<td>").append(c("<a>").attr({"data-action":"today",title:I.tooltips.today}).append(c("<span>").addClass(I.icons.today))))}if(!I.sideBySide&&S()&&M()){aA.push(c("<td>").append(c("<a>").attr({"data-action":"togglePicker",title:I.tooltips.selectTime}).append(c("<span>").addClass(I.icons.time))))}if(I.showClear){aA.push(c("<td>").append(c("<a>").attr({"data-action":"clear",title:I.tooltips.clear}).append(c("<span>").addClass(I.icons.clear))))}if(I.showClose){aA.push(c("<td>").append(c("<a>").attr({"data-action":"close",title:I.tooltips.close}).append(c("<span>确认</span>").addClass(I.icons.close))))}return c("<table>").addClass("table-condensed").append(c("<tbody>").append(c("<tr>").append(aA)))},az=function(){var aC=c("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),aA=c("<div>").addClass("datepicker").append(r()),aB=c("<div>").addClass("timepicker").append(X()),aE=c("<ul>").addClass("list-unstyled"),aD=c("<li>").addClass("picker-switch"+(I.collapse?" accordion-toggle":"")).append(ai());if(I.inline){aC.removeClass("dropdown-menu")}if(l){aC.addClass("usetwentyfour")}if(an("s")&&!l){aC.addClass("wider")}if(I.sideBySide&&S()&&M()){aC.addClass("timepicker-sbs");if(I.toolbarPlacement==="top"){aC.append(aD)}aC.append(c("<div>").addClass("row").append(aA.addClass("col-md-6")).append(aB.addClass("col-md-6")));if(I.toolbarPlacement==="bottom"){aC.append(aD)}return aC}if(I.toolbarPlacement==="top"){aE.append(aD)}if(S()){aE.append(c("<li>").addClass((I.collapse&&M()?"collapse in":"")).append(aA))}if(I.toolbarPlacement==="default"){aE.append(aD)}if(M()){aE.append(c("<li>").addClass((I.collapse&&S()?"collapse":"")).append(aB))}if(I.toolbarPlacement==="bottom"){aE.append(aD)}return aC.append(aE)},e=function(){var aA,aB={};if(B.is("input")||I.inline){aA=B.data()}else{aA=B.find("input").data()}if(aA.dateOptions&&aA.dateOptions instanceof Object){aB=c.extend(true,aB,aA.dateOptions)}c.each(I,function(aD){var aC="date"+aD.charAt(0).toUpperCase()+aD.slice(1);if(aA[aC]!==undefined){aB[aD]=aA[aC]}});return aB},s=function(){var aA=(at||B).position(),aE=(at||B).offset(),aC=I.widgetPositioning.vertical,aB=I.widgetPositioning.horizontal,aD;if(I.widgetParent){aD=I.widgetParent.append(T)}else{if(B.is("input")){aD=B.after(T).parent()}else{if(I.inline){aD=B.append(T);return}else{aD=B;B.children().first().after(T)}}}if(aC==="auto"){if(aE.top+T.height()*1.5>=c(window).height()+c(window).scrollTop()&&T.height()+B.outerHeight()<aE.top){aC="top"}else{aC="bottom"}}if(aB==="auto"){if(aD.width()<aE.left+T.outerWidth()/2&&aE.left+T.outerWidth()>c(window).width()){aB="right"}else{aB="left"}}if(aC==="top"){T.addClass("top").removeClass("bottom")}else{T.addClass("bottom").removeClass("top")}if(aB==="right"){T.addClass("pull-right")}else{T.removeClass("pull-right")}if(aD.css("position")!=="relative"){aD=aD.parents().filter(function(){return c(this).css("position")==="relative"}).first()}if(aD.length===0){throw new Error("datetimepicker component should be placed within a relative positioned container")}T.css({top:aC==="top"?"auto":aA.top+B.outerHeight(),bottom:aC==="top"?aD.outerHeight()-(aD===B?0:aA.top):"auto",left:aB==="left"?(aD===B?0:aA.left):"auto",right:aB==="left"?"auto":aD.outerWidth()-B.outerWidth()-(aD===B?0:aA.left)})},x=function(aA){if(aA.type==="dp.change"&&((aA.date&&aA.date.isSame(aA.oldDate))||(!aA.date&&!aA.oldDate))){return}B.trigger(aA)},O=function(aA){if(aA==="y"){aA="YYYY"}x({type:"dp.update",change:aA,viewDate:am.clone()})},f=function(aA){if(!T){return}if(aA){y=Math.max(aa,Math.min(3,y+aA))}T.find(".datepicker > div").hide().filter(".datepicker-"+aj[y].clsName).show()},aq=function(){var aB=c("<tr>"),aA=am.clone().startOf("w").startOf("d");if(I.calendarWeeks===true){aB.append(c("<th>").addClass("cw").text("#"))}while(aA.isBefore(am.clone().endOf("w"))){aB.append(c("<th>").addClass("dow").text(aA.format("dd")));aA.add(1,"d")}T.find(".datepicker-days thead").append(aB)},G=function(aA){return I.disabledDates[aA.format("YYYY-MM-DD")]===true},V=function(aA){return I.enabledDates[aA.format("YYYY-MM-DD")]===true},ah=function(aA){return I.disabledHours[aA.format("H")]===true},av=function(aA){return I.enabledHours[aA.format("H")]===true},q=function(aB,aC){if(!aB.isValid()){return false}if(I.disabledDates&&aC==="d"&&G(aB)){return false}if(I.enabledDates&&aC==="d"&&!V(aB)){return false}if(I.minDate&&aB.isBefore(I.minDate,aC)){return false}if(I.maxDate&&aB.isAfter(I.maxDate,aC)){return false}if(I.daysOfWeekDisabled&&aC==="d"&&I.daysOfWeekDisabled.indexOf(aB.day())!==-1){return false}if(I.disabledHours&&(aC==="h"||aC==="m"||aC==="s")&&ah(aB)){return false}if(I.enabledHours&&(aC==="h"||aC==="m"||aC==="s")&&!av(aB)){return false}if(I.disabledTimeIntervals&&(aC==="h"||aC==="m"||aC==="s")){var aA=false;c.each(I.disabledTimeIntervals,function(){if(aB.isBetween(this[0],this[1])){aA=true;return false}});if(aA){return false}}return true},N=function(){var aA=[],aB=am.clone().startOf("y").startOf("d");while(aB.isSame(am,"y")){aA.push(c("<span>").attr("data-action","selectMonth").addClass("month").text(aB.format("MMM")));aB.add(1,"M")}T.find(".datepicker-months td").empty().append(aA)},C=function(){var aB=T.find(".datepicker-months"),aC=aB.find("th"),aA=aB.find("tbody").find("span");if(aB.find("thead tr:eq(1)").size()<=0){aB.find("thead").append('<tr><th colspan="7">选择月份</th></tr>')}aC.eq(0).find("span").attr("title",I.tooltips.prevYear);aC.eq(1).attr("title",I.tooltips.selectYear);aC.eq(2).find("span").attr("title",I.tooltips.nextYear);aB.find(".disabled").removeClass("disabled");if(!q(am.clone().subtract(1,"y"),"y")){aC.eq(0).addClass("disabled")}aC.eq(1).text(am.year());if(!q(am.clone().add(1,"y"),"y")){aC.eq(2).addClass("disabled")}aA.removeClass("active");if(ar.isSame(am,"y")&&!Y){aA.eq(ar.month()).addClass("active")}aA.each(function(aD){if(!q(am.clone().month(aD),"M")){c(this).addClass("disabled")}})},F=function(){var aB=T.find(".datepicker-years"),aD=aB.find("th"),aA=am.clone().subtract(5,"y"),aE=am.clone().add(6,"y"),aC="";if(aB.find("thead tr:eq(1)").size()<=0){aB.find("thead").append('<tr><th colspan="7">选择年份</th></tr>')}aD.eq(0).find("span").attr("title",I.tooltips.prevDecade);aD.eq(1).attr("title",I.tooltips.selectDecade);aD.eq(2).find("span").attr("title",I.tooltips.nextDecade);aB.find(".disabled").removeClass("disabled");if(I.minDate&&I.minDate.isAfter(aA,"y")){aD.eq(0).addClass("disabled")}aD.eq(1).text(aA.year()+"-"+aE.year());if(I.maxDate&&I.maxDate.isBefore(aE,"y")){aD.eq(2).addClass("disabled")}while(!aA.isAfter(aE,"y")){aC+='<span data-action="selectYear" class="year'+(aA.isSame(ar,"y")&&!Y?" active":"")+(!q(aA,"y")?" disabled":"")+'">'+aA.year()+"</span>";aA.add(1,"y")}aB.find("td").html(aC)},ak=function(){var aA=T.find(".datepicker-decades"),aG=aA.find("th"),aI=d({y:am.year()-(am.year()%100)-1}),aC=aI.clone().add(100,"y"),aD=aI.clone(),aE=false,aH=false,aB,aF="";if(aA.find("thead tr:eq(1)").size()<=0){aA.find("thead").append('<tr><th colspan="7">选择年份范围</th></tr>')}aG.eq(0).find("span").attr("title",I.tooltips.prevCentury);aG.eq(2).find("span").attr("title",I.tooltips.nextCentury);aA.find(".disabled").removeClass("disabled");if(aI.isSame(d({y:1900}))||(I.minDate&&I.minDate.isAfter(aI,"y"))){aG.eq(0).addClass("disabled")}aG.eq(1).text(aI.year()+"-"+aC.year());if(aI.isSame(d({y:2000}))||(I.maxDate&&I.maxDate.isBefore(aC,"y"))){aG.eq(2).addClass("disabled")}while(!aI.isAfter(aC,"y")){aB=aI.year()+12;aE=I.minDate&&I.minDate.isAfter(aI,"y")&&I.minDate.year()<=aB;aH=I.maxDate&&I.maxDate.isAfter(aI,"y")&&I.maxDate.year()<=aB;aF+='<span data-action="selectDecade" class="decade'+(ar.isAfter(aI)&&ar.year()<=aB?" active":"")+(!q(aI,"y")&&!aE&&!aH?" disabled":"")+'" data-selection="'+(aI.year()+6)+'">'+(aI.year()+1)+" - "+(aI.year()+12)+"</span>";aI.add(12,"y")}aF+="<span></span><span></span><span></span>";aA.find("td").html(aF);aG.eq(1).text((aD.year()+1)+"-"+(aI.year()))},w=function(){var aB=T.find(".datepicker-days"),aG=aB.find("th"),aA,aD=[],aF,aE,aC;if(!S()){return}aG.eq(0).find("span").attr("title",I.tooltips.prevMonth);aG.eq(1).attr("title",I.tooltips.selectMonth);aG.eq(2).find("span").attr("title",I.tooltips.nextMonth);aB.find(".disabled").removeClass("disabled");aG.eq(1).text(am.format(I.dayViewHeaderFormat));if(!q(am.clone().subtract(1,"M"),"M")){aG.eq(0).addClass("disabled")}if(!q(am.clone().add(1,"M"),"M")){aG.eq(2).addClass("disabled")}aA=am.clone().startOf("M").startOf("w").startOf("d");for(aC=0;aC<42;aC++){if(aA.weekday()===0){aF=c("<tr>");if(I.calendarWeeks){aF.append('<td class="cw">'+aA.week()+"</td>")}aD.push(aF)}aE="";if(aA.isBefore(am,"M")){aE+=" old"}if(aA.isAfter(am,"M")){aE+=" new"}if(aA.isSame(ar,"d")&&!Y){aE+=" active"}if(!q(aA,"d")){aE+=" disabled"}if(aA.isSame(E(),"d")){aE+=" today"}if(aA.day()===0||aA.day()===6){aE+=" weekend"}aF.append('<td data-action="selectDay" data-day="'+aA.format("L")+'" class="day'+aE+'">'+aA.date()+"</td>");aA.add(1,"d")}aB.find("tbody").empty().append(aD);C();F();ak()},Q=function(){var aB=T.find(".timepicker-hours table"),aD=am.clone().startOf("d"),aA=[],aC=c("<tr>");if(am.hour()>11&&!l){aD.hour(12)}while(aD.isSame(am,"d")&&(l||(am.hour()<12&&aD.hour()<12)||am.hour()>11)){if(aD.hour()%4===0){aC=c("<tr>");aA.push(aC)}aC.append('<td data-action="selectHour" class="hour'+(!q(aD,"h")?" disabled":"")+'">'+aD.format(l?"HH":"hh")+"</td>");aD.add(1,"h")}aB.empty().append(aA)},L=function(){var aC=T.find(".timepicker-minutes table"),aD=am.clone().startOf("h"),aA=[],aE=c("<tr>"),aB=I.stepping===1?5:I.stepping;while(am.isSame(aD,"h")){if(aD.minute()%(aB*4)===0){aE=c("<tr>");aA.push(aE)}aE.append('<td data-action="selectMinute" class="minute'+(!q(aD,"m")?" disabled":"")+'">'+aD.format("mm")+"</td>");aD.add(aB,"m")}aC.empty().append(aA)},h=function(){var aC=T.find(".timepicker-seconds table"),aA=am.clone().startOf("m"),aB=[],aD=c("<tr>");while(am.isSame(aA,"m")){if(aA.second()%20===0){aD=c("<tr>");aB.push(aD)}aD.append('<td data-action="selectSecond" class="second'+(!q(aA,"s")?" disabled":"")+'">'+aA.format("ss")+"</td>");aA.add(5,"s")}aC.empty().append(aB)},t=function(){var aA,aB,aC=T.find(".timepicker span[data-time-component]");if(!l){aA=T.find(".timepicker [data-action=togglePeriod]");aB=ar.clone().add((ar.hours()>=12)?-12:12,"h");aA.text(ar.format("A"));if(q(aB,"h")){aA.removeClass("disabled")}else{aA.addClass("disabled")}}aC.filter("[data-time-component=hours]").text(ar.format(l?"HH":"hh"));aC.filter("[data-time-component=minutes]").text(ar.format("mm"));aC.filter("[data-time-component=seconds]").text(ar.format("ss"));Q();L();h()},U=function(){if(!T){return}w();t()},Z=function(aB){var aA=Y?null:ar;if(!aB){Y=true;p.val("");B.data("date","");x({type:"dp.change",date:false,oldDate:aA});U();return}aB=aB.clone().locale(I.locale);if(u()){aB.tz(I.timeZone)}if(I.stepping!==1){aB.minutes((Math.round(aB.minutes()/I.stepping)*I.stepping)).seconds(0)}if(q(aB)){ar=aB;am=ar.clone();p.val(ar.format(D));B.data("date",ar.format(D));Y=false;U();x({type:"dp.change",date:ar.clone(),oldDate:aA})}else{if(!I.keepInvalid){p.val(Y?"":ar.format(D))}x({type:"dp.error",date:aB})}},ao=function(){var aA=false;if(!T){return v}T.find(".collapse").each(function(){var aB=c(this).data("collapse");if(aB&&aB.transitioning){aA=true;return false}return true});if(aA){return v}if(at&&at.hasClass("btn")){at.toggleClass("active")}T.hide();c(window).off("resize",s);T.off("click","[data-action]");T.off("mousedown",false);T.remove();T=false;x({type:"dp.hide",date:ar.clone()});p.blur();return v},ad=function(){Z(null)},ac=function(aA){if(I.parseInputDate===undefined){if(!d.isMoment(aA)){aA=E(aA)}}else{aA=I.parseInputDate(aA)}return aA},ag={next:function(){var aA=aj[y].navFnc;am.add(aj[y].navStep,aA);w();O(aA)},previous:function(){var aA=aj[y].navFnc;am.subtract(aj[y].navStep,aA);w();O(aA)},pickerSwitch:function(){f(1)},selectMonth:function(aB){var aA=c(aB.target).closest("tbody").find("span").index(c(aB.target));am.month(aA);if(y===aa){Z(ar.clone().year(am.year()).month(am.month()));if(!I.inline){ao()}}else{f(-1);w()}O("M")},selectYear:function(aB){var aA=parseInt(c(aB.target).text(),10)||0;am.year(aA);if(y===aa){Z(ar.clone().year(am.year()));if(!I.inline){ao()}}else{f(-1);w()}O("YYYY")},selectDecade:function(aB){var aA=parseInt(c(aB.target).data("selection"),10)||0;am.year(aA);if(y===aa){Z(ar.clone().year(am.year()));if(!I.inline){ao()}}else{f(-1);w()}O("YYYY")},selectDay:function(aB){var aA=am.clone();if(c(aB.target).is(".old")){aA.subtract(1,"M")}if(c(aB.target).is(".new")){aA.add(1,"M")}Z(aA.date(parseInt(c(aB.target).text(),10)));if(!M()&&!I.keepOpen&&!I.inline){ao()}},incrementHours:function(){var aA=ar.clone().add(1,"h");if(q(aA,"h")){Z(aA)}},incrementMinutes:function(){var aA=ar.clone().add(I.stepping,"m");if(q(aA,"m")){Z(aA)}},incrementSeconds:function(){var aA=ar.clone().add(1,"s");if(q(aA,"s")){Z(aA)}},decrementHours:function(){var aA=ar.clone().subtract(1,"h");if(q(aA,"h")){Z(aA)}},decrementMinutes:function(){var aA=ar.clone().subtract(I.stepping,"m");if(q(aA,"m")){Z(aA)}},decrementSeconds:function(){var aA=ar.clone().subtract(1,"s");if(q(aA,"s")){Z(aA)}},togglePeriod:function(){Z(ar.clone().add((ar.hours()>=12)?-12:12,"h"))},togglePicker:function(aF){var aE=c(aF.target),aD=aE.closest("ul"),aB=aD.find(".in"),aA=aD.find(".collapse:not(.in)"),aC;if(aB&&aB.length){aC=aB.data("collapse");if(aC&&aC.transitioning){return}if(aB.collapse){aB.collapse("hide");aA.collapse("show")}else{aB.removeClass("in");aA.addClass("in")}if(aE.is("span")){aE.toggleClass(I.icons.time+" "+I.icons.date)}else{aE.find("span").toggleClass(I.icons.time+" "+I.icons.date)}}},showPicker:function(){T.find(".timepicker > div:not(.timepicker-picker)").hide();T.find(".timepicker .timepicker-picker").show()},showHours:function(){T.find(".timepicker .timepicker-picker").hide();T.find(".timepicker .timepicker-hours").show()},showMinutes:function(){T.find(".timepicker .timepicker-picker").hide();T.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){T.find(".timepicker .timepicker-picker").hide();T.find(".timepicker .timepicker-seconds").show()},selectHour:function(aB){var aA=parseInt(c(aB.target).text(),10);if(!l){if(ar.hours()>=12){if(aA!==12){aA+=12}}else{if(aA===12){aA=0}}}Z(ar.clone().hours(aA));ag.showPicker.call(v)},selectMinute:function(aA){Z(ar.clone().minutes(parseInt(c(aA.target).text(),10)));ag.showPicker.call(v)},selectSecond:function(aA){Z(ar.clone().seconds(parseInt(c(aA.target).text(),10)));ag.showPicker.call(v)},clear:ad,today:function(){var aA=E();if(q(aA,"d")){Z(aA)}},close:ao},R=function(aA){if(c(aA.currentTarget).is(".disabled")){return false}ag[c(aA.currentTarget).data("action")].apply(v,arguments);return false},ab=function(){var aA,aB={year:function(aC){return aC.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(aC){return aC.date(1).hours(0).seconds(0).minutes(0)},day:function(aC){return aC.hours(0).seconds(0).minutes(0)},hour:function(aC){return aC.seconds(0).minutes(0)},minute:function(aC){return aC.seconds(0)}};if(p.prop("disabled")||(!I.ignoreReadonly&&p.prop("readonly"))||T){return v}if(p.val()!==undefined&&p.val().trim().length!==0){Z(ac(p.val().trim()))}else{if(I.useCurrent&&Y&&(I.inline||(p.is("input")&&p.val().trim().length===0))){aA=E();if(typeof I.useCurrent==="string"){aA=aB[I.useCurrent](aA)}Z(aA)}}T=az();aq();N();T.find(".timepicker-hours").hide();T.find(".timepicker-minutes").hide();T.find(".timepicker-seconds").hide();U();f();c(window).on("resize",s);T.on("click","[data-action]",R);T.on("mousedown",false);if(at&&at.hasClass("btn")){at.toggleClass("active")}s();T.show();if(I.focusOnShow&&!p.is(":focus")){p.focus()}x({type:"dp.show"});return v},K=function(){return(T?ao():ab())},H=function(aG){var aJ=null,aE,aF,aH=[],aD={},aI=aG.which,aB,aA,aC="p";ap[aI]=aC;for(aE in ap){if(ap.hasOwnProperty(aE)&&ap[aE]===aC){aH.push(aE);if(parseInt(aE,10)!==aI){aD[aE]=true}}}for(aE in I.keyBinds){if(I.keyBinds.hasOwnProperty(aE)&&typeof(I.keyBinds[aE])==="function"){aB=aE.split(" ");if(aB.length===aH.length&&J[aI]===aB[aB.length-1]){aA=true;for(aF=aB.length-2;aF>=0;aF--){if(!(J[aB[aF]] in aD)){aA=false;break}}if(aA){aJ=I.keyBinds[aE];break}}}}if(aJ){aJ.call(v,T);aG.stopPropagation();aG.preventDefault()}},al=function(aA){ap[aA.which]="r";aA.stopPropagation();aA.preventDefault()},g=function(aB){var aC=c(aB.target).val().trim(),aA=aC?ac(aC):null;Z(aA);aB.stopImmediatePropagation();return false},A=function(){p.on({change:g,blur:I.debug?"":ao,keydown:H,keyup:al,focus:I.allowInputToggle?ab:""});if(B.is("input")){p.on({focus:ab})}else{if(at){at.on("click",K);at.on("mousedown",false)}}},P=function(){p.off({change:g,blur:blur,keydown:H,keyup:al,focus:I.allowInputToggle?ao:""});if(B.is("input")){p.off({focus:ab})}else{if(at){at.off("click",K);at.off("mousedown",false)}}},ae=function(aA){var aB={};c.each(aA,function(){var aC=ac(this);if(aC.isValid()){aB[aC.format("YYYY-MM-DD")]=true}});return(Object.keys(aB).length)?aB:false},ay=function(aA){var aB={};c.each(aA,function(){aB[this]=true});return(Object.keys(aB).length)?aB:false},af=function(){var aA=I.format||"L LT";D=aA.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(aB){var aC=ar.localeData().longDateFormat(aB)||aB;return aC.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(aD){return ar.localeData().longDateFormat(aD)||aD})});ax=I.extraFormats?I.extraFormats.slice():[];if(ax.indexOf(aA)<0&&ax.indexOf(D)<0){ax.push(D)}l=(D.toLowerCase().indexOf("a")<1&&D.replace(/\[.*?\]/g,"").indexOf("h")<1);if(an("y")){aa=2}if(an("M")){aa=1}if(an("d")){aa=0}y=Math.max(aa,y);if(!Y){Z(ar)}};v.destroy=function(){ao();P();B.removeData("DateTimePicker");B.removeData("date")};v.toggle=K;v.show=ab;v.hide=ao;v.disable=function(){ao();if(at&&at.hasClass("btn")){at.addClass("disabled")}p.prop("disabled",true);return v};v.enable=function(){if(at&&at.hasClass("btn")){at.removeClass("disabled")}p.prop("disabled",false);return v};v.ignoreReadonly=function(aA){if(arguments.length===0){return I.ignoreReadonly}if(typeof aA!=="boolean"){throw new TypeError("ignoreReadonly () expects a boolean parameter")}I.ignoreReadonly=aA;return v};v.options=function(aA){if(arguments.length===0){return c.extend(true,{},I)}if(!(aA instanceof Object)){throw new TypeError("options() options parameter should be an object")}c.extend(true,I,aA);c.each(I,function(aB,aC){if(v[aB]!==undefined){v[aB](aC)}else{throw new TypeError("option "+aB+" is not recognized!")}});return v};v.date=function(aA){if(arguments.length===0){if(Y){return null}return ar.clone()}if(aA!==null&&typeof aA!=="string"&&!d.isMoment(aA)&&!(aA instanceof Date)){throw new TypeError("date() parameter must be one of [null, string, moment or Date]")}Z(aA===null?null:ac(aA));return v};v.format=function(aA){if(arguments.length===0){return I.format}if((typeof aA!=="string")&&((typeof aA!=="boolean")||(aA!==false))){throw new TypeError("format() expects a sting or boolean:false parameter "+aA)}I.format=aA;if(D){af()}return v};v.timeZone=function(aA){if(arguments.length===0){return I.timeZone}if(typeof aA!=="string"){throw new TypeError("newZone() expects a string parameter")}I.timeZone=aA;return v};v.dayViewHeaderFormat=function(aA){if(arguments.length===0){return I.dayViewHeaderFormat}if(typeof aA!=="string"){throw new TypeError("dayViewHeaderFormat() expects a string parameter")}I.dayViewHeaderFormat=aA;return v};v.extraFormats=function(aA){if(arguments.length===0){return I.extraFormats}if(aA!==false&&!(aA instanceof Array)){throw new TypeError("extraFormats() expects an array or false parameter")}I.extraFormats=aA;if(ax){af()}return v};v.disabledDates=function(aA){if(arguments.length===0){return(I.disabledDates?c.extend({},I.disabledDates):I.disabledDates)}if(!aA){I.disabledDates=false;U();return v}if(!(aA instanceof Array)){throw new TypeError("disabledDates() expects an array parameter")}I.disabledDates=ae(aA);I.enabledDates=false;U();return v};v.enabledDates=function(aA){if(arguments.length===0){return(I.enabledDates?c.extend({},I.enabledDates):I.enabledDates)}if(!aA){I.enabledDates=false;U();return v}if(!(aA instanceof Array)){throw new TypeError("enabledDates() expects an array parameter")}I.enabledDates=ae(aA);I.disabledDates=false;U();return v};v.daysOfWeekDisabled=function(aA){if(arguments.length===0){return I.daysOfWeekDisabled.splice(0)}if((typeof aA==="boolean")&&!aA){I.daysOfWeekDisabled=false;U();return v}if(!(aA instanceof Array)){throw new TypeError("daysOfWeekDisabled() expects an array parameter")}I.daysOfWeekDisabled=aA.reduce(function(aC,aD){aD=parseInt(aD,10);if(aD>6||aD<0||isNaN(aD)){return aC}if(aC.indexOf(aD)===-1){aC.push(aD)}return aC},[]).sort();if(I.useCurrent&&!I.keepInvalid){var aB=0;while(!q(ar,"d")){ar.add(1,"d");if(aB===7){throw"Tried 7 times to find a valid date"}aB++}Z(ar)}U();return v};v.maxDate=function(aB){if(arguments.length===0){return I.maxDate?I.maxDate.clone():I.maxDate}if((typeof aB==="boolean")&&aB===false){I.maxDate=false;U();return v}if(typeof aB==="string"){if(aB==="now"||aB==="moment"){aB=E()}}var aA=ac(aB);if(!aA.isValid()){throw new TypeError("maxDate() Could not parse date parameter: "+aB)}if(I.minDate&&aA.isBefore(I.minDate)){throw new TypeError("maxDate() date parameter is before options.minDate: "+aA.format(D))}I.maxDate=aA;if(I.useCurrent&&!I.keepInvalid&&ar.isAfter(aB)){}if(am.isAfter(aA)){am=aA.clone().subtract(I.stepping,"m")}U();return v};v.minDate=function(aB){if(arguments.length===0){return I.minDate?I.minDate.clone():I.minDate}if((typeof aB==="boolean")&&aB===false){I.minDate=false;U();return v}if(typeof aB==="string"){if(aB==="now"||aB==="moment"){aB=E()}}var aA=ac(aB);if(!aA.isValid()){throw new TypeError("minDate() Could not parse date parameter: "+aB)}if(I.maxDate&&aA.isAfter(I.maxDate)){throw new TypeError("minDate() date parameter is after options.maxDate: "+aA.format(D))}I.minDate=aA;if(I.useCurrent&&!I.keepInvalid&&ar.isBefore(aB)){}if(am.isBefore(aA)){am=aA.clone().add(I.stepping,"m")}U();return v};v.defaultDate=function(aB){if(arguments.length===0){return I.defaultDate?I.defaultDate.clone():I.defaultDate}if(!aB){I.defaultDate=false;return v}if(typeof aB==="string"){if(aB==="now"||aB==="moment"){aB=E()}else{aB=E(aB)}}var aA=ac(aB);if(!aA.isValid()){throw new TypeError("defaultDate() Could not parse date parameter: "+aB)}if(!q(aA)){throw new TypeError("defaultDate() date passed is invalid according to component setup validations")}I.defaultDate=aA;if((I.defaultDate&&I.inline)||p.val().trim()===""){Z(I.defaultDate)}return v};v.locale=function(aA){if(arguments.length===0){return I.locale}if(!d.localeData(aA)){throw new TypeError("locale() locale "+aA+" is not loaded from moment locales!")}I.locale=aA;ar.locale(I.locale);am.locale(I.locale);if(D){af()}if(T){ao();ab()}return v};v.stepping=function(aA){if(arguments.length===0){return I.stepping}aA=parseInt(aA,10);if(isNaN(aA)||aA<1){aA=1}I.stepping=aA;return v};v.useCurrent=function(aA){var aB=["year","month","day","hour","minute"];if(arguments.length===0){return I.useCurrent}if((typeof aA!=="boolean")&&(typeof aA!=="string")){throw new TypeError("useCurrent() expects a boolean or string parameter")}if(typeof aA==="string"&&aB.indexOf(aA.toLowerCase())===-1){throw new TypeError("useCurrent() expects a string parameter of "+aB.join(", "))}I.useCurrent=aA;return v};v.collapse=function(aA){if(arguments.length===0){return I.collapse}if(typeof aA!=="boolean"){throw new TypeError("collapse() expects a boolean parameter")}if(I.collapse===aA){return v}I.collapse=aA;if(T){ao();ab()}return v};v.icons=function(aA){if(arguments.length===0){return c.extend({},I.icons)}if(!(aA instanceof Object)){throw new TypeError("icons() expects parameter to be an Object")}c.extend(I.icons,aA);if(T){ao();ab()}return v};v.tooltips=function(aA){if(arguments.length===0){return c.extend({},I.tooltips)}if(!(aA instanceof Object)){throw new TypeError("tooltips() expects parameter to be an Object")}c.extend(I.tooltips,aA);if(T){ao();ab()}return v};v.useStrict=function(aA){if(arguments.length===0){return I.useStrict}if(typeof aA!=="boolean"){throw new TypeError("useStrict() expects a boolean parameter")}I.useStrict=aA;return v};v.sideBySide=function(aA){if(arguments.length===0){return I.sideBySide}if(typeof aA!=="boolean"){throw new TypeError("sideBySide() expects a boolean parameter")}I.sideBySide=aA;if(T){ao();ab()}return v};v.viewMode=function(aA){if(arguments.length===0){return I.viewMode}if(typeof aA!=="string"){throw new TypeError("viewMode() expects a string parameter")}if(au.indexOf(aA)===-1){throw new TypeError("viewMode() parameter must be one of ("+au.join(", ")+") value")}I.viewMode=aA;y=Math.max(au.indexOf(aA),aa);f();return v};v.toolbarPlacement=function(aA){if(arguments.length===0){return I.toolbarPlacement}if(typeof aA!=="string"){throw new TypeError("toolbarPlacement() expects a string parameter")}if(aw.indexOf(aA)===-1){throw new TypeError("toolbarPlacement() parameter must be one of ("+aw.join(", ")+") value")}I.toolbarPlacement=aA;if(T){ao();ab()}return v};v.widgetPositioning=function(aA){if(arguments.length===0){return c.extend({},I.widgetPositioning)}if(({}).toString.call(aA)!=="[object Object]"){throw new TypeError("widgetPositioning() expects an object variable")}if(aA.horizontal){if(typeof aA.horizontal!=="string"){throw new TypeError("widgetPositioning() horizontal variable must be a string")}aA.horizontal=aA.horizontal.toLowerCase();if(m.indexOf(aA.horizontal)===-1){throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+m.join(", ")+")")}I.widgetPositioning.horizontal=aA.horizontal}if(aA.vertical){if(typeof aA.vertical!=="string"){throw new TypeError("widgetPositioning() vertical variable must be a string")}aA.vertical=aA.vertical.toLowerCase();if(z.indexOf(aA.vertical)===-1){throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+z.join(", ")+")")}I.widgetPositioning.vertical=aA.vertical}U();return v};v.calendarWeeks=function(aA){if(arguments.length===0){return I.calendarWeeks}if(typeof aA!=="boolean"){throw new TypeError("calendarWeeks() expects parameter to be a boolean value")}I.calendarWeeks=aA;U();return v};v.showTodayButton=function(aA){if(arguments.length===0){return I.showTodayButton}if(typeof aA!=="boolean"){throw new TypeError("showTodayButton() expects a boolean parameter")}I.showTodayButton=aA;if(T){ao();ab()}return v};v.showClear=function(aA){if(arguments.length===0){return I.showClear}if(typeof aA!=="boolean"){throw new TypeError("showClear() expects a boolean parameter")}I.showClear=aA;if(T){ao();ab()}return v};v.widgetParent=function(aA){if(arguments.length===0){return I.widgetParent}if(typeof aA==="string"){aA=c(aA)}if(aA!==null&&(typeof aA!=="string"&&!(aA instanceof c))){throw new TypeError("widgetParent() expects a string or a jQuery object parameter")}I.widgetParent=aA;if(T){ao();ab()}return v};v.keepOpen=function(aA){if(arguments.length===0){return I.keepOpen}if(typeof aA!=="boolean"){throw new TypeError("keepOpen() expects a boolean parameter")}I.keepOpen=aA;return v};v.focusOnShow=function(aA){if(arguments.length===0){return I.focusOnShow}if(typeof aA!=="boolean"){throw new TypeError("focusOnShow() expects a boolean parameter")}I.focusOnShow=aA;return v};v.inline=function(aA){if(arguments.length===0){return I.inline}if(typeof aA!=="boolean"){throw new TypeError("inline() expects a boolean parameter")}I.inline=aA;return v};v.clear=function(){ad();return v};v.keyBinds=function(aA){I.keyBinds=aA;return v};v.getMoment=function(aA){return E(aA)};v.debug=function(aA){if(typeof aA!=="boolean"){throw new TypeError("debug() expects a boolean parameter")}I.debug=aA;return v};v.allowInputToggle=function(aA){if(arguments.length===0){return I.allowInputToggle}if(typeof aA!=="boolean"){throw new TypeError("allowInputToggle() expects a boolean parameter")}I.allowInputToggle=aA;return v};v.showClose=function(aA){if(arguments.length===0){return I.showClose}if(typeof aA!=="boolean"){throw new TypeError("showClose() expects a boolean parameter")}I.showClose=aA;return v};v.keepInvalid=function(aA){if(arguments.length===0){return I.keepInvalid}if(typeof aA!=="boolean"){throw new TypeError("keepInvalid() expects a boolean parameter")}I.keepInvalid=aA;return v};v.datepickerInput=function(aA){if(arguments.length===0){return I.datepickerInput}if(typeof aA!=="string"){throw new TypeError("datepickerInput() expects a string parameter")}I.datepickerInput=aA;return v};v.parseInputDate=function(aA){if(arguments.length===0){return I.parseInputDate}if(typeof aA!=="function"){throw new TypeError("parseInputDate() sholud be as function")}I.parseInputDate=aA;return v};v.disabledTimeIntervals=function(aA){if(arguments.length===0){return(I.disabledTimeIntervals?c.extend({},I.disabledTimeIntervals):I.disabledTimeIntervals)}if(!aA){I.disabledTimeIntervals=false;U();return v}if(!(aA instanceof Array)){throw new TypeError("disabledTimeIntervals() expects an array parameter")}I.disabledTimeIntervals=aA;U();return v};v.disabledHours=function(aA){if(arguments.length===0){return(I.disabledHours?c.extend({},I.disabledHours):I.disabledHours)}if(!aA){I.disabledHours=false;U();return v}if(!(aA instanceof Array)){throw new TypeError("disabledHours() expects an array parameter")}I.disabledHours=ay(aA);I.enabledHours=false;if(I.useCurrent&&!I.keepInvalid){var aB=0;while(!q(ar,"h")){ar.add(1,"h");if(aB===24){throw"Tried 24 times to find a valid date"}aB++}Z(ar)}U();return v};v.enabledHours=function(aA){if(arguments.length===0){return(I.enabledHours?c.extend({},I.enabledHours):I.enabledHours)}if(!aA){I.enabledHours=false;U();return v}if(!(aA instanceof Array)){throw new TypeError("enabledHours() expects an array parameter")}I.enabledHours=ay(aA);I.disabledHours=false;if(I.useCurrent&&!I.keepInvalid){var aB=0;while(!q(ar,"h")){ar.add(1,"h");if(aB===24){throw"Tried 24 times to find a valid date"}aB++}Z(ar)}U();return v};v.viewDate=function(aA){if(arguments.length===0){return am.clone()}if(!aA){am=ar.clone();return v}if(typeof aA!=="string"&&!d.isMoment(aA)&&!(aA instanceof Date)){throw new TypeError("viewDate() parameter must be one of [string, moment or Date]")}am=ac(aA);O();return v};if(B.is("input")){p=B}else{p=B.find(I.datepickerInput);if(p.length===0){p=B.find("input")}else{if(!p.is("input")){throw new Error('CSS class "'+I.datepickerInput+'" cannot be applied to non input element')}}}if(B.hasClass("input-group")){if(B.find(".datepickerbutton").length===0){at=B.find(".input-group-addon")}else{at=B.find(".datepickerbutton")}}if(!I.inline&&!p.is("input")){throw new Error("Could not initialize DateTimePicker without an input element")}ar=E();am=ar.clone();c.extend(true,I,e());v.options(I);af();A();if(p.prop("disabled")){v.disable()}if(p.is("input")&&p.val().trim().length!==0){Z(ac(p.val().trim()))}else{if(I.defaultDate&&p.attr("placeholder")===undefined){Z(I.defaultDate)}}if(I.inline){ab()}return v};c.fn.datetimepicker=function(e){return this.each(function(){var f=c(this);if(!f.data("DateTimePicker")){e=c.extend(true,{},c.fn.datetimepicker.defaults,e);f.data("DateTimePicker",b(f,e))}})};c.fn.datetimepicker.defaults={timeZone:"",format:false,dayViewHeaderFormat:"MMMM YYYY",extraFormats:false,stepping:1,minDate:false,maxDate:false,useCurrent:true,collapse:true,locale:d.locale(),defaultDate:false,disabledDates:false,enabledDates:false,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:false,sideBySide:false,daysOfWeekDisabled:false,calendarWeeks:false,viewMode:"days",toolbarPlacement:"default",showTodayButton:false,showClear:false,showClose:false,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:false,keepOpen:false,focusOnShow:true,inline:false,keepInvalid:false,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(!e){return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().subtract(7,"d"))}else{this.date(f.clone().add(this.stepping(),"m"))}},down:function(e){if(!e){this.show();return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().add(7,"d"))}else{this.date(f.clone().subtract(this.stepping(),"m"))}},"control up":function(e){if(!e){return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().subtract(1,"y"))}else{this.date(f.clone().add(1,"h"))}},"control down":function(e){if(!e){return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().add(1,"y"))}else{this.date(f.clone().subtract(1,"h"))}},left:function(e){if(!e){return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().subtract(1,"d"))}},right:function(e){if(!e){return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().add(1,"d"))}},pageUp:function(e){if(!e){return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().subtract(1,"M"))}},pageDown:function(e){if(!e){return}var f=this.date()||this.getMoment();if(e.find(".datepicker").is(":visible")){this.date(f.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){if(e.find(".timepicker").is(":visible")){e.find('.btn[data-action="togglePeriod"]').click()}},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:false,allowInputToggle:false,disabledTimeIntervals:false,disabledHours:false,enabledHours:false,viewDate:false};if(typeof module!=="undefined"){module.exports=c.fn.datetimepicker}}));(function(p){var L=true;var E=false;var K={down:1,up:0};map={};function y(O){var Q=O.path.lastIndexOf("/");var P=O.path.lastIndexOf("_/uploads");this.webPath=O.path;if(P>=0){this.webPath=O.path.substring(P+1)}this.realName=O.path.substring(Q+1,O.path.length);this.showName=O.name;this.url=contextPath+this.webPath}function f(O,P){this.name=O;this.path=P}function N(P,R,T,W,Z,aa,S,V,X,Y,U,O){if(P=="clear"){jQuery("#"+R).html("");jQuery("#"+R.substring(R.indexOf("_")+1)).val("")}else{if(P!=""){var Q=jQuery("#"+R);Q.empty();Q.append(u(P,R,T,W,Z,aa,S,V,X,Y,U,O))}else{jQuery("#"+R).html("");jQuery("#"+R.substring(R.indexOf("_")+1)).val("")}}}function t(P,R){var O=encodeURI(contextPath+"/portal/dynaform/document/fileDownload.action?filename="+encodeURI(P)+"&filepath="+R);var Q=window.open(O,"_blank");Q.location.href=O}function d(P,Q,S,V,Y,Z,R,U,W,X,T,O){N(P,Q,S,V,Y,Z,R,U,W,X,T,O);if(V!="false"){if(Z){dy_view_refresh(Q)}else{window.setTimeout("dy_refresh('"+Q.substring(Q.indexOf("_")+1)+"')",500)}}}function r(Q,T,R,S){var O=jQuery("#"+T+"pic"+Q);if(O.size()!=0){var P=encodeURI(encodeURI(contextPath+"/portal/upload/fileInfor.action?applicationid="+S+"&fileFullName="+R));jQuery.post(P,function(U){var V=O.attr("title");O.attr("title",V+U)})}}function z(P){var O="other";if(P==".pdf"){O="pdf"}else{if(P==".doc"||P==".docx"){O="word"}else{if(P==".xls"||P==".xlsx"){O="excel"}else{if(P==".txt"){O="txt"}else{if(P==".mp3"||P==".wav"||P==".wma"||P==".ra"||P==".rm"||P==".cd"){O="audio"}else{if(P==".avi"||P==".3gp"||P==".mkv"||P==".rmvb"||P==".mp4"||P==".mpg"||P==".swf"||P==".dvd"){O="video"}else{if(P==".ppt"||P==".pptx"){O="ppt"}else{if(P==".ipa"){O="ios"}else{if(P==".apk"){O="android"}else{if(P==".psd"){O="psd"}else{if(P==".ai"){O="ai"}else{if(P==".rar"||P==".zip"){O="rar"}else{if(P==".jpg"||P==".png"||P==".jpeg"||P==".gif"){O="img"}}}}}}}}}}}}}return O}function G(P){var Q=P.realName;var O=Q.substr(Q.lastIndexOf("."));switch(O){case".doc":case".docx":case".xls":case".xlsx":case".pdf":case".txt":case".rtf":case".et":case".ppt":case".pptx":case".dps":case".pot":case".pps":case".wps":case".html":case".htm":case".jpg":case".jpeg":case".png":case".gif":case".bmp":return true;default:return false}}function u(ar,ag,af,W,aa,an,X,ah,aq,ae,P,au){var Z=JSON.parse(ar);var Q="";Q+='<div class="hidepic" id="'+ag+'showFileDiv"style="background:transparent;text-align:left;left:0px;top:17px;"></div>';var ai="";var T="";for(var ak=0;ak<Z.length;ak++){var ad=new y(Z[ak]);if(Z[ak].path=="ERROR"){alert(Z[ak].name);continue}var V=false;var U="";var am=false;am=G(ad);var S=ad.showName.substring(0,ad.showName.lastIndexOf(".")).toLowerCase();var R=ad.showName.substring(ad.showName.lastIndexOf(".")).toLowerCase();U=z(R);am=(am||U=="img");var Y="#"+ag.substring(ag.indexOf("_")+1)+"_upload";var aj=p(Y).attr("limitnumber");if(Z.length==aj){p(Y).attr("disabled",true)}else{p(Y).attr("disabled",false)}var at=ad.showName;var R=at.substring(at.lastIndexOf(".")).toLowerCase();var ao=at.substring(0,at.lastIndexOf("."));var ac=false;var O=false;if(ak==0){ac=true}if(ak==Z.length-1){O=true}var ap={isPreView:am+"",_id:S,webPath:ad.webPath,showName:ad.showName,realName:ad.realName,url:ad.url,extname:R,imgCss:U,title:at,readonly:af,supportSorting:P,firstUp:ac,lastDown:O};var ab=template("fileUpload-tmpl",ap);ai+=ab}var al=jQuery("#"+ag).html(Q);al.find(".hidepic").html(ai);if(al.width()<400){al.find(".hidepic").find(".showOperate").show();al.find(".operate").addClass("small hide")}al.find(".item").each(function(av){p(this).find(".fieldName").bind("click",function(){var ay=p(this);var aw=ay.attr("isPreViewCount");if(aw==null||aw==""){aw=1}else{aw=parseInt(aw)}var aA=ay.attr("isPreView");var ax={webPath:ay.attr("data-webPath"),showName:ay.attr("data-showName"),realName:ay.attr("data-realName")};if(aA=="true"){var aB=false;DWREngine.setAsync(false);FormHelper.PreviewEnabled(function(aC){if(aC==true){aB=true}});DWREngine.setAsync(true);if(!aB){t(ax.showName,ax.webPath);return}var az=false;DWREngine.setAsync(false);if(!H(ay.attr("data-extName"))){if(ay.attr("data-extName").toUpperCase()==".PDF"){az=true}else{FormHelper.hasPdfFile(ax.webPath,ax.realName,function(aC){az=aC})}}else{az=true}DWREngine.setAsync(true);if(az=="true"||az==true){q(ax,ah,aq,ae)}else{if(aw<7){aw++;ay.attr("isPreViewCount",aw);OBPM.message.showInfo("预览文件正在转换中，请稍后");return}else{t(ax.showName,ax.webPath)}}}else{t(ax.showName,ax.webPath)}});p(this).find(".first_delete").bind("click",function(){var aw=p(this).parents(".item").siblings().find(".sub_deleteBox").removeClass("show animationsDown").addClass("hide");var ax=p(this).next(".sub_deleteBox");if(ax.hasClass("hide")){ax.removeClass("hide").addClass("show animationsDown")}else{ax.removeClass("show animationsDown").addClass("hide")}});p(this).find(".sub_cancel").bind("click",function(){var aw=p(this).parents(".sub_deleteBox");aw.removeClass("show animationsDown").addClass("hide")});p(this).find(".del").bind("click",function(aw){aw.stopPropagation();l(av,ag,W,aa,an,X,ah,aq,ae,P,au)});p(this).find(".fieldload").bind("click",function(ay){var ax=p(this).parents(".item").find(".fieldName");var aw={webPath:ax.attr("data-webPath"),showName:ax.attr("data-showName"),realName:ax.attr("data-realName")};t(aw.showName,aw.webPath)});p(this).find(".showOperate").bind("click",function(aw){p(this).parents(".item").siblings().find(".operate").removeClass("show").addClass("hide");var ax=p(this).parents(".item").find(".operate");if(ax.hasClass("hide")){ax.removeClass("hide").addClass("show")}else{ax.removeClass("show").addClass("hide")}});p(this).find(".sort>.down").bind("click",function(){var aw=K.down;M(aw,av,ag,"false",aa,an,X,ah,aq,ae,P,au)});p(this).find(".sort>.up").bind("click",function(){var aw=K.up;M(aw,av,ag,"false",aa,an,X,ah,aq,ae,P,au)})});p("body").bind("click",function(ax){var aw=p("body").find(".hidepic").find(".sub_deleteBox.show");var av=aw.prev(".first_delete");if(!p(ax.target).closest(".sub_deleteBox").length&&!p(ax.target).closest(".first_delete").length&&aw.size()>0){aw.removeClass("show animationsDown").addClass("hide");event.stopPropagation()}var ay=p("body").find(".hidepic").find(".operate.show");if(!p(ax.target).closest(".operate.small").length&&!p(ax.target).closest(".showOperate").length&&ay.size()>0){ay.removeClass("show").addClass("hide");event.stopPropagation()}})}function c(O,Q,P){O[Q]=O.splice(P,1,O[Q])[0];return O}function M(P,U,X,Q,T,ac,R,Y,ad,W,O,af){var S=contextPath+"/portal/dynaform/document/updateFileSorting.action";var aa=af;var ae=jQuery("#"+X.substring(X.indexOf("_")+1));oldObj=JSON.parse(ae.val());if(P){var V=c(oldObj,U,U+1)}else{var V=c(oldObj,U,U-1)}var Z=JSON.stringify(V);var ab={docId:p("#_docid").val(),formId:p("#formid").val(),applicationId:T,itemName:aa,value:Z};jQuery.ajax({type:"POST",async:false,url:S,dataType:"text",data:ab,success:function(ag){ag=JSON.parse(ag);if(ag.status){ae.val(JSON.stringify(ag.datas));d(JSON.stringify(ag.datas),X,false,Q,T,ac,R,Y,ad,W,O,af)}else{OBPM.message.showError("移动失败")}}})}function H(O){switch(O){case".jpg":case".jpeg":case".png":case".gif":case".bmp":return true;default:return false}}function q(R,V,O,Q){var T=O==true?"edit":"";var S={};if(typeof WebUser=="undefined"&&typeof parent.WebUser=="object"){S=parent.WebUser}else{S=WebUser}var P=encodeURI(contextPath+"/portal/share/common/preview/preview.jsp?action="+T+"&path="+R.webPath+"&name="+R.realName+"&showName="+R.showName+"&waterMark="+V+"&openWaterMark="+Q+"&curEditUserId="+S.id);var U=window.open(P,"_blank");U.location.href=P}function m(Q){var O=p("<pre>").hide().appendTo(document.body);p(O).html(Q);var P=O.width();O.remove();return P}function l(W,aa,P,V,ac,Q,Z,af,Y,O,ag){var T=[];var U="";var ab=jQuery("#"+aa.substring(aa.indexOf("_")+1)).val();var ad=jQuery("#"+aa.substring(aa.indexOf("_")+1));T=JSON.parse(ad.val());var X=T[W];var S="";if(X){S=T[W].path}T.splice(W,1);if(T.length>0){U=JSON.stringify(T)}ad.val(U);var ae=jQuery("#document_content").serialize();var R=ae.indexOf("applicationid")>0?encodeURI(encodeURI(contextPath+"/portal/upload/deleteOne.action?fileFullName="+S)):encodeURI(encodeURI(contextPath+"/portal/upload/deleteOne.action?fileFullName="+S+"&applicationid="+V));jQuery.ajax({type:"POST",async:false,url:R,dataType:"text",data:ae,success:function(ah){p("#"+aa).parents(".upload-box").find("input.uploadinput").removeAttr("disabled");d(U,aa,false,P,V,ac,Q,Z,af,Y,O,ag);U=""},error:function(ah){jQuery("#"+aa.substring(aa.indexOf("_")+1)).val(ab)}})}function e(P,R,U,V,X,Z,aa,ab){if(jQuery.trim(P)!=""&&P!="clear"){var T=JSON.parse(P);for(var W=0;W<T.length;W++){P=T[W].path;var Y="";var S=P.lastIndexOf("_/uploads");var O=P;if(S>=0){O=P.substring(S+1)}Y+='<div data-name="'+T[W].name+'" style="display: inline-block;position: relative;margin-right:5px">';Y+="<div>";Y+='<a data-index="'+W+'" id="'+R+'pic0" href="#" href="'+O+'"  rel="lightbox" target="_blank">';if(P.indexOf("pdf")==-1){Y+='<img  src="../../..'+O+'" width='+V+' data-original="'+contextPath+O+'" height='+U+' border="0"  />'}else{Y+="<font size=2 color=red>"+P.substring(P.lastIndexOf("/")+1)+"</font>"}Y+="</a>";Y+="</div>";Y+="<div class='upbtns-panel' style='overflow: hidden;'><span class='upbtn-cancel'>删除</span></div>";Y+="</div>";if(jQuery("#"+R).find("[data-name='"+T[W].name+"']").size()<=0){jQuery("#"+R).append(Y);var Q=jQuery("#"+R).find("[data-name='"+T[W].name+"']");if(!X){Q.on("mouseenter",function(){p(this).find(".upbtns-panel").stop().animate({height:30})});Q.on("mouseleave",function(){p(this).find(".upbtns-panel").stop().animate({height:0})})}Q.find("a").on("click",function(){var ac=p(this).attr("data-index");jQuery("#"+R).viewer("destroy").viewer({url:"data-original",navbar:false,shown:function(){p(this).viewer("view",ac)}}).viewer("show");return false});Q.find(".upbtn-cancel").click(function(){var ae=p(this).parents(".upload-pic-box").data("id");var ac=p(this).parent().parent().data("name");var ad=JSON.parse(p("#"+ae).val());var af=p(this).parent().parent();var ag=function(ah){if(ah==true){af.remove();var aj;for(var ai=0;ai<ad.length;ai++){if(ad[ai].name==ac){aj=ad[ai].path;ad.splice(ai,1)}}if(aj!=null){w(P)}p("#"+ae).val(JSON.stringify(ad))}};if(top.OBPM.message.showConfirm){top.OBPM.message.showConfirm("删除","你确定删除当前文件吗？此操作不可恢复！",ag)}else{OBPM.message.showConfirm("删除","你确定删除当前文件吗？此操作不可恢复！",ag)}});Q.find(".showhidefilepic").click(function(){F(this,P.substring(P.lastIndexOf("/")+1),O,X)});Q.find(".showhidefilepic").each(function(){r(0,R,P,aa)})}}}else{jQuery("#"+R).html("")}}function I(V,Q,R,T,P,S,U,O){e(V,Q,R,T,P,S,U,O);if(S!="false"){if(O){dy_view_refresh(Q)}else{window.setTimeout("dy_refresh('"+Q.substring(Q.indexOf("_")+1)+"')",500)}}}function C(P,O){OBPM.dialog.show({opener:window.parent.parent,width:1000,height:580,url:P,args:{},title:O,close:function(Q){}})}function J(O){var P=window.open(O,"_blank");P.location.href=O}function F(T,R,S,P){var Q="";var O=R.substring(R.lastIndexOf(".")).toLowerCase();if(O==".doc"||O==".docx"||O==".xls"||O==".xlsx"){Q=contextPath+"/portal/dynaform/document/doViewWordFile.action";OBPM.dialog.show({opener:window.parent.parent,width:1000,height:550,url:Q,args:{webPath:contextPath+S,readonly:P},title:R,close:function(U){}})}else{p(T).viewer({navbar:false}).viewer("show")}}function B(P){p("body").append('<div id="showImageDialog"></div>');var O=p("#showImageDialog");O.css({display:"none",position:"fixed","z-index":"999",top:"0px",right:"0px",bottom:"0px",left:"0px"});O.append('<div style="filter:alpha(opacity=70);-moz-opacity:0.7;-khtml-opacity: 0.7;position: fixed; z-index: 101; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; background-color: rgb(0, 0, 0);"></div>');O.append('<div id="imageClose" style="color: rgb(255, 255, 255); padding: 4px 10px ;  background-color: rgb(0, 0, 0);cursor: pointer;right: 0px;position: absolute;z-index:104;font-size:20px;">x</div>');var Q='<div style="position: absolute; width: 300%; height: 100%; left: -100%;">';Q+='<img style="position: absolute; z-index: 102; margin: auto; width: auto; top: 0px; right: 0px; bottom: 0px; left: 0px; display: block; cursor: pointer; max-width: 32%; max-height: 95%;" src="'+P+'"/>';Q+="</div>";O.append(Q);p("#imageClose").mouseover(function(R){p("#imageClose").css("background-color","rgb(55, 55, 55)")});p("#imageClose").mouseout(function(R){p("#imageClose").css("background-color","rgb(0, 0, 0)")});p("#imageClose").click(function(R){p("#showImageDialog").fadeOut(50,function(){O.remove()})});p("#showImageDialog").fadeIn(50)}function w(P){var O=contextPath+"/portal/upload/delete.action?fileFullName="+P;jQuery.ajax({type:"POST",async:false,url:encodeURI(O),dataType:"text",data:jQuery("#document_content").serialize(),success:function(Q){},error:function(Q){}})}function h(P,O,Q){OBPM.message.showConfirm("删除","你确定删除全部文件吗？此操作不可恢复！",function(R){if(R==true){var U="";if(P.val()!=""){var T=JSON.parse(P.val());for(var S=0;S<T.length;S++){U+=T[S].path+";"}if(U.length>1){U=U.substring(0,U.length-1)}}this.url=contextPath+"/portal/upload/delete.action?fileFullName="+U;U="";x(P,O,url)}})}function D(P,O,Q){this.url=contextPath+"/core/upload/delete.action?applicationid="+Q+"&fileFullName="+P.val();x(P,O,url)}function x(Q,P,O){var R=jQuery("#"+P).html();var S=jQuery("#"+P.substring(P.indexOf("_")+1)).val();jQuery("#"+P).html("");jQuery("#"+P.substring(P.indexOf("_")+1)).val("");jQuery("#"+P).parents(".upload-box").find("input.uploadinput").removeAttr("disabled");jQuery.ajax({type:"POST",async:false,url:encodeURI(url),dataType:"text",data:jQuery("#document_content").serialize(),success:function(T){},error:function(T){jQuery("#"+P).html(R);jQuery("#"+P.substring(P.indexOf("_")+1)).val(S)}})}function g(P,R,V,S,Q,T,W,X){var O=contextPath+"/core/upload/upload.jsp?path="+P+"&applicationid="+X;var U=jQuery("#"+R);OBPM.dialog.show({opener:window.parent.parent,width:800,height:450,url:O,args:{},title:"文件上传",close:function(Y){if(Y==null||Y==undefined||Y=="undefined"){}else{if(U!=null){U.val(Y)}return resutl}}})}function A(Y,Q,S,X,U,R,Z,aa,ab,W,ad,ac){hiddenDocumentFieldIncludeIframe();var P=[];var V=jQuery("#"+S);var T=V.val();if(T!=""){P=JSON.parse(V.val())}var O=contextPath+"/portal/H5/resource/component/upload/selectFile/selectFile.jsp?path="+Q;O=v(Q,S,X,U,R,Z,O);O+="&applicationid="+ab;O+="&limitNumber="+(W-P.length);O+="&fileType="+ad;O+="&customizeType="+ac;if(W-P.length>0){OBPM.dialog.show({width:700,height:450,url:O,args:{webPath:"aaaaaaaa",readonly:"222222"},title:Y,close:function(ae){showDocumentFieldIncludeIframe();var ai=jQuery("#"+S);var ak=b(ai,ae);var aj=[];if(E){var af=ae.split(";");if(ai&&ai.val()){aj=JSON.parse(ai.val())}for(var ah=0;ah<af.length;ah++){var al=af[ah].split(",");var ag=new f(al[0],al[1]);aj.push(ag)}}if(aj.length>0){ak=JSON.stringify(aj)}ai.val(ak);if(aa&&typeof(aa)=="function"){aa()}}})}else{alert("文件上传超出数量限制。")}}function s(S,P,R){var O=contextPath+"/portal/H5/resource/component/upload/selectFile/selectFile.jsp?path="+S+"&applicationid="+R;var Q=jQuery("#"+P);OBPM.dialog.show({opener:window.parent.parent,width:800,height:450,url:O,args:{},title:"upload",close:function(T){if(T==null||T==undefined||T=="undefined"||T=="clear"){Q.val("")}else{Q.val(T)}}})}function v(P,R,V,S,Q,W,O){var U=jQuery("#"+R);var T=jQuery("#"+V);if(S){O+="&allowedTypes="+S}if(Q){O+="&maximumSize="+Q}if(W){O+="&fileSaveMode="+W}else{O+="&fileSaveMode=00"}return O}function b(O,P){if(P==null||P=="undefined"){E=false;if(O&&O.val()){P=O.val()}else{P=""}}else{E=true}return P}p.fn.obpmUploadField=function(){return this.each(function(){var ay=jQuery(this);var aw=ay.attr("id");var ap=ay.attr("disabled");var U=(ap=="disabled");var X=ay.attr("callbakFunction");var aA=ay.attr("path");var aa=ay.attr("fileSaveMode");var av=ay.attr("application");var az=ay.attr("value");var Y=ay.attr("name");var au=ay.attr("maxsize");var ax=ay.attr("uploadList");var aj=ay.html();var ar=ay.attr("refreshOnChanged");var ac=ay.attr("readOnlyShowValOnly");var ah=ay.attr("uploadLabel");var aF=ay.attr("filelabel");var al=ay.attr("deleteLabel");var S=ay.attr("limitsize");var ae=ay.attr("limitNumber");var ab=ay.attr("tagName");var W=ay.attr("fileType");var aI=ay.attr("customizeType");var aB=ay.attr("limitType");var O=ay.attr("openWaterMark")=="true"?true:false;var ai=ay.attr("waterMark");var aG=ay.attr("previewEdit")=="true"?!U:false;var ao=ay.attr("supportSorting")=="true"?true:false;var Z;var Q=ay.attr("imgHeight");var af=ay.attr("imgWidth");var aD=ay.attr("subGridView");az=az?az:"";aD=(aD=="true");var am="";ay.siblings("div.upload-box").remove();var P=p("<div class='upload-box'></div>");var aH="";if(aB=="image"){var R="<div class='upload-pic-box' data-id='"+aw+"' style='";R+="'></div>";aH=p(R)}else{aH=p("<div style='display: block;' ></div>")}aj=aj?aj:"";az=az?az:"";if(aD){var ak="<div name='"+Y+"_gridView' value='"+az+"' fieldType='"+ab+"' style='display:none;'>"+aj+"</div>";var ad=p(ak);ad.appendTo(aH)}var at="<input type='hidden' name='"+Y+"' value='"+az+"' fieldType='"+ab+"' id='"+aw+"'/>";var T=p(at);if(ay.attr("moduleType")!="uploadFileRefresh"){ay.before(T)}if(!(U&&ac=="true")){var aC="";if(aB=="image"){aC="<div class='uploadinput' style='height:"+Q+"px; width:"+af+"px; display: table-cell; vertical-align: middle; text-align: center;";if(U){aC+="cursor: not-allowed;"}else{aC+="cursor: pointer;"}aC+="border: 3px dashed #e6e6e6;color: #e6e6e6;font-size: 24px;'><span class='glyphicon glyphicon-picture' aria-hidden='true'></span></div>"}else{aC+="<div class='btn btnAdd'><image src='../../H5/resource/component/upload/images/addTo.png'/>"+ah+"</div>"}var an=p(aC);if(!U){an.bind("click",function(){A(aF+ah,aA,aw,"_viewid",aB,au,aa,V,av,ae,W,aI)})}an.appendTo(aH)}if(aB=="image"){var aq="<div style='display: inline-block;position: relative;' id='"+ax+"' GridType='uploadFile'></div>";var ag=p(aq);ag.prependTo(aH)}else{var aq="<div style='display: block;'><div  id='"+ax+"' GridType='uploadFile'></div></div>";var ag=p(aq);P.append(ag)}aH.appendTo(P);if(ay.attr("moduleType")!="uploadFileRefresh"){ay.attr("moduleType","uploadFileRefresh").css("display","none")}ay.after(P);var V=function(){if(aB=="image"){if(jQuery("#"+aw).val()!=""){I(jQuery("#"+aw).val(),ax,Q,af,U,ar,av,aD)}}else{d(jQuery("#"+aw).val(),ax,U,ar,av,aD,ap,ai,aG,O,ao,Y)}},aE=function(){if(aB=="image"){e(jQuery("#"+aw).val(),ax,Q,af,U,ar,av,aD)}else{N(jQuery("#"+aw).val(),ax,U,ar,av,aD,ap,ai,aG,O,ao,Y)}};aE()})};p.fn.obpmViewImageUpload=function(){return this.each(function(){var V=jQuery(this);var Q=V.attr("imgw");var Z=V.attr("imgh");var U=V.attr("viewReadOnly");var P=V.attr("docId");var Y=V.attr("docFormid");var O=V.attr("url");var S=V.attr("fileName");U=(U=="true")?true:false;var W=Z/2;var X=jQuery("#obpm_subGridView").size()>0?true:false;var T="<div  class='bigImg' style='position:relative;width:"+Q+"; height:"+Z+"'>";if(U){T+="<img alt='"+S+"' border='0' src='"+O+"' width='"+Q+"' height='"+Z+"' />"}else{T+="<a ";if(!X){T+=" href=\"javaScript:viewDoc('"+P+"','"+Y+"')\""}T+=" title='"+S+"'>";T+="<img alt='"+S+"' border='0' src='"+O+"' width='"+Q+"' height='"+Z+"' />";T+="</a>"}T+="<div  class='smallIcon' style='display:none;position:absolute;right:0px;top:"+W+"px;z-index:100;'><a class='imgClick' href='"+O+"' target='blank'>";T+="<img alt='"+S+"' border='0' src='../../resource/images/picture_go.png' title='点击查看原图' /></a><div>";T+="</div>";var R=p(T);R.mouseover(function(aa){aa.stopPropagation();jQuery(this).find(".smallIcon").show()}).mouseout(function(aa){aa.stopPropagation();jQuery(this).find(".smallIcon").hide()});V.replaceWith(R)})}})(jQuery);(function(m){var d=true;var s=false;map={};function h(w){var v=w.lastIndexOf("/");var x=w.lastIndexOf("/");this.webPath=w;this.realName=w.substring(x+1,w.length);this.showName=w.substring(v+1,w.length);this.url=contextPath+this.webPath}function l(v,x,B,E,H){if(jQuery.trim(v)!=""){var G=map[x]?map[x]:"";if(jQuery.trim(G)!=""&&d&&s){v=G+";"+v}jQuery("#"+x.substring(x.indexOf("_")+1)).val(v);var D="";D+='<div class="hidepic" id="'+x+'showFileDiv"style="background:#fff;text-align:left;z-index:100000;"></div>';D+="</div>";var F=v.split(";");var z="";for(var A=0;A<F.length;A++){var C=new h(F[A]);z+='<a title="'+C.showName+'" href='+C.url+' target="_blank" style="margin-top:2px;white-space:nowrap;text-decoration: none" >'+C.showName+'</a>&nbsp;<a href=# type="deleteOne" index='+A+">";if(!B){z+='<img  border="0" src="../../resource/images/close.gif"/>'}z+="</a><br/>"}var w=jQuery("#"+x).html(D);w.find(".hidepic").html(z);w.find("a[type='deleteOne']").each(function(I){m(this).click(function(){f(I,x,B,E,H)})});var y;w.mouseover(function(){if(y){window.clearTimeout(y)}});D=""}else{jQuery("#"+x.substring(x.indexOf("_")+1)).val(v);jQuery("#"+x).html("")}d=true;s=false}function q(z,x,w,y,v){l(z,x,w,y,v);if(y){if(v){dy_view_refresh(x)}else{window.setTimeout("dy_refresh('"+x.substring(x.indexOf("_")+1)+"')",500)}}}function c(v,w,x,y,B,E,J){map[w+"index"]=0;map[w+"Imagewidth"]=y;map[w+"Imageheigh"]=x;if(jQuery.trim(v)!=""){var H=map[w]?map[w]:"";if(jQuery.trim(H)!=""&&d&&s){v=H+";"+v;map[w]=v}map[w]=v;jQuery("#"+w.substring(w.indexOf("_")+1)).val(v);var D="";D+='<div class="container1" id="'+w+'div" style="width:'+y+";height:"+x+'">';D+='<ul class="slider1 slider2 '+w+'idSlider2" id="'+w+'idSlider2">';var F=v.split(";");map[w+"maxindex"]=F.length;for(var A=0;A<F.length;A++){var C=new h(F[A]);D+='<li><a href="'+C.url+'" rel="lightbox" title="'+C.showName+'" target="_blank">';if(F[A].indexOf("pdf")==-1){D+='<img src="'+C.url+'" width='+y+" height="+x+' border="0"/>'}else{var I=F[A].lastIndexOf("/");var z=F[A].substr(I+1);D+="<font size=2 color=red>"+z+"</font>"}D+="</a></li>"}D+="</ul>";D+='<ul class="num">';D+='<li  title="" id="'+w+'showNumber" class="'+w+'showNumber" style="width:30">'+1+"/"+F.length+"</li>";D+='<li><img title="" type="previous" src="../../resource/images/previous.png" /></li>';D+='<li><img title="" type="next" src="../../resource/images/next.png"/></li><li>';if(!B){D+='<a href=# type="delete"><img  border="0" src="../../resource/images/close.gif"/></a>'}D+="</li></ul></div>";var G=jQuery("#"+w).html(D);G.find("a[type='delete']").click(function(){r(w,B,E,J)});G.find("img[type='previous']").click(function(){e(w)});G.find("img[type='next']").click(function(){u(w)})}else{jQuery("#"+w).html("");map[w]="";jQuery("#"+w.substring(w.indexOf("_")+1)).val(v)}d=true;s=false}function t(B,x,y,A,w,z,v){c(B,x,y,A,w,z,v);if(z){if(v){dy_view_refresh(x)}else{window.setTimeout("dy_refresh('"+x.substring(x.indexOf("_")+1)+"')",500)}}}function f(z,v,y,A,D){if(!y){if(confirm("你确定删除当前文件吗？此操作不可恢复！")){d=false;s=false;var B=jQuery("#"+v.substring(v.indexOf("_")+1)).val().split(";");var C="";for(var x=0;x<B.length;x++){if(x!=z){C+=B[x]+";"}}C=C.substring(0,C.lastIndexOf(";"));var w=jQuery("#"+v.substring(v.indexOf("_")+1)).val();jQuery("#"+v.substring(v.indexOf("_")+1)).val(C);jQuery.ajax({type:"POST",async:false,url:encodeURI(encodeURI(contextPath+"/portal/upload/fileManagerdelete.action")),dataType:"text",data:jQuery("#document_content").serialize(),success:function(E){q(C,v,y,A,D)},error:function(E){jQuery("#"+v.substring(v.indexOf("_")+1)).val(w)}});C=""}}}function r(w,B,C,D){if(!B){if(confirm("你确定删除当前文件吗？此操作不可恢复！")){d=false;s=false;var v="";var E=jQuery("#"+w.substring(w.indexOf("_")+1)).val().split(";");for(var A=0;A<E.length;A++){if(A!=map[w+"index"]){v+=E[A]+";"}}v=v.substring(0,v.lastIndexOf(";"));var x=jQuery("#"+w.substring(w.indexOf("_")+1)).val();jQuery("#"+w.substring(w.indexOf("_")+1)).val(v);var y=map[w+"Imageheigh"];var z=map[w+"Imagewidth"];jQuery.ajax({type:"POST",async:false,url:encodeURI(encodeURI(contextPath+"/portal/upload/fileManagerdelete.action")),dataType:"text",data:jQuery("#document_content").serialize(),success:function(F){t(v,w,y,z,B,C,D)},error:function(F){jQuery("#"+id.substring(id.indexOf("_")+1)).val(x)}})}}}function e(v){if(map[v+"index"]>0){map[v+"index"]--}b(map[v+"index"],v);jQuery("."+v+"showNumber").html((map[v+"index"]+1)+"/"+map[v+"maxindex"])}function u(v){if(map[v+"index"]<map[v+"maxindex"]-1){map[v+"index"]++}b(map[v+"index"],v);jQuery("."+v+"showNumber").html((map[v+"index"]+1)+"/"+map[v+"maxindex"])}function b(w,v){jQuery("."+v+"idSlider2").stop(true,false).animate({left:-(map[v+"Imagewidth"]*w)},800)}function g(x,w){if(confirm("你确定删除全部文件吗？此操作不可恢复！")){var v=jQuery("#"+w).html();var y=jQuery("#"+w.substring(w.indexOf("_")+1)).val();jQuery("#"+w).html("");jQuery("#"+w.substring(w.indexOf("_")+1)).val("");jQuery.ajax({type:"POST",async:false,url:encodeURI(encodeURI(contextPath+"/portal/upload/fileManagerdelete.action")),dataType:"text",data:jQuery("#document_content").serialize(),success:function(z){},error:function(z){jQuery("#"+w).html(v);jQuery("#"+w.substring(w.indexOf("_")+1)).val(y)}});x.value="";map[w]="";isReUpload=true}}function p(w,y,B,z,x,C,D,E){var v=contextPath+"/portal/share/component/filemanager/filemanager.jsp?path="+w;var A=document.getElementById(y);if(z){v+="&allowedTypes="+z}if(x){v+="&maximumSize="+x}if(C){v+="&fileSaveMode="+C}else{v+="&fileSaveMode="+0}v+="&applicationid="+E;hiddenDocumentFieldIncludeIframe();showfrontframe({title:"File Manager",url:v,w:1000,h:600,callback:function(F){showDocumentFieldIncludeIframe();var G=F;if(F==null||F=="undefined"){if(A&&A.value){s=false;G=A.value}else{G=""}}else{s=true}A.value=G;if(D&&typeof(D)=="function"){D()}}})}m.fn.obpmFileManager=function(){return this.each(function(){var J=jQuery(this);var G=J.attr("id");var R=J.attr("name");var A=J.attr("fieldType");var I=J.attr("value");var P=J.attr("maxsize");var x=J.attr("limitType");var w=J.attr("disabled");var F=J.attr("path");var M=J.attr("fileSaveMode");var z=J.attr("application");var E=(w=="disabled");var B=J.attr("imgWidth");var N=J.attr("imgHeight");var v=J.attr("uploadList");var Q=J.attr("refreshOnChanged");var y=J.attr("fileManagerLabel");var K=J.attr("fileRemoveLabel");var O=J.attr("subGridView");O=(O=="true");var D="<table><tr>";if(x=="file"){D+="<td style='border:0'>";D+="<div id='"+v+"' GridType='fileManager'></div>";D+="</td>"}D+="<td style='border:0'>";if(x=="image"){D+="<div id='"+v+"' GridType='fileManager'></div>"}D+="<input type='hidden' id='"+G+"' name='"+R+"' fieldType='"+A+"' value='"+I+"' />";D+="<input type='button' value='"+y+"' name='btnFileManager' class='btnFileManager'";if(w&&w!=""){D+=" disabled='"+w+"' "}var C=function(){if(x=="file"){q(document.getElementById(G).value,v,E,Q,O)}else{t(document.getElementById(G).value,v,N,B,E,Q,O)}},L=function(){if(x=="file"){l(document.getElementById(G).value,v,E,Q,O)}else{c(document.getElementById(G).value,v,N,B,E,Q,O)}};D+="/>";D+="<input class='FMdeleteFile' type='button' value='"+K+"' name='btnDelete'";if(w&&w!=""){D+=" disabled='"+w+"' "}D+="/>";D+="</td>";D+="</tr></table>";var H=m(D);H.find(".btnFileManager").click(function(){p(F,G,"_viewid",x,P,M,C,z)}).end().find(".FMdeleteFile").click(function(){g(document.getElementById(G),v)});J.replaceWith(H);L()})};m.fn.obpmViewFileManager=function(){return this.each(function(){var B=jQuery(this);var w=B.attr("imgw");var E=B.attr("imgh");var A=B.attr("str");var v=B.attr("uploadListId");var z=B.attr("viewReadOnly");map[v+"index"]=0;map[v+"maxindex"]=A;map[v+"Imagewidth"]=w;z=(z=="true")?true:false;var C=E/2;var D=jQuery("#obpm_subGridView").size()>0?true:false;var y="";y+="<div class='container1' id='"+v+"div' style='width:"+w+"; height:117px;'>";y+="<ul class='slider1 slider2 "+v+"idSlider2' id='"+v+"idSlider2'>";B.find("[subType='aField']").each(function(){var H=jQuery(this);var G=H.attr("docId");var I=H.attr("docFormid");var F=H.attr("url");var J=H.attr("fileName");y+="<li style='position:relative;' class='imgList'>";if(z){y+="<img border='0' alt='"+J+"'";y+=" src='"+F+"' width='"+w+"' height='"+E+"' />"}else{y+="<a";if(!D){y+=" href='javaScript:viewDoc(\""+G+'","'+I+"\")'"}y+=" title='"+J+"'><img border='0' alt='"+J+"'";y+=" src='"+F+"' width='"+w+"' height='"+E+"' /></a>"}y+="<div class='showImgIcon' style='display:none;position:absolute;right:0px;top:"+C+"px;z-index:100;'><a cancelBubble = true;  class='imgClick' href='"+F+"' target='blank'><img alt='"+J+"' border='0' src='";y+="../../resource/images/picture_go.png' title='点击查看原图' /></a><div></li>"});y+="</ul>";y+="<ul class='num'>";y+="<li  title='' id='"+v+"showNumber' class='"+v+"showNumber' style='width:30;'>"+1+"/"+A+"</li>";y+=" <li><img title='' type='previous' src='../../resource/images/previous.png' /></li>";y+=" <li><img title='' type='next' src='../../resource/images/next.png'/></li>";y+="</ul></div>";var x=m(y);x.find(".imgList").mouseover(function(F){F.stopPropagation();jQuery(this).find(".showImgIcon").show()}).mouseout(function(F){F.stopPropagation();jQuery(this).find(".showImgIcon").hide()});x.find("img[type='previous']").click(function(F){F.stopPropagation();e(v)});x.find("img[type='next']").click(function(F){F.stopPropagation();u(v)});B.replaceWith(x)})}})(jQuery);
/*!
 * Viewer v0.5.1
 * https://github.com/fengyuanchen/viewer
 *
 * Copyright (c) 2015-2016 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2016-03-11T07:57:59.486Z
 */
;!function(b){"function"==typeof define&&define.amd?define("viewer",["jquery"],b):b("object"==typeof exports?require("jquery"):jQuery)}(function(aW){function aL(b){return"string"==typeof b}function a1(b){return"number"==typeof b&&!isNaN(b)}function aM(b){return"undefined"==typeof b}function aR(c,b){var d=[];return a1(b)&&d.push(b),d.slice.apply(c,d)}function aQ(c,b){var d=aR(arguments,2);return function(){return c.apply(b,d.concat(aR(arguments)))}}function a5(c){var b=[],d=c.rotate,f=c.scaleX,e=c.scaleY;return a1(d)&&b.push("rotate("+d+"deg)"),a1(f)&&a1(e)&&b.push("scale("+f+","+e+")"),b.length?b.join(" "):"none"}function aX(b){return b.offsetWidth}function aN(b){return aL(b)?b.replace(/^.*\//,"").replace(/[\?&#].*$/,""):""}function aT(c,b){var d;return c.naturalWidth?b(c.naturalWidth,c.naturalHeight):(d=document.createElement("img"),d.onload=function(){b(this.width,this.height)},void (d.src=c.src))}function a2(b){var d=b.length,c=0,f=0;return d&&(aW.each(b,function(g,e){c+=e.pageX,f+=e.pageY}),c/=d,f/=d),{pageX:c,pageY:f}}function a3(b){switch(b){case 2:return aH;case 3:return aD;case 4:return az}}function aK(b,c){this.$element=aW(b),this.options=aW.extend({},aK.DEFAULTS,aW.isPlainObject(c)&&c),this.isImg=!1,this.isBuilt=!1,this.isShown=!1,this.isViewed=!1,this.isFulled=!1,this.isPlayed=!1,this.wheeling=!1,this.playing=!1,this.fading=!1,this.tooltiping=!1,this.transitioning=!1,this.action=!1,this.target=!1,this.timeout=!1,this.index=0,this.length=0,this.init()}var aS=aW(window),aJ=aW(document),aZ="viewer",aY=document.createElement(aZ),aI="viewer-fixed",aP="viewer-open",a4="viewer-show",aG="viewer-hide",aH="viewer-hide-xs-down",aD="viewer-hide-sm-down",az="viewer-hide-md-down",aw="viewer-fade",aF="viewer-in",ac="viewer-move",aU="viewer-active",at="viewer-invisible",ad="viewer-transition",ah="viewer-fullscreen",al="viewer-fullscreen-exit",af="viewer-close",ax="img",ai="mousedown touchstart pointerdown MSPointerDown",ay="mousemove touchmove pointermove MSPointerMove",ap="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",aO="wheel mousewheel DOMMouseScroll",aj="transitionend",ao="load."+aZ,ae="keydown."+aZ,aB="click."+aZ,a6="resize."+aZ,aV="build."+aZ,aA="built."+aZ,au="show."+aZ,ag="shown."+aZ,an="hide."+aZ,am="hidden."+aZ,ab="view."+aZ,aq="viewed."+aZ,ak="undefined"!=typeof aY.style.transition,av=Math.round,ar=Math.sqrt,aE=Math.abs,aa=Math.min,a0=Math.max,aC=Number;aK.prototype={constructor:aK,init:function(){var c=this.options,f=this.$element,d=f.is(ax),h=d?f:f.find(ax),g=h.length,b=aW.proxy(this.ready,this);g&&(aW.isFunction(c.build)&&f.one(aV,c.build),this.trigger(aV).isDefaultPrevented()||(ak||(c.transition=!1),this.isImg=d,this.length=g,this.count=0,this.$images=h,this.$body=aW("body"),c.inline?(f.one(aA,aW.proxy(function(){this.view()},this)),h.each(function(){this.complete?b():aW(this).one(ao,b)})):f.on(aB,aW.proxy(this.start,this))))},ready:function(){this.count++,this.count===this.length&&this.build()},build:function(){var c,l,f,p,m,b,d=this.options,g=this.$element;this.isBuilt||(this.$parent=c=g.parent(),this.$viewer=l=aW(aK.TEMPLATE),this.$canvas=l.find(".viewer-canvas"),this.$footer=l.find(".viewer-footer"),this.$title=f=l.find(".viewer-title"),this.$toolbar=p=l.find(".viewer-toolbar"),this.$navbar=m=l.find(".viewer-navbar"),this.$button=b=l.find(".viewer-button"),this.$tooltip=l.find(".viewer-tooltip"),this.$player=l.find(".viewer-player"),this.$list=l.find(".viewer-list"),f.addClass(d.title?a3(d.title):aG),p.addClass(d.toolbar?a3(d.toolbar):aG),p.find("li[class*=zoom]").toggleClass(at,!d.zoomable),p.find("li[class*=flip]").toggleClass(at,!d.scalable),d.rotatable||p.find("li[class*=rotate]").addClass(at).appendTo(p),m.addClass(d.navbar?a3(d.navbar):aG),b.toggleClass(aG,!d.button),d.inline?(b.addClass(ah),l.css("z-index",d.zIndexInline),"static"===c.css("position")&&c.css("position","relative")):(b.addClass(af),l.css("z-index",d.zIndex).addClass([aI,aw,aG].join(" "))),g.after(l),d.inline&&(this.render(),this.bind(),this.isShown=!0),this.isBuilt=!0,aW.isFunction(d.built)&&g.one(aA,d.built),this.trigger(aA))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$viewer.remove())},bind:function(){var b=this.options,c=this.$element;aW.isFunction(b.view)&&c.on(ab,b.view),aW.isFunction(b.viewed)&&c.on(aq,b.viewed),this.$viewer.on(aB,aW.proxy(this.click,this)).on(aO,aW.proxy(this.wheel,this)),this.$canvas.on(ai,aW.proxy(this.mousedown,this)),aJ.on(ay,this._mousemove=aQ(this.mousemove,this)).on(ap,this._mouseup=aQ(this.mouseup,this)).on(ae,this._keydown=aQ(this.keydown,this)),aS.on(a6,this._resize=aQ(this.resize,this))},unbind:function(){var b=this.options,c=this.$element;aW.isFunction(b.view)&&c.off(ab,b.view),aW.isFunction(b.viewed)&&c.off(aq,b.viewed),this.$viewer.off(aB,this.click).off(aO,this.wheel),this.$canvas.off(ai,this.mousedown),aJ.off(ay,this._mousemove).off(ap,this._mouseup).off(ae,this._keydown),aS.off(a6,this._resize)},render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){this.container={width:aS.innerWidth(),height:aS.innerHeight()}},initViewer:function(){var b,d=this.options,c=this.$parent;d.inline&&(this.parent=b={width:a0(c.width(),d.minWidth),height:a0(c.height(),d.minHeight)}),!this.isFulled&&b||(b=this.container),this.viewer=aW.extend({},b)},renderViewer:function(){this.options.inline&&!this.isFulled&&this.$viewer.css(this.viewer)},initList:function(){var c=this.options,b=this.$element,f=this.$list,d=[];this.$images.each(function(l){var m=this.src,e=this.alt||aN(m),g=c.url;m&&(aL(g)?g=this.getAttribute(g):aW.isFunction(g)&&(g=g.call(this,this)),d.push('<li><img src="'+m+'" data-action="view" data-index="'+l+'" data-original-url="'+(g||m)+'" alt="'+e+'"></li>'))}),f.html(d.join("")).find(ax).one(ao,{filled:!0},aW.proxy(this.loadImage,this)),this.$items=f.children(),c.transition&&b.one(aq,function(){f.addClass(ad)})},renderList:function(c){var b=c||this.index,f=this.$items.eq(b).width(),d=f+1;this.$list.css({width:d*this.length,marginLeft:(this.viewer.width-f)/2-d*b})},resetList:function(){this.$list.empty().removeClass(ad).css("margin-left",0)},initImage:function(c){var l=this.options,f=this.$image,p=this.viewer,m=this.$footer.height(),b=p.width,d=a0(p.height-m,m),g=this.image||{};aT(f[0],aW.proxy(function(q,w){var t,e,r=q/w,v=b,h=d;d*r>b?h=b/r:v=d*r,v=aa(0.9*v,q),h=aa(0.9*h,w),e={naturalWidth:q,naturalHeight:w,aspectRatio:r,ratio:v/q,width:v,height:h,left:(b-v)/2,top:(d-h)/2},t=aW.extend({},e),l.rotatable&&(e.rotate=g.rotate||0,t.rotate=0),l.scalable&&(e.scaleX=g.scaleX||1,e.scaleY=g.scaleY||1,t.scaleX=1,t.scaleY=1),this.image=e,this.initialImage=t,aW.isFunction(c)&&c()},this))},renderImage:function(b){var d=this.image,c=this.$image;c.css({width:d.width,height:d.height,marginLeft:d.left,marginTop:d.top,transform:a5(d)}),aW.isFunction(b)&&(this.transitioning?c.one(aj,b):b())},resetImage:function(){this.$image&&(this.$image.remove(),this.$image=null)},start:function(b){var c=b.target;aW(c).is("img")&&(this.target=c,this.show())},click:function(b){var d=aW(b.target),c=d.data("action"),f=this.image;switch(c){case"mix":this.isPlayed?this.stop():this.options.inline?this.isFulled?this.exit():this.full():this.hide();break;case"view":this.view(d.data("index"));break;case"zoom-in":this.zoom(0.1,!0);break;case"zoom-out":this.zoom(-0.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev();break;case"play":this.play();break;case"next":this.next();break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-f.scaleX||-1);break;case"flip-vertical":this.scaleY(-f.scaleY||-1);break;default:this.isPlayed&&this.stop()}return false},load:function(){var b=this.options,d=this.viewer,c=this.$image;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),c.removeClass(at).css("cssText","width:0;height:0;margin-left:"+d.width/2+"px;margin-top:"+d.height/2+"px;max-width:none!important;visibility:visible;"),this.initImage(aW.proxy(function(){c.toggleClass(ad,b.transition).toggleClass(ac,b.movable),this.renderImage(aW.proxy(function(){this.isViewed=!0,this.trigger(aq)},this))},this))},loadImage:function(c){var g=c.target,f=aW(g),m=f.parent(),l=m.width(),b=m.height(),d=c.data&&c.data.filled;aT(g,function(p,h){var s=p/h,u=l,q=b;b*s>l?d?u=b*s:q=l/s:d?q=l/s:u=b*s,f.css({width:u,height:q,marginLeft:(l-u)/2,marginTop:(b-q)/2})})},resize:function(){this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.isViewed&&this.initImage(aW.proxy(function(){this.renderImage()},this)),this.isPlayed&&this.$player.find(ax).one(ao,aW.proxy(this.loadImage,this)).trigger(ao)},wheel:function(b){var d=b.originalEvent||b,c=aC(this.options.zoomRatio)||0.1,f=1;this.isViewed&&(b.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(aW.proxy(function(){this.wheeling=!1},this),50),d.deltaY?f=d.deltaY>0?1:-1:d.wheelDelta?f=-d.wheelDelta/120:d.detail&&(f=d.detail>0?1:-1),this.zoom(-f*c,!0,b)))},keydown:function(c){var b=this.options,d=c.which;if(this.isFulled&&b.keyboard){switch(d){case 27:this.isPlayed?this.stop():b.inline?this.isFulled&&this.exit():this.hide();break;case 32:this.isPlayed&&this.stop();break;case 37:this.prev();break;case 38:c.preventDefault(),this.zoom(b.zoomRatio,!0);break;case 39:this.next();break;case 40:c.preventDefault(),this.zoom(-b.zoomRatio,!0);break;case 48:case 49:(c.ctrlKey||c.shiftKey)&&(c.preventDefault(),this.toggle())}}},mousedown:function(d){var c,g=this.options,f=d.originalEvent,l=f&&f.touches,h=d,b=g.movable?"move":!1;if(this.isViewed){if(l){if(c=l.length,c>1){if(!g.zoomable||2!==c){return}h=l[1],this.startX2=h.pageX,this.startY2=h.pageY,b="zoom"}else{this.isSwitchable()&&(b="switch")}h=l[0]}b&&(d.preventDefault(),this.action=b,this.startX=h.pageX||f&&f.pageX,this.startY=h.pageY||f&&f.pageY)}},mousemove:function(d){var c,l=this.options,g=this.action,p=this.$image,m=d.originalEvent,b=m&&m.touches,f=d;if(this.isViewed){if(b){if(c=b.length,c>1){if(!l.zoomable||2!==c){return}f=b[1],this.endX2=f.pageX,this.endY2=f.pageY}f=b[0]}g&&(d.preventDefault(),"move"===g&&l.transition&&p.hasClass(ad)&&p.removeClass(ad),this.endX=f.pageX||m&&m.pageX,this.endY=f.pageY||m&&m.pageY,this.change(d))}},mouseup:function(c){var b=this.action;b&&(c.preventDefault(),"move"===b&&this.options.transition&&this.$image.addClass(ad),this.action=!1)},show:function(){var b,c=this.options;c.inline||this.transitioning||(this.isBuilt||this.build(),aW.isFunction(c.show)&&this.$element.one(au,c.show),this.trigger(au).isDefaultPrevented()||(this.$body.addClass(aP),b=this.$viewer.removeClass(aG),this.$element.one(ag,aW.proxy(function(){this.view(this.target?this.$images.index(this.target):this.index),this.target=!1},this)),c.transition?(this.transitioning=!0,b.addClass(ad),aX(b[0]),b.one(aj,aW.proxy(this.shown,this)).addClass(aF)):(b.addClass(aF),this.shown())))},hide:function(){var b=this.options,c=this.$viewer;b.inline||this.transitioning||!this.isShown||(aW.isFunction(b.hide)&&this.$element.one(an,b.hide),this.trigger(an).isDefaultPrevented()||(this.isViewed&&b.transition?(this.transitioning=!0,this.$image.one(aj,aW.proxy(function(){c.one(aj,aW.proxy(this.hidden,this)).removeClass(aF)},this)),this.zoomTo(0,!1,!1,!0)):(c.removeClass(aF),this.hidden())))},view:function(c){var g,f,m,l,b,d=this.$title;c=Number(c)||0,!this.isShown||this.isPlayed||0>c||c>=this.length||this.isViewed&&c===this.index||this.trigger(ab).isDefaultPrevented()||(f=this.$items.eq(c),m=f.find(ax),l=m.data("originalUrl"),b=m.attr("alt"),this.$image=g=aW('<img src="'+l+'" alt="'+b+'">'),this.isViewed&&this.$items.eq(this.index).removeClass(aU),f.addClass(aU),this.isViewed=!1,this.index=c,this.image=null,this.$canvas.html(g.addClass(at)),this.renderList(),d.empty(),this.$element.one(aq,aW.proxy(function(){var p=this.image,h=p.naturalWidth,q=p.naturalHeight;d.html(b+" ("+h+" &times; "+q+")")},this)),g[0].complete?this.load():(g.one(ao,aW.proxy(this.load,this)),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(aW.proxy(function(){g.removeClass(at),this.timeout=!1},this),1000)))},prev:function(){this.view(a0(this.index-1,0))},next:function(){this.view(aa(this.index+1,this.length-1))},move:function(c,b){var d=this.image;this.moveTo(aM(c)?c:d.left+aC(c),aM(b)?b:d.top+aC(b))},moveTo:function(c,b){var e=this.image,d=!1;aM(b)&&(b=c),c=aC(c),b=aC(b),this.isViewed&&!this.isPlayed&&this.options.movable&&(a1(c)&&(e.left=c,d=!0),a1(b)&&(e.top=b,d=!0),d&&this.renderImage())},zoom:function(c,b,f){var d=this.image;c=aC(c),c=0>c?1/(1-c):1+c,this.zoomTo(d.width*c/d.naturalWidth,b,f)},zoomTo:function(w,E,F,e){var d,B,x,b,q,A=this.options,D=0.01,p=100,C=this.image,z=C.width,y=C.height;w=a0(0,w),a1(w)&&this.isViewed&&!this.isPlayed&&(e||A.zoomable)&&(e||(D=a0(D,A.minZoomRatio),p=aa(p,A.maxZoomRatio),w=aa(a0(w,D),p)),w>0.95&&1.05>w&&(w=1),B=C.naturalWidth*w,x=C.naturalHeight*w,F&&(d=F.originalEvent)?(b=this.$viewer.offset(),q=d.touches?a2(d.touches):{pageX:F.pageX||d.pageX||0,pageY:F.pageY||d.pageY||0},C.left-=(B-z)*((q.pageX-b.left-C.left)/z),C.top-=(x-y)*((q.pageY-b.top-C.top)/y)):(C.left-=(B-z)/2,C.top-=(x-y)/2),C.width=B,C.height=x,C.ratio=w,this.renderImage(),E&&this.tooltip())},rotate:function(b){this.rotateTo((this.image.rotate||0)+aC(b))},rotateTo:function(c){var b=this.image;c=aC(c),a1(c)&&this.isViewed&&!this.isPlayed&&this.options.rotatable&&(b.rotate=c,this.renderImage())},scale:function(c,b){var e=this.image,d=!1;aM(b)&&(b=c),c=aC(c),b=aC(b),this.isViewed&&!this.isPlayed&&this.options.scalable&&(a1(c)&&(e.scaleX=c,d=!0),a1(b)&&(e.scaleY=b,d=!0),d&&this.renderImage())},scaleX:function(b){this.scale(b,this.image.scaleY)},scaleY:function(b){this.scale(this.image.scaleX,b)},play:function(){var c,e=this.options,l=this.$player,g=aW.proxy(this.loadImage,this),b=[],d=0,f=0;this.isShown&&!this.isPlayed&&(e.fullscreen&&this.requestFullscreen(),this.isPlayed=!0,l.addClass(a4),this.$items.each(function(m){var p=aW(this),h=p.find(ax),q=aW('<img src="'+h.data("originalUrl")+'" alt="'+h.attr("alt")+'">');d++,q.addClass(aw).toggleClass(ad,e.transition),p.hasClass(aU)&&(q.addClass(aF),f=m),b.push(q),q.one(ao,{filled:!1},g),l.append(q)}),a1(e.interval)&&e.interval>0&&(c=aW.proxy(function(){this.playing=setTimeout(function(){b[f].removeClass(aF),f++,f=d>f?f:0,b[f].addClass(aF),c()},e.interval)},this),d>1&&c()))},stop:function(){this.isPlayed&&(this.options.fullscreen&&this.exitFullscreen(),this.isPlayed=!1,clearTimeout(this.playing),this.$player.removeClass(a4).empty())},full:function(){var b=this.options,d=this.$image,c=this.$list;this.isShown&&!this.isPlayed&&!this.isFulled&&b.inline&&(this.isFulled=!0,this.$body.addClass(aP),this.$button.addClass(al),b.transition&&(d.removeClass(ad),c.removeClass(ad)),this.$viewer.addClass(aI).removeAttr("style").css("z-index",b.zIndex),this.initContainer(),this.viewer=aW.extend({},this.container),this.renderList(),this.initImage(aW.proxy(function(){this.renderImage(function(){b.transition&&setTimeout(function(){d.addClass(ad),c.addClass(ad)},0)})},this)))},exit:function(){var b=this.options,d=this.$image,c=this.$list;this.isFulled&&(this.isFulled=!1,this.$body.removeClass(aP),this.$button.removeClass(al),b.transition&&(d.removeClass(ad),c.removeClass(ad)),this.$viewer.removeClass(aI).css("z-index",b.zIndexInline),this.viewer=aW.extend({},this.parent),this.renderViewer(),this.renderList(),this.initImage(aW.proxy(function(){this.renderImage(function(){b.transition&&setTimeout(function(){d.addClass(ad),c.addClass(ad)},0)})},this)))},tooltip:function(){var b=this.options,d=this.$tooltip,c=this.image,f=[a4,aw,ad].join(" ");this.isViewed&&!this.isPlayed&&b.tooltip&&(d.text(av(100*c.ratio)+"%"),this.tooltiping?clearTimeout(this.tooltiping):b.transition?(this.fading&&d.trigger(aj),d.addClass(f),aX(d[0]),d.addClass(aF)):d.addClass(a4),this.tooltiping=setTimeout(aW.proxy(function(){b.transition?(d.one(aj,aW.proxy(function(){d.removeClass(f),this.fading=!1},this)).removeClass(aF),this.fading=!0):d.removeClass(a4),this.tooltiping=!1},this),1000))},toggle:function(){1===this.image.ratio?this.zoomTo(this.initialImage.ratio,!0):this.zoomTo(1,!0)},reset:function(){this.isViewed&&!this.isPlayed&&(this.image=aW.extend({},this.initialImage),this.renderImage())},update:function(){var b,d=this.$element,c=this.$images,f=[];if(this.isImg){if(!d.parent().length){return this.destroy()}}else{this.$images=c=d.find(ax),this.length=c.length}this.isBuilt&&(aW.each(this.$items,function(g){var h=aW(this).find("img")[0],l=c[g];l?l.src!==h.src&&f.push(g):f.push(g)}),this.$list.width("auto"),this.initList(),this.isShown&&(this.length?this.isViewed&&(b=aW.inArray(this.index,f),b>=0?(this.isViewed=!1,this.view(a0(this.index-(b+1),0))):this.$items.eq(this.index).addClass(aU)):(this.$image=null,this.isViewed=!1,this.index=0,this.image=null,this.$canvas.empty(),this.$title.empty())))},destroy:function(){var b=this.$element;this.options.inline?this.unbind():(this.isShown&&this.unbind(),b.off(aB,this.start)),this.unbuild(),b.removeData(aZ)},trigger:function(b,d){var c=aW.Event(b,d);return this.$element.trigger(c),c},shown:function(){var b=this.options;this.transitioning=!1,this.isFulled=!0,this.isShown=!0,this.isVisible=!0,this.render(),this.bind(),aW.isFunction(b.shown)&&this.$element.one(ag,b.shown),this.trigger(ag)},hidden:function(){var b=this.options;this.transitioning=!1,this.isViewed=!1,this.isFulled=!1,this.isShown=!1,this.isVisible=!1,this.unbind(),this.$body.removeClass(aP),this.$viewer.addClass(aG),this.resetList(),this.resetImage(),aW.isFunction(b.hidden)&&this.$element.one(am,b.hidden),this.trigger(am)},requestFullscreen:function(){var b=document.documentElement;!this.isFulled||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},exitFullscreen:function(){this.isFulled&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())},change:function(c){var b=this.endX-this.startX,d=this.endY-this.startY;switch(this.action){case"move":this.move(b,d);break;case"zoom":this.zoom(function(g,f,l,h){var p=ar(g*g+f*f),m=ar(l*l+h*h);return(m-p)/p}(aE(this.startX-this.startX2),aE(this.startY-this.startY2),aE(this.endX-this.endX2),aE(this.endY-this.endY2)),!1,c),this.startX2=this.endX2,this.startY2=this.endY2;break;case"switch":this.action="switched",aE(b)>aE(d)&&(b>1?this.prev():-1>b&&this.next())}this.startX=this.endX,this.startY=this.endY},isSwitchable:function(){var c=this.image,b=this.viewer;return c.left>=0&&c.top>=0&&c.width<=b.width&&c.height<=b.height}},aK.DEFAULTS={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5000,minWidth:200,minHeight:100,zoomRatio:0.1,minZoomRatio:0.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null},aK.setDefaults=function(b){aW.extend(aK.DEFAULTS,b)},aK.TEMPLATE='<div class="viewer-container"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><ul class="viewer-toolbar"><li class="viewer-zoom-in" data-action="zoom-in"></li><li class="viewer-zoom-out" data-action="zoom-out"></li><li class="viewer-one-to-one" data-action="one-to-one"></li><li class="viewer-reset" data-action="reset"></li><li class="viewer-prev" data-action="prev"></li><li class="viewer-play" data-action="play"></li><li class="viewer-next" data-action="next"></li><li class="viewer-rotate-left" data-action="rotate-left"></li><li class="viewer-rotate-right" data-action="rotate-right"></li><li class="viewer-flip-horizontal" data-action="flip-horizontal"></li><li class="viewer-flip-vertical" data-action="flip-vertical"></li></ul><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div class="viewer-button" data-action="mix"></div><div class="viewer-player"></div></div>',aK.other=aW.fn.viewer,aW.fn.viewer=function(c){var d,b=aR(arguments,1);return this.each(function(){var f,g=aW(this),e=g.data(aZ);if(!e){if(/destroy|hide|exit|stop|reset/.test(c)){return}g.data(aZ,e=new aK(this,c))}aL(c)&&aW.isFunction(f=e[c])&&(d=f.apply(e,b))}),aM(d)?this:d},aW.fn.viewer.Constructor=aK,aW.fn.viewer.setDefaults=aK.setDefaults,aW.fn.viewer.noConflict=function(){return aW.fn.viewer=aK.other,this}});(function(b){b.fn.obpmHtmlEditorField=function(){return this.each(function(){var r=jQuery(this);var l=r.attr("displayType");var t=URLDecode(r.html());var d=r.attr("style");var e=r.attr("name");var h=r.attr("_hiddenValue");var m="";var g="100%";var f;var q=function(u){return b.trim(u).substring(0,b.trim(u).indexOf("px"))};var c=d.split(/[;]/);b.each(c,function(v,x){var w=b.trim(x).split(/[:]/)[0];var u=b.trim(x).split(/[:]/)[1];if(w.toLowerCase()=="height"){if(b.trim(u).indexOf("%")>=0){f=u}else{if(b.trim(u).indexOf("px")>=0){f=q(u)}}}if(w.toLowerCase()=="width"){if(b.trim(u).indexOf("%")>=0){g=u}else{if(b.trim(u).indexOf("px")>=0){g=q(u)}}}});if(l==PermissionType_HIDDEN){m+="<textarea name='"+e+"' style='display:none;'>";if(t!="null"){m+=t}m+="</textarea>";m+="<span>"+h+"</span>";b(m).replaceAll(r)}else{if(l!=2){m+="<div style='font-size:16px;'>";if(t!="null"){m+=t}m+="</div>";m+="<textarea name='"+e+"' style='display:none;'>";if(t!="null"){m+=t}m+="</textarea>";b(m).replaceAll(r)}else{id=e+"_id";var p=r.text();if(b("textarea[name='"+e+"']").size()>1){var s=UE.getEditor(id);s.destroy();b("textarea[name='"+e+"']").filter(function(u,v){if(b(v).attr("moduletype")!="htmlEditor"){return true}}).remove()}m='<script id="'+id+'" name="'+e+'" type="text/plain"><\/script>';b(m).replaceAll(r);var s=UE.getEditor(id,{initialFrameWidth:g,initialFrameHeight:f});s.ready(function(){s.setHeight(f);s.setContent(p)})}}})}})(jQuery);(function(b){b.fn.obpmSelectAboutField=function(){return this.each(function(){var m=jQuery(this);var d=m.attr("id");var c=m.attr("name");var h=m.attr("isRefreshOnChanged");var f=m.attr("displayType");var e=m.attr("hiddenValue");var l=m.attr("textType");var p=m.val();p=p?p:"";h=(h=="true");var g="";if(f!=PermissionType_HIDDEN){if(!m.attr("isLoaded")){m.attr("isLoaded",true)}else{return}m.bind("change",function(){if(h){}});if(f==PermissionType_READONLY||l.toLowerCase()=="readonly"||f==PermissionType_DISABLED){jQuery("#"+d).multiselect2side({selectedPosition:"right",moveOptions:false,labelsx:"",labeldx:"",readOnly:true})}else{jQuery("#"+d).multiselect2side({selectedPosition:"right",moveOptions:false,labelsx:"",labeldx:"",readOnly:false})}}else{g+="<input type='hidden' name='"+c+"' id='"+d+"' value='"+p+"' />";g+="<div>"+e+"</div>";m.after(g);m.remove()}})}})(jQuery);function callRefresh(c){var b=jQuery(c);var d=b.attr("isRefreshOnChanged");d=(d=="true");if(d){dy_refresh(b.attr("id"))}}(function(b){jQuery.fn.multiselect2side=function(d){d=b.extend({selectedPosition:"right",moveOptions:true,labelTop:"Top",labelBottom:"Bottom",labelUp:"Up",labelDown:"Down",labelSort:"Sort",labelsx:"Available",labeldx:"Selected",maxSelected:-1,readOnly:false},d);var c=function(e){if(e.find("option:selected").size()==0){e.find("[text='']").attr("selected",true)}else{e.find("[text='']").attr("selected",false)}};return this.each(function(){var f=b(this);var m=b(this).attr("name");if(m.indexOf("[")!=-1){m=m.substring(0,m.indexOf("["))}var s=m+"ms2side__dx";var p=m+"ms2side__sx";var t=b(this).attr("size");if(t<5){b(this).attr("size","5");t=5}var r="<div class='ms2side__updown'><p class='SelSort' title='Sort'>"+d.labelSort+"</p><p class='MoveTop' title='Move on top selected option'>"+d.labelTop+"</p><p class='MoveUp' title='Move up selected option'>"+d.labelUp+"</p><p class='MoveDown' title='Move down selected option'>"+d.labelDown+"</p><p class='MoveBottom' title='Move on bottom selected option'>"+d.labelBottom+"</p></div>";var g="<span class='ms2side__div'>"+((d.selectedPosition!="right"&&d.moveOptions)?r:"")+"<table><tbody><tr><td class='ms2side__select' style='width:120px;'>"+(d.labelsx?("<span class='ms2side__header'>"+d.labelsx+"</span>"):"");if(d.readOnly){g+="<select title='"+d.labelsx+"' name='"+p+"' id='"+p+"' size='"+t+"' multiple='multiple' disabled='disabled'></select>"}else{g+="<select title='"+d.labelsx+"' name='"+p+"' id='"+p+"' size='"+t+"' multiple='multiple'></select>"}g+="</td><td class='ms2side__options'>"+((d.selectedPosition=="right")?("<table style='display: inline;vertical-align:bottom;'><tr><td><p class='AddOne' title='Add Selected'>&rsaquo;</p></td></tr><tr><td><p class='AddAll' title='Add All'>&raquo;</p></td></tr><tr><td><p class='RemoveOne' title='Remove Selected'>&lsaquo;</p></td></tr><tr><td><p class='RemoveAll' title='Remove All'>&laquo;</p></td></tr></table>"):("<table style='display: inline;vertical-align:bottom'><tr><td><p class='AddOne' title='Add Selected'>&lsaquo;</p></td></tr><tr><td><p class='AddAll' title='Add All'>&laquo;</p></td></tr><tr><td><p class='RemoveOne' title='Remove Selected'>&rsaquo;</p></td></tr><tr><td><p class='RemoveAll' title='Remove All'>&raquo;</p></td></tr></table>"))+"</td><td class='ms2side__select'>"+(d.labeldx?("<span class='ms2side__header'>"+d.labeldx+"</span>"):"");if(d.readOnly){g+="<select title='"+d.labeldx+"' name='"+s+"' id='"+s+"' size='"+t+"' multiple='multiple' disabled='disabled'></select>"}else{g+="<select title='"+d.labeldx+"' name='"+s+"' id='"+s+"' size='"+t+"' multiple='multiple'></select>"}g+="</td></tr></tbody></table>"+((d.selectedPosition=="right"&&d.moveOptions)?r:"")+"</span>";b(this).after(g).hide();var l=b(this).next().find("select");var q=(d.selectedPosition=="right")?l.eq(0):l.eq(1);var e=(d.selectedPosition=="right")?l.eq(1):l.eq(0);var h=b(".ms2side__select").eq(0).height();b(this).next().find(".ms2side__options, .ms2side__updown").each(function(){var u=((h/2)-(b(this).height()/2));if(u>0){b(this).css("padding-top",u+"px")}});b(this).find("option:selected[text!='']").clone().appendTo(e);b(this).find("option:not(:selected)[text!='']").clone().appendTo(q);l.change(function(){var y=b(this).parent().parent();var v=q.children();var x=e.children();var u=q.find("option:selected");var w=e.find("option:selected");if(u.size()==0||(d.maxSelected>=0&&(u.size()+x.size())>d.maxSelected)){y.find(".AddOne").addClass("ms2side__hide")}else{y.find(".AddOne").removeClass("ms2side__hide")}y.find(".RemoveOne, .MoveUp, .MoveDown, .MoveTop, .MoveBottom, .SelSort").addClass("ms2side__hide");if(x.size()>1){y.find(".SelSort").removeClass("ms2side__hide")}if(w.size()>0){y.find(".RemoveOne").removeClass("ms2side__hide");if(w.size()<x.size()){if(w.val()!=x.val()){y.find(".MoveUp, .MoveTop").removeClass("ms2side__hide")}if(w.last().val()!=x.last().val()){y.find(".MoveDown, .MoveBottom").removeClass("ms2side__hide")}}}if(v.size()==0||(d.maxSelected>=0&&v.size()>=d.maxSelected)){y.find(".AddAll").addClass("ms2side__hide")}else{y.find(".AddAll").removeClass("ms2side__hide")}if(x.size()==0){y.find(".RemoveAll").addClass("ms2side__hide")}else{y.find(".RemoveAll").removeClass("ms2side__hide")}if(d.readOnly){y.find(".AddOne, .AddAll, .RemoveOne, .RemoveAll").addClass("ms2side__hide")}});q.dblclick(function(){b(this).find("option:selected").each(function(u,v){if(d.maxSelected<0||e.children().size()<d.maxSelected){b(this).remove().appendTo(e);f.find('[value="'+b(v).val()+'"]').attr("selected",true).remove().appendTo(f)}});b(this).trigger("change");callRefresh(f)});e.dblclick(function(){b(this).find("option:selected").each(function(u,v){b(this).remove().appendTo(q);f.find('[value="'+b(v).val()+'"]').attr("selected",false).remove().appendTo(f)});c(f);b(this).trigger("change");callRefresh(f)});b(this).next().find(".ms2side__options p").click(function(){if(!b(this).hasClass("ms2side__hide")){if(b(this).hasClass("AddOne")){q.find("option:selected").each(function(u,v){b(this).remove().appendTo(e);f.find('[value="'+b(v).val()+'"]').attr("selected",true).remove().appendTo(f)})}else{if(b(this).hasClass("AddAll")){q.children().appendTo(e);q.children().remove();f.find("option").attr("selected",true)}else{if(b(this).hasClass("RemoveOne")){e.find("option:selected").each(function(u,v){b(this).remove().appendTo(q);f.find('[value="'+b(v).val()+'"]').attr("selected",false).remove().appendTo(f)});c(f)}else{if(b(this).hasClass("RemoveAll")){e.children().appendTo(q);e.children().remove();f.find("option").each(function(){if(jQuery(this).val()){jQuery(this).attr("selected",false)}else{jQuery(this).attr("selected",true)}});c(f)}}}}callRefresh(f)}q.trigger("change")});b(this).next().find(".ms2side__updown").children().click(function(){var w=e.find("option:selected");var D=e.find("option");if(!b(this).hasClass("ms2side__hide")){if(b(this).hasClass("SelSort")){D.sort(function(F,E){var H=b(F).text().toUpperCase();var G=b(E).text().toUpperCase();return(H<G)?-1:(H>G)?1:0});f.find("option:selected").remove();D.each(function(){e.append(b(this).clone().attr("selected",true));f.append(b(this).attr("selected",true))})}else{if(b(this).hasClass("MoveUp")){var x=w.first().prev();var A=f.find("[value="+x.val()+"]");w.each(function(){b(this).insertBefore(x);f.find("[value="+b(this).val()+"]").insertBefore(A)})}else{if(b(this).hasClass("MoveDown")){var z=w.last().next();var B=f.find("[value="+z.val()+"]");w.each(function(){b(this).insertAfter(z);f.find("[value="+b(this).val()+"]").insertAfter(B)})}else{if(b(this).hasClass("MoveTop")){var y=D.first();var v=f.find("[value="+y.val()+"]");w.each(function(){b(this).insertBefore(y);f.find("[value="+b(this).val()+"]").insertBefore(v)})}else{if(b(this).hasClass("MoveBottom")){var C=D.last();var u=f.find("[value="+C.val()+"]");w.each(function(){C=b(this).insertAfter(C);u=f.find("[value="+b(this).val()+"]").insertAfter(u)})}}}}}}q.trigger("change")});b(this).next().find(".ms2side__options, .ms2side__updown").children().hover(function(){b(this).addClass("ms2side_hover")},function(){b(this).removeClass("ms2side_hover")});q.trigger("change");b(this).next().show()})}})(jQuery);(function($){$.fn.obpmSuggestField=function(){return this.each(function(i){var TEXT_TYPE_HIDDEN="hidden",TEXT_TYPE_READONLY="readonly",TEXT_TYPE_TEXT="text",TEXT_TYPE_PASSWORD="password";var $field=jQuery(this);var fieldId=$field.attr("_fieldId");var name=$field.attr("_name");var isRefreshOnChanged=$field.attr("_isRefreshOnChanged");var displayType=$field.attr("_displayType");var readOnlyShowValOnly=$field.attr("readOnlyShowValOnly");var textType=$field.attr("_textType");var value=$field.attr("value");var text=$field.attr("text");if(text==""||text==null){text=value}var json=$field.attr("_json")?$field.attr("_json"):"{}";var otherAttrs=$field.attr("_otherAttrs");var style=$field.attr("style");var fieldType=$field.attr("_fieldType");var fieldId2=fieldId.replace(/\-/g,"_");var isSubGridView=$field.attr("_subGridView");var discript=$field.attr("_discript");var hiddenValue=$field.attr("_hiddenValue");var dataMode=$field.attr("_dataMode");var formId=$field.attr("_formid");var _fieldId4sych=$field.attr("_fieldId4sych");var domainId=$field.attr("_domainId");var isCommonFilter=$field.attr("_isCommonFilter");isCommonFilter=(isCommonFilter=="true");isRefreshOnChanged=(isRefreshOnChanged=="true");isSubGridView=(isSubGridView=="true");value=value?value:"";discript=discript?discript:name;if(style){style=style.replace(/"([^"]*)"/g,"$1")}var otherAttrsHtml=getOtherAttrs($field[0]);var $spanHtml=$("<span style='display:inline-block;\9'></span>");if(textType.toLowerCase()!=TEXT_TYPE_HIDDEN&&displayType!=PermissionType_HIDDEN){var inputHtml="<input type='text' class='form-control' GridType='suggestField' isCommonFilter='"+isCommonFilter+"' value='"+value+"' discript='"+discript+"' id='"+name+"_show' name='"+name+"_show'fieldtype = '"+fieldType+"' autocomplete='off' "+getOtherProps(otherAttrs)+otherAttrsHtml;if(displayType==PermissionType_READONLY||TEXT_TYPE_READONLY==textType.toLowerCase()||displayType==PermissionType_DISABLED){inputHtml+=" disabled "}inputHtml+=' style="';if(style){inputHtml+=style+";"}inputHtml+=" z-index:97;";if(displayType==PermissionType_READONLY||TEXT_TYPE_READONLY==textType.toLowerCase()||displayType==PermissionType_DISABLED){if(readOnlyShowValOnly=="true"){inputHtml+="display:none;"}}inputHtml+='"';inputHtml+=" />";var $input=$(inputHtml);$spanHtml.append($input);$input.val(text);if(dataMode=="local"){var source=eval(json)||[];$input.typeahead({source:source,autoSelect:true,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',delay:100,afterSelect:function(current){if(current){if(current.id!=$("#"+fieldId).val()){$("#"+fieldId).val(current.id);if(isRefreshOnChanged){if(isSubGridView){dy_view_refresh(fieldId+"_show")}else{dy_refresh(fieldId+"_show")}}}}}})}else{if(dataMode=="remote"){var url=contextPath+"/portal/document/suggestfield/query?_formFieldId="+_fieldId4sych;$input.typeahead({source:function(query,process){var fields=Activity.makeAllFieldAble();var params="";if(isSubGridView){params=$.param(subGridView.getGridViewParams())}else{params=jQuery("#document_content").serialize()}var data=params+"&_formid="+formId+"&__keyword="+query;Activity.setFieldDisabled(fields);$.get(url,data,function(json){process(eval(json))})},autoSelect:true,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',delay:500,afterSelect:function(current){if(current){if(current.id!=$("#"+fieldId).val()){$("#"+fieldId).val(current.id);if(isRefreshOnChanged){if(isSubGridView){dy_view_refresh(fieldId+"_show")}else{dy_refresh(fieldId+"_show")}}}}}})}}}if(displayType==PermissionType_READONLY||TEXT_TYPE_READONLY==textType.toLowerCase()||displayType==PermissionType_DISABLED){if(readOnlyShowValOnly=="true"){$spanHtml.append("<span id='"+name+"_show1'>"+text+"</span>")}}var discriptHtml="";if(displayType==PermissionType_HIDDEN){discriptHtml+="<span>"+hiddenValue+"</span>"}var hiddenHtml="<input type='hidden' value='"+value+"' id='"+fieldId+"' discript='"+discript+"' name='"+name+"'fieldtype = '"+fieldType+"' GridType='suggestField' resetable=true />";$spanHtml.append($(hiddenHtml)).append($(discriptHtml)).replaceAll($field)})}})(jQuery);(function(b,c){if(typeof module!=="undefined"&&module.exports){module.exports=c(require("jquery"))}else{if(typeof define==="function"&&define.amd){define(["jquery"],function(d){return c(d)})}else{c(b.jQuery)}}}(this,function(c){var d=function(f,e){this.$element=c(f);this.options=c.extend({},c.fn.typeahead.defaults,e);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=="boolean"?this.options.autoSelect:true;this.highlighter=this.options.highlighter||this.highlighter;this.render=this.options.render||this.render;this.updater=this.options.updater||this.updater;this.displayText=this.options.displayText||this.displayText;this.source=this.options.source;this.delay=this.options.delay;this.$menu=c(this.options.menu);this.$appendTo=this.options.appendTo?c(this.options.appendTo):null;this.shown=false;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=="boolean"?this.options.showHintOnFocus:false;this.afterSelect=this.options.afterSelect;this.addItem=false};d.prototype={constructor:d,select:function(){var f=this.$menu.find(".active").data("value");this.$element.data("active",f);if(this.autoSelect||f){var e=this.updater(f);this.$element.val(this.displayText(e)||e).change();this.afterSelect(e)}return this.hide()},updater:function(e){return e},setSource:function(e){this.source=e},show:function(){var m=c.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),f;f=typeof this.options.scrollHeight=="function"?this.options.scrollHeight.call():this.options.scrollHeight;var l=c("#toAll").height();if(c("#_contentTable").getNiceScroll().length>0){f=c("#_contentTable").scrollTop()}var h=m.top+m.height+f;var e=this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element);var g=l!=null?h+e.height()<l?h:h-e.height()-m.height-15:h;e.css({top:g,left:m.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(f){var e;if(typeof(f)!="undefined"&&f!==null){this.query=f}else{this.query=this.$element.val()||""}if(this.query.length<this.options.minLength){return this.shown?this.hide():this}var g=c.proxy(function(){if(c.isFunction(this.source)){this.source(this.query,c.proxy(this.process,this))}else{if(this.source){this.process(this.source)}}},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(g,this.delay)},process:function(e){var f=this;e=c.grep(e,function(g){return f.matcher(g)});e=this.sorter(e);if(!e.length&&!this.options.addItem){return this.shown?this.hide():this}if(e.length>0){this.$element.data("active",e[0])}else{this.$element.data("active",null)}if(this.options.addItem){e.push(this.options.addItem)}if(this.options.items=="all"){return this.render(e).show()}else{return this.render(e.slice(0,this.options.items)).show()}},matcher:function(f){var e=this.displayText(f);return ~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(g){var h=[],f=[],e=[],m;while((m=g.shift())){var l=this.displayText(m);if(!l.toLowerCase().indexOf(this.query.toLowerCase())){h.push(m)}else{if(~l.indexOf(this.query)){f.push(m)}else{e.push(m)}}}return h.concat(f,e)},highlighter:function(r){var h=c("<div></div>");var m=this.query;var g=r.toLowerCase().indexOf(m.toLowerCase());var l,e,f,p,q;l=m.length;if(l===0){return h.text(r).html()}while(g>-1){e=r.substr(0,g);f=r.substr(g,l);p=r.substr(g+l);q=c("<strong></strong>").text(f);h.append(document.createTextNode(e)).append(q);r=p;g=r.toLowerCase().indexOf(m.toLowerCase())}return h.append(document.createTextNode(r)).html()},render:function(f){var h=this;var e=this;var g=false;f=c(f).map(function(l,m){var p=e.displayText(m);l=c(h.options.item).data("value",m);l.find("a").html(h.highlighter(p));if(p==e.$element.val()){l.addClass("active");e.$element.data("active",m);g=true}return l[0]});if(this.autoSelect&&!g){f.first().addClass("active");this.$element.data("active",f.first().data("value"))}this.$menu.html(f);return this},displayText:function(e){return e.name||e},next:function(f){var g=this.$menu.find(".active").removeClass("active"),e=g.next();if(!e.length){e=c(this.$menu.find("li")[0])}e.addClass("active")},prev:function(f){var g=this.$menu.find(".active").removeClass("active"),e=g.prev();if(!e.length){e=this.$menu.find("li").last()}e.addClass("active")},listen:function(){this.$element.on("focus",c.proxy(this.focus,this)).on("blur",c.proxy(this.blur,this)).on("keypress",c.proxy(this.keypress,this)).on("keyup",c.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",c.proxy(this.keydown,this))}this.$menu.on("click",c.proxy(this.click,this)).on("mouseenter","li",c.proxy(this.mouseenter,this)).on("mouseleave","li",c.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null);this.$element.data("active",null);this.$element.off("focus").off("blur").off("keypress").off("keyup");if(this.eventSupported("keydown")){this.$element.off("keydown")}this.$menu.remove()},eventSupported:function(e){var f=e in this.$element;if(!f){this.$element.setAttribute(e,"return;");f=typeof this.$element[e]==="function"}return f},move:function(f){if(!this.shown){return}switch(f.keyCode){case 9:case 13:case 27:f.preventDefault();break;case 38:if(f.shiftKey){return}f.preventDefault();this.prev();break;case 40:if(f.shiftKey){return}f.preventDefault();this.next();break}},keydown:function(f){this.suppressKeyPressRepeat=~c.inArray(f.keyCode,[40,38,9,13,27]);if(!this.shown&&f.keyCode==40){this.lookup()}else{this.move(f)}},keypress:function(f){if(this.suppressKeyPressRepeat){return}this.move(f)},keyup:function(f){switch(f.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}f.preventDefault()},focus:function(f){if(!this.focused){this.focused=true;if(this.options.showHintOnFocus){this.lookup("")}}},blur:function(f){this.focused=false;if(!this.mousedover&&this.shown){this.hide()}},click:function(f){f.preventDefault();this.select();this.$element.focus()},mouseenter:function(f){this.mousedover=true;this.$menu.find(".active").removeClass("active");c(f.currentTarget).addClass("active")},mouseleave:function(f){this.mousedover=false;if(!this.focused&&this.shown){this.hide()}}};var b=c.fn.typeahead;c.fn.typeahead=function(f){var e=arguments;if(typeof f=="string"&&f=="getActive"){return this.data("active")}return this.each(function(){var l=c(this),h=l.data("typeahead"),g=typeof f=="object"&&f;if(!h){l.data("typeahead",(h=new d(this,g)))}if(typeof f=="string"){if(e.length>1){h[f].apply(h,Array.prototype.slice.call(e,1))}else{h[f]()}}})};c.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:true,afterSelect:c.noop,addItem:false,delay:0};c.fn.typeahead.Constructor=d;c.fn.typeahead.noConflict=function(){c.fn.typeahead=b;return this};c(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(g){var f=c(this);if(f.data("typeahead")){return}f.typeahead(f.data())})}));var ddtabmenu={disabletablinks:false,currentpageurl:window.location.href.replace("http://"+window.location.hostname,"").replace(/^\//,""),tabOrigitemid:{},definemenu:function(b,c){this[b+"-menuitems"]=null;ddtabmenu.init(b,c)},showsubmenuById:function(b,c){var f=this[b+"-menuitems"];if(!f){return}if(c!=""){var d=true;var e=$("#"+c).parent().parent().parent();e.find("div:visible").each(function(){if($(this).find("a").hasClass("current")){d=false}});if(d){ddtabmenu.showsubmenu(b,document.getElementById(c))}}},showsubmenuByName:function(b,c){var d=this[b+"-menuitems"];if(!d){return}for(i=0;i<d.length;i++){if(d[i].getAttribute("title")){if(d[i].title==c){ddtabmenu.showsubmenu(b,d[i]);break}}}},showsubmenu:function(tabid,targetitem){if(document.getElementById("tabid")){var tempTabid=document.getElementById("tabid").value;if(tempTabid==""){document.getElementById("tabid").value=tabid+"#"+targetitem.getAttribute("id")}else{var ids=document.getElementById("tabid").value.split(";");var flag=true;for(var i=0;i<ids.length;i++){var _ids=ids[i].split("#");if(tabid==_ids[0]){_ids[1]=targetitem.getAttribute("id");ids[i]=_ids.join("#");flag=false;break}}if(flag){document.getElementById("tabid").value=tempTabid+";"+tabid+"#"+targetitem.getAttribute("id")}else{document.getElementById("tabid").value=ids.join(";")}}}var menuitems=this[tabid+"-menuitems"];if(!menuitems){return}DWREngine.setAsync(false);if(targetitem!=null){eval(targetitem.callback)}DWREngine.setAsync(true);for(i=0;i<menuitems.length;i++){if(typeof menuitems[i].hasSubContent!="undefined"){if(document.getElementById(menuitems[i].getAttribute("rel")).style.display=="block"){menuitems[i].className="";document.getElementById(menuitems[i].getAttribute("rel")).style.display="none"}}}if(targetitem){if(typeof targetitem.hasSubContent!="undefined"){var id=targetitem.getAttribute("rel")}var oContent=document.getElementById(targetitem.getAttribute("rel"));if(getBrowser().indexOf("ie")!=-1){var frames=jQuery("#"+id).find("iframe[type='word']");for(var i=0;i<frames.length;i++){var frame=frames[i];initWord(frame)}}if(oContent!=null||oContent!=undefined){if(oContent.style.display!="block"){targetitem.className="current";oContent.style.display="block";$(targetitem).parent().parent().siblings().find("a").removeClass("current");jQuery(oContent).find("[moduleType='IncludedView']").obpmIncludedView()}if(oContent.getAttribute("isHide")&&oContent.getAttribute("isHide")=="true"){oContent.style.display="none"}}var isloaded=oContent!=null?oContent.isloaded:false}var iframeObj=document.getElementsByTagName("iframe")[0];if(iframeObj){if(typeof iframeObj.contentWindow.adjustUserSetupPageLayout=="function"){iframeObj.contentWindow.document.location.reload()}}if($("#_contentTable").getNiceScroll().length>0){$("#_contentTable").getNiceScroll().resize()}},hideMenus:function(b,e){for(var c=0;c<e.length;c++){var f=document.getElementById("li_"+e[c]);var d=document.getElementById("content_"+e[c]);f.style.display="none";d.style.display="none";d.setAttribute("isHide","true")}},showMenus:function(c,e){var h=true;for(var g=0;g<e.length;g++){var f=document.getElementById("li_"+e[g]);var l=document.getElementById("content_"+e[g]);f.style.display="block";l.removeAttribute("isHide");if($(f).find("a").hasClass("current")){l.style.display="block";h=false}}var m=$("#li_"+e[0]).parent().parent();m.find("div:visible").each(function(){if($(this).find("a").hasClass("current")){h=false}});if(h){var b=$("#li_"+e[0]);var d=$("#content_"+e[0]);b.find("a").removeClass("btn-outlined").addClass("current");b.show();d.show()}},isloaded:function(b){var c=document.getElementById("content_"+this.tabOrigitemid[b]);if(c){return c.isloaded}return false},getSelected:function(b){return this.tabOrigitemid[b]},isSelected:function(b){var b=b.replace("http://"+b.hostname,"").replace(/^\//,"");return(ddtabmenu.currentpageurl==b)},addEvent:function(c,d,b){var b=(window.addEventListener)?b:"on"+b;if(c.addEventListener){c.addEventListener(b,d,false)}else{if(c.attachEvent){c.attachEvent(b,d)}}},init:function(tabid,dselected){if(!document.getElementById(tabid)){alert('ddtabmenu.js: tab not exist, id is "'+tabid+'"')}var menuitems=document.getElementById(tabid).getElementsByTagName("a");var setalready=false;this[tabid+"-menuitems"]=menuitems;for(var x=menuitems.length-1;x>=0;x--){if(menuitems[x].getAttribute("rel")){this[tabid+"-menuitems"][x].hasSubContent=true;if(ddtabmenu.disabletablinks){alert("if1 if x="+x);menuitems[x].onclick=function(){return false}}}else{alert("else x="+x);menuitems[x].onmouseout=function(){this.className=""}}menuitems[x].onclick=function(){ddtabmenu.showsubmenu(tabid,this);try{var conSelId="content_"+this.id;jQuery("#content_"+this.id+" iframe[name=display_view]").each(function(){if(typeof(eval(jQuery(this)[0].contentWindow.ev_resize4IncludeViewPar))=="function"){jQuery(this).get(0).contentWindow.ev_resize4IncludeViewPar()}})}catch(ex){alert("tabmenu: 重设包含元素iframe高度脚本错误")}};if(dselected=="auto"&&typeof setalready=="undefined"&&this.isSelected(menuitems[x].href)){alert("if2 x="+x);ddtabmenu.showsubmenu(tabid,menuitems[x]);setalready=true}}if(!setalready){ddtabmenu.showsubmenuById(tabid,dselected)}}};(function($){$.fn.obpmTabNormalField=function(){return this.each(function(){var $field=jQuery(this);$field.attr("moduleType","TabNormalHasRefactor");$field.find("[moduleType='TabNormal']").filter(function(){return(jQuery(this).parents("div[moduleType='TabNormal']").size()==0)}).obpmTabNormalField();$field.find("[moduleType='TabCollapse']").filter(function(){return(jQuery(this).parents("[moduleType='TabCollapse']").size()==0)}).obpmTabCollapseField();var html="";var $fieldTitle=$field.find("[id='title']");var tabId=$field.attr("tabId");var fieldId=$fieldTitle.attr("fieldId");var titleDiv="<div id='"+fieldId+"' class='basictab'>";var titleUl="<table cellSpacing='0' cellPadding='0'><tr>";$fieldTitle.find("div").each(function(){var formId=$(this).attr("formId");var isHidden=$(this).attr("isHidden");var isRefreshOnChanged=$(this).attr("isRefreshOnChanged");var name=$(this).attr("name");isRefreshOnChanged=(isRefreshOnChanged=="true");isHidden=(isHidden=="true");var liHtml="";liHtml+="<td><div id='li_"+formId+"'";if(isHidden){liHtml+=" style='display:none'"}liHtml+=">";var aHtml="";aHtml+="<a style='cursor:pointer'";if(isRefreshOnChanged){}aHtml+=" id='"+formId+"'";aHtml+=" rel='content_"+formId+"'";aHtml+=" title='"+name+"'>";aHtml+=name+"</a>";liHtml+=aHtml;liHtml+="</div></td>";titleUl+=liHtml});titleUl+="</tr></table>";titleDiv+=titleUl;titleDiv+="</div>";$field.find("#tabcontainer > div").each(function(){var formId=$(this).attr("formId");var isHidden=$(this).attr("isHidden");isHidden=(isHidden=="true");jQuery(this).attr("id","content_"+formId+"").addClass("tabcontent");jQuery(this).css("display","none");if(jQuery(this).find(">span>input[moduleType='IncludedView']").size()<=0){jQuery(this).html('<div style="background: #f6f7fb;padding: 15px;border:1px solid #dddddd;"><div style="background-color:#fff;">'+jQuery(this).html()+"</div></div>")}});jQuery(titleDiv).replaceAll($fieldTitle);ddtabmenu.definemenu(fieldId,tabId)})};$.fn.obpmTabCollapseField=function(){return this.each(function(){var $field=jQuery(this);$field.removeAttr("moduleType");$field.find("[moduleType='TabNormal']").filter(function(){return(jQuery(this).parents("div[moduleType='TabNormal']").size()==0&&jQuery(this).parents("div[moduleType='TabNormalHasRefactor']").size()==0)}).obpmTabNormalField();$field.find("[moduleType='TabCollapse']").filter(function(){return(jQuery(this).parents("[moduleType='TabCollapse']").size()==0)}).obpmTabCollapseField();var fieldId=$field.attr("fieldId");var tabIdList=$field.find("#tabIdList").text();tabIdList=eval(tabIdList);$field.find("#tabIdList").remove();var html="";$field.find("li").each(function(){jQuery(this).css("listStyle","none");$(this).find("#title").each(function(){var formId=$(this).attr("formId");var isHidden=$(this).attr("isHidden");var fieldId=$(this).attr("fieldId");var tabName=$(this).attr("tabName");var isOpen=$(this).attr("isOpen");isHidden=(isHidden=="true");isOpen=(isOpen=="true");var titleDivHtml="";titleDivHtml+="<div id='li_"+formId+"'";if(isHidden){titleDivHtml+=" style='display:none'";this.parentNode.style.display="none"}titleDivHtml+=">";var tableHtml="";var imgId="img_"+formId;tableHtml+="<table width='100%' height='22' align='center' cellPadding='0' cellSpacing='0' id='"+formId+"' class='tab-collapse margin' onclick=toggleCollapse('"+fieldId+"',this.id)>";tableHtml+="<tr>";var imagePath="../../share/component/tabField/collapse/images";tableHtml+="<td width='5' align='left'><img src='"+imagePath+"/left_l_bar.gif'/></td>";tableHtml+="<td width='30' align='center' background='"+imagePath+"/left_bar.gif'>";tableHtml+="<img id='"+imgId+"' src='"+imagePath+"/";if(isOpen){tableHtml+="left_open"}else{tableHtml+="left_dot"}tableHtml+=".gif' /></td>";tableHtml+="<td class='white' background='"+imagePath+"/left_bar.gif'>"+tabName+"</td>";tableHtml+="<td width='5' align='right'><img src='"+imagePath+"/left_r_bar.gif'/></td>";tableHtml+="</tr>";tableHtml+="</table>";titleDivHtml+=tableHtml;titleDivHtml+="</div>";html+=titleDivHtml;jQuery(titleDivHtml).replaceAll(jQuery(this))});$(this).find("#content").each(function(){var formId=$(this).attr("formId");var isHidden=$(this).attr("isHidden");isHidden=(isHidden=="true");jQuery(this).attr("id","content_"+formId+"");if(isHidden){jQuery(this).css("display","none")}})});defineCollapse(fieldId,tabIdList)})}})(jQuery);var TAB_CONTENT="content_";var TAB_IAMGE="img_";var selectedTabMap={};function defineCollapse(b,c){if(document.readyState=="complete"){initCollapse(b,c)}else{OBPM(document).ready(function(){initCollapse(b,c)})}}function addEvent(c,d,b){var b=(window.addEventListener)?b:"on"+b;if(c.addEventListener){c.addEventListener(b,d,false)}else{if(c.attachEvent){c.attachEvent(b,d)}}}function initCollapse(b,f){selectedTabMap[b]=[];for(var d=0;d<f.length;d++){var c=TAB_CONTENT+f[d];var e=document.getElementById(c);selectedTabMap[b].push(f[d]);e.isloaded=true}}function toggleCollapse(c,f,q){var r=TAB_CONTENT+f;var m=TAB_IAMGE+f;var l="../../share/component/tabField/collapse/images";var e=""+l+"/left_dot.gif";var d=""+l+"/left_open.gif";var h=""+l+"/left_dot.gif";var g=document.getElementById(r);var s=document.getElementById(m);if(g.style.display=="none"){selectedTabMap[c].push(f)}else{selectedTabMap[c].pop(f)}var b=g.isloaded;var p=false;if(!p){if(g.style.display=="none"){g.style.display="";s.src=d}else{g.style.display="none";s.src=h}}}function getCollapseSelectedArray(b){return selectedTabMap[b]}function getCollapseSelected(b){return getCollapseSelectedArray(b).toString()}function isCollapseLoaded(b){var d=getCollapseSelectedArray(b);var e={};for(var c=0;c<d.length;c++){var f=document.getElementById(TAB_CONTENT+d[c]);if(f){if(f.isloaded){e[d[c]]=true}else{e[d[c]]=false}}}return jQuery.json2Str(e)}function showAllCollapse(b){OBPM("#tab_"+b+"_divid").children("div[id*='content_']:hidden").each(function(){var c=this.id.substring(TAB_CONTENT.length);toggleCollapse(b,c)})}function closeAllCollapse(b){OBPM("#tab_"+b+"_divid").children("div[id*='content_']:visible").each(function(){var c=this.id.substring(TAB_CONTENT.length);toggleCollapse(b,c,true)})}function selectField(c,d){var b=document.getElementsByName("_currid");var e="";if(b&&b.length>0){e=b[0].value}var g=document.getElementById(d);if(g){var l=g.value?jQuery.parseJSON(g.value):{};var h=g.value;var f=showUserSelectNoFlow("",{defValue:l[e],callback:function(m){if(m){var p=m.split(",");l[e]=p;g.value=jQuery.json2Str(l)}}})}}function showUserSelectNoFlow(actionName,settings,roleid){var oApp=$("input[name=application]")[0];var url=contextPath+"/portal/H5/resource/component/dialog/selectUserByAll.jsp?application="+oApp.value;var setValueOnSelect=true;if(settings.setValueOnSelect==false){setValueOnSelect=settings.setValueOnSelect}OBPM.dialog.show({width:682,height:500,url:url,args:{parentObj:window,targetid:settings.valueField,receivername:settings.textField,defValue:settings.defValue,limitSum:settings.limitSum,minUser:settings.minUser,selectMode:settings.selectMode,receiverEmail:settings.showUserEmail,receiverEmailAccount:settings.showUserEmailAccount,receiverTelephone:settings.showUserTelephone},title:title_uf,close:function(result){var textObj=document.getElementById(settings.textField);if(result){var rtnValue="";for(var i=0;i<result.length;i++){rtnValue+=result[i].value+";"}var rtnText="";for(var i=0;i<result.length;i++){rtnText+=result[i].text+";"}rtnValue=rtnValue.substring(0,rtnValue.length-1);rtnText=rtnText.substring(0,rtnText.length-1);$("#"+settings.valueField).val(rtnValue);$("#"+settings.textField).val(rtnText)}if(settings.callback){if(typeof settings.callback=="function"){settings.callback(rtnValue)}else{eval(settings.callback)}}}})}function showDepartmentSelect(b,e){var d=contextPath+"/portal/share/component/dialog/select.jsp";var c=document.getElementById(e.valueField);var f="";if(c){f=c.value}OBPM.dialog.show({width:300,height:400,url:d,args:{value:f,readonly:e.readonly,limit:e.limit},title:title_df,close:function(h){var g=document.getElementById(e.textField);var q=h;var r=document.getElementById(e.textField);if(r){if(q){if(q=="clear"){r.value="";c.value=""}else{var l="";var p="";if(q[0]&&q.length>0){for(var m=0;m<q.length;m++){l+=q[m].value+";";p+=q[m].text+";"}l=l.substring(0,l.lastIndexOf(";"));p=p.substring(0,p.lastIndexOf(";"))}r.value=p;c.value=l}}if(e.callback){e.callback(c.id)}}}})}
/*! messenger 1.4.1 */
(function(){var c,b=window.Messenger;c=window.Messenger=function(){return c._call.apply(this,arguments)},window.Messenger.noConflict=function(){return window.Messenger=b,c}})(),window.Messenger._=function(){if(window._){return window._}var w=Array.prototype,A=Object.prototype,g=Function.prototype,B=(w.push,w.slice),b=(w.concat,A.toString);A.hasOwnProperty;var f=w.forEach,q=(w.map,w.reduce,w.reduceRight,w.filter),y=(w.every,w.some,w.indexOf,w.lastIndexOf,Array.isArray,Object.keys),m=g.bind,z={},x={},v=z.each=z.forEach=function(u,h,C){if(null!=u){if(f&&u.forEach===f){u.forEach(h,C)}else{if(u.length===+u.length){for(var l=0,p=u.length;p>l;l++){if(h.call(C,u[l],l,u)===x){return}}}else{for(var c in u){if(z.has(u,c)&&h.call(C,u[c],c,u)===x){return}}}}}};z.result=function(h,c){if(null==h){return null}var l=h[c];return z.isFunction(l)?l.call(h):l},z.once=function(h){var c,l=!1;return function(){return l?c:(l=!0,c=h.apply(this,arguments),h=null,c)}};var d=0;return z.uniqueId=function(h){var c=++d+"";return h?h+c:c},z.filter=z.select=function(l,c,p){var h=[];return null==l?h:q&&l.filter===q?l.filter(c,p):(v(l,function(t,s,u){c.call(p,t,s,u)&&(h[h.length]=t)}),h)},v(["Arguments","Function","String","Number","Date","RegExp"],function(c){z["is"+c]=function(e){return b.call(e)=="[object "+c+"]"}}),z.defaults=function(c){return v(B.call(arguments,1),function(e){if(e){for(var h in e){null==c[h]&&(c[h]=e[h])}}}),c},z.extend=function(c){return v(B.call(arguments,1),function(e){if(e){for(var h in e){c[h]=e[h]}}}),c},z.keys=y||function(h){if(h!==Object(h)){throw new TypeError("Invalid object")}var c=[];for(var l in h){z.has(h,l)&&(c[c.length]=l)}return c},z.bind=function(h,c){if(h.bind===m&&m){return m.apply(h,B.call(arguments,1))}var l=B.call(arguments,2);return function(){return h.apply(c,l.concat(B.call(arguments)))}},z.isObject=function(c){return c===Object(c)},z}(),window.Messenger.Events=function(){if(window.Backbone&&Backbone.Events){return Backbone.Events}var b=function(){var f=/\s+/,c=function(p,w,q,u){if(!q){return !0}if("object"==typeof q){for(var v in q){p[w].apply(p,[v,q[v]].concat(u))}}else{if(!f.test(q)){return !0}for(var m=q.split(f),h=0,e=m.length;e>h;h++){p[w].apply(p,[m[h]].concat(u))}}},g=function(p,h){var q,l=-1,m=p.length;switch(h.length){case 0:for(;m>++l;){(q=p[l]).callback.call(q.ctx)}return;case 1:for(;m>++l;){(q=p[l]).callback.call(q.ctx,h[0])}return;case 2:for(;m>++l;){(q=p[l]).callback.call(q.ctx,h[0],h[1])}return;case 3:for(;m>++l;){(q=p[l]).callback.call(q.ctx,h[0],h[1],h[2])}return;default:for(;m>++l;){(q=p[l]).callback.apply(q.ctx,h)}}},d={on:function(m,p,h){if(!c(this,"on",m,[p,h])||!p){return this}this._events||(this._events={});var l=this._events[m]||(this._events[m]=[]);return l.push({callback:p,context:h,ctx:h||this}),this},once:function(m,q,h){if(!c(this,"once",m,[q,h])||!q){return this}var l=this,p=_.once(function(){l.off(m,p),q.apply(this,arguments)});return p._callback=q,this.on(m,p,h),this},off:function(x,q,B){var m,p,v,z,t,A,y,w;if(!this._events||!c(this,"off",x,[q,B])){return this}if(!x&&!q&&!B){return this._events={},this}for(z=x?[x]:_.keys(this._events),t=0,A=z.length;A>t;t++){if(x=z[t],m=this._events[x]){if(v=[],q||B){for(y=0,w=m.length;w>y;y++){p=m[y],(q&&q!==p.callback&&q!==p.callback._callback||B&&B!==p.context)&&v.push(p)}}this._events[x]=v}}return this},trigger:function(m){if(!this._events){return this}var h=Array.prototype.slice.call(arguments,1);if(!c(this,"trigger",m,h)){return this}var l=this._events[m],p=this._events.all;return l&&g(l,h),p&&g(p,arguments),this},listenTo:function(p,h,q){var l=this._listeners||(this._listeners={}),m=p._listenerId||(p._listenerId=_.uniqueId("l"));return l[m]=p,p.on(h,"object"==typeof h?this:q,this),this},stopListening:function(p,h,q){var l=this._listeners;if(l){if(p){p.off(h,"object"==typeof h?this:q,this),h||q||delete l[p._listenerId]}else{"object"==typeof h&&(q=this);for(var m in l){l[m].off(h,q,this)}this._listeners={}}return this}}};return d.bind=d.on,d.unbind=d.off,d};return b()}(),function(){var z,E,q,F,b,m,w,C,v,D,B,x={}.hasOwnProperty,g=function(f,c){function h(){this.constructor=f}for(var d in c){x.call(c,d)&&(f[d]=c[d])}return h.prototype=c.prototype,f.prototype=new h,f.__super__=c.prototype,f},A=[].slice,y=[].indexOf||function(d){for(var c=0,f=this.length;f>c;c++){if(c in this&&this[c]===d){return c}}return -1};z=jQuery,m=null!=(v=window._)?v:window.Messenger._,F=null!=(D="undefined"!=typeof Backbone&&null!==Backbone?Backbone.Events:void 0)?D:window.Messenger.Events,q=function(){function c(d){z.extend(this,F),m.isObject(d)&&(d.el&&this.setElement(d.el),this.model=d.model),this.initialize.apply(this,arguments)}return c.prototype.setElement=function(d){return this.$el=z(d),this.el=this.$el[0]},c.prototype.delegateEvents=function(H){var p,I,u,G,h,f,d;if(H||(H=m.result(this,"events"))){this.undelegateEvents(),p=/^(\S+)\s*(.*)$/,d=[];for(u in H){if(h=H[u],m.isFunction(h)||(h=this[H[u]]),!h){throw Error('Method "'+H[u]+'" does not exist')}G=u.match(p),I=G[1],f=G[2],h=m.bind(h,this),I+=".delegateEvents"+this.cid,""===f?d.push(this.jqon(I,h)):d.push(this.jqon(I,f,h))}return d}},c.prototype.jqon=function(h,d,l){var f;return null!=this.$el.on?(f=this.$el).on.apply(f,arguments):(null==l&&(l=d,d=void 0),null!=d?this.$el.delegate(d,h,l):this.$el.bind(h,l))},c.prototype.jqoff=function(f){var d;return null!=this.$el.off?(d=this.$el).off.apply(d,arguments):(this.$el.undelegate(),this.$el.unbind(f))},c.prototype.undelegateEvents=function(){return this.jqoff(".delegateEvents"+this.cid)},c.prototype.remove=function(){return this.undelegateEvents(),this.$el.remove()},c}(),w=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return g(d,c),d.prototype.defaults={hideAfter:10,scroll:!0,closeButtonText:"&times;"},d.prototype.initialize=function(e){return null==e&&(e={}),this.shown=!1,this.rendered=!1,this.messenger=e.messenger,this.options=z.extend({},this.options,e,this.defaults)},d.prototype.show=function(){var f;return this.rendered||this.render(),this.$message.removeClass("messenger-hidden"),f=this.shown,this.shown=!0,f?void 0:this.trigger("show")},d.prototype.hide=function(){var f;if(this.rendered){return this.$message.addClass("messenger-hidden"),f=this.shown,this.shown=!1,f?this.trigger("hide"):void 0}},d.prototype.cancel=function(){return this.hide()},d.prototype.update=function(e){var h,f=this;return m.isString(e)&&(e={message:e}),z.extend(this.options,e),this.lastUpdate=new Date,this.rendered=!1,this.events=null!=(h=this.options.events)?h:{},this.render(),this.actionsToEvents(),this.delegateEvents(),this.checkClickable(),this.options.hideAfter?(this.$message.addClass("messenger-will-hide-after"),null!=this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(function(){return f.hide()},1000*this.options.hideAfter)):this.$message.removeClass("messenger-will-hide-after"),this.options.hideOnNavigate?(this.$message.addClass("messenger-will-hide-on-navigate"),null!=("undefined"!=typeof Backbone&&null!==Backbone?Backbone.history:void 0)&&Backbone.history.on("route",function(){return f.hide()})):this.$message.removeClass("messenger-will-hide-on-navigate"),this.trigger("update",this)},d.prototype.scrollTo=function(){return this.options.scroll?z.scrollTo(this.$el,{duration:400,offset:{left:0,top:-20}}):void 0},d.prototype.timeSinceUpdate=function(){return this.lastUpdate?new Date-this.lastUpdate:null},d.prototype.actionsToEvents=function(){var p,f,u,h,l=this;u=this.options.actions,h=[];for(f in u){p=u[f],h.push(this.events['click [data-action="'+f+'"] a']=function(r){return function(e){return e.preventDefault(),e.stopPropagation(),l.trigger("action:"+f,r,e),r.action.call(l,e,l)}}(p))}return h},d.prototype.checkClickable=function(){var l,f,p,h;p=this.events,h=[];for(f in p){l=p[f],"click"===f?h.push(this.$message.addClass("messenger-clickable")):h.push(void 0)}return h},d.prototype.undelegateEvents=function(){var f;return d.__super__.undelegateEvents.apply(this,arguments),null!=(f=this.$message)?f.removeClass("messenger-clickable"):void 0},d.prototype.parseActions=function(){var f,u,h,l,p,e;u=[],p=this.options.actions;for(l in p){f=p[l],h=z.extend({},f),h.name=l,null==(e=h.label)&&(h.label=l),u.push(h)}return u},d.prototype.template=function(O){var H,P,e,G,J,M,I,N,L,K,f=this;for(J=z("<div class='messenger-message message alert "+O.type+" message-"+O.type+" alert-"+O.type+"'>"),O.showCloseButton&&(e=z('<button type="button" class="messenger-close" data-dismiss="alert">'),e.html(O.closeButtonText),e.click(function(){return f.cancel(),!0}),J.append(e)),M=z('<div class="messenger-message-inner">'+O.message+"</div>"),J.append(M),O.actions.length&&(P=z('<div class="messenger-actions">')),K=O.actions,N=0,L=K.length;L>N;N++){I=K[N],H=z("<span>"),H.attr("data-action",""+I.name),G=z("<a>"),G.html(I.label),H.append(z('<span class="messenger-phrase">')),H.append(G),P.append(H)}return J.append(P),J},d.prototype.render=function(){var e;if(!this.rendered){return this._hasSlot||(this.setElement(this.messenger._reserveMessageSlot(this)),this._hasSlot=!0),e=z.extend({},this.options,{actions:this.parseActions()}),this.$message=z(this.template(e)),this.$el.html(this.$message),this.shown=!0,this.rendered=!0,this.trigger("render")}},d}(q),b=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}return g(c,d),c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this._timers={}},c.prototype.cancel=function(){return this.clearTimers(),this.hide(),null!=this._actionInstance&&null!=this._actionInstance.abort?this._actionInstance.abort():void 0},c.prototype.clearTimers=function(){var l,f,p,h;p=this._timers;for(l in p){f=p[l],clearTimeout(f)}return this._timers={},null!=(h=this.$message)?h.removeClass("messenger-retry-soon messenger-retry-later"):void 0},c.prototype.render=function(){var l,p,f,h;c.__super__.render.apply(this,arguments),this.clearTimers(),f=this.options.actions,h=[];for(p in f){l=f[p],l.auto?h.push(this.startCountdown(p,l)):h.push(void 0)}return h},c.prototype.renderPhrase=function(h,f){var l;return l=h.phrase.replace("TIME",this.formatTime(f))},c.prototype.formatTime=function(h){var f;return f=function(p,l){return p=Math.floor(p),1!==p&&(l+="s"),"in "+p+" "+l},0===Math.floor(h)?"now...":60>h?f(h,"second"):(h/=60,60>h?f(h,"minute"):(h/=60,f(h,"hour")))},c.prototype.startCountdown=function(u,h){var H,l,p,G,f=this;if(null==this._timers[u]){return H=this.$message.find("[data-action='"+u+"'] .messenger-phrase"),l=null!=(G=h.delay)?G:3,10>=l?(this.$message.removeClass("messenger-retry-later"),this.$message.addClass("messenger-retry-soon")):(this.$message.removeClass("messenger-retry-soon"),this.$message.addClass("messenger-retry-later")),p=function(){var e;return H.text(f.renderPhrase(h,l)),l>0?(e=Math.min(l,1),l-=e,f._timers[u]=setTimeout(p,1000*e)):(f.$message.removeClass("messenger-retry-soon messenger-retry-later"),delete f._timers[u],h.action())},p()}},c}(w),C=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return g(d,c),d.prototype.tagName="ul",d.prototype.className="messenger",d.prototype.messageDefaults={type:"info"},d.prototype.initialize=function(e){return this.options=null!=e?e:{},this.history=[],this.messageDefaults=z.extend({},this.messageDefaults,this.options.messageDefaults)},d.prototype.render=function(){return this.updateMessageSlotClasses()},d.prototype.findById=function(f){return m.filter(this.history,function(e){return e.msg.options.id===f})},d.prototype._reserveMessageSlot=function(e){var l,f,h=this;for(l=z("<li>"),l.addClass("messenger-message-slot"),this.$el.prepend(l),this.history.push({msg:e,$slot:l}),this._enforceIdConstraint(e),e.on("update",function(){return h._enforceIdConstraint(e)});this.options.maxMessages&&this.history.length>this.options.maxMessages;){f=this.history.shift(),f.msg.remove(),f.$slot.remove()}return l},d.prototype._enforceIdConstraint=function(p){var f,G,h,l,u;if(null!=p.options.id){for(u=this.history,G=0,h=u.length;h>G;G++){if(f=u[G],l=f.msg,null!=l.options.id&&l.options.id===p.options.id&&p!==l){if(p.options.singleton){return p.hide(),void 0}l.hide()}}}},d.prototype.newMessage=function(p){var h,u,l,r,f=this;return null==p&&(p={}),p.messenger=this,w=null!=(u=null!=(l=Messenger.themes[null!=(r=p.theme)?r:this.options.theme])?l.Message:void 0)?u:b,h=new w(p),h.on("show",function(){return p.scrollTo&&"fixed"!==f.$el.css("position")?h.scrollTo():void 0}),h.on("hide show render",this.updateMessageSlotClasses,this),h},d.prototype.updateMessageSlotClasses=function(){var u,h,H,l,p,G,f;for(l=!0,h=null,u=!1,f=this.history,p=0,G=f.length;G>p;p++){H=f[p],H.$slot.removeClass("messenger-first messenger-last messenger-shown"),H.msg.shown&&H.msg.rendered&&(H.$slot.addClass("messenger-shown"),u=!0,h=H,l&&(l=!1,H.$slot.addClass("messenger-first")))}return null!=h&&h.$slot.addClass("messenger-last"),this.$el[""+(u?"remove":"add")+"Class"]("messenger-empty")},d.prototype.hideAll=function(){var p,f,u,h,l;for(h=this.history,l=[],f=0,u=h.length;u>f;f++){p=h[f],l.push(p.msg.hide())}return l},d.prototype.post=function(e){var f;return m.isString(e)&&(e={message:e}),e=z.extend(!0,{},this.messageDefaults,e),f=this.newMessage(e),f.update(e),f},d}(q),E=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return g(d,c),d.prototype.doDefaults={progressMessage:null,successMessage:null,errorMessage:"Error connecting to the server.",showSuccessWithoutError:!0,retry:{auto:!0,allow:!0},action:z.ajax},d.prototype.hookBackboneAjax=function(e){var h,f=this;if(null==e&&(e={}),null==window.Backbone){throw"Expected Backbone to be defined"}return e=m.defaults(e,{id:"BACKBONE_ACTION",errorMessage:!1,successMessage:"Request completed successfully.",showSuccessWithoutError:!1}),h=function(l){var p;return p=m.extend({},e,l.messenger),f["do"](p,l)},null!=Backbone.ajax?(Backbone.ajax._withoutMessenger&&(Backbone.ajax=Backbone.ajax._withoutMessenger),(null==e.action||e.action===this.doDefaults.action)&&(e.action=Backbone.ajax),h._withoutMessenger=Backbone.ajax,Backbone.ajax=h):Backbone.sync=m.wrap(Backbone.sync,function(){var l,p,u;return u=arguments[0],l=arguments.length>=2?A.call(arguments,1):[],p=z.ajax,z.ajax=h,u.call.apply(u,[this].concat(A.call(l))),z.ajax=p})},d.prototype._getHandlerResponse=function(f){return f===!1?!1:f===!0||null==f?!0:f},d.prototype._parseEvents=function(G){var l,I,p,u,H,h,f;null==G&&(G={}),H={};for(u in G){p=G[u],I=u.indexOf(" "),h=u.substring(0,I),l=u.substring(I+1),null==(f=H[h])&&(H[h]={}),H[h][l]=p}return H},d.prototype._normalizeResponse=function(){var G,l,H,p,u,h,f;for(H=arguments.length>=1?A.call(arguments,0):[],p=null,u=null,G=null,h=0,f=H.length;f>h;h++){l=H[h],"success"===l||"timeout"===l||"abort"===l?p=l:null!=(null!=l?l.readyState:void 0)&&null!=(null!=l?l.responseText:void 0)?u=l:m.isObject(l)&&(G=l)}return[p,G,u]},d.prototype.run=function(){var O,G,P,e,I,M,H,N,L,J,f,K=this;if(M=arguments[0],L=arguments[1],O=arguments.length>=3?A.call(arguments,2):[],null==L&&(L={}),M=z.extend(!0,{},this.messageDefaults,this.doDefaults,null!=M?M:{}),G=this._parseEvents(M.events),P=function(l,h){var p;return p=M[l+"Message"],m.isFunction(p)?p.call(K,l,h):p},H=null!=(f=M.messageInstance)?f:this.newMessage(M),null!=M.id&&(H.options.id=M.id),null!=M.progressMessage&&H.update(z.extend({},M,{message:P("progress",null),type:"info"})),I={},m.each(["error","success"],function(l){var h;return h=L[l],I[l]=function(){var R,S,s,t,V,Z,Y,X,U,W,T,r,u,Q,aa;return Z=arguments.length>=1?A.call(arguments,0):[],U=K._normalizeResponse.apply(K,Z),V=U[0],R=U[1],X=U[2],"success"===l&&null==H.errorCount&&M.showSuccessWithoutError===!1&&(M.successMessage=null),"error"===l&&(null==(W=M.errorCount)&&(M.errorCount=0),M.errorCount+=1),s=M.returnsPromise?Z[0]:"function"==typeof h?h.apply(null,Z):void 0,Y=K._getHandlerResponse(s),m.isString(Y)&&(Y={message:Y}),"error"!==l||0!==(null!=X?X.status:void 0)&&"abort"!==V?"error"===l&&null!=M.ignoredErrorCodes&&(T=null!=X?X.status:void 0,y.call(M.ignoredErrorCodes,T)>=0)?(H.hide(),void 0):(S={message:P(l,X),type:l,events:null!=(r=G[l])?r:{},hideOnNavigate:"success"===l},t=z.extend({},M,S,Y),"number"==typeof(null!=(u=t.retry)?u.allow:void 0)&&t.retry.allow--,"error"===l&&(null!=X?X.status:void 0)>=500&&(null!=(Q=t.retry)?Q.allow:void 0)?(null==t.retry.delay&&(t.retry.delay=4>t.errorCount?10:300),t.hideAfter&&(null==(aa=t._hideAfter)&&(t._hideAfter=t.hideAfter),t.hideAfter=t._hideAfter+t.retry.delay),t._retryActions=!0,t.actions={retry:{label:"retry now",phrase:"Retrying TIME",auto:t.retry.auto,delay:t.retry.delay,action:function(){return t.messageInstance=H,setTimeout(function(){return K["do"].apply(K,[t,L].concat(A.call(O)))},0)}},cancel:{action:function(){return H.cancel()}}}):t._retryActions&&(delete t.actions.retry,delete t.actions.cancel,delete M._retryActions),H.update(t),Y&&t.message?(Messenger(m.extend({},K.options,{instance:K})),H.show()):H.hide()):(H.hide(),void 0)}}),!M.returnsPromise){for(J in I){e=I[J],N=L[J],L[J]=e}}return H._actionInstance=M.action.apply(M,[L].concat(A.call(O))),M.returnsPromise&&H._actionInstance.then(I.success,I.error),H},d.prototype["do"]=d.prototype.run,d.prototype.ajax=function(){var e,f;return f=arguments[0],e=arguments.length>=2?A.call(arguments,1):[],f.action=z.ajax,this.run.apply(this,[f].concat(A.call(e)))},d.prototype.expectPromise=function(h,f){return f=m.extend({},f,{action:h,returnsPromise:!0}),this.run(f)},d.prototype.error=function(f){return null==f&&(f={}),"string"==typeof f&&(f={message:f}),f.type="error",this.post(f)},d.prototype.info=function(f){return null==f&&(f={}),"string"==typeof f&&(f={message:f}),f.type="info",this.post(f)},d.prototype.success=function(f){return null==f&&(f={}),"string"==typeof f&&(f={message:f}),f.type="success",this.post(f)},d}(C),z.fn.messenger=function(){var I,t,G,f,d,e,H,p;return G=arguments[0],t=arguments.length>=2?A.call(arguments,1):[],null==G&&(G={}),I=this,null!=G&&m.isString(G)?(p=I.data("messenger"))[G].apply(p,t):(d=G,null==I.data("messenger")&&(C=null!=(e=null!=(H=Messenger.themes[d.theme])?H.Messenger:void 0)?e:E,I.data("messenger",f=new C(z.extend({el:I},d))),f.render()),I.data("messenger"))},window.Messenger._call=function(N){var G,O,d,f,I,L,H,M,K,J,e;if(L={extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right",theme:"future",maxMessages:9,parentLocations:["body"]},N=z.extend(L,z._messengerDefaults,Messenger.options,N),null!=N.theme&&(N.extraClasses+=" messenger-theme-"+N.theme),H=N.instance||Messenger.instance,null==N.instance){for(K=N.parentLocations,O=null,d=null,J=0,e=K.length;e>J;J++){if(M=K[J],O=z(M),O.length){f=M;break}}H?z(H._location).is(z(f))||(H.$el.detach(),O.prepend(H.$el)):(G=z("<ul>"),O.prepend(G),H=G.messenger(N),H._location=f,Messenger.instance=H)}return null!=H._addedClasses&&H.$el.removeClass(H._addedClasses),H.$el.addClass(I=""+H.className+" "+N.extraClasses),H._addedClasses=I,H},z.extend(Messenger,{Message:b,Messenger:E,themes:null!=(B=Messenger.themes)?B:{}}),z.globalMessenger=window.Messenger=Messenger}.call(this);(function(){var f,e,d,b={}.hasOwnProperty,c=function(m,h){for(var g in h){if(b.call(h,g)){m[g]=h[g]}}function l(){this.constructor=m}l.prototype=h.prototype;m.prototype=new l();m.__super__=h.prototype;return m};f=jQuery;d='<div class="messenger-spinner">\n    <span class="messenger-spinner-side messenger-spinner-side-left">\n        <span class="messenger-spinner-fill"></span>\n    </span>\n    <span class="messenger-spinner-side messenger-spinner-side-right">\n        <span class="messenger-spinner-fill"></span>\n    </span>\n</div>';e=(function(h){c(g,h);function g(){return g.__super__.constructor.apply(this,arguments)}g.prototype.template=function(m){var l;l=g.__super__.template.apply(this,arguments);l.append(f(d));return l};return g})(window.Messenger.Message);window.Messenger.themes.flat={Message:e}}).call(this);(function(g){var f={READONLY:1,MODIFY:2,HIDDEN:3,DISABLED:4};function e(p){var m=b(p);var h=g('<div id="weixinRecord_container_'+m.id+'"></div>');var r=g("<div></div>");r.append('<div class="formfield-wrap player-panel" style="display:none;margin-bottom:10px;position: relative;float:left;"> <div class="record-box">  <a class="btn-sound-delete">    <span class="icon icon-close">x</span>  </a>  <div class="sound-delete-box">      <div class="header">提示</div>      <div class="contenter"><p>确认删除当前？</p></div>      <div class="foot">        <a class="btn  btn-link red btn-delete" data-ignore="push">删除</a>        <a class="btn  btn-link gay btn-cancel">取消</a>      </div>    </div> </div></div>');if(m.value&&m.value.length>0){var s=JSON.parse(m.value);var q=window.navigator.userAgent;if(q.indexOf("MSIE")>=0){var l=g('<div style="float:left;"><object type="application/x-shockwave-flash" data="'+contextPath+'/portal/share/component/weixinRecord/audioplayer.swf" width="300" height="36" id="'+m.id+'"><param name="movie" value="'+contextPath+'/portal/share/component/weixinRecord/audioplayer.swf" /><param name="FlashVars" value="soundFile='+contextPath+s.path+'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="wmode" value="transparent" /></object></div>')}else{var l=g('<audio style="width:300px;height:30px;float: left;" src="'+contextPath+s.path+'" controls="controls"></audio>')}h.append(l);r.find(".player-panel").show();if(m.displayType==f.READONLY||m.displayType==f.DISABLED){r.find(".btn-sound-delete").hide()}}else{if(m.displayType==f.MODIFY){r.find(".record-panel").show()}}h.append(r);h.insertAfter(p);return h}function d(l){var h=l.data("weixinRecord").panel;h.find(".btn-sound-delete").on("click",function(m){h.find(".sound-delete-box").show().addClass("animated ")});h.find(".btn-delete").on("click",function(m){c(l)});h.find(".btn-cancel").on("click",function(m){h.find(".sound-delete-box").hide()})}function b(l){var h={};h.id=l.attr("id");h.name=l.attr("name");h.discription=HTMLDencode(l.data("discription"))?HTMLDencode(l.data("discription")):h.name;h.value=l.val();h.displayType=l.data("displayType");return h}function c(p){var q=p.data("weixinRecord");var l=q.panel;var m=q.options;var h=g("#"+m.id);h.val("");l.find(".sound-delete-box").hide();l.find(".player-panel").hide();l.find(".record-panel").show()}g.fn.obpmWeixinRecord=function(h,l){return this.each(function(){var m=g(this);var q=m.data("weixinRecord");if(q){g.extend(q.options,h)}else{var p=e(m);q=m.data("weixinRecord",{options:g.extend({},g.fn.obpmWeixinRecord.defaults,b(m),h),panel:p});d(m)}})},g.fn.obpmWeixinRecord.defaults={id:"",name:"",value:"",discription:"",displayType:null}})(jQuery);!function(c,b,f){!function d(p,h,q){function g(v,e){if(!h[v]){if(!p[v]){var t="function"==typeof require&&require;if(!e&&t){return t(v,!0)}if(m){return m(v,!0)}var r=new Error("Cannot find module '"+v+"'");throw r.code="MODULE_NOT_FOUND",r}var w=h[v]={exports:{}};p[v][0].call(w.exports,function(s){var u=p[v][1][s];return g(u?u:s)},w,w.exports,d,p,h,q)}return h[v].exports}for(var m="function"==typeof require&&require,l=0;l<q.length;l++){g(q[l])}return g}({1:[function(C,M,A){var z=function(g){return g&&g.__esModule?g:{"default":g}};Object.defineProperty(A,"__esModule",{value:!0});var E,F,x,K,J=C("./modules/handle-dom"),I=C("./modules/utils"),B=C("./modules/handle-swal-dom"),D=C("./modules/handle-click"),t=C("./modules/handle-key"),e=z(t),G=C("./modules/default-params"),L=z(G),H=C("./modules/set-params"),q=z(H);A["default"]=x=K=function(){function p(h){var g=Q;return g[h]===f?L["default"][h]:g[h]}var Q=arguments[0];if(J.addClass(b.body,"stop-scrolling"),B.resetInput(),Q===f){return I.logStr("SweetAlert expects at least 1 attribute!"),!1}var l=I.extend({},L["default"]);switch(typeof Q){case"string":l.title=Q,l.text=arguments[1]||"",l.type=arguments[2]||"";break;case"object":if(Q.title===f){return I.logStr('Missing "title" argument!'),!1}l.title=Q.title;for(var U in L["default"]){l[U]=p(U)}l.confirmButtonText=l.showCancelButton?"Confirm":L["default"].confirmButtonText,l.confirmButtonText=p("confirmButtonText"),l.doneFunction=arguments[1]||null;break;default:return I.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof Q),!1}q["default"](l),B.fixVerticalPosition(),B.openModal(arguments[1]);for(var T=B.getModal(),R=T.querySelectorAll("button"),N=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],O=function(g){return D.handleButton(g,l,T)},m=0;m<R.length;m++){for(var y=0;y<N.length;y++){var P=N[y];R[m][P]=O}}B.getOverlay().onclick=O,E=c.onkeydown;var w=function(g){return e["default"](g,l,T)};c.onkeydown=w,c.onfocus=function(){setTimeout(function(){F!==f&&(F.focus(),F=f)},0)},K.enableButtons()},x.setDefaults=K.setDefaults=function(g){if(!g){throw new Error("userParams is required")}if("object"!=typeof g){throw new Error("userParams has to be a object")}I.extend(L["default"],g)},x.close=K.close=function(){var m=B.getModal();J.fadeOut(B.getOverlay(),5),J.fadeOut(m,5),J.removeClass(m,"showSweetAlert"),J.addClass(m,"hideSweetAlert"),J.removeClass(m,"visible");var g=m.querySelector(".sa-icon.sa-success");J.removeClass(g,"animate"),J.removeClass(g.querySelector(".sa-tip"),"animateSuccessTip"),J.removeClass(g.querySelector(".sa-long"),"animateSuccessLong");var l=m.querySelector(".sa-icon.sa-error");J.removeClass(l,"animateErrorIcon"),J.removeClass(l.querySelector(".sa-x-mark"),"animateXMark");var h=m.querySelector(".sa-icon.sa-warning");return J.removeClass(h,"pulseWarning"),J.removeClass(h.querySelector(".sa-body"),"pulseWarningIns"),J.removeClass(h.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var p=m.getAttribute("data-custom-class");J.removeClass(m,p)},300),J.removeClass(b.body,"stop-scrolling"),c.onkeydown=E,c.previousActiveElement&&c.previousActiveElement.focus(),F=f,clearTimeout(m.timeout),!0},x.showInputError=K.showInputError=function(h){var g=B.getModal(),m=g.querySelector(".sa-input-error");J.addClass(m,"show");var l=g.querySelector(".sa-error-container");J.addClass(l,"show"),l.querySelector("p").innerHTML=h,setTimeout(function(){x.enableButtons()},1),g.querySelector("input").focus()},x.resetInputError=K.resetInputError=function(h){if(h&&13===h.keyCode){return !1}var g=B.getModal(),m=g.querySelector(".sa-input-error");J.removeClass(m,"show");var l=g.querySelector(".sa-error-container");J.removeClass(l,"show")},x.disableButtons=K.disableButtons=function(){var h=B.getModal(),g=h.querySelector("button.confirm"),l=h.querySelector("button.cancel");g.disabled=!0,l.disabled=!0},x.enableButtons=K.enableButtons=function(){var h=B.getModal(),g=h.querySelector("button.confirm"),l=h.querySelector("button.cancel");g.disabled=!1,l.disabled=!1},"undefined"!=typeof c?c.sweetAlert=c.swal=x:I.logStr("SweetAlert is a frontend module!"),M.exports=A["default"]},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(h,g,m){Object.defineProperty(m,"__esModule",{value:!0});var l={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};m["default"]=l,g.exports=m["default"]},{}],3:[function(m,v,u){Object.defineProperty(u,"__esModule",{value:!0});var g=m("./utils"),q=(m("./handle-swal-dom"),m("./handle-dom")),p=function(M,z,x){function N(s){A&&z.confirmButtonColor&&(r.style.backgroundColor=s)}var L,G,F,E=M||c.event,r=E.target||E.srcElement,A=-1!==r.className.indexOf("confirm"),K=-1!==r.className.indexOf("sweet-overlay"),I=q.hasClass(x,"visible"),B=z.doneFunction&&"true"===x.getAttribute("data-has-done-function");switch(A&&z.confirmButtonColor&&(L=z.confirmButtonColor,G=g.colorLuminance(L,-0.04),F=g.colorLuminance(L,-0.14)),E.type){case"mouseover":N(G);break;case"mouseout":N(L);break;case"mousedown":N(F);break;case"mouseup":N(G);break;case"focus":var H=x.querySelector("button.confirm"),D=x.querySelector("button.cancel");A?D.style.boxShadow="none":H.style.boxShadow="none";break;case"click":var J=x===r,l=q.isDescendant(x,r);if(!J&&!l&&I&&!z.allowOutsideClick){break}A&&B&&I?e(x,z):B&&I||K?h(x,z):q.isDescendant(x,r)&&"BUTTON"===r.tagName&&sweetAlert.close()}},e=function(r,l){var s=!0;q.hasClass(r,"show-input")&&(s=r.querySelector("input").value,s||(s="")),l.doneFunction(s),l.closeOnConfirm&&sweetAlert.close(),l.showLoaderOnConfirm&&sweetAlert.disableButtons()},h=function(r,l){var w=String(l.doneFunction).replace(/\s/g,""),s="function("===w.substring(0,9)&&")"!==w.substring(9,10);s&&l.doneFunction(!1),l.closeOnCancel&&sweetAlert.close()};u["default"]={handleButton:p,handleConfirm:e,handleCancel:h},v.exports=u["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(t,q,G){Object.defineProperty(G,"__esModule",{value:!0});var e=function(l,h){return new RegExp(" "+h+" ").test(" "+l.className+" ")},J=function(l,h){e(l,h)||(l.className+=" "+h)},x=function(l,h){var m=" "+l.className.replace(/[\t\r\n]/g," ")+" ";if(e(l,h)){for(;m.indexOf(" "+h+" ")>=0;){m=m.replace(" "+h+" "," ")}l.className=m.replace(/^\s+|\s+$/g,"")}},z=function(h){var l=b.createElement("div");return l.appendChild(b.createTextNode(h)),l.innerHTML},I=function(h){h.style.opacity="",h.style.display="block"},D=function(l){if(l&&!l.length){return I(l)}for(var h=0;h<l.length;++h){I(l[h])}},C=function(h){h.style.opacity="",h.style.display="none"},B=function(l){if(l&&!l.length){return C(l)}for(var h=0;h<l.length;++h){C(l[h])}},g=function(l,h){for(var m=h.parentNode;null!==m;){if(m===l){return !0}m=m.parentNode}return !1},w=function(l){l.style.left="-9999px",l.style.display="block";var h,m=l.clientHeight;return h="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(l).getPropertyValue("padding-top"),10):parseInt(l.currentStyle.padding),l.style.left="",l.style.display="none","-"+parseInt((m+h)/2)+"px"},H=function(l,h){if(+l.style.opacity<1){h=h||16,l.style.opacity=0,l.style.display="block";var p=+new Date,m=function(s){function r(){return s.apply(this,arguments)}return r.toString=function(){return s.toString()},r}(function(){l.style.opacity=+l.style.opacity+(new Date-p)/100,p=+new Date,+l.style.opacity<1&&setTimeout(m,h)});m()}l.style.display="block"},F=function(l,h){h=h||16,l.style.opacity=1;var p=+new Date,m=function(s){function r(){return s.apply(this,arguments)}return r.toString=function(){return s.toString()},r}(function(){l.style.opacity=+l.style.opacity-(new Date-p)/100,p=+new Date,+l.style.opacity>0?setTimeout(m,h):l.style.display="none"});m()},A=function(m){if("function"==typeof MouseEvent){var l=new MouseEvent("click",{view:c,bubbles:!1,cancelable:!0});m.dispatchEvent(l)}else{if(b.createEvent){var h=b.createEvent("MouseEvents");h.initEvent("click",!1,!1),m.dispatchEvent(h)}else{b.createEventObject?m.fireEvent("onclick"):"function"==typeof m.onclick&&m.onclick()}}},E=function(h){"function"==typeof h.stopPropagation?(h.stopPropagation(),h.preventDefault()):c.event&&c.event.hasOwnProperty("cancelBubble")&&(c.event.cancelBubble=!0)};G.hasClass=e,G.addClass=J,G.removeClass=x,G.escapeHtml=z,G._show=I,G.show=D,G._hide=C,G.hide=B,G.isDescendant=g,G.getTopMargin=w,G.fadeIn=H,G.fadeOut=F,G.fireClick=A,G.stopEventPropagation=E},{}],5:[function(h,q,g){Object.defineProperty(g,"__esModule",{value:!0});var p=h("./handle-dom"),m=h("./handle-swal-dom"),e=function(D,s,B){var w=D||c.event,x=w.keyCode||w.which,C=B.querySelector("button.confirm"),A=B.querySelector("button.cancel"),z=B.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(x)){for(var y=w.target||w.srcElement,r=-1,v=0;v<z.length;v++){if(y===z[v]){r=v;break}}9===x?(y=-1===r?C:r===z.length-1?z[0]:z[r+1],p.stopEventPropagation(w),y.focus(),s.confirmButtonColor&&m.setFocusStyle(y,s.confirmButtonColor)):13===x?("INPUT"===y.tagName&&(y=C,C.focus()),y=-1===r?C:f):27===x&&s.allowEscapeKey===!0?(y=A,p.fireClick(y,w)):y=f}};g["default"]=e,q.exports=g["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(G,F,Q){var D=function(g){return g&&g.__esModule?g:{"default":g}};Object.defineProperty(Q,"__esModule",{value:!0});var A=G("./utils"),I=G("./handle-dom"),J=G("./default-params"),z=D(J),O=G("./injected-html"),N=D(O),M=".sweet-alert",E=".sweet-overlay",H=function(){var g=b.createElement("div");for(g.innerHTML=N["default"];g.firstChild;){b.body.appendChild(g.firstChild)}},x=function(h){function g(){return h.apply(this,arguments)}return g.toString=function(){return h.toString()},g}(function(){var g=b.querySelector(M);return g||(H(),g=x()),g}),q=function(){var g=x();return g?g.querySelector("input"):void 0},K=function(){return b.querySelector(E)},P=function(h,g){var l=A.hexToRgb(g);h.style.boxShadow="0 0 2px rgba("+l+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},L=function(p){var m=x();I.fadeIn(K(),10),I.show(m),I.addClass(m,"showSweetAlert"),I.removeClass(m,"hideSweetAlert"),c.previousActiveElement=b.activeElement;var g=m.querySelector("button.confirm");g.focus(),setTimeout(function(){I.addClass(m,"visible")},500);var l=m.getAttribute("data-timer");if("null"!==l&&""!==l){var h=p;m.timeout=setTimeout(function(){var r=(h||null)&&"true"===m.getAttribute("data-has-done-function");r?h(null):sweetAlert.close()},l)}},t=function(){var h=x(),g=q();I.removeClass(h,"show-input"),g.value=z["default"].inputValue,g.setAttribute("type",z["default"].inputType),g.setAttribute("placeholder",z["default"].inputPlaceholder),B()},B=function(h){if(h&&13===h.keyCode){return !1}var g=x(),m=g.querySelector(".sa-input-error");I.removeClass(m,"show");var l=g.querySelector(".sa-error-container");I.removeClass(l,"show")},e=function(){var g=x();g.style.marginTop=I.getTopMargin(x())};Q.sweetAlertInitialize=H,Q.getModal=x,Q.getOverlay=K,Q.getInput=q,Q.setFocusStyle=P,Q.openModal=L,Q.resetInput=t,Q.resetInputError=B,Q.fixVerticalPosition=e},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(h,g,m){Object.defineProperty(m,"__esModule",{value:!0});var l='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';m["default"]=l,g.exports=m["default"]},{}],8:[function(v,p,w){Object.defineProperty(w,"__esModule",{value:!0});var h=v("./utils"),u=v("./handle-swal-dom"),q=v("./handle-dom"),g=["error","warning","info","success","input","prompt"],m=function(C){var J=u.getModal(),r=J.querySelector("h2"),x=J.querySelector("p"),I=J.querySelector("button.cancel"),E=J.querySelector("button.confirm");if(r.innerHTML=C.html?C.title:q.escapeHtml(C.title).split("\n").join("<br>"),x.innerHTML=C.html?C.text:q.escapeHtml(C.text||"").split("\n").join("<br>"),C.text&&q.show(x),C.customClass){q.addClass(J,C.customClass),J.setAttribute("data-custom-class",C.customClass)}else{var D=J.getAttribute("data-custom-class");q.removeClass(J,D),J.setAttribute("data-custom-class","")}if(q.hide(J.querySelectorAll(".sa-icon")),C.type&&!h.isIE8()){var B=function(){for(var K=!1,e=0;e<g.length;e++){if(C.type===g[e]){K=!0;break}}if(!K){return logStr("Unknown alert type: "+C.type),{v:!1}}var y=["success","error","warning","info"],t=f;-1!==y.indexOf(C.type)&&(t=J.querySelector(".sa-icon.sa-"+C.type),q.show(t));var L=u.getInput();switch(C.type){case"success":q.addClass(t,"animate"),q.addClass(t.querySelector(".sa-tip"),"animateSuccessTip"),q.addClass(t.querySelector(".sa-long"),"animateSuccessLong");break;case"error":q.addClass(t,"animateErrorIcon"),q.addClass(t.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":q.addClass(t,"pulseWarning"),q.addClass(t.querySelector(".sa-body"),"pulseWarningIns"),q.addClass(t.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":L.setAttribute("type",C.inputType),L.value=C.inputValue,L.setAttribute("placeholder",C.inputPlaceholder),q.addClass(J,"show-input"),setTimeout(function(){L.focus(),L.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof B){return B.v}}if(C.imageUrl){var l=J.querySelector(".sa-icon.sa-custom");l.style.backgroundImage="url("+C.imageUrl+")",q.show(l);var s=80,H=80;if(C.imageSize){var G=C.imageSize.toString().split("x"),z=G[0],F=G[1];z&&F?(s=z,H=F):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+C.imageSize)}l.setAttribute("style",l.getAttribute("style")+"width:"+s+"px; height:"+H+"px")}J.setAttribute("data-has-cancel-button",C.showCancelButton),C.showCancelButton?I.style.display="inline-block":q.hide(I),J.setAttribute("data-has-confirm-button",C.showConfirmButton),C.showConfirmButton?E.style.display="inline-block":q.hide(E),C.cancelButtonText&&(I.innerHTML=q.escapeHtml(C.cancelButtonText)),C.confirmButtonText&&(E.innerHTML=q.escapeHtml(C.confirmButtonText)),C.confirmButtonColor&&(E.style.backgroundColor=C.confirmButtonColor,E.style.borderLeftColor=C.confirmLoadingButtonColor,E.style.borderRightColor=C.confirmLoadingButtonColor,u.setFocusStyle(E,C.confirmButtonColor)),J.setAttribute("data-allow-outside-click",C.allowOutsideClick);var A=C.doneFunction?!0:!1;J.setAttribute("data-has-done-function",A),C.animation?"string"==typeof C.animation?J.setAttribute("data-animation",C.animation):J.setAttribute("data-animation","pop"):J.setAttribute("data-animation","none"),J.setAttribute("data-timer",C.timer)};w["default"]=m,p.exports=w["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(m,v,u){Object.defineProperty(u,"__esModule",{value:!0});var g=function(r,l){for(var s in l){l.hasOwnProperty(s)&&(r[s]=l[s])}return r},q=function(r){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return l?parseInt(l[1],16)+", "+parseInt(l[2],16)+", "+parseInt(l[3],16):null},p=function(){return c.attachEvent&&!c.addEventListener},e=function(l){c.console&&c.console.log("SweetAlert: "+l)},h=function(s,r){s=String(s).replace(/[^0-9a-f]/gi,""),s.length<6&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]),r=r||0;var x,w,l="#";for(w=0;3>w;w++){x=parseInt(s.substr(2*w,2),16),x=Math.round(Math.min(Math.max(0,x+x*r),255)).toString(16),l+=("00"+x).substr(x.length)}return l};u.extend=g,u.hexToRgb=q,u.isIE8=p,u.logStr=e,u.colorLuminance=h},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);(function(b){b(["jquery"],function(c){return(function(){var v;var e;var E=0;var d={error:"error",info:"info",success:"success",warning:"warning",defaults:"defaults"};var C={clear:t,remove:D,error:x,getContainer:z,info:B,options:{},subscribe:l,success:g,version:"2.1.2",warning:w,defaults:q};var h;return C;function x(G,H,F){return s({type:d.error,iconClass:p().iconClasses.error,message:G,optionsOverride:F,title:H})}function z(F,G){if(!F){F=p()}v=c("#"+F.containerId);if(v.length){return v}if(G){v=f(F)}return v}function B(G,H,F){return s({type:d.info,iconClass:p().iconClasses.info,message:G,optionsOverride:F,title:H})}function l(F){e=F}function g(G,H,F){return s({type:d.success,iconClass:p().iconClasses.success,message:G,optionsOverride:F,title:H})}function w(G,H,F){return s({type:d.warning,iconClass:p().iconClasses.warning,message:G,optionsOverride:F,title:H})}function q(G,H,F){return s({type:d.defaults,iconClass:p().iconClasses.defaults,message:G,optionsOverride:F,title:H})}function t(F,H){var G=p();if(!v){z(G)}if(!A(F,G,H)){u(G)}}function D(F){var G=p();if(!v){z(G)}if(F&&c(":focus",F).length===0){r(F);return}if(v.children().length){v.remove()}}function u(F){var H=v.children();for(var G=H.length-1;G>=0;G--){A(c(H[G]),F)}}function A(F,G,H){var I=H&&H.force?H.force:false;if(F&&(I||c(":focus",F).length===0)){F[G.hideMethod]({duration:G.hideDuration,easing:G.hideEasing,complete:function(){r(F)}});return true}return false}function f(F){v=c("<div/>").attr("id",F.containerId).addClass(F.positionClass).attr("aria-live","polite").attr("role","alert");v.appendTo(c(F.target));return v}function m(){return{tapToDismiss:true,toastClass:"toast",containerId:"toast-container",debug:false,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1000,hideEasing:"swing",onHidden:undefined,closeMethod:false,closeDuration:false,closeEasing:false,extendedTimeOut:1000,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning",defaults:"toast-default"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5000,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:false,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:true,preventDuplicates:false,progressBar:false}}function y(F){if(!e){return}e(F)}function s(ad){var Q=p();var H=ad.iconClass||Q.iconClass;if(typeof(ad.optionsOverride)!=="undefined"){Q=c.extend(Q,ad.optionsOverride);H=ad.optionsOverride.iconClass||H}if(T(Q,ad)){return}E++;v=z(Q,true);var ae=null;var O=c("<div/>");var X=c("<div/>");var ac=c("<div/>");var V=c("<div/>");var F=c(Q.closeHtml);var aa={intervalId:null,hideEta:null,maxHideTime:null};var I={toastId:E,state:"visible",startTime:new Date(),options:Q,map:ad};R();J();N();y(I);if(Q.debug&&console){console.log(I)}return O;function Z(af){if(af==null){af=""}return new String(af).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function R(){M();W();L();ab();S();Y()}function N(){O.hover(P,K);if(!Q.onclick&&Q.tapToDismiss){O.click(G)}if(Q.closeButton&&F){F.click(function(af){if(af.stopPropagation){af.stopPropagation()}else{if(af.cancelBubble!==undefined&&af.cancelBubble!==true){af.cancelBubble=true}}G(true)})}if(Q.onclick){O.click(function(af){Q.onclick(af);G()})}}function J(){O.hide();O[Q.showMethod]({duration:Q.showDuration,easing:Q.showEasing,complete:Q.onShown});if(Q.timeOut>0){ae=setTimeout(G,Q.timeOut);aa.maxHideTime=parseFloat(Q.timeOut);aa.hideEta=new Date().getTime()+aa.maxHideTime;if(Q.progressBar){aa.intervalId=setInterval(U,10)}}}function M(){if(ad.iconClass){O.addClass(Q.toastClass).addClass(H)}}function Y(){if(Q.newestOnTop){v.prepend(O)}else{v.append(O)}}function W(){if(ad.title){X.append(!Q.escapeHtml?ad.title:Z(ad.title)).addClass(Q.titleClass);O.append(X)}}function L(){if(ad.message){ac.append(!Q.escapeHtml?ad.message:Z(ad.message)).addClass(Q.messageClass);O.append(ac)}}function ab(){if(Q.closeButton){F.addClass("toast-close-button").attr("role","button");O.prepend(F)}}function S(){if(Q.progressBar){V.addClass("toast-progress");O.prepend(V)}}function T(af,ag){if(af.preventDuplicates){if(ag.message===h){return true}else{h=ag.message}}return false}function G(af){var ai=af&&Q.closeMethod!==false?Q.closeMethod:Q.hideMethod;var ag=af&&Q.closeDuration!==false?Q.closeDuration:Q.hideDuration;var ah=af&&Q.closeEasing!==false?Q.closeEasing:Q.hideEasing;if(c(":focus",O).length&&!af){return}clearTimeout(aa.intervalId);return O[ai]({duration:ag,easing:ah,complete:function(){r(O);if(Q.onHidden&&I.state!=="hidden"){Q.onHidden()}I.state="hidden";I.endTime=new Date();y(I)}})}function K(){if(Q.timeOut>0||Q.extendedTimeOut>0){ae=setTimeout(G,Q.extendedTimeOut);aa.maxHideTime=parseFloat(Q.extendedTimeOut);aa.hideEta=new Date().getTime()+aa.maxHideTime}}function P(){clearTimeout(ae);aa.hideEta=0;O.stop(true,true)[Q.showMethod]({duration:Q.showDuration,easing:Q.showEasing})}function U(){var af=((aa.hideEta-(new Date().getTime()))/aa.maxHideTime)*100;V.width(af+"%")}}function p(){return c.extend({},m(),C.options)}function r(F){if(!v){v=z()}if(F.is(":visible")){return}F.remove();F=null;if(v.children().length===0){v.remove();h=undefined}}})()})}(typeof define==="function"&&define.amd?define:function(c,b){if(typeof module!=="undefined"&&module.exports){module.exports=b(require("jquery"))}else{window.toastr=b(window.jQuery)}}));(function(b){OBPM.message={defaultOptions:{swalOptions:{title:"",text:"",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"确定",cancelButtonText:"取消",closeOnConfirm:true},toastrOptions:{closeButton:true,debug:false,progressBar:true,positionClass:"toast-top-right",onclick:null,showDuration:"400",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}},showConfirm:function(d,c,e){this.defaultOptions.swalOptions.title=d;this.defaultOptions.swalOptions.text=c;swal(this.defaultOptions.swalOptions,e)},showSuccess:function(c){toastr.options=this.defaultOptions.toastrOptions;toastr.success(c)},showInfo:function(c){toastr.options=this.defaultOptions.toastrOptions;toastr.info(c)},showWarning:function(c){toastr.options=this.defaultOptions.toastrOptions;toastr.warning(c)},showError:function(c){toastr.options=this.defaultOptions.toastrOptions;toastr.error(c)},showDefault:function(c,d){toastr.options=b.extend({},this.defaultOptions.toastrOptions,c);toastr.defaults(d)}};b.fn.obpmMessage=OBPM.message})(jQuery);(function(e){e.fn.Isignature=function(h,l){if(typeof h=="string"){var m=e.fn.Isignature.methods[h];if(m){return m(this,l)}}h=h||{};return this.each(function(){var p=e.data(this,"Isignature");if(p){e.extend(p.options,h)}else{e.data(this,"Isignature",{options:e.extend({},e.fn.Isignature.defaults,e.fn.Isignature.parseOptions(this),h)});d(this)}})};e.fn.Isignature.methods={sign:function(h){return h.each(function(){_sign(this)})},remove:function(h){return h.each(function(){_remove(this)})}};e.fn.Isignature.parseOptions=function(h){return c(h)};e.fn.Isignature.defaults={actType:46,actId:""};function g(p){var m=e.extend({id:"",userId:"",img:"",width:120,height:120,left:12,top:12,offset:12,parent:undefined,isNew:true},p||{});var q=e(m.parent);var l={minX:m.offset,minY:m.offset,maxX:q.width()-m.width-m.offset-18,maxY:q.height()-m.height-m.offset-18};var h=e("<div class='sign' data-userid='"+m.userid+"' data-img='"+m.img+"' data-width='"+m.width+"' data-height='"+m.height+"' data-offset='"+m.offset+"' style='height:"+m.height+"px;width:"+m.width+"px;top:"+m.top+"px;left:"+m.left+"px'><img src='"+contextPath+m.img+"' draggable='false'/></div>").appendTo(q);h.data("options",m);if(!m.isNew){h.addClass("ok");return h}h.append("<a class='btn ok' >确 定</a><a class='btn del' >取 消</a>");h.on("mousedown",function(s){h.data("x",s.clientX);h.data("y",s.clientY);var r=h.position();e(document).on("mousemove",function(u){var t=u.clientX-h.data("x")+r.left;var v=u.clientY-h.data("y")+r.top;t=t<l.minX?l.minX:t;t=t>l.maxX?l.maxX:t;v=v<l.minY?l.minY:v;v=v>l.maxY?l.maxY:v;h.css({left:t,top:v})}).on("mouseup",function(){e(this).off("mousemove").off("mouseup")})});e(".ok",h).click(function(){var s=e("input[name='content.sign']").val()?JSON.parse(e("input[name='content.sign']").val()):[];var r={id:m.id,userId:m.userId,img:m.img,left:h.position().left,top:h.position().top};s.push(r);e("input[name='content.sign']").val(JSON.stringify(s));m.left=r.left;m.top=r.top;h.addClass("ok").off("mousedown").find(".btn").remove();Activity._LOCK=false;Activity.doExecute(m.actId,46)});e(".del",h).click(function(){h.remove()});h.data("options",m);return h}function d(r){var q=e.data(r,"Isignature");var m=q.options;e(r).addClass("isignature");var l="<div class='toolPanel' data-act-id='"+m.actId+"' style='display:none;'><a class='cancel_btn'><img src='../../share/component/sign/close.png'/></a><div class='sign-group' ><a class='btn btn-primary manager_btn' >印章管理</a><select id='sign_select' style='width:250px;'><option value=''>请选择一个印章</option></select><a class='btn btn-success sign_btn' >盖 章</a></div></div>";var l=e(l).appendTo(r);f();e(".sign_btn",l).click(function(){var u=e("#sign_select").val();if(u.length==0){alert("签章前请先选中一个印章！");return}var t=prompt("请输入密码","");if(t.length==0){alert("密码不能为空！");return}e.ajax({type:"POST",url:contextPath+"/portal/user/findSign.action",data:{id:u,pw:t},dataType:"json",async:false,success:function(v){if(v.status==1){var w={actId:l.data("actId"),userId:WebUser.id,img:"/uploads/signs/"+v.data.img,parent:r,isNew:true};var x=new g(w);Activity._LOCK=true}else{alert(v.message)}}})});e(".manager_btn",l).click(function(){var t=contextPath+"/portal/share/component/sign/manager.jsp";var u="../H5/resource/component/artDialog";OBPM.dialog.show({opener:window,width:720,height:500,url:t,icon:"icons_3",path:u,title:"印章管理",close:function(v){f()}})});e(".cancel_btn",l).click(function(){l.hide()});var p=e("input[name='content.sign']").val()?JSON.parse(e("input[name='content.sign']").val()):[];for(var h=0;h<p.length;h++){var s=p[h];var m=e.extend({width:120,height:120,offset:12,parent:r,isNew:false},s||{});new g(m)}}function f(){e.ajax({type:"POST",url:contextPath+"/portal/user/getSigns.action",data:{},dataType:"json",async:true,success:function(h){if(h.status==1){var p=e("#sign_select");p.find("option").remove();e("<option value=''>请选择一个印章</option>").appendTo(p);var m=h.data;for(var q=0;q<m.length;q++){var l=m[q];e("<option value='"+l.id+"'>"+l.name+"</option>").appendTo(p)}}else{alert(h.message)}}})}function b(m){var l=e.data(m,"Isignature");var h=l.options;alert("call open method");if(h.onOpen){h.onOpen.apply(this,arguments)}}function c(l){var h=e(l);return{}}})(jQuery);
/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/
;!function(){function Z(b){return b.replace(G,"").replace(F,",").replace(E,"").replace(D,"").replace(C,"").split(B)}function Y(b){return"'"+b.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function X(av,au){function at(c){return ak+=c.split(/\n/).length-1,am&&(c=c.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),c&&(c=af[1]+Y(c)+af[2]+"\n"),c}function ar(d){var l=ak;if(an?d=an(d,au):aq&&(d=d.replace(/\n/g,function(){return ak++,"$line="+ak+";"})),0===d.indexOf("=")){var h=al&&!/^=[=#]/.test(d);if(d=d.replace(/^=[=#]?|[\s;]*$/g,""),h){var g=d.replace(/\s*\([^\)]+\)/,"");M[g]||/^(include|print)$/.test(g)||(d="$escape("+d+")")}else{d="$string("+d+")"}d=af[1]+d+af[2]}return aq&&(d="$line="+l+";"+d),I(Z(d),function(e){if(e&&!aj[e]){var c;c="print"===e?ad:"include"===e?ac:M[e]?"$utils."+e:L[e]?"$helpers."+e:"$data."+e,ab+=e+"="+c+",",aj[e]=!0}}),d+"\n"}var aq=au.debug,ap=au.openTag,ao=au.closeTag,an=au.parser,am=au.compress,al=au.escape,ak=1,aj={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},ah="".trim,af=ah?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],ae=ah?"$out+=text;return $out;":"$out.push(text);",ad="function(){var text=''.concat.apply('',arguments);"+ae+"}",ac="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+ae+"}",ab="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(aq?"$line=0,":""),aa=af[0],r="return new String("+af[3]+");";I(av.split(ap),function(e){e=e.split(ao);var d=e[0],f=e[1];1===e.length?aa+=at(d):(aa+=ar(d),f&&(aa+=at(f)))});var b=ab+aa+r;aq&&(b="try{"+b+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+Y(av)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var ai=new Function("$data","$filename",b);return ai.prototype=M,ai}catch(ag){throw ag.temp="function anonymous($data,$filename) {"+b+"}",ag}}var W=function(d,c){return"string"==typeof c?J(c,{filename:d}):T(d,c)};W.version="3.0.0",W.config=function(d,c){V[d]=c};var V=W.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},U=W.cache={};W.render=function(d,c){return J(d,c)};var T=W.renderFile=function(e,d){var f=W.get(e)||K({filename:e,name:"Render Error",message:"Template not found"});return d?f(d):f};W.get=function(f){var e;if(U[f]){e=U[f]}else{if("object"==typeof document){var h=document.getElementById(f);if(h){var g=(h.value||h.innerHTML).replace(/^\s*|\s*$/g,"");e=J(g,{filename:f})}}}return e};var S=function(d,c){return"string"!=typeof d&&(c=typeof d,"number"===c?d+="":d="function"===c?S(d.call(d)):""),d},R={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},Q=function(b){return R[b]},P=function(b){return S(b).replace(/&(?![\w#]+;)|[<>"']/g,Q)},O=Array.isArray||function(b){return"[object Array]"==={}.toString.call(b)},N=function(f,e){var h,g;if(O(f)){for(h=0,g=f.length;g>h;h++){e.call(f,f[h],h,f)}}else{for(h in f){e.call(f,f[h],h)}}},M=W.utils={$helpers:{},$include:T,$string:S,$escape:P,$each:N};W.helper=function(d,c){L[d]=c};var L=W.helpers=M.$helpers;W.onerror=function(e){var d="Template Error\n\n";for(var f in e){d+="<"+f+">\n"+e[f]+"\n\n"}"object"==typeof console&&console.error(d)};var K=function(b){return W.onerror(b),function(){return"{Template Error}"}},J=W.compile=function(e,c){function q(g){try{return new l(g,m)+""}catch(b){return c.debug?K(b)():(c.debug=!0,J(e,c)(g))}}c=c||{};for(var p in V){void 0===c[p]&&(c[p]=V[p])}var m=c.filename;try{var l=X(e,c)}catch(f){return f.filename=m||"anonymous",f.name="Syntax Error",K(f)}return q.prototype=l.prototype,q.toString=function(){return l.toString()},m&&c.cache&&(U[m]=q),q},I=M.$each,H="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",G=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,F=/[^\w$]+/g,E=new RegExp(["\\b"+H.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),D=/^\d[^,]*|,\d[^,]*/g,C=/^,+|,+$/g,B=/^$|,+/;V.openTag="{{",V.closeTag="}}";var A=function(g,f){var m=f.split(":"),l=m.shift(),h=m.join(":")||"";return h&&(h=", "+h),"$helpers."+l+"("+g+h+")"};V.parser=function(ab){ab=ab.replace(/^\s/,"");var aa=ab.split(" "),z=aa.shift(),y=aa.join(" ");switch(z){case"if":ab="if("+y+"){";break;case"else":aa="if"===aa.shift()?" if("+aa.join(" ")+")":"",ab="}else"+aa+"{";break;case"/if":ab="}";break;case"each":var x=aa[0]||"$data",w=aa[1]||"as",v=aa[2]||"$value",u=aa[3]||"$index",t=v+","+u;"as"!==w&&(x="[]"),ab="$each("+x+",function("+t+"){";break;case"/each":ab="});";break;case"echo":ab="print("+y+");";break;case"print":case"include":ab=z+"("+aa.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(y)){var s=!0;0===ab.indexOf("#")&&(ab=ab.substr(1),s=!1);for(var r=0,q=ab.split("|"),p=q.length,d=q[r++];p>r;r++){d=A(d,q[r])}ab=(s?"=":"=#")+d}else{ab=W.helpers[z]?"=#"+z+"("+aa.join(",")+");":"="+ab}}return ab},"function"==typeof define?define(function(){return W}):"undefined"!=typeof exports?module.exports=W:this.template=W}();
/*! fly - v1.0.0 - 2014-12-22
* https://github.com/amibug/fly
* Copyright (c) 2014 wuyuedong; Licensed MIT */
;!function(b){b.fly=function(g,p){var m={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:b.noop},l=this,h=b(g);l.init=function(c){this.setOptions(c),!!this.settings.autoPlay&&this.play()},l.setOptions=function(x){this.settings=b.extend(!0,{},m,x);var w=this.settings,v=w.start,u=w.end;h.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=u.width&&null!=u.height&&b.extend(!0,v,{width:h.width(),height:h.height()});var t=Math.min(v.top,u.top)-Math.abs(v.left-u.left)/3;t<w.vertex_Rtop&&(t=Math.min(w.vertex_Rtop,Math.min(v.top,u.top)));var s=Math.sqrt(Math.pow(v.top-u.top,2)+Math.pow(v.left-u.left,2)),r=Math.ceil(Math.min(Math.max(Math.log(s)/0.05-75,30),100)/w.speed),q=v.top==t?0:-Math.sqrt((u.top-t)/(v.top-t)),f=(q*v.left-u.left)/(q-1),d=u.left==f?0:(u.top-t)/Math.pow(u.left-f,2);b.extend(!0,w,{count:-1,steps:r,vertex_left:f,vertex_top:t,curvature:d})},l.play=function(){this.move()},l.move=function(){var z=this.settings,y=z.start,x=z.count,w=z.steps,v=z.end,u=y.left+(v.left-y.left)*x/w,t=0==z.curvature?y.top+(v.top-y.top)*x/w:z.curvature*Math.pow(u-z.vertex_left,2)+z.vertex_top;if(null!=v.width&&null!=v.height){var s=w/2,r=v.width-(v.width-y.width)*Math.cos(s>x?0:(x-s)/(w-s)*Math.PI/2),q=v.height-(v.height-y.height)*Math.cos(s>x?0:(x-s)/(w-s)*Math.PI/2);h.css({width:r+"px",height:q+"px","font-size":Math.min(r,q)+"px"})}h.css({left:u+"px",top:t+"px"}),z.count++;var f=window.requestAnimationFrame(b.proxy(this.move,this));x==w&&(window.cancelAnimationFrame(f),z.onEnd.apply(this))},l.destory=function(){h.remove()},l.init(p)},b.fn.fly=function(c){return this.each(function(){void 0==b(this).data("fly")&&b(this).data("fly",new b.fly(this,c))})}}(jQuery);var alSavedElements=new Array();var bCheckForm=true;function saveElementsOnLoad(b){saveFormElements(b)}function checkFormOnUnload(b){var c=isFormChanged(b);if(bCheckForm&&c){return"该页面已经被修改，离开后所有修改全部丢失！"}return}function saveFormElements(c){for(var b=0;b<c.elements.length;b++){if("select-one"==c.elements[b].type){alSavedElements.push(c.elements[b].selectedIndex);continue}if("radio"==c.elements[b].type||"checkbox"==c.elements[b].type){alSavedElements.push(c.elements[b].checked);continue}alSavedElements.push(c.elements[b].value)}}function isFormChanged(d){var b=false;if(d.elements.length!=alSavedElements.length){b=true;return b}for(var c=0;c<d.elements.length;c++){if("text"==d.elements[c].type&&d.elements[c].type!="hidden"){if(d.elements[c].value!=""){b=true;break}}if("hidden"==d.elements[c].type&&d.elements[c].title=="optionSelect"){if(d.elements[c].value!=""){b=true;break}}if(("radio"==d.elements[c].type||"checkbox"==d.elements[c].type)&&d.elements[c].type!="hidden"){if(d.elements[c].checked){b=true;break}}if(("textarea"==d.elements[c].type)&&d.elements[c].style.display!="none"){if(d.elements[c].value!=""){b=true;break}}}return b}function ignoreFormCheck(){bCheckForm=false}function forceFormCheck(){bCheckForm=true}function getFormStatus(b){return isFormChanged(b)}(function($){function getDatas(docId,applicationid,objname,showname,lastmodier,modifyTime,value,node){if(document.getElementsByName(objname)<1){return}var html="";FormHelper.getFieldModifiedLog(docId,applicationid,objname,function(defvar){var obj=getRelStr(defvar);html="<table width='100%' border='0' cellspacing='10'>";html+="<tr><td nowrap='nowrap'>"+lastmodier+"</td><td nowrap='nowrap'>"+modifyTime+"</td><td>"+value+"</td><td>"+node+"</td></tr>";if(obj!=null){if(obj.length>0){for(var j=0;j<obj.length;j++){html+="<tr><td  nowrap='nowrap'>"+obj[j].modifier+"</td>";html+="<td  nowrap='nowrap'>"+obj[j].time+"</td>";if(obj[j].fieldValue!=null){html+="<td>"+obj[j].fieldValue+"</td>"}else{html+="<td></td>"}if(typeof(obj[j].statelabel)=="undefined"){obj[j].statelabel=""}html+="<td>"+obj[j].statelabel+"</td>";html+="</tr>"}}}html+="</tabel>";jQuery("#tipsMsgDivContent").html(html)})}function getRelStr(str){var obj=eval(str);if(obj instanceof Array){return obj}else{return new Array()}}$.fn.showHistoryRecord=function(){return this.each(function(){var $field=jQuery(this);var getName=$field.attr("getName");var id=$field.attr("id");var applicationId=$field.attr("applicationId");var showName=$field.attr("showName");var modifier=$field.attr("modifier");var modifiedTime=$field.attr("modifiedTime");var value=$field.attr("value");var node=$field.attr("node");var time1="";var time2="";var time3="";var historyMsg=jQuery("<div id='historyMsg' style='position:absolute;background-color:#D7E4F3;display: none;width:400px; z-index:1;'><div id='tipsMsgDivTitle' style='height:24px;line-height:24px;text-align:right;'><span style='float: left;margin-left: 10px;margin-top:2px;'>"+HistoryRecord+"</span><a id='closeHistory' style='padding:0 5px;cursor:pointer;'>"+closeStr+"</a></div><div id='tipsMsgDivContent' style='margin: 3px;background-color: white;width:394px;height:200px;overflow: auto;'></div></div>");jQuery("#"+getName+"_showHisDiv").children().css("border","1px solid red");jQuery("body").append(historyMsg);jQuery("#"+getName+"_showHisDiv").bind("mouseover",function(e){clearTimeout(time2);time3=setTimeout(function(){if(jQuery("#tooltipParent").size()>0){jQuery("#tooltipParent").remove()}var tooltipParent=jQuery("<span id='tooltipParent' style='font-size:0px;width:0px;height:0px;line-height:0px;position:relative;'></span>");var tooltip=jQuery("<span id='tipsMsgDiv' style='display:none;position:absolute;z-index:100;width:70px;height:22px;line-height:22px;'><span id='showHistory' style='font-size:12px;color:#00f;cursor:pointer;background:#fff;'><img title="+HistoryRecord+" style='vertical-align:middle;' src="+contextPath+"/resource/imgnew/extract_target.gif />"+HistoryRecord+"</span></span>");jQuery("#"+getName+"_showHisDiv").parent().append(tooltipParent);tooltipParent.append(tooltip);getDatas(id,applicationId,getName,showName,modifier,modifiedTime,value,node);tooltip.stop().fadeTo(200,1);jQuery("#showHistory").click(function(){var winWidth="";var winHeight="";if(window.innerWidth){winWidth=window.innerWidth;winHeight=window.innerHeight}else{if((document.body)&&(document.body.clientWidth)){winWidth=document.body.clientWidth;winHeight=document.body.clientHeight}}jQuery("#historyMsg").show();jQuery("#historyMsg").css({top:winHeight/2-115,left:winWidth/2-200});var time1="";var time2="";jQuery("#showHistory").bind("mouseover",function(){clearTimeout(time2)}).bind("mouseout",function(){time2=setTimeout(function(){jQuery("#historyMsg").stop().fadeOut(200,0,function(){jQuery("#historyMsg").hide()})},500)});jQuery("#historyMsg").bind("mouseover",function(){clearTimeout(time1);clearTimeout(time2)}).bind("mouseout",function(){time1=setTimeout(function(){jQuery("#historyMsg").stop().fadeOut(200,0,function(){jQuery("#historyMsg").hide()})},500)});jQuery("#closeHistory").click(function(){jQuery("#historyMsg").stop().fadeOut(200,0,function(){jQuery("#historyMsg").hide()})})});jQuery("#tipsMsgDiv").bind("mouseover",function(){clearTimeout(time2);clearTimeout(time1)}).bind("mouseout",function(){time1=setTimeout(function(){jQuery("#tooltipParent").remove()},300)})},300)}).bind("mouseout",function(){clearTimeout(time3);time2=setTimeout(function(){jQuery("#tooltipParent").remove()},300)});$field.remove()})}})(jQuery);(function(b){b.fn.obpmPending=function(){return this.each(function(){var h=jQuery(this);var d=h.attr("id");var m=h.attr("formId");var l=h.attr("summaryCfgId");var c=h.attr("Summary");var f=h.attr("isread");f=(f=="true");var g="";var e="";var p="";if(f){e="pd";p="16x16_0700/pencil";alt="己读"}else{e="pdread";p="16x16_0380/email_edit";alt="未读"}g+="<a title='"+alt+"' class='"+e+"' href=\"javaScript:viewDoc('"+d+"', '"+m+"','"+l+"')\" style='background:url(\"../../lib/icon/"+p+".png\") no-repeat;display: block;background-position: 0 50%;padding-left: 20px;margin-bottom:5px;'>";g+="&nbsp;"+c+"&nbsp;";g+="</a>";jQuery(g).replaceAll(h)})}})(jQuery);var activityAction=contextPath+"/portal/dynaform/activity/action.action";var printAction=contextPath+"/portal/dynaform/document/print.action";var OPEN_TYPE_DIV=277;var SAVE_SARTWORKFLOW=4;var SAVE_NEW_WITH_OLD=12;var SAVE_NEW_WITHOUT_OLD=17;var DOCUMENT_UPDATE=34;var CLOSE_WINDOW=8;var JUMP=32;var JUMP_PAGE=39;var DISPATCHER=37;var BACK=10;var fieldValChanged=false;function ifSubSaveForm(){var b=true;jQuery("#toAll").find("iframe[name='display_view']").each(function(){var c=jQuery(this)[0].contentWindow;if(c&&typeof c.getFieldValChanged=="function"){if(c.getFieldValChanged()){if(confirm("确实要保存主表单吗?\r\n子表单数据已修改且未保存！\r\n按“确定”继续，或按“取消”留在当前页面。")){c.getFieldValChanged(false);return false}else{b=false;return false}}}});return b}var isComplete=false;function doSave(e,f){if(isRefreshLoading){setTimeout(function(){doSave(e,f)},200);return false}var d=document.getElementById("operation");if(d){d.value="doSave"}if(toggleButton("button_act")){return false}setHTMLValue();var c=doWordSave();if(!c){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return}var b=false;if(!b||b=="false"){ev_action(e,f)}else{if(c>=0){ev_action(e,f)}}}function doWordSave(){var b=true;var c=jQuery("iframe[_type='word']");c.each(function(){var e=jQuery(this);if(e.attr("_type")=="word"){isword=true;var d=window.frames[e.attr("id")];if(d){if(typeof d.doSave=="function"){b=d.doSave();if(b){if(b.indexOf("$$")>=0){b=false;return false}else{document.getElementsByName("content.versions")[0].value=b;b=true}}}}}});return b}function ev_action(b,d){var c=beforeAct(b);var e=ifSubSaveForm();if(c&&e){ev_action2(b,d)}else{recoveryButSta("button_act")}}function ev_action2(e,f){if(e=="8"){window.close()}ignoreFormCheck();var c=activityAction;makeAllFieldAble();if(f){var b=document.getElementById("view_id").value;var g=c+"?_activityid="+f+"&view_id="+b}try{document.forms[0].action=g;document.forms[0].submit()}catch(d){if(toggleButton("button_act")){return false}}}function resizeParentWin(){var e=document.getElementById("view_id");if(e){var d=e.value;if(d&&d!=""){var b=jQuery("iframe[id="+d+"]",window.parent.document)[0];if(b){var c=document.getElementById("toAll").clientHeight+50;if(c>400){c=400}else{if(c<50){c=50}}b.style.height=c+"px"}}}}function adjustDocumentLayout4form(){var c=document.body.clientHeight;jQuery("#container").height(c-10);var b="";if(jQuery("#activityTable").attr("id")=="activityTable"){b=jQuery("#activityTable").height()}jQuery("#contentTable").height(c-b-15)}function resizeMainLeft(){var b=document.body.clientHeight;var d=jQuery("#contentTable").css("height");var c=d.replace(/px/,"");if(c<=b){jQuery("#MainLeft").height(b)}}var resize_count=0;function resizeWindow(){var c=jQuery("#activityTable").height(),e=jQuery("#toAll").height(),b=c+e;var d=jQuery("#container").width(),f=b>600?600:b+70;if(allFrameIsLoaded()&&d>=600){OBPM.dialog.resize(d,f)}else{setTimeout(function(){if(resize_count<4){resize_count++;resizeWindow()}},200)}}function Signatures4Judge(){if(navigator.userAgent.indexOf("MSIE")<=0&&navigator.userAgent.indexOf("TRIDENT")<=0){return}if(document_content.SignatureControl!=null){document_content.SignatureControl.ShowSignature(contentId)}}function showPromptMsg(){var funName=typeName;var url=urlValue;url+="&_refreshDocument=true";var msg=document.getElementsByName("message")[0].value;if(msg){eval("do"+funName+"(msg , url);")}}function refresh4Record(){var b=jQuery("#resourceid").val();var c=b.split(",")[0];var d="";if(jQuery("#_viewid").attr("id")=="_viewid"){d=jQuery("#_viewid").val()}else{d=jQuery("#view_id").val()}if(c!=null&&c!=""){if(typeof(window.parent.reflashTotalRow)=="function"){window.parent.reflashTotalRow(c,d)}}}function email_transpond(g,f){var h=application;var b=docidR;var e=formidR;var d=document.getElementById("signatureExist").value;var l=window.location.toString();var c="../share/dynaform/view/activity/emailTranspond.jsp?application="+h;if(ev_runbeforeScript(f)){OBPM.dialog.show({opener:window.parent.parent,width:700,height:300,args:{_activityid:f,application:h,docid:b,formid:e,transpond:g,handleUrl:l,signatureExist:d},url:c,title:"转发",close:function(){}})}}function Initialization4Node(){var c=document.getElementById("_backURL");var b=c.value;var e=b.indexOf("_backURL");if(e>-1){var d=b.substring(0,e)+encodeURIComponent(b.substring(e,b.length))}var f=document.getElementsByName(super_node_fieldNameR);if(f&&f.length>0){if(nodeR){f[0].value=nodeR}}}function timeout4Doc(){DWREngine.setTimeout(1000*30);DWREngine.setErrorHandler(function(b){alert("Error: "+b);if(dy_unlock){dy_unlock()}})}function operationButtonsW(){jQuery(".button-document").each(function(){jQuery(this).width(jQuery(this).children(".btn_mid").width()+65)})}function operationButtonsW2(){jQuery(".button-document").each(function(){jQuery(this).width(jQuery(this).children(".btn_mid").width()+18)})}function operationButtonsW4(){jQuery(".button-document").each(function(){jQuery(this).width(jQuery(this).children(".btn_mid").width()+65)})}function viewDoc(b,d,c){if(b&&d){var e=viewDocUrl;e+="?_docid="+b;e+="&_formid="+d;e+="&summaryCfgId="+c;e+="&application="+application;e+="&_backURL="+backUrl;window.location.href=e}}function doMoreDocR(c){var b=escapeR;b+="&summaryCfgId="+c;OBPM.dialog.show({opener:window.parent.parent,width:800,height:500,url:b,args:{},title:"{*[More]*}{*[Pending]*}",close:function(d){}})}function ev_reloadParent(){var d=document.getElementById("operation");try{if(!d||d.value!="doSave"){return}var b=jQuery("#openType").val();if(b==277){var f=window.parent.windowObj;if(f.treeview){f.selectedNode=jQuery("#treedocid").val();var e=jQuery("#treedocid").val();if(e==null||e==""){e="root"}f.treeview.jstree("refresh","#"+e)}}if(parent){if(parent.treeview){parent.selectedNode=OBPM("#treedocid").val();parent.treeview.jstree("refresh","#root");parent.treeview.jstree("")}if(parent.parentWindow){}}else{}}catch(c){}finally{d.value=""}}function is_change(l){var d=l.elements,c;for(var g=0;g<d.length;g++){c=d[g].tagName;if(/select/i.test(c)){var h=d[g].options,b=false,f=false;for(var e=0;e<h.length;e++){if(h[e].defaultSelected!=h[e].selected){f=e}b|=h[e].defaultSelected}if(!b&&f>0||b&&f!==false){return true}}else{if(/input|button/i.test(c)&&/checkbox|radio/i.test(d[g].type)){if(d[g].defaultChecked!=d[g].checked){return true}}else{if(d[g].defaultValue!=d[g].value){return true}}}}return false}function ev_print(g,d){var f=document.getElementsByName("content.id")[0].value;var l=document.getElementsByName("content.applicationid")[0].value;var h=document.getElementsByName("_formid")[0].value;var m=document.getElementsByName("_flowid")[0].value;var b=document.getElementsByName("_templateForm")[0].value;var e=document.getElementById("signatureExist").value;if(!f){alert("{*[Please]*} {*[Save]*}")}else{var c=activityAction+"?_docid="+f;c+="&_formid="+h;c+="&_signatureExist="+e;c+="&_activityid="+d;c+="&application="+l;if(g&&m){c+="&_flowid="+m}if(b){c+="&_templateForm="+b}}if(ev_runbeforeScript(d)){if(parent!=top){parent.open(c)}else{window.open(c)}}}function DoSignature(){if(navigator.userAgent.indexOf("MSIE")<=0){return}var g=null;if(window.ActiveXObject){try{g=new ActiveXObject("Microsoft.XMLHTTP")}catch(l){alert("创建Microsoft.XMLHTTP对象失败,AJAX不能正常运行.请检查您的浏览器设置.")}}else{if(window.XMLHttpRequest){try{g=new XMLHttpRequest()}catch(l){alert("创建XMLHttpRequest对象失败,AJAX不能正常运行.请检查您的浏览器设置.")}}}var d=document.getElementById("mGetDocumentUrl").value;var b=document.getElementById("mLoginname").value;var c=document.getElementsByName("content.id")[0].value;var f=document.getElementsByName("formid")[0].value;var h=document.getElementsByName("applicationid")[0].value;d=d+"?_docid="+c+"&_formid="+f+"&_applicationid="+h;g.onreadystatechange=function(){if(g.readyState==4&&g.status==200){if(g.responseText=="false"){return}var p=g.responseText.split(",");var e="";for(var m=0;m<p.length;m++){if(m!=p.length-1){e=e+(p[m]+"="+p[m]+";")}else{e=e+(p[m]+"="+p[m])}}if(document_content.SignatureControl!=null){document_content.SignatureControl.FieldsList=e;document_content.SignatureControl.Position(460,260);document_content.SignatureControl.UserName="lyj";document_content.SignatureControl.DivId="contentTable";document_content.SignatureControl.RunSignature()}else{alert("请安装金格iSignature电子签章HTML版软件");document.getElementById("hreftest").click()}}};g.open("POST",d);g.setRequestHeader("Content-Type","application/x-www-form-urlencoded");g.send(null)}function ev_flexPrint(b,d,g){var f=document.getElementsByName("content.id")[0].value;var e=document.getElementsByName("_formid")[0].value;if(ev_runbeforeScript(b)){if(!f){alert("{*[Please]*} {*[Save]*}")}else{var c=contextPath+"/portal/dynaform/activity/action.action?_activityid="+b+"&_printerid="+d+"&_docid="+f;if(parent!=top){document.forms[0].action=c;document.forms[0].target="_blank";document.forms[0].submit();document.forms[0].target=""}else{document.forms[0].action=c;document.forms[0].target="_blank";document.forms[0].submit();document.forms[0].target=""}}}}function ev_JumpTo(b,e,d,c){switch(c){case 0:ev_Jump(b,e,d);break;case 1:ev_dispatcherPage(b);break;default:break}}function ev_Jump(c,g,f){var b=f.split(";");var e;for(var d=0;d<b.length;d++){e=b[0].split("|")[0]}switch(g){case 0:doNew(c,e);break;default:break}}function doNew(d,m){var p=document.getElementById("application").value;var q=document.getElementsByName("content.id")[0].value;var e=document.getElementById("view_id").value;var c=document.getElementsByName("signatureExist")[0].value;var l=document.getElementsByName("formid")[0].value;var f=document.getElementsByName("_backURL")[0].value;var h=contextPath+"/portal/dynaform/document/view.action";var g=contextPath+"/portal/dynaform/activity/handle.action?_activityid="+d;var b=g+"&applicationid="+p+"&application="+p+"&_jumpForm="+l+"&_formid="+m+"&view_id="+e+"&_isJump=1&_backURL="+encodeURIComponent(h+"?_docid="+q+"&application="+p+"&_formid="+l+"&view_id="+e+"&signatureExist="+c+"&_backURL="+encodeURIComponent(f));window.location.href=b}function displayProcessor(){var b=document.getElementById("processorDiv");if(b){if(b.style.display=="none"){b.style.display="block"}else{b.style.display="none"}}}function doFileDonwload(c){var e=document.getElementsByName("content.id")[0].value;if(!e){alert("{*[Please]*} {*[Save]*}");return}if(ev_runbeforeScript(c)){if(c){var b=contextPath+"/portal/dynaform/activity/action.action";var d=b+"?_activityid="+c;document.forms[0].action=d;document.forms[0].target="_blank";document.forms[0].submit();document.forms[0].target=""}}}function doExportToPDF(c){var d=document.getElementsByName("content.id")[0].value;if(!d){alert("{*[Please]*} {*[Save]*}")}if(ev_runbeforeScript(c)){var b=contextPath+"/portal/dynaform/activity/handle.action?_activityid="+c;document.forms[0].action=b;document.forms[0].submit()}}function addItem(l,m,d){var b=document.getElementById(l);var h=document.getElementById(m);for(var g=0;g<b.length;g++){if(b.options(g).selected==true){var c=document.createElement("option");c.value=b.options(g).value;c.text=b.options(g).text;var e=0;for(var f=0;f<h.length;f++){if(b.options(g).value==h.options(f).value){e=1}}if(e==0){h.options.add(c);getOptionsValue(h,d);e=0}}}}function delItem(m,r,d){var b=document.getElementById(m);var f=document.getElementById(r);var h=document.getElementById(d).value;var g=document.getElementById(d);for(var p=f.length-1;p>=0;p--){var c=f.options[p];if(c.selected){f.options[p]=null;var l=new Array();l=jQuery.parseJSON(h);var q=c.value;for(var e=0;e<l.length;e++){if(l[e]==q){removeElement(e,l);g.value=jQuery.json2Str(l)}}}}}function blackValue(f,e,d){var c=document.getElementById(e);var g=document.getElementById(d);var b=document.getElementById(f).value;if(b==null||b==""){for(var h=0;h<c.length;h++){c.options[h].selected=false;g.options[h].selected=false}}url+="&_formid="+formid;for(var h=0;h<c.length;h++){c.options[h].selected=false;g.options[h].selected=false}for(var h=0;h<c.length;h++){if(c(h).value.indexOf(b)!=-1){c.options[h].selected=true;g.options[h].selected=true;break}}}function returnValue(h,m,b){var e=document.getElementById(m);var f=e.selectedIndex;var l=e.options[f].text;var g=document.getElementById(b);for(var c=0;c<g.length;c++){if(g(c).value==l){g.options[c].selected=true}}var d=document.getElementById(h);GradientClose(d);document.getElementById(b).style.display=""}function removeElement(b,d){if(b>=0&&b<d.length){for(var c=b;c<d.length;c++){d[c]=d[c+1]}d.length=d.length-1}return d}function getOptionsValue(g,b){var h=g;var f=document.getElementById(b);var e=new Array();for(var d=0;d<h.options.length;d++){var c=h.options[d].value;e.push(c);f.value=jQuery.json2Str(e)}}function showFlowSelect(g,h,l,f){var d=document.getElementById("_flowid").value;var c=document.getElementById("_docid").value;var e=contextPath+"/portal/share/workflow/runtime/flowprcss_dialog.jsp?docid="+c+"&flowid="+d+"&isUsbKeyVerify="+f;var b=l;if(b==null||b==""){b="Undefind"}OBPM.dialog.show({width:600,height:420,url:e,args:{docid:c},title:b,close:function(m){if(m.isHandupOrRecover){var u=jQuery.param(m,true);if(m._operationMode=="handup"){ev_flowHandup4dialog(u)}else{if(m._operationMode=="recover"){ev_flowRecover4dialog(u)}}}else{var q=document.getElementById("_flowType");var r=document.getElementById("_currid");if(q){q.value=m._flowType;delete m._flowType}if(r){delete m._currid}var t=jQuery.param(m,true);if(t){unbindBeforeUnload();var v=document.getElementsByName("_nextids");for(var p=0;p<v.length;p++){if(v[p].checked){document.getElementsByName("_nextids")[0].value=v[p].value}}var s=contextPath+"/portal/dynaform/activity/action.action";document.forms[0].action=s+"?_activityid="+h+"&"+t;if(ev_runbeforeScript(h)){if(toggleButton("button_act")){return false}makeAllFieldAble();document.forms[0].submit()}}}}})}function startWorkFlow(e,c,b,d){if(b==null||b==0){startWorkFlowBySelect(e,c,b,d)}else{if(b==1){startWorkFlowByScript(e,c,b)}}}function startWorkFlowBySelect(l,g,f,h){var c=document.getElementById("_docid").value;var e=document.getElementById("_formid").value;var d=contextPath+"/portal/share/workflow/runtime/startWorkFlow.jsp?_docid="+c+"&formid="+e;var b=h;if(b==null||b==""){b="Undefind"}tempAllDisabledField();makeFieldState(false);jQuery.ajax({type:"POST",async:false,url:contextPath+"/portal/dynaform/document/beforeStartWorkFlow.action?_docid="+c+"&formid="+e,dataType:"text",data:jQuery(document.forms[0]).serialize(),success:function(m){OBPM.dialog.show({width:600,height:420,url:d,args:{},title:b,close:function(p){if(p){unbindBeforeUnload();var q=contextPath+"/portal/dynaform/activity/action.action?_activityid="+g+"&_editMode="+f+"&"+p;if(ev_runbeforeScript(g)){document.forms[0].action=q;makeAllFieldAble();document.forms[0].submit()}makeFieldState(true)}makeFieldState(true)}})},error:function(m){alert("启动流程失败")}})}function startWorkFlowByScript(f,e,d){setHTMLValue();var c=contextPath+"/portal/dynaform/activity/action.action?_activityid="+e+"&_editMode="+d;if(ev_runbeforeScript(e)){var b=beforeAct(f);if(b){makeAllFieldAble();document.forms[0].action=c;document.forms[0].submit()}}}var tempField=new Array();function tempAllDisabledField(d){if(!d){d=document.forms[0].elements}for(var c=0;c<d.length;c++){var b=d[c];if(b.disabled==true){tempField[c]=b}}}function makeFieldState(d){for(var c=0;c<tempField.length;c++){var b=tempField[c];if(b&&b.disabled==!d){jQuery(b).attr("disabled",d)}}}function doRetracement(){ignoreFormCheck();var b=contextPath+"/portal/dynaform/document/retracement.action";document.getElementsByName("_flowType")[0].value="retracement";document.forms[0].action=b;makeAllFieldAble();document.forms[0].submit()}function addChange(){var d=document.forms[0];for(var c=0;c<d.elements.length;c++){var b=d.elements[c];jQuery(b).bind("change",function(){setFieldValChanged(true)}).bind("keydown",function(g){var f=g.which;if(this.type!="textarea"&&f==13){g.preventDefault()}})}}function getFieldValChanged(){return fieldValChanged}function setFieldValChanged(b){return fieldValChanged=b}function dateCompareVal(c){var b=c.getAttribute("oldValue");var d=c.value;if(d!=b){fieldValChanged=true}}function beforeAct(c){var b=parseInt(c);if(b==CLOSE_WINDOW||b==JUMP||b==JUMP_PAGE||b==DISPATCHER||b==BACK){if(fieldValChanged){if(!confirm("您确定要离开此页面吗?\r\n数据已修改！\r\n按“确定”离开此页面，或按“取消”留在当前页面。")){return false}else{unbindBeforeUnload()}}}else{unbindBeforeUnload()}return true}function unbindBeforeUnload(){jQuery(window).unbind("beforeunload")}function setFirstFocus(){if(jQuery(":input :text :first").attr("fieldtype")!="DateField"){if(!jQuery(":input :text :first").attr("disabled")||jQuery(":input :text :first").attr("readonly")){jQuery(":input :text :first").focus()}}}function editAuditor(){var e=contextPath+"/portal/dynaform/document/editAuditor.action";var b=document.getElementsByName("_currid");var c="";if(b&&b.length>0){c=b[0].value}var d=document.getElementById("auditorList");if(d){var f=d.value?jQuery.parseJSON(d.value):{};showUserSelectNoFlow("",{minUser:1,defValue:f[c],callback:function(g){if(g){if(g&&g.length>0&&g.indexOf(";")<0){g=g+";"}var h=g.split(";");f[c]=h;d.value=jQuery.json2Str(f);document.forms[0].action=e;makeAllFieldAble();document.forms[0].submit()}}})}}function addAuditor(){var docid=document.getElementById("_docid").value;var url=contextPath+"/portal/share/dynaform/document/addAuditor.jsp?_docid="+docid+"&application="+application;var actionUrl=contextPath+"/portal/dynaform/document/addAuditor.action";var oCurridArray=document.getElementsByName("_currid");var currid="";if(oCurridArray&&oCurridArray.length>0){currid=oCurridArray[0].value}OBPM.dialog.show({width:580,height:400,url:url,args:{},title:title_addAuditor,close:function(result){if(result){var map={};var obj=eval("("+result+")");map[currid]=obj.userlist;document.getElementById("auditorList").value=jQuery.json2Str(map);makeAllFieldAble();document.forms[0].action=actionUrl;document.forms[0].submit()}}})}var initWords=[];function initWord(d){var b=false;for(var c=0;c<initWords.length;c++){if(d.id==initWords[c]){b=true;break}}if(!b&&d.clientHeight==0){if(typeof(d.contentWindow.init_documenet)=="function"){d.contentWindow.init_documenet()}if(d.clientHeight>0){initWords.push(d.id)}}}function showFlowState(c){if(jQuery("."+c).size()!=0){var e=jQuery("."+c).text();var d=e.replace(/(^\s*)/,"");var b=d.replace(/(\s*$)/,"");jQuery("."+c).attr("title",b)}}function ev_dispatcherPage(e){var b=jQuery("#document_content").serialize();var c=activityAction+"?_activityid="+e;if(ev_runbeforeScript(e)){var d='<input type="hidden" name="formData" value="'+b+'" />';jQuery("#document_content").append(d);document.forms[0].action=c;makeAllFieldAble();document.forms[0].submit()}}function htmlEncode(b){return b.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function setHTMLValue(){jQuery("[moduleType='htmlEditor']").each(function(){var b=jQuery(this).parent().find("iframe").contents().find(".editMode").html();jQuery(this).html(htmlEncode(b))})}var origValue="";var resetWhenNonNumeric=function(b){var e=/^([\-]?[\.]?[0-9]*|[0-9]*)[0-9\.\,]*$/;if(!e.test(b.value)){for(var c=0;c<b.value.length;c++){var d=b.value.charAt(c);if(c==0&&d=="-"){continue}if(isNaN(d)&&d!="."&&d!=","){b.value=b.value.substring(0,c);break}}return false}else{origValue=b.value}};function isNumeric(b){var c=b.keyCode?b.keyCode:b.which;if((c>=48&&c<=57)||(c>=44&&c<=46)||c==8||c==9||c==118){b.returnValue=true}else{if(!+"\v1"){b.returnValue=false}else{b.preventDefault()}}}function clearData(){var c=document.getElementById("tipDiv");var b=document.getElementById("messageDiv");if(c){c.innerHTML="";c.style.border="black 0px solid"}if(b){b.innerHTML="";b.style.border="black 0px solid"}}function allFrameIsLoaded(){var b=true;for(var c=0;c<frames.length;c++){if(frames[c].document.readyState!="complete"){b=false;break}}return b}function initFormCommon(){jqRefactor();WorkFlow.init();setFirstFocus();setTimeout(function(){showPromptMsg()},300);refresh4Record();ev_reloadParent();Signatures4Judge();Initialization4Node();timeout4Doc();resizeParentWin();setTimeout(function(){resizeParentWin()},2000);jQuery("[modulType='showHistoryRecord']").showHistoryRecord();addChange();if(jQuery("#dwzUnbind").size()<1){jQuery(window).bind("beforeunload",function(b){if(fieldValChanged){return"数据已修改！"}})}if(typeof(obpmLoad)=="function"){obpmLoad()}isComplete=true}function getIsComplete(){return isComplete}function ev_viewFlow(e){var d=new Date().getTime();var b=document.getElementsByName("content.stateid")[0].value;var c=contextPath+"/portal/dynaform/document/viewFlow.action?_docid="+contentId+"&_instanceId="+b+"&dateTime="+d;OBPM.dialog.show({width:600,height:420,url:c,args:{},title:e,ok:true,okVal:"Close",close:function(f){var g=f}})}function ev_viewHistory(g){var b=true;var f=new Date().getTime();var c=document.getElementsByName("content.stateid")[0].value;var e=document.getElementById("applicationid").value;var d=contextPath+"/portal/dynaform/document/showFlowHistory.action?flowStateId="+c+"&application="+e+"&dateTime="+f;OBPM.dialog.show({width:510,height:540,url:d,args:{},title:g,ok:true,okVal:"Close",close:function(h){}})}function ev_runbeforeScript(actid){var flag=false;jQuery.ajax({type:"POST",async:false,url:contextPath+"/portal/dynaform/activity/runbeforeactionscript.action?_actid="+actid,dataType:"text",data:jQuery("#document_content").serialize(),success:function(result){if(result!=null&&result!=""){result=result.replace(/\n/g,"<br/>");result=result.replace(/\r/g,"<br/>");var jsmessage=eval("("+result+")");var type=jsmessage.type;var content=jsmessage.content;if(type){if(type=="16"){alert(content);flag=false}if(type=="32"){var rtn=window.confirm(content);if(!rtn){flag=false}else{flag=true}}}else{flag=true}if(flag){var changedField=jsmessage.changedField;if(changedField){var fields=changedField.split(";");for(var i=0;i<fields.length;i++){var field=fields[i].split(":");if(document.getElementsByName(field[0])){document.getElementsByName(field[0])[0].value=field[1]}}}}}else{flag=true}},error:function(result){alert("运行脚本出错")}});return flag}function ev_flowHandup4dialog(b){unbindBeforeUnload();document.forms[0].action=contextPath+"/portal/dynaform/document/flowHandup.action?"+b;if(toggleButton("button_act")){return false}makeAllFieldAble();document.forms[0].submit()}function ev_flowRecover4dialog(b){unbindBeforeUnload();document.forms[0].action=contextPath+"/portal/dynaform/document/flowRecover.action?"+b;if(toggleButton("button_act")){return false}makeAllFieldAble();document.forms[0].submit()}function ev_flowHandup(b){unbindBeforeUnload();document.forms[0].action=contextPath+"/portal/dynaform/document/flowHandup.action?nodertId="+b;if(toggleButton("button_act")){return false}makeAllFieldAble();document.forms[0].submit()}function ev_flowRecover(b){unbindBeforeUnload();document.forms[0].action=contextPath+"/portal/dynaform/document/flowRecover.action?nodertId="+b;if(toggleButton("button_act")){return false}makeAllFieldAble();document.forms[0].submit()}function downloadFile(c,e){var b=encodeURI(contextPath+"/portal/dynaform/document/fileDownload.action?filename="+encodeURI(c)+"&filepath="+e);var d=window.open(b,"_blank");d.location.href=b}function editFlowByFrontUser(l,d,c,h){;var f=true;var q=new Date().getTime();var r=document.getElementsByName("content.id")[0].value;var e=document.getElementsByName("content.stateid")[0].value;var p=document.getElementById("flowid").value;var g=document.getElementsByName("_formid")[0].value;var m=document.getElementsByName("content.applicationid")[0].value;var b=contextPath+"/portal/share/workflow/runtime/billflow/defi/view.action?_flowid="+p+"&_formid="+g+"&_docid="+r+"&content.id="+r+"&_stateId="+e+"&id="+p+"&application="+m+"&dateTime="+q;b+="&disableFlowNode="+l+"&changeFlowOperator="+d+"&changeFlowCc="+c;OBPM.dialog.show({width:1000,height:550,url:b,args:{},title:"调整流程",close:function(s){if(s){unbindBeforeUnload()}var t=document.getElementById("_docid").value;var v=document.getElementsByName("content.stateid")[0].value;var u=document.getElementsByName("content.applicationid")[0].value;StateMachineUtil.toFlowHtmlTextByState(t,v,u,function(y){var x=document.getElementById("flowHtmlText");if(x){var w='<table class="table_noborder" width="100%">';w+="<tr>"+y;w+="</tr></table>";x.innerHTML=w}})}})}function terminateFlow(){artDialog.prompt("请输入审批意见：",function(e,d){jQuery("[name=_attitude]").val(e);ignoreFormCheck();var c=contextPath+"/portal/dynaform/document/terminateFlow.action";var b=document.getElementsByName("application")[0].value;var f=document.getElementsByName("content.id")[0].value;document.forms[0].action=c;makeAllFieldAble();document.forms[0].submit()},true,"","终止流程")}if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(b){b.fn.obpmButton=function(){return this.each(function(){var p=jQuery(this);var r=p.attr("activityType");if((r=="29"||r=="43")&&typeof DisplayView=="object"&&DisplayView.getTheView(this)){p.remove();return}if(r!="5"){var m="";var q="btn-default";switch(r){case"1":m='<i class="fa fa-list"></i>';q="btn-primary";break;case"2":m='<i class="fa fa-file-o"></i>';q="btn-primary";break;case"3":m='<i class="fa fa-trash-o"></i>';q="btn-danger";break;case"4":m='<i class="fa fa-play-circle-o"></i>';q="btn-success";break;case"5":m='<i class="fa fa-clock-o"></i>';q="btn-primary";break;case"8":m='<i class="fa fa-close"></i>';q="btn-warning";break;case"10":m='<i class="fa fa-arrow-circle-o-left"></i>';q="btn-default";break;case"11":m='<i class="fa fa-reply"></i>';q="btn-success";break;case"13":m='<i class="fa fa-cog"></i>';q="btn-default";break;case"14":m='<i class="fa fa-print"></i>';q="btn-info";break;case"15":m='<i class="fa fa-print"></i>';q="btn-info";break;case"16":m='<i class="fa fa-sign-out"></i>';q="btn-info";break;case"18":m='<i class="fa fa-eraser"></i>';q="btn-danger";break;case"19":m='<i class="fa fa-check-circle-o"></i>';q="btn-success";break;case"20":m='<i class="fa fa-send-o"></i>';q="btn-primary";break;case"21":m='<i class="fa fa-clone"></i>';q="btn-success";break;case"25":m='<i class="fa fa-sign-out"></i>';q="btn-info";break;case"26":m='<i class="fa fa-download"></i>';q="btn-info";break;case"27":m='<i class="fa fa-sign-in"></i>';q="btn-info";break;case"28":m='<i class="fa fa-globe"></i>';q="btn-primary";break;case"29":m='<i class="fa fa-globe"></i>';q="btn-primary";break;case"30":m='<i class="fa fa-print"></i>';q="btn-info";break;case"33":m='<i class="fa fa-user-plus"></i>';q="btn-primary";break;case"34":m='<i class="fa fa-save"></i>';q="btn-success";break;case"36":m='<i class="fa fa-print"></i>';q="btn-info";break;case"37":m='<i class="fa fa-share-alt"></i>';q="btn-info";break;case"42":m='<i class="fa fa-plus"></i>';q="btn-success";break;case"43":m='<i class="fa fa-share-square-o"></i>';q="btn-warning";break;default:break}switch(p.attr("colorType")){case"primary":q="btn-primary";break;case"success":q="btn-success";break;case"info":q="btn-info";break;case"warning":q="btn-warning";break;case"danger":q="btn-danger";break;default:break}if(p.attr("iconType")=="custom"){try{var l=JSON.parse(p.attr("icon"));var e=l.type;var g=l.icon;if(e=="img"){m="<img style='height:16px;' src='../../../lib/icon/"+g+"' />"}else{if(e=="font"){m='<i class="'+g+'"></i>'}}}catch(d){m="<img style='height:16px;' src='../../../lib/icon/"+p.attr("icon")+"' />"}}var c="";if(p.attr("disabled")=="disabled"){c="style = 'color:#aaa;'"}var f="";var h=" autoBuild='false' ";if(r==undefined){f="hide ";h=" autoBuild='true' "}var s=this.onclick;p.replaceWith(jQuery("<a class='"+r+" "+f+"vbtn btn "+q+"' title='"+p.attr("value")+"' "+c+h+">"+m+" "+p.attr("value")+"</a>").click(s))}})}})(jQuery);var Activity={_LOCK:false,doExecute:function(e,c,d){var b=null;switch(c){case 1:b=new QueryBtn(e,d);break;case 2:b=new CreateBtn(e,d);break;case 3:b=new DeleteBtn(e,d);break;case 4:b=new SaveStartWorkflow(e,d);break;case 5:b=new WorkflowProcess(e,d);break;case 8:b=new CloseWindowBtn(e,d);break;case 9:b=new SaveCloseWindowBtn(e,d);break;case 10:b=new BackBtn(e,d);break;case 11:b=new SaveBackBtn(e,d);break;case 13:b=new NoneBtn(e,d);break;case 14:b=new HtmlPrintBtn(e,d);break;case 16:b=new ExportToExcelBtn(e,d);break;case 15:b=new HtmlPrintWithHisBtn(e,d);break;case 18:b=new ClearAllBtn(e,d);break;case 19:b=new SaveWithoutValidateBtn(e,d);break;case 20:b=new BatchApproveBtn(e,d);break;case 21:b=new SaveCopyBtn(e,d);break;case 25:b=new ExportToPdfBtn(e,d);break;case 26:b=new FileDownloadBtn(e,d);break;case 27:b=new ExcelImportBtn(e,d);break;case 28:b=new SignatureBtn(e,d);break;case 29:b=new BatchSignatureBtn(e,d);break;case 30:b=new FlexPrintBtn(e,d);break;case 33:b=new StartWorkflow(e,d);break;case 34:b=new SaveBtn(e,d);break;case 36:b=new PrintViewBtn(e,d);break;case 37:b=new TranspondBtn(e,d);break;case 42:b=new SaveNewBtn(e,d);break;case 43:b=new JumpToBtn(e,d);break;case 45:b=new ArchiveBtn(e,d);break;case 46:b=new SignBtn(e,d);break;default:break}if(!b){return}Activity.doBefore(b)},doBefore:function(activityType){showLoading();if(Activity._LOCK){if($(".sign").find(".btn").length>0){OBPM.message.showError("您的印章还没签好,请确认签章!")}hideLoading();return}if(refreshTickets.length>0){OBPM.message.showError("页面准备中");hideLoading();return}Activity._LOCK=true;setTimeout(function(){Activity._LOCK=false;hideLoading()},60*1000);if(activityType.doBefore){if(!activityType.doBefore()){Activity._LOCK=false;hideLoading();return}}jQuery.ajax({type:"POST",async:false,traditional:true,url:contextPath+"/portal/dynaform/activity/runbeforeactionscript.action?_actid="+activityType.actId,dataType:"text",data:activityType.getBeforePostData(),success:function(result){if(result==null||result==""||result=="{}"){Activity.doAction(activityType)}if(result!=null&&result!=""&&result!="{}"){result=result.replace(/\n/g,"<br/>");result=result.replace(/\r/g,"<br/>");var jsmessage=eval("("+result+")");var type=jsmessage.type;var content=jsmessage.content;var changedField=jsmessage.changedField;var changeFieldFunction=function(){if(changedField!=undefined&&changedField!=null&&changedField.length>0){for(var i=0;i<changedField.length;++i){var field=changedField[i];for(var key in field){if(document.getElementsByName(key).length>0){document.getElementsByName(key)[0].value=field[key]}}}}};if(type==undefined){changeFieldFunction();Activity.doAction(activityType);hideLoading();return}if(type&&type=="1"){OBPM.message.showSuccess(content);Activity._LOCK=false;hideLoading();hideLoading();return}if(type&&type=="2"){OBPM.message.showInfo(content);Activity._LOCK=false;hideLoading();hideLoading();return}if(type&&type=="3"){OBPM.message.showWarning(content);Activity._LOCK=false;hideLoading();hideLoading();return}if(type&&type=="4"){OBPM.message.showError(content);Activity._LOCK=false;hideLoading();Activity.recoveryButSta();hideLoading();return}if(type&&type=="16"){OBPM.message.showError(content);Activity._LOCK=false;hideLoading();Activity.recoveryButSta();hideLoading();return}if(type&&type=="32"){OBPM.message.showConfirm("",content,function(result){if(result){changeFieldFunction();Activity.doAction(activityType)}else{Activity._LOCK=false;hideLoading();hideLoading()}});return}}},error:function(XMLHttpRequest,textStatus,errorThrown){if(errorThrown.name=="NetworkError"){OBPM.message.showError("网络异常")}else{OBPM.message.showError(errorThrown.message)}Activity._LOCK=false;hideLoading()}})},doAction:function(b){showLoading();if(b.doAction){if(!b.doAction()){Activity._LOCK=false;hideLoading();return}}if(refreshTickets.length>0){OBPM.message.showError("页面准备中");hideLoading();return}jQuery.ajax({type:"POST",async:true,url:contextPath+"/portal/dynaform/activity/execute.action?_activityid="+b.actId,dataType:"json",traditional:true,data:b.getActionPostData(),success:function(e){if(e.status==1){if(e.message&&e.message.length>3){if(e.data.resultType!="message"){if(parent===window){OBPM.message.showSuccess(e.message)}else{top.OBPM.message.showSuccess(e.message)}}}switch(e.data.resultType){case"form":if(b.actType!=13){Activity.refreshForm(b)}break;case"view":Activity.refreshView(b);break;case"back":if(parent===window){Activity.back(b)}else{Activity.closeWindow()}break;case"close":Activity.closeWindow();break;case"message":if(e.data.resultData.type==16){parent.OBPM.message.showError(e.data.resultData.content)}else{if(e.data.resultData.type==32){}else{if(e.data.resultData.type==1){parent.OBPM.message.showSuccess(e.data.resultData.content)}else{if(e.data.resultData.type==2){parent.OBPM.message.showInfo(e.data.resultData.content)}else{if(e.data.resultData.type==3){parent.OBPM.message.showWarning(e.data.resultData.content)}else{if(e.data.resultData.type==4){parent.OBPM.message.showError(e.data.resultData.content)}}}}}}Activity._LOCK=false;hideLoading();break;case"setParameter":b.params.parameter=e.data.resultData;break;case"validate":var d=e.data.resultData;var l="";for(var g in d){var f=d[g];for(var h in f){var c=f[h];l+=c+";"}}OBPM.message.showError(l);Activity._LOCK=false;hideLoading();hideLoading();Activity.recoveryButSta();return;break;case"exception":OBPM.message.showError(e.data.resultData);Activity._LOCK=false;hideLoading();hideLoading();Activity.recoveryButSta();return;break;case"updateItems":Activity.updateFieldFunction(b,e.data.resultData);break;default:break}if(b.doAfter&&typeof b.doAfter=="function"){b.doAfter(e.data)}}else{OBPM.message.showError(e.message)}setTimeout(function(){Activity._LOCK=false;hideLoading()},3000)},error:function(c,e,d){OBPM.message.showError(d.message);Activity._LOCK=false;hideLoading()}})},refreshForm:function(b){showLoading();fieldValChanged=false;jQuery.ajax({type:"POST",async:true,url:contextPath+"/portal/dynaform/activity/refreshForm.action",dataType:"json",data:jQuery("#document_content").serialize(),success:function(f){if(f.status==1){var d=f.data;var c=d.activityHtml;if(c){$("#btn_flow_reminder").remove();$(".flow-reminder-panel-node-list").empty();$(".formActBtn").html(c)}var g=d.formHtml;if(g){$("#_formHtml").html(g)}try{if(d.systemFields){for(var l in d.systemFields){$("input[name='"+l+"']").val(d.systemFields[l])}}if(d.processorHtml){$("#flow-json").html(d.processorHtml)}else{$("#flow-json").html("[]")}if(d.flowStateHtml){$("#flowStateHtml").html('<div class="flowstate" onmouseover="showFlowState(\'flowstate\');"><b>'+d.flowStateHtml+"</b></div>")}if(jQuery("input[name='content.stateid']").val().length>0){jQuery(".flowbtn").show()}initFormCommon();if($("input[activityType='5']").size()>0){FlowPanel.refreshFlowPanel("init")}adjustDocumentLayout4form();$("#flowprocessDiv").slideUp("fast")}catch(h){console.log(h.message)}hideLoading()}else{OBPM.message.showError(f.message);Activity._LOCK=false;hideLoading()}Activity._LOCK=false;hideLoading()},error:function(c,e,d){OBPM.message.showError(d.message);Activity._LOCK=false;hideLoading()}})},refreshView:function(b){jQuery.ajax({type:"POST",async:true,url:contextPath+"/portal/dynaform/activity/refreshView.action",dataType:"json",data:jQuery(document.forms[0]).serialize(),success:function(f){if(f.status==1){var d=f.data;var c=d.activityHtml;if(c){}var h=d.viewHtml;if(h){$("#viewHtml").html(h)}showLoading();try{initListComm();setTimeout(function(){listViewAdjustLayout()},10)}catch(g){console.log(g.message)}hideLoading()}else{OBPM.message.showError(f.message);Activity._LOCK=false;hideLoading()}Activity._LOCK=false;hideLoading()},error:function(c,e,d){OBPM.message.showError(d.message);Activity._LOCK=false;hideLoading()}})},back:function(b){var c=0;if(b.actType==11){c=1000}setTimeout(function(){var d=$("#_backURL").val();if(d&&d.indexOf("isSubDoc=true")>0){d=undefined}if(d&&d.length>0){window.location.href=d}else{var e=$("input[name='openType']").val();if("277"==e||"16"==e){Activity.closeWindow()}else{if(top===window){window.close()}else{parent.Main.renderTabs.closeTab()}}}},c)},closeWindow:function(){var c=$("#_backURL").val();var g=$("input[name='openType']").val();if(!g||""==g){if(c&&c.length>0){window.location.href=c}else{if(top===window){window.close()}else{parent.Main.renderTabs.closeTab()}}}var b=$("input[name='view_id']").val();if(parent){var f=parent.document.getElementById("sub_divid");var h=parent.document.getElementById(b);if(h){h.src=f.value;parent.ev_reloadParent();return}if(parent.frames.main_iframe){var e=parent.frames.main_iframe.frames.detail.frames[b];if(e){try{e.ev_reload();hidden()}catch(d){}}else{parent.close();parent.parentWindow.ev_reload()}}else{OBPM.dialog.doExit()}}else{OBPM.dialog.doExit()}},recoveryButSta:function(){recoveryButSta("button_act");recoveryButSta("btn_act_returnto")},showMessage:function(d,c,b){if(!d){return}if(c=="success"||c=="Confirm"){c="success"}else{if(c=="Danger"||c=="Alert"){c="danger"}}window.showMessage(c,d)},makeAllFieldAble:function(e){var b=[];if(!e){if(document.forms[0]!=null){e=document.forms[0].elements}else{e=new Array()}}for(var d=0;d<e.length;d++){var c=e[d];if(c.disabled==true){c.disabled=false;b.push(c)}}return b},updateFieldFunction:function(activityType,datas){var data=eval("("+datas+")");if(data!=undefined&&data!=null&&data.changedField.length>0){for(var i=0;i<data.changedField.length;++i){var field=data.changedField[i];for(var key in field){if(document.getElementsByName(key).length>0){document.getElementsByName(key)[0].value=field[key]}}}Activity.refreshForm(activityType)}},setFieldDisabled:function(b){for(var d=0;d<b.length;d++){var c=b[d];if(c.disabled==false){c.disabled=true}}},cache:{}};function SaveStartWorkflow(c,b){this.actId=c;this.params=b;this.actType=4;if(typeof SaveStartWorkflow._initialized=="undefined"){SaveStartWorkflow.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveStartWorkflow.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveStartWorkflow.prototype.doBefore=function(){var e=false;var g=document.getElementById("operation");if(g){g.value="doSave"}setHTMLValue();var f=doWordSave();if(!f){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return false}var d=false;if(!d||d=="false"){e=true}else{if(f>=0){e=true}}if(e){e=ifSubSaveForm()}return e};SaveStartWorkflow.prototype.doAction=function(){return true};SaveStartWorkflow.prototype.doAfter=function(d){};SaveStartWorkflow._initialized=true}return this}function WorkflowProcess(c,b){this.actId=c;this.params=b;this.actType=5;if(typeof WorkflowProcess._initialized=="undefined"){WorkflowProcess.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};WorkflowProcess.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};WorkflowProcess.prototype.doBefore=function(){var d=true;return d};WorkflowProcess.prototype.doAction=function(){doWordSave();return true};WorkflowProcess.prototype.doAfter=function(d){var e=function(){var f=$("#_backURL").val();if(parent.Main.renderTabs.refreshWidget){parent.Main.renderTabs.refreshWidget()}if(f&&f.length>0){window.location.href=f}try{var g=$("input[name='openType']").val();if("277"==g||"16"==g){Activity.closeWindow()}else{if(!f||f.length<=0){if(top===window){if(navigator.userAgent.indexOf("Firefox")!=-1||navigator.userAgent.indexOf("Chrome")!=-1){window.open(location,"_self").close()}else{window.opener=null;window.open("","_self");window.close()}}else{parent.Main.renderTabs.closeTab()}}}}catch(h){console.log("WorkflowProcess.doAfter-->"+h)}};setTimeout(function(){e()},700)};WorkflowProcess._initialized=true}return this}function SaveBtn(c,b){this.actId=c;this.params=b;this.actType=34;if(typeof SaveBtn._initialized=="undefined"){SaveBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveBtn.prototype.doBefore=function(){var e=false;var g=document.getElementById("operation");if(g){g.value="doSave"}setHTMLValue();var f=doWordSave();if(!f){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return false}var d=false;if(!d||d=="false"){e=true}else{if(f>=0){e=true}}if(e){e=ifSubSaveForm()}return e};SaveBtn.prototype.doAction=function(){return true};SaveBtn.prototype.doAfter=function(e){if(e.resultType==="message"){var d=parseInt($("input[name='content.versions']").val());$("input[name='content.versions']").val((d+1)+"")}};SaveBtn._initialized=true}return this}function SaveBackBtn(c,b){this.actId=c;this.params=b;this.actType=11;if(typeof SaveBackBtn._initialized=="undefined"){SaveBackBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveBackBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveBackBtn.prototype.doBefore=function(){var e=false;var g=document.getElementById("operation");if(g){g.value="doSave"}setHTMLValue();var f=doWordSave();if(!f){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return false}var d=false;if(!d||d=="false"){e=true}else{if(f>=0){e=true}}if(e){e=ifSubSaveForm()}if(e){e=beforeAct(this.actType)}return e};SaveBackBtn.prototype.doAction=function(){return true};SaveBackBtn.prototype.doAfter=function(d){Activity.back(this)};SaveBackBtn._initialized=true}return this}function SaveWithoutValidateBtn(c,b){this.actId=c;this.params=b;this.actType=34;if(typeof SaveWithoutValidateBtn._initialized=="undefined"){SaveWithoutValidateBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveWithoutValidateBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveWithoutValidateBtn.prototype.doBefore=function(){var e=false;var g=document.getElementById("operation");if(g){g.value="doSave"}setHTMLValue();var f=doWordSave();if(!f){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return false}var d=false;if(!d||d=="false"){e=true}else{if(f>=0){e=true}}if(e){e=ifSubSaveForm()}return e};SaveWithoutValidateBtn.prototype.doAction=function(){return true};SaveWithoutValidateBtn.prototype.doAfter=function(d){};SaveWithoutValidateBtn._initialized=true}return this}function SaveCloseWindowBtn(c,b){this.actId=c;this.params=b;this.actType=9;if(typeof SaveCloseWindowBtn._initialized=="undefined"){SaveCloseWindowBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveCloseWindowBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveCloseWindowBtn.prototype.doBefore=function(){var e=false;var g=document.getElementById("operation");if(g){g.value="doSave"}setHTMLValue();var f=doWordSave();if(!f){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return false}var d=false;if(!d||d=="false"){e=true}else{if(f>=0){e=true}}if(e){e=ifSubSaveForm()}if(e){e=beforeAct(this.actType)}return e};SaveCloseWindowBtn.prototype.doAction=function(){return true};SaveCloseWindowBtn.prototype.doAfter=function(d){};SaveCloseWindowBtn._initialized=true}return this}function SaveNewBtn(c,b){this.actId=c;this.params=b;this.actType=10;this.withOld=b.withOld;if(typeof SaveNewBtn._initialized=="undefined"){SaveNewBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveNewBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveNewBtn.prototype.doBefore=function(){var e=false;var g=document.getElementById("operation");if(g){g.value="doSave"}setHTMLValue();var f=doWordSave();if(!f){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return false}var d=false;if(!d||d=="false"){e=true}else{if(f>=0){e=true}}if(e){e=ifSubSaveForm()}return e};SaveNewBtn.prototype.doAction=function(){return true};SaveNewBtn.prototype.doAfter=function(d){jQuery.ajax({type:"POST",async:true,url:contextPath+"/portal/dynaform/activity/newDocument.action?_withOld="+this.withOld,dataType:"json",data:jQuery("#document_content").serialize(),success:function(h){if(h.status==1){var g=h.data;var f=g.activityHtml;if(f){$(".formActBtn").html(f)}var l=g.formHtml;if(l){$("#_formHtml").html(l)}showLoading();try{if(g.systemFields){for(var p in g.systemFields){$("input[name='"+p+"']").val(g.systemFields[p])}}$("input[name='content.sign']").val("");$(".isignature .sign").remove();if(g.processorHtml){$("#flow-json").html(g.processorHtml)}else{$("#flow-json").html("[]")}if(g.flowStateHtml){$("#flowStateHtml").html('<div class="flowstate" onmouseover="showFlowState(\'flowstate\');"><b>'+g.flowStateHtml+"</b></div>")}if(jQuery("input[name='content.stateid']").val().length>0){jQuery(".flowbtn").show()}initFormCommon();if($("input[activityType='5']")){FlowPanel.refreshFlowPanel("init")}adjustDocumentLayout4form()}catch(m){console.log(m.message)}hideLoading()}else{OBPM.message.showError(h.message)}},error:function(e,g,f){OBPM.message.showError(f.message)}})};SaveNewBtn._initialized=true}return this}function BackBtn(c,b){this.actId=c;this.params=b;this.actType=10;if(typeof BackBtn._initialized=="undefined"){BackBtn.prototype.getBeforePostData=function(){return jQuery("#document_content").serialize()};BackBtn.prototype.getActionPostData=function(){return jQuery("#document_content").serialize()};BackBtn.prototype.doBefore=function(){var d=false;d=ifSubSaveForm();if(d){d=beforeAct(this.actType)}return d};BackBtn.prototype.doAction=function(){return true};BackBtn.prototype.doAfter=function(d){};BackBtn._initialized=true}return this}function NoneBtn(c,b){this.actId=c;this.params=b;this.actType=13;this.actionType=b.actionType;this.actionDispatcherUrlScript=b.actionDispatcherUrlScript;this.actionSelection=b.actionSelection;this.relatedFormId=b.relatedFormId;this.actionPostData=null;if(typeof NoneBtn._initialized=="undefined"){NoneBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};NoneBtn.prototype.getActionPostData=function(){if(this.actionPostData!=null&&this.actionPostData!=""){return this.actionPostData}else{var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e}};NoneBtn.prototype.doBefore=function(){return true};NoneBtn.prototype.doAction=function(){var e=this;var l=this.actId;var f=this.actionType;this.actionPostData=this.getActionPostData();var h=false;if(this.actionSelection==0){return true}else{if(this.actionSelection==1){var g=document.body.clientWidth-25;var d=$(window).height()-200;url=contextPath+"/portal/dynaform/document/new4tmpForm.action?_formid="+this.relatedFormId;OBPM.dialog.show({url:url,width:g,height:d,args:{},title:"填写表单",ok:function(p){var r=p.document.getElementById("_formHtml");var q=jQuery("<form></form>");q.append(r);var m=q.serialize();actionPostData=jQuery("#document_content").serialize();actionPostData=actionPostData+"&"+m},cancel:function(){h=true;this.close()},button:"",close:function(){if(!h){e.actionSelection="";e.actionPostData=actionPostData;Activity._LOCK=true;Activity.doAction(e)}}})}else{return true}}};NoneBtn.prototype.doAfter=function(e){switch(this.actionType){case 0:Activity.refreshForm(this.actionType);break;case 1:setTimeout(function(){Activity.back(this)},700);break;case 2:setTimeout(function(){var g=$("input[name='openType']").val();if("277"==g||"16"==g){Activity.closeWindow()}else{Activity.back(this)}},700);break;case 3:var f=this.actionDispatcherUrlScript;var d=function(g){window.location.href=g};setTimeout(function(){d(f)},700);break;default:break}};NoneBtn._initialized=true}return this}function SaveCopyBtn(c,b){this.actId=c;this.params=b;this.actType=21;if(typeof SaveCopyBtn._initialized=="undefined"){SaveCopyBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");jQuery("iframe[name='display_view']").trigger("save");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveCopyBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SaveCopyBtn.prototype.doBefore=function(){var e=false;var g=document.getElementById("operation");if(g){g.value="doSave"}setHTMLValue();var f=doWordSave();if(!f){alert("Word文档已经被其他用户更新， 请刷新页面加载最新的Word文档！");return false}var d=false;if(!d||d=="false"){e=true}else{if(f>=0){e=true}}if(e){e=ifSubSaveForm()}return e};SaveCopyBtn.prototype.doAction=function(){return true};SaveCopyBtn.prototype.doAfter=function(d){$("input[name='content.stateid']").val("");$("input[name='_currid']").val("");$("input[name='_nextids']").val("");if(!d.resultData){return}$("input[name='content.id']").val(d.resultData);$("input[name='_docid']").val(d.resultData);Activity.refreshForm(this)};SaveCopyBtn._initialized=true}return this}function CloseWindowBtn(c,b){this.actId=c;this.params=b;this.actType=8;if(typeof CloseWindowBtn._initialized=="undefined"){CloseWindowBtn.prototype.getBeforePostData=function(){return jQuery("#document_content").serialize()};CloseWindowBtn.prototype.getActionPostData=function(){return jQuery("#document_content").serialize()};CloseWindowBtn.prototype.doBefore=function(){var d=false;d=ifSubSaveForm();if(d){d=beforeAct(this.actType)}return d};CloseWindowBtn.prototype.doAction=function(){return true};CloseWindowBtn.prototype.doAfter=function(d){};CloseWindowBtn._initialized=true}return this}function HtmlPrintBtn(c,b){this.actId=c;this.params=b;this.actType=14;if(typeof HtmlPrintBtn._initialized=="undefined"){HtmlPrintBtn.prototype.getBeforePostData=function(){return jQuery("#document_content").serialize()};HtmlPrintBtn.prototype.getActionPostData=function(){return jQuery("#document_content").serialize()};HtmlPrintBtn.prototype.doBefore=function(){return true};HtmlPrintBtn.prototype.doAction=function(){return true};HtmlPrintBtn.prototype.doAfter=function(q){var h=false;var g=document.getElementsByName("content.id")[0].value;var m=document.getElementsByName("content.applicationid")[0].value;var l=document.getElementsByName("_formid")[0].value;var p=document.getElementsByName("_flowid")[0].value;var d=document.getElementsByName("_templateForm")[0].value;var f=document.getElementById("signatureExist").value;var e=contextPath+"/portal/dynaform/activity/print.action?_docid="+g;e+="&_formid="+l;e+="&_signatureExist="+f;e+="&application="+m;e+="&actType="+this.actType;if(h&&p){e+="&_flowid="+p}if(d){e+="&_templateForm="+d}if(parent!=top){parent.open(e)}else{window.open(e)}};HtmlPrintBtn._initialized=true}return this}function HtmlPrintWithHisBtn(c,b){this.actId=c;this.params=b;this.actType=14;if(typeof HtmlPrintWithHisBtn._initialized=="undefined"){HtmlPrintWithHisBtn.prototype.getBeforePostData=function(){return jQuery("#document_content").serialize()};HtmlPrintWithHisBtn.prototype.getActionPostData=function(){return jQuery("#document_content").serialize()};HtmlPrintWithHisBtn.prototype.doBefore=function(){return true};HtmlPrintWithHisBtn.prototype.doAction=function(){return true};HtmlPrintWithHisBtn.prototype.doAfter=function(q){var h=true;var g=document.getElementsByName("content.id")[0].value;var m=document.getElementsByName("content.applicationid")[0].value;var l=document.getElementsByName("_formid")[0].value;var p=document.getElementsByName("_flowid")[0].value;var d=document.getElementsByName("_templateForm")[0].value;var f=document.getElementById("signatureExist").value;var e=contextPath+"/portal/dynaform/activity/print.action?_docid="+g;e+="&_formid="+l;e+="&_signatureExist="+f;e+="&_activityid="+this.actId;e+="&application="+m;e+="&actType="+this.actType;if(h&&p){e+="&_flowid="+p}if(d){e+="&_templateForm="+d}if(parent!=top){parent.open(e)}else{window.open(e)}};HtmlPrintWithHisBtn._initialized=true}return this}function FlexPrintBtn(c,b){this.actId=c;this.params=b;this.actType=30;this.printerid=b.printerid;this.withFlowHis=b.withFlowHis;if(typeof FlexPrintBtn._initialized=="undefined"){FlexPrintBtn.prototype.getBeforePostData=function(){return jQuery("#document_content").serialize()};FlexPrintBtn.prototype.getActionPostData=function(){return jQuery("#document_content").serialize()};FlexPrintBtn.prototype.doBefore=function(){return true};FlexPrintBtn.prototype.doAction=function(){return true};FlexPrintBtn.prototype.doAfter=function(d){var h=document.getElementsByName("content.id")[0].value;var g=document.getElementsByName("_formid")[0].value;var e=document.getElementsByName("_flowid")[0].value;var f=contextPath+"/portal/share/dynaform/printer/flexprint.jsp?_activityid="+this.actId+"&id="+this.printerid+"&_docid="+h+"&_formid="+g+"&_flowid="+e+"&actType="+this.actType;if(parent!=top){parent.open(f)}else{window.open(f)}};FlexPrintBtn._initialized=true}return this}function ExportToPdfBtn(c,b){this.actId=c;this.params=b;this.actType=25;if(typeof ExportToPdfBtn._initialized=="undefined"){ExportToPdfBtn.prototype.getBeforePostData=function(){return jQuery("#document_content").serialize()};ExportToPdfBtn.prototype.getActionPostData=function(){return jQuery("#document_content").serialize()};ExportToPdfBtn.prototype.doBefore=function(){return true};ExportToPdfBtn.prototype.doAction=function(){var e=document.getElementsByName("content.id")[0].value;var d=contextPath+"/portal/dynaform/activity/process.action?_activityid="+this.actId;document.forms[0].action=d;document.forms[0].submit();return false};ExportToPdfBtn.prototype.doAfter=function(d){};ExportToPdfBtn._initialized=true}return this}function FileDownloadBtn(c,b){this.actId=c;this.params=b;this.actType=26;this.target=b.target;if(typeof FileDownloadBtn._initialized=="undefined"){FileDownloadBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{return jQuery(document.forms[0]).serialize()}};FileDownloadBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{return jQuery(document.forms[0]).serialize()}};FileDownloadBtn.prototype.doBefore=function(){return true};FileDownloadBtn.prototype.doAction=function(){var d=contextPath+"/portal/dynaform/activity/process.action?_activityid="+this.actId;var f=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(f)){var e=DisplayView.span2Json(f);DisplayView.downloadFile(d,e)}else{document.forms[0].action=d;document.forms[0].submit()}return false};FileDownloadBtn.prototype.doAfter=function(d){};FileDownloadBtn._initialized=true}return this}function SignatureBtn(c,b){this.actId=c;this.params=b;this.actType=28;if(typeof SignatureBtn._initialized=="undefined"){SignatureBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SignatureBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};SignatureBtn.prototype.doBefore=function(){if(getBrowser().indexOf("ie")<0){alert("电子印章功能仅支持IE内核的浏览器!");return}var l=null;if(window.ActiveXObject){try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch(p){alert("创建Microsoft.XMLHTTP对象失败,AJAX不能正常运行.请检查您的浏览器设置.")}}else{if(window.XMLHttpRequest){try{l=new XMLHttpRequest()}catch(p){alert("创建XMLHttpRequest对象失败,AJAX不能正常运行.请检查您的浏览器设置.")}}}var g=document.getElementById("mGetDocumentUrl").value;var d=document.getElementById("mLoginname").value;var f=document.getElementsByName("content.id")[0].value;var h=document.getElementsByName("formid")[0].value;var m=document.getElementsByName("applicationid")[0].value;g=g+"?_docid="+f+"&_formid="+h+"&_applicationid="+m;l.onreadystatechange=function(){if(l.readyState==4&&l.status==200){if(l.responseText=="false"){return}var r=l.responseText.split(",");var e="";for(var q=0;q<r.length;q++){if(q!=r.length-1){e=e+(r[q]+"="+r[q]+";")}else{e=e+(r[q]+"="+r[q])}}if(document_content.SignatureControl!=null){document_content.SignatureControl.FieldsList=e;document_content.SignatureControl.Position(460,260);document_content.SignatureControl.UserName="lyj";document_content.SignatureControl.DivId="contentTable";document_content.SignatureControl.RunSignature()}else{alert("请安装金格iSignature电子签章HTML版软件");document.getElementById("hreftest").click()}}};l.open("POST",g);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.send(null);return false};SignatureBtn.prototype.doAction=function(){return false};SignatureBtn.prototype.doAfter=function(d){};SignatureBtn._initialized=true}return this}function TranspondBtn(c,b){this.actId=c;this.params=b;this.actType=37;this.summaryCfg=b.summaryCfg;if(typeof TranspondBtn._initialized=="undefined"){TranspondBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};TranspondBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};TranspondBtn.prototype.doBefore=function(){return true};TranspondBtn.prototype.doAction=function(){var h=document.getElementsByName("content.applicationid")[0].value;var d=document.getElementsByName("content.id")[0].value;var g=document.getElementsByName("_formid")[0].value;var f=document.getElementById("signatureExist").value;var l=window.location.toString();var e="../share/dynaform/view/activity/emailTranspond.jsp?application="+h;OBPM.dialog.show({opener:window.parent.parent,width:700,height:300,args:{_activityid:this.actId,application:h,docid:d,formid:g,transpond:this.summaryCfg,handleUrl:l,signatureExist:f},url:e,title:"转发",close:function(){}});return false};TranspondBtn.prototype.doAfter=function(d){};TranspondBtn._initialized=true}return this}function JumpToBtn(c,b){this.actId=c;this.params=b;this.actType=43;this.jumpType=b.jumpType;this.targetList=b.targetList;this.jumpMode=b.jumpMode;this.jumpActOpenType=b.jumpActOpenType;this.target=b.target;if(typeof JumpToBtn._initialized=="undefined"){JumpToBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var d=DisplayView.getTheView(this.target);var f=DisplayView.span2Json(this.target);var e=$(d).find("[name=_selects]:checked");return DisplayView.addVal2Params(f,e)}else{var g="";if(typeof(isSubGridView)!="undefined"){g=subGridView.getGridViewParams()}else{g=jQuery(document.forms[0]).serialize()}return g}};JumpToBtn.prototype.getActionPostData=function(){if(jQuery("#formList").size()>0){return jQuery("#formList").serialize()}else{return jQuery("#document_content").serialize()}};JumpToBtn.prototype.doBefore=function(){return true};JumpToBtn.prototype.doAction=function(){switch(this.jumpMode){case 0:var x=this.targetList.split(";");var u;for(var l=0;l<x.length;l++){u=x[0].split("|")[0]}var v=jQuery("input[name='application']").val();var y=jQuery("input[name='content.id']").val();var f=jQuery("#view_id").val();var e=jQuery("input[name='signatureExist']").val();var r=jQuery("input[name='formid']").val();var g=jQuery("input[name='_backURL']").val();var q=contextPath+"/portal/dynaform/document/view.action";var p=contextPath+"/portal/dynaform/activity/process.action?_activityid="+this.actId;var d=p+"&content.id="+y+"&applicationid="+v+"&application="+v+"&openType="+this.jumpActOpenType+"&_jumpForm="+r+"&_formid="+u+"&view_id="+f+"&_isJump=1&_backURL="+encodeURIComponent(q+"?_docid="+y+"&application="+v+"&_formid="+r+"&view_id="+f+"&signatureExist="+e+"&_backURL="+encodeURIComponent(g));switch(this.jumpActOpenType){case 0:window.location.href=d;break;case 1:var t=document.body.clientWidth*80/100;var m=document.body.clientHeight*90/100;showfrontframe({title:"",url:d,w:t,h:m,windowObj:window.parent,callback:function(h){}});break;case 2:parent.addTab(y,"...",d);break;case 3:window.open(d);break;default:return false}break;case 1:var f="";var r="";var y="";if(document.getElementById("formid")){r=document.getElementById("formid").value;y=jQuery("input[name='content.id']").val()}else{if(document.getElementById("viewid")||typeof(isSubGridView)!="undefined"){if(document.getElementById("viewid")){f=document.getElementById("viewid").value}if(typeof(isSubGridView)!="undefined"){b=subGridView.getGridViewParams();f=b._viewid}y=f}}var v=jQuery("input[name='application']").val();var d=contextPath+"/portal/dynaform/activity/process.action?_activityid="+this.actId+"&_formid="+r+"&view_id="+f+"&_viewid="+f+"&content.id="+y+"&applicationid="+v+"&application="+v;if(f.length>0){$("input[name='_selects']:checked").each(function(h,w){d+="&_selects="+$(w).val()})}var s=$("input[iscommonfilter]");if(s.size()>0){s.each(function(){var w=$(this).val();if(w!=null){var h=$(this).attr("id");var z=h.substring(h.indexOf("_")+1);d+="&"+z+"="+w}})}switch(this.jumpActOpenType){case 0:window.location.href=d;break;case 1:var t=document.body.clientWidth*80/100;var m=document.body.clientHeight*90/100;showfrontframe({title:"",url:d,w:t,h:m,windowObj:window.parent,callback:function(h){}});break;case 2:parent.Main.renderTabs.addTab(y,"...",d);break;case 3:window.open(d);break;default:break}break;default:return false}return false};JumpToBtn.prototype.doAfter=function(d){};JumpToBtn._initialized=true}return this}function CreateBtn(actId,params){this.actId=actId;this.params=params;this.actType=2;this.viewType=params.viewType;this.openType=params.openType;this.formId=params.formId;this.target=params.target;if(typeof CreateBtn._initialized=="undefined"){CreateBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{var params="";if(typeof(isSubGridView)!="undefined"){params=subGridView.getGridViewParams()}else{params=jQuery(document.forms[0]).serialize()}return params}};CreateBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var view=DisplayView.getTheView(this.target);var json=DisplayView.span2Json(this.target);json.formId=this.formId;var elems=$(view).find("[name=_selects]:checked");json._backURL="";return DisplayView.addVal2Params(json,elems)}else{var params="";if(typeof(isSubGridView)!="undefined"){params=subGridView.getGridViewParams()}else{params=jQuery(document.forms[0]).serialize()+"&formId="+this.formId}return params}};CreateBtn.prototype.doBefore=function(){return true};CreateBtn.prototype.doAction=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return true}if(this.openType==288){jQuery("#VIEW_OPEN_TYPE_GRID_BTN").css("display","");DocumentUtil.doNew(this.actId,subGridView.getGridViewParams(),function(rtn){var oTR=eval(rtn);subGridView.createTr(oTR)});return false}return true};CreateBtn.prototype.doAfter=function(result){var obj=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(obj)){var openType=OPEN_TYPE_DIV;var _action=DisplayView.getAction(obj);var view=DisplayView.getTheView(obj);var url=contextPath+"/portal/dynaform/activity/process.action?_activityid="+this.actId+"&_formid="+this.formId;var json=DisplayView.span2Json(obj);if(this.params.parameter){url+="&content.id="+this.params.parameter}this.openType=OPEN_TYPE_DIV;var parameters=DisplayView.getValuesMap(obj,json);var _backURL=DisplayView.resetBackURL(obj,json._backURL);delete json._backURL;if(this.openType==OPEN_TYPE_POP||this.openType==OPEN_TYPE_DIV){var _selects=DisplayView.getSelects(view);url+="&"+parameters+"&openType="+this.openType+_selects;var w=$(window).width()-25;var h=$(window).height()-100;showfrontframe({title:"",url:url,w:w,h:h,windowObj:window.parent,callback:function(result){setTimeout(function(){json._backURL=_backURL;DisplayView.postForm(obj,_action,json)},1)}})}}else{var url=contextPath+"/portal/dynaform/activity/process.action?_activityid="+this.actId+"&_formid="+this.formId;if(this.params.parameter){url+="&content.id="+this.params.parameter}if(this.openType==17){var isRelate=document.getElementsByName("isRelate");url+="&isSubDoc=true";if(isRelate){if(isRelate.length>0){var relate=isRelate[0].value;url+="&isRelate="+relate}}}if(document.getElementsByName("_openType")[0]){this.openType=document.getElementsByName("_openType")[0].value}var parameters=getQueryString();resetBackURL();if(this.openType==1){if(isHomePage()){url+="&_backURL="+encodeURIComponent(contextPath+"/portal/dispatch/homepage.jsp");url+="&"+parameters;parent.location=appendApplicationidByView(url)}else{document.forms[0].action=url;document.forms[0].submit()}}else{if(this.openType==OPEN_TYPE_POP||this.openType==OPEN_TYPE_DIV){var oSelects=document.getElementsByName("_selects");var _selects="";if(oSelects){for(var i=0;i<oSelects.length;i++){if(oSelects[i].checked){_selects+="&_selects="+oSelects[i].value}}}url+="&"+parameters+"&openType="+this.openType+_selects;url=appendApplicationidByView(url);var w=document.body.clientWidth-25;var h=document.body.clientHeight-100;showfrontframe({title:"",url:url,w:w,h:h,windowObj:window.parent,callback:function(result){setTimeout(function(){document.forms[0].submit()},1)}})}else{if(this.openType==OPEN_TYPE_OWN){var id=document.getElementsByName("_viewid")[0].value;if(this.openType==VIEW_TYPE_SUB){var sub_divid=parent.document.getElementById("sub_divid");var doc_obj=parent.document.getElementById(id);if(sub_divid){sub_divid.value=doc_obj.src}document.forms[0].action=url;document.forms[0].submit()}else{document.forms[0].action=url;document.forms[0].submit()}}else{if(toggleButton("button_act")){return false}}}}}};CreateBtn._initialized=true}return this}function DeleteBtn(c,b){this.actId=c;this.params=b;this.actType=3;this.target=b.target;if(typeof DeleteBtn._initialized=="undefined"){DeleteBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var d=DisplayView.getTheView(this.target);var f=DisplayView.span2Json(this.target);var e=$(d).find("[name=_selects]:checked");return DisplayView.addVal2Params(f,e)}else{var g="";if(typeof(isSubGridView)!="undefined"){g=subGridView.getGridViewParams()}else{g=jQuery(document.forms[0]).serialize()}return g}};DeleteBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var d=DisplayView.getTheView(this.target);var f=DisplayView.span2Json(this.target);var e=$(d).find("[name=_selects]:checked");return DisplayView.addVal2Params(f,e)}else{var g="";if(typeof(isSubGridView)!="undefined"){g=subGridView.getGridViewParams()}else{g=jQuery(document.forms[0]).serialize()}return g}};DeleteBtn.prototype.doBefore=function(){var d={};if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var e=DisplayView.getTheView(this.target);d=$(e).find("[name=_selects]")}else{d=document.getElementsByName("_selects")}var h=false;for(var f=0;f<d.length;f++){if(d[f].checked==true){h=true;break}}if(h){var g=window.confirm("确定要删除您选择的记录吗？");if(!g){return false}}else{alert("请选择要删除的数据！");return false}return true};DeleteBtn.prototype.doAction=function(){return true};DeleteBtn.prototype.doAfter=function(d){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var e=contextPath+"/portal/dynaform/view/displayView.action";var f=DisplayView.span2Json(this.target);DisplayView.postForm(this.target,e,f)}else{if(typeof(isSubGridView)!="undefined"){subGridView.renderGridView()}else{document.forms[0].action=contextPath+"/portal/dynaform/view/displayView.action";document.forms[0].submit()}}};DeleteBtn._initialized=true}return this}function ClearAllBtn(c,b){this.actId=c;this.params=b;this.actType=18;this.target=b.target;if(typeof ClearAllBtn._initialized=="undefined"){ClearAllBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{var d="";if(typeof(isSubGridView)!="undefined"){d=subGridView.getGridViewParams()}else{d=jQuery(document.forms[0]).serialize()}return d}},ClearAllBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{var d="";if(typeof(isSubGridView)!="undefined"){d=subGridView.getGridViewParams()}else{d=jQuery(document.forms[0]).serialize()}return d}},ClearAllBtn.prototype.doBefore=function(){return window.confirm("确定要清空表单的所有记录吗？")},ClearAllBtn.prototype.doAction=function(){return true},ClearAllBtn.prototype.doAfter=function(e){var g=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(g)){var d=contextPath+"/portal/dynaform/view/displayView.action";var f=DisplayView.span2Json(g);DisplayView.postForm(g,d,f)}else{if(typeof(isSubGridView)!="undefined"){subGridView.renderGridView()}else{document.forms[0].action=contextPath+"/portal/dynaform/view/displayView.action";document.forms[0].submit()}}},ClearAllBtn._initialized=true}return this}function QueryBtn(c,b){this.actId=c;this.params=b;this.actType=1;this.viewId=b.viewId;this.target=b.target;if(typeof QueryBtn._initialized=="undefined"){QueryBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{if(typeof(isSubGridView)!="undefined"){return subGridView.getGridViewParams()}else{return jQuery(document.forms[0]).serialize()}}};QueryBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{if(typeof(isSubGridView)!="undefined"){return subGridView.getGridViewParams()}else{return jQuery(document.forms[0]).serialize()}}};QueryBtn.prototype.doBefore=function(){return true};QueryBtn.prototype.doAction=function(){return true};QueryBtn.prototype.doAfter=function(e){var l=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(l)){var d=contextPath+"/portal/dynaform/view/displayView.action?_viewid="+this.viewId;var f=DisplayView.span2Json(l);DisplayView.postForm(l,d,f)}else{if(typeof(isSubGridView)!="undefined"){var h=contextPath+"/portal/dynaform/view/displayView.action";var g=jQuery('<form method="get"><input name="_viewid" value="'+this.viewId+'" /></form>').attr("action",h);jQuery("body").append(g);g.submit()}else{document.forms[0].action=contextPath+"/portal/dynaform/view/displayView.action?_viewid="+this.viewId;document.forms[0].submit()}}};QueryBtn._initialized=true}return this}function BatchApproveBtn(c,b){this.actId=c;this.params=b;this.actType=20;this.hasRun=false;this.target=b.target;if(typeof BatchApproveBtn._initialized=="undefined"){BatchApproveBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var d=DisplayView.getTheView(this.target);var f=DisplayView.span2Json(this.target);var e=$(d).find("[name=_selects]:checked");return DisplayView.addVal2Params(f,e)}else{var g="";if(typeof(isSubGridView)!="undefined"){g=subGridView.getGridViewParams()}else{g=jQuery(document.forms[0]).serialize()}return g}};BatchApproveBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var d=DisplayView.getTheView(this.target);var f=DisplayView.span2Json(this.target);var e=$(d).find("[name=_selects]:checked");return DisplayView.addVal2Params(f,e)}else{var g="";if(typeof(isSubGridView)!="undefined"){g=subGridView.getGridViewParams()}else{g=jQuery(document.forms[0]).serialize()}return g}};BatchApproveBtn.prototype.doBefore=function(){var d={};if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var e=DisplayView.getTheView(this.target);d=$(e).find("[name=_selects]")}else{d=document.getElementsByName("_selects")}var g=false;for(var f=0;f<d.length;f++){if(d[f].checked==true){g=true;break}}if(!g){alert("至少选择一条记录！")}return g};BatchApproveBtn.prototype.doAction=function(){if(this.hasRun){return true}var d=this;var e=this.target;if(jQuery("#inputAuditRemarkDiv"+this.actId).attr("id")){artDialog.prompt("请输入审批意见：",function(g,f){if(typeof DisplayView=="object"&&DisplayView.getTheView(e)){DisplayView.refreshSpan(e,"_attitude"+d.actId,g);d.hasRun=true;Activity.doAction(d)}else{jQuery("#_attitude"+d.actId).val(g);d.hasRun=true;Activity.doAction(d)}},true)}return false};BatchApproveBtn.prototype.doAfter=function(d){var g=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(g)){var e=contextPath+"/portal/dynaform/view/displayView.action";var f=DisplayView.span2Json(g);DisplayView.postForm(g,e,f)}else{if(typeof(isSubGridView)!="undefined"){subGridView.renderGridView()}else{document.forms[0].action=contextPath+"/portal/dynaform/view/displayView.action";document.forms[0].submit()}}};BatchApproveBtn._initialized=true}return this}function ExportToExcelBtn(c,b){this.actId=c;this.params=b;this.actType=16;this.fileName=b.fileName;this.expSub=b.expSub;this.hasRun=false;this.target=b.target;if(typeof ExportToExcelBtn._initialized=="undefined"){ExportToExcelBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{if(typeof(isSubGridView)!="undefined"){var d=subGridView.getGridViewParams();return d}else{return jQuery(document.forms[0]).serialize()}}};ExportToExcelBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{if(typeof(isSubGridView)!="undefined"){var d=subGridView.getGridViewParams();return d}else{return jQuery(document.forms[0]).serialize()}}};ExportToExcelBtn.prototype.doBefore=function(){if(this.hasRun){alert("已导出，需要再次导出请刷新页面！");return false}return true};ExportToExcelBtn.prototype.doAction=function(){var f=contextPath+"/portal/dynaform/activity/process.action?_activityid="+this.actId+"&filename="+this.fileName+"&isExpSub="+this.expSub;var l=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(l)){var d=DisplayView.getTheView(l);var h=DisplayView.span2Json(l);var e=DisplayView.getAction(l);DisplayView.downloadFile(f,h);this.hasRun=true}else{if(typeof(isSubGridView)!="undefined"){var m=subGridView.getGridViewParams();subGridView.downloadFile(f,m)}else{if(document.forms.length==0){var g=document.createElement("form");document.body.appendChild(g);g.method="post"}var e=document.forms[0].action;document.forms[0].action=f;document.forms[0].submit();this.hasRun=true;document.forms[0].action=e}}return false};ExportToExcelBtn.prototype.doAfter=function(d){};ExportToExcelBtn._initialized=true}return this}function PrintViewBtn(c,b){this.actId=c;this.params=b;this.actType=14;this.target=b.target;if(typeof PrintViewBtn._initialized=="undefined"){PrintViewBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{var d="";if(typeof(isSubGridView)!="undefined"){d=subGridView.getGridViewParams()}else{d=jQuery(document.forms[0]).serialize()}return d}};PrintViewBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{var d="";if(typeof(isSubGridView)!="undefined"){d=subGridView.getGridViewParams()}else{d=jQuery(document.forms[0]).serialize()}return d}};PrintViewBtn.prototype.doBefore=function(){return true};PrintViewBtn.prototype.doAction=function(){return true};PrintViewBtn.prototype.doAfter=function(d){var m=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(m)){var e=DisplayView.getTheView(m);var l=DisplayView.span2Json(m);var p=l._viewid;var h=l.signatureExist;var g=contextPath+"/portal/dynaform/view/printView.action";g+="?_signatureExist="+h;g+="&_activityid="+this.actId;g+="&isprint=true";g+="&actType="+this.actType;DisplayView.printView(g,l)}else{var p=document.getElementsByName("_viewid")[0].value;var h=document.getElementById("signatureExist").value;var g=contextPath+"/portal/dynaform/view/printView.action";g+="?_signatureExist="+h;g+="&_activityid="+this.actId;g+="&isprint=true";g+="&actType="+this.actType;if(typeof(isSubGridView)!="undefined"){$("body").append("<form></form>");$("body").find("form").append($("#container-params").clone())}var f=document.forms[0];f.action=g;f.target="_my_submit_win";f.submit();f.target="";if(typeof(isSubGridView)!="undefined"){$("body").find("form").remove()}}};PrintViewBtn._initialized=true}return this}function ExcelImportBtn(c,b){this.actId=c;this.params=b;this.actType=27;this.impmappingconfigid=b.impmappingconfigid;this.target=b.target;if(typeof ExcelImportBtn._initialized=="undefined"){ExcelImportBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{return jQuery(document.forms[0]).serialize()}};ExcelImportBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){return DisplayView.span2Params(this.target)}else{return jQuery(document.forms[0]).serialize()}};ExcelImportBtn.prototype.doBefore=function(){return true};ExcelImportBtn.prototype.doAction=function(){var p=this.impmappingconfigid;var f="";var m="";var q="";var e="";var l=this.target;if(typeof DisplayView=="object"&&DisplayView.getTheView(l)){var r=DisplayView.span2Json(l);var g=DisplayView.getAction(l);f=r.parentid;m=r.application;q=r.isRelate;e=r._viewid;if(p){var d=importURL;d+="?parentid="+f;d+="&id="+p;d+="&application="+m;d+="&isRelate="+q;d+="&_activityid="+this.actId;d+="&_viewid="+e;OBPM.dialog.show({width:530,height:420,url:d,args:{},title:"Excel导入",close:function(s){DisplayView.postForm(l,g,r)}})}}else{if(document.getElementsByName("parentid")){f=document.getElementsByName("parentid")[0].value}if(document.getElementsByName("application")){m=document.getElementsByName("application")[0].value}if(document.getElementsByName("isRelate")){var h=document.getElementsByName("isRelate");if(h.length!=0){q=h[0].value}}e=document.getElementsByName("_viewid")[0].value;if(p){var d=importURL;d+="?parentid="+f;d+="&id="+p;d+="&application="+m;d+="&isRelate="+q;d+="&_activityid="+this.actId;d+="&_viewid="+e;OBPM.dialog.show({width:530,height:420,url:d,args:{},title:"Excel导入",close:function(s){if(typeof(isSubGridView)!="undefined"){subGridView.renderGridView()}else{document.forms[0].submit()}}})}}return false};ExcelImportBtn.prototype.doAfter=function(d){};ExcelImportBtn._initialized=true}return this}function BatchSignatureBtn(c,b){this.actId=c;this.params=b;this.actType=29;if(typeof BatchSignatureBtn._initialized=="undefined"){BatchSignatureBtn.prototype.getBeforePostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var d=DisplayView.getTheView(this.target);var f=DisplayView.span2Json(this.target);var e=$(d).find("[name=_selects]:checked");return DisplayView.addVal2Params(f,e)}else{return jQuery(document.forms[0]).serialize()}};BatchSignatureBtn.prototype.getActionPostData=function(){if(typeof DisplayView=="object"&&DisplayView.getTheView(this.target)){var d=DisplayView.getTheView(this.target);var f=DisplayView.span2Json(this.target);var e=$(d).find("[name=_selects]:checked");return DisplayView.addVal2Params(f,e)}else{return jQuery(document.forms[0]).serialize()}};BatchSignatureBtn.prototype.doBefore=function(){if(navigator.userAgent.indexOf("MSIE")<0){alert("金格iSignature电子签章HTML版只支持IE，如果要签章请用IE浏览器");return}var r=document.getElementsByName("_selects").length;var d;var l="";for(var m=0;m<r;m++){d=document.getElementsByName("_selects")[m];if(d.checked){if(m!=r-1){l=l+d.value+";"}else{l=l+d.value}}}var t=null;if(window.ActiveXObject){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(s){alert("创建Microsoft.XMLHTTP对象失败,AJAX不能正常运行.请检查您的浏览器设置.")}}else{if(window.XMLHttpRequest){try{t=new XMLHttpRequest()}catch(s){alert("创建XMLHttpRequest对象失败,AJAX不能正常运行.请检查您的浏览器设置.")}}}var f=document.getElementById("mGetBatchDocumentUrl").value;var p=document.getElementById("mLoginname").value;var q=document.getElementById("DocumentID").value;var g=document.getElementById("ApplicationID").value;var h=document.getElementById("FormID").value;f=f+"?DocumentID="+q+"&ApplicationID2="+g+"&FormID2="+h;t.onreadystatechange=function(){if(t.readyState==4&&t.status==200){if(t.responseText=="false"){return}var v=t.responseText.split(",");var e="";for(var u=0;u<v.length;u++){if(u!=v.length-1){e=e+(v[u]+"="+v[u]+";")}else{e=e+(v[u]+"="+v[u])}}if(formList.SignatureControl!=null){if(l==""){alert("请选择需要签章的文档。")}formList.SignatureControl.FieldsList=e;formList.SignatureControl.Position(460,275);formList.SignatureControl.DocumentList=l;formList.SignatureControl.WebSetFontOther("True","同意通过","0","宋体","11","000128","True");formList.SignatureControl.SaveHistory="false";formList.SignatureControl.UserName="lyj";formList.SignatureControl.WebCancelOrder=0;formList.SignatureControl.AutoCloseBatchWindow=true;formList.SignatureControl.RunBatchSignature()}else{alert("请安装金格iSignature电子签章HTML版软件");document.getElementById("hreftest2").click()}}};t.open("POST",f);t.setRequestHeader("Content-Type","application/x-www-form-urlencoded");t.send(null);return false};BatchSignatureBtn.prototype.doAction=function(){return false};BatchSignatureBtn.prototype.doAfter=function(d){};BatchSignatureBtn._initialized=true}return this}function ArchiveBtn(c,b){this.actId=c;this.params=b;this.actType=45;if(typeof ArchiveBtn._initialized=="undefined"){ArchiveBtn.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};ArchiveBtn.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};ArchiveBtn.prototype.doBefore=function(){return true};ArchiveBtn.prototype.doAction=function(){return true};ArchiveBtn.prototype.doAfter=function(d){};ArchiveBtn._initialized=true}return this}function StartWorkflow(c,b){this.actId=c;this.params=b;this.actType=33;this.editMode=b.editMode;this.title=b.title;this.hasRun=false;this.flowParams="";if(typeof StartWorkflow._initialized=="undefined"){StartWorkflow.prototype.getBeforePostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery("#document_content").serialize();Activity.setFieldDisabled(d);return e};StartWorkflow.prototype.getActionPostData=function(){var d=Activity.makeAllFieldAble();jQuery("input[moduleType='surveyField']").obpmSurveyField("getValue");var e=jQuery(document.forms[0]).serialize()+"&_editMode="+this.editMode+"&"+this.flowParams;Activity.setFieldDisabled(d);return e};StartWorkflow.prototype.doBefore=function(){if(this.hasRun){return true}if(this.editMode==null||this.editMode==0){var f=document.getElementById("_docid").value;var h=document.getElementById("_formid").value;var g=contextPath+"/portal/share/workflow/runtime/startWorkFlow.jsp?_docid="+f+"&formid="+h;var e=this.title;if(e==null||e==""){e="Undefind"}tempAllDisabledField();makeFieldState(false);var d=this;OBPM.dialog.show({width:600,height:420,url:g,args:{},title:e,close:function(l){if(l){d.flowParams=l;d.hasRun=true;Activity.doBefore(d)}}});return false}else{if(this.editMode==1){setHTMLValue();return true}}return false};StartWorkflow.prototype.doAction=function(){doWordSave();return true};StartWorkflow.prototype.doAfter=function(d){};StartWorkflow._initialized=true}return this}function SignBtn(c,b){this.actId=c;this.params=b;this.actType=46;if(typeof SignBtn._initialized=="undefined"){SignBtn.prototype.getBeforePostData=function(){return jQuery("#document_content").serialize()};SignBtn.prototype.getActionPostData=function(){return jQuery("#document_content").serialize()};SignBtn.prototype.doBefore=function(){return true};SignBtn.prototype.doAction=function(){return true};SignBtn.prototype.doAfter=function(d){return true};SignBtn._initialized=true}return this}(function(){function K(e){for(var l,m=e.css("color"),p,e=e[0],t=!1;e&&!p&&!t;){try{l=$(e).css("background-color")}catch(r){l="transparent"}"transparent"!==l&&"rgba(0, 0, 0, 0)"!==l&&(p=l);t=e.body;e=e.parentNode}var e=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,t=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/,h;l=void 0;(l=m.match(e))?h={r:parseInt(l[1],10),g:parseInt(l[2],10),b:parseInt(l[3],10)}:(l=m.match(t))&&(h={r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)});var q;p?(l=void 0,(l=p.match(e))?q={r:parseInt(l[1],10),g:parseInt(l[2],10),b:parseInt(l[3],10)}:(l=p.match(t))&&(q={r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)})):q=h?127<Math.max.apply(null,[h.r,h.g,h.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255}:{r:255,g:255,b:255};l=function(c){return"rgb("+[c.r,c.g,c.b].join(", ")+")"};h&&q?(e=Math.max.apply(null,[h.r,h.g,h.b]),h=Math.max.apply(null,[q.r,q.g,q.b]),h=Math.round(h+-0.75*(h-e)),h={r:h,g:h,b:h}):h?(h=Math.max.apply(null,[h.r,h.g,h.b]),e=1,127<h&&(e=-1),h=Math.round(h+96*e),h={r:h,g:h,b:h}):h={r:191,g:191,b:191};return{color:m,"background-color":q?l(q):p,"decor-color":l(h)}}function O(c,d){this.x=c;this.y=d;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var e=function(f){return Math.round(f/Math.abs(f))};this.resizeTo=function(f){if(0===this.x&&0===this.y){this._length=0}else{if(0===this.x){this._length=f,this.y=f*e(this.y)}else{if(0===this.y){this._length=f,this.x=f*e(this.x)}else{var l=Math.abs(this.y/this.x),h=Math.sqrt(Math.pow(f,2)/(1+Math.pow(l,2))),l=l*h;this._length=f;this.x=h*e(this.x);this.y=l*e(this.y)}}}return this};this.angleTo=function(f){var h=this.getLength()*f.getLength();return 0===h?0:Math.acos(Math.min(Math.max((this.x*f.x+this.y*f.y)/h,-1),1))/Math.PI}}function Q(c,d){this.x=c;this.y=d;this.getVectorToCoordinates=function(e,f){return new O(e-this.x,f-this.y)};this.getVectorFromCoordinates=function(e,f){return this.getVectorToCoordinates(e,f).reverse()};this.getVectorToPoint=function(e){return new O(e.x-this.x,e.y-this.y)};this.getVectorFromPoint=function(e){return this.getVectorToPoint(e).reverse()}}function G(w,m,x,q,v){this.data=w;this.context=m;if(w.length){for(var u=w.length,r,h,p=0;p<u;p++){r=w[p];h=r.x.length;x.call(m,r);for(var t=1;t<h;t++){q.call(m,r,t)}v.call(m,r)}}this.changed=function(){};this.startStrokeFn=x;this.addToStrokeFn=q;this.endStrokeFn=v;this.inStroke=!1;this._stroke=this._lastPoint=null;this.startStroke=function(c){if(c&&"number"==typeof c.x&&"number"==typeof c.y){this._stroke={x:[c.x],y:[c.y]};this.data.push(this._stroke);this._lastPoint=c;this.inStroke=!0;var e=this._stroke,d=this.startStrokeFn,f=this.context;setTimeout(function(){d.call(f,e)},3);return c}return null};this.addToStroke=function(c){if(this.inStroke&&"number"===typeof c.x&&"number"===typeof c.y&&4<Math.abs(c.x-this._lastPoint.x)+Math.abs(c.y-this._lastPoint.y)){var e=this._stroke.x.length;this._stroke.x.push(c.x);this._stroke.y.push(c.y);this._lastPoint=c;var d=this._stroke,l=this.addToStrokeFn,f=this.context;setTimeout(function(){l.call(f,d,e)},3);return c}return null};this.endStroke=function(){var c=this.inStroke;this.inStroke=!1;this._lastPoint=null;if(c){var e=this._stroke,d=this.endStrokeFn,l=this.context,f=this.changed;setTimeout(function(){d.call(l,e);f.call(l)},3);return !0}return null}}function I(A,r,B){var v=this.$parent=$(A),A=this.eventTokens={};this.events=new E(this);var z=$.fn[U]("globalEvents"),y={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};$.extend(y,K(v));r&&$.extend(y,r);this.settings=y;for(var x in B){B.hasOwnProperty(x)&&B[x].call(this,x)}this.events.publish(U+".initializing");this.$controlbarUpper=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(v);this.isCanvasEmulator=!1;B=this.canvas=this.initializeCanvas(y);r=$(B);this.$controlbarLower=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(v);this.canvasContext=B.getContext("2d");r.data(U+".this",this);v=(v=y.lineWidth)?v:Math.max(Math.round(B.width/400),2);y.lineWidth=v;this.lineCurveThreshold=3*y.lineWidth;y.cssclass&&""!=$.trim(y.cssclass)&&r.addClass(y.cssclass);this.fatFingerCompensation=0;var v=function(c){var h,f,l=function(d){d=d.changedTouches&&0<d.changedTouches.length?d.changedTouches[0]:d;return new Q(Math.round(d.pageX+h),Math.round(d.pageY+f)+c.fatFingerCompensation)},p=new g(750,function(){c.dataEngine.endStroke()});this.drawEndHandler=function(w){try{w.preventDefault()}catch(d){}p.clear();c.dataEngine.endStroke()};this.drawStartHandler=function(w){w.preventDefault();var d=$(c.canvas).offset();h=-1*d.left;f=-1*d.top;c.dataEngine.startStroke(l(w));p.kick()};this.drawMoveHandler=function(d){d.preventDefault();c.dataEngine.inStroke&&(c.dataEngine.addToStroke(l(d)),p.kick())};return this}.call({},this),q=v.drawEndHandler,t=v.drawStartHandler,e=v.drawMoveHandler,u=this.canvas,r=$(u);this.isCanvasEmulator?(r.bind("mousemove."+U,e),r.bind("mouseup."+U,q),r.bind("mousedown."+U,t)):(u.ontouchstart=function(c){u.onmousedown=void 0;u.onmouseup=void 0;u.onmousemove=void 0;this.fatFingerCompensation=y.minFatFingerCompensation&&-3*y.lineWidth>y.minFatFingerCompensation?-3*y.lineWidth:y.minFatFingerCompensation;t(c);u.ontouchend=q;u.ontouchstart=t;u.ontouchmove=e},u.onmousedown=function(c){u.ontouchstart=void 0;u.ontouchend=void 0;u.ontouchmove=void 0;t(c);u.onmousedown=t;u.onmouseup=q;u.onmousemove=e});A[U+".windowmouseup"]=z.subscribe(U+".windowmouseup",v.drawEndHandler);this.events.publish(U+".attachingEventHandlers");var m=this,A=y.width.toString(10),C=U;if("ratio"===A||"%"===A.split("")[A.length-1]){this.eventTokens[C+".parentresized"]=z.subscribe(C+".parentresized",function(c,f,d){return function(){var ac=f.width();if(ac!==d){for(var af in c){c.hasOwnProperty(af)&&(z.unsubscribe(c[af]),delete c[af])}var ag=m.settings;m.$parent.children().remove();for(af in m){m.hasOwnProperty(af)&&delete m[af]}af=ag.data;var ac=1*ac/d,ad=[],Y,aa,ae,ab,Z,w;aa=0;for(ae=af.length;aa<ae;aa++){w=af[aa];Y={x:[],y:[]};ab=0;for(Z=w.x.length;ab<Z;ab++){Y.x.push(w.x[ab]*ac),Y.y.push(w.y[ab]*ac)}ad.push(Y)}ag.data=ad;f[C](ag)}}}(this.eventTokens,this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height))}this.resetCanvas(y.data);this.events.publish(U+".initialized");return this}var U="jSignature",g=function(c,e){var d;this.kick=function(){clearTimeout(d);d=setTimeout(e,c)};this.clear=function(){clearTimeout(d)};return this},E=function(c){this.topics={};this.context=c?c:this;this.publish=function(z,A,u,x){if(this.topics[z]){var y=this.topics[z],v=Array.prototype.slice.call(arguments,1),q=[],r,w,t,m;w=0;for(t=y.length;w<t;w++){m=y[w],r=m[0],m[1]&&(m[0]=function(){},q.push(w)),r.apply(this.context,v)}w=0;for(t=q.length;w<t;w++){y.splice(q[w],1)}}};this.subscribe=function(d,e,f){this.topics[d]?this.topics[d].push([e,f]):this.topics[d]=[[e,f]];return{topic:d,callback:e}};this.unsubscribe=function(e){if(this.topics[e.topic]){for(var f=this.topics[e.topic],h=0,l=f.length;h<l;h++){f[h][0]===e.callback&&f.splice(h,1)}}}},b=function(e){var f=this.canvasContext,l=e.x[0],e=e.y[0],h=this.settings.lineWidth,m=f.fillStyle;f.fillStyle=f.strokeStyle;f.fillRect(l+h/-2,e+h/-2,h,h);f.fillStyle=m},F=function(Y,Z){var B=new Q(Y.x[Z-1],Y.y[Z-1]),x=new Q(Y.x[Z],Y.y[Z]),C=B.getVectorToPoint(x);if(1<Z){var y=new Q(Y.x[Z-2],Y.y[Z-2]),t=y.getVectorToPoint(B),u;if(t.getLength()>this.lineCurveThreshold){u=2<Z?(new Q(Y.x[Z-3],Y.y[Z-3])).getVectorToPoint(y):new O(0,0);var z=0.35*t.getLength(),v=t.angleTo(u.reverse()),m=C.angleTo(t.reverse());u=(new O(u.x+t.x,u.y+t.y)).resizeTo(Math.max(0.05,v)*z);var r=(new O(t.x+C.x,t.y+C.y)).reverse().resizeTo(Math.max(0.05,m)*z),t=this.canvasContext,z=y.x,m=y.y,v=B.x,aa=B.y,q=y.x+u.x,y=y.y+u.y;u=B.x+r.x;r=B.y+r.y;t.beginPath();t.moveTo(z,m);t.bezierCurveTo(q,y,u,r,v,aa);t.stroke()}}C.getLength()<=this.lineCurveThreshold&&(C=this.canvasContext,y=B.x,B=B.y,u=x.x,x=x.y,C.beginPath(),C.moveTo(y,B),C.lineTo(u,x),C.stroke())},s=function(v){var w=v.x.length-1;if(0<w){var t=new Q(v.x[w],v.y[w]),p=new Q(v.x[w-1],v.y[w-1]),u=p.getVectorToPoint(t);if(u.getLength()>this.lineCurveThreshold){if(1<w){var v=(new Q(v.x[w-2],v.y[w-2])).getVectorToPoint(p),q=(new O(v.x+u.x,v.y+u.y)).resizeTo(u.getLength()/2),u=this.canvasContext,v=p.x,w=p.y,h=t.x,m=t.y,r=p.x+q.x,p=p.y+q.y,q=t.x,t=t.y;u.beginPath();u.moveTo(v,w);u.bezierCurveTo(r,p,q,t,h,m)}else{u=this.canvasContext,v=p.x,p=p.y,w=t.x,t=t.y,u.beginPath(),u.moveTo(v,p),u.lineTo(w,t)}u.stroke()}}};I.prototype.resetCanvas=function(B){var C=this.canvas,y=this.settings,z=this.canvasContext,x=this.isCanvasEmulator,r=C.width,u=C.height;z.clearRect(0,0,r+30,u+30);z.shadowColor=z.fillStyle=y["background-color"];x&&z.fillRect(0,0,r+30,u+30);z.lineWidth=Math.ceil(parseInt(y.lineWidth,10));z.lineCap=z.lineJoin="round";z.strokeStyle=y["decor-color"];z.shadowOffsetX=0;z.shadowOffsetY=0;var v=Math.round(u/5),e=1.5*v,t=u-v,r=r-1.5*v,u=u-v;z.beginPath();z.moveTo(e,t);z.lineTo(r,u);z.stroke();z.strokeStyle=y.color;x||(z.shadowColor=z.strokeStyle,z.shadowOffsetX=0.5*z.lineWidth,z.shadowOffsetY=-0.6*z.lineWidth,z.shadowBlur=0);B||(B=[]);z=this.dataEngine=new G(B,this,b,F,s);y.data=B;$(C).data(U+".data",B).data(U+".settings",y);var q=this.$parent,Y=this.events,m=U;z.changed=function(){Y.publish(m+".change");q.trigger("change")};z.changed();return !0};I.prototype.initializeCanvas=function(e){var h=document.createElement("canvas"),p=$(h);e.width===e.height&&"ratio"===e.height&&(e.width="100%");p.css("margin",0).css("padding",0).css("border","none").css("height","ratio"===e.height||!e.height?1:e.height.toString(10)).css("width","ratio"===e.width||!e.width?1:e.width.toString(10));p.appendTo(this.$parent);"ratio"===e.height?p.css("height",Math.round(p.width()/e.sizeRatio)):"ratio"===e.width&&p.css("width",Math.round(p.height()*e.sizeRatio));p.addClass(U);h.width=p.width();h.height=p.height();e=h;if(e.getContext){e=!1}else{var p=e.ownerDocument.parentWindow,m=p.FlashCanvas?e.ownerDocument.parentWindow.FlashCanvas:"undefined"===typeof FlashCanvas?void 0:FlashCanvas;if(m){e=m.initElement(e);m=1;p&&(p.screen&&p.screen.deviceXDPI&&p.screen.logicalXDPI)&&(m=1*p.screen.deviceXDPI/p.screen.logicalXDPI);if(1!==m){try{$(e).children("object").get(0).resize(Math.ceil(e.width*m),Math.ceil(e.height*m)),e.getContext("2d").scale(m,m)}catch(l){}}e=!0}else{throw Error("Canvas element does not support 2d context. jSignature cannot proceed.")}}this.isCanvasEmulator=e;h.onselectstart=function(c){c&&c.preventDefault&&c.preventDefault();c&&c.stopPropagation&&c.stopPropagation();return !1};return h};var M=window,S=function(e,f){var l=new Image,h=this;l.onload=function(){h.getContext("2d").drawImage(l,0,0,l.width<h.width?l.width:h.width,l.height<h.height?l.height:h.height)};l.src="data:"+f+","+e},X=function(c){this.find("canvas."+U).add(this.filter("canvas."+U)).data(U+".this").resetCanvas(c);return this},T=function(d,e){if(void 0===e&&("string"===typeof d&&"data:"===d.substr(0,5))&&(e=d.slice(5).split(",")[0],d=d.slice(6+e.length),e===d)){return}var f=this.find("canvas."+U).add(this.filter("canvas."+U));if(N.hasOwnProperty(e)){0!==f.length&&N[e].call(f[0],d,e,function(c){return function(){return c.resetCanvas.apply(c,arguments)}}(f.data(U+".this")))}else{throw Error(U+" is unable to find import plugin with for format '"+String(e)+"'")}return this},V=new E,W=U,P,R=function(){V.publish(W+".parentresized")};$(M).bind("resize."+W,function(){P&&clearTimeout(P);P=setTimeout(R,500)}).bind("mouseup."+W,function(){V.publish(W+".windowmouseup")});var D={},L={"default":function(){return this.toDataURL()},"native":function(c){return c},image:function(){var c=this.toDataURL();if("string"===typeof c&&4<c.length&&"data:"===c.slice(0,5)&&-1!==c.indexOf(",")){var d=c.indexOf(",");return[c.slice(5,d),c.substr(d+1)]}return[]}},N={"native":function(d,e,f){f(d)},image:S,"image/png;base64":S,"image/jpeg;base64":S,"image/jpg;base64":S},J={"export":L,"import":N,instance:D},H={init:function(c){return this.each(function(){var d,e=!1;for(d=this.parentNode;d&&!e;){e=d.body,d=d.parentNode}!e||new I(this,c,D)})},getSettings:function(){return this.find("canvas."+U).add(this.filter("canvas."+U)).data(U+".this").settings},clear:X,reset:X,addPlugin:function(d,e,f){J.hasOwnProperty(d)&&(J[d][e]=f);return this},listPlugins:function(d){var e=[];if(J.hasOwnProperty(d)){var d=J[d],f;for(f in d){d.hasOwnProperty(f)&&e.push(f)}}return e},getData:function(c){var d=this.find("canvas."+U).add(this.filter("canvas."+U));void 0===c&&(c="default");if(0!==d.length&&L.hasOwnProperty(c)){return L[c].call(d.get(0),d.data(U+".data"))}},importData:T,setData:T,globalEvents:function(){return V},events:function(){return this.find("canvas."+U).add(this.filter("canvas."+U)).data(U+".this").events}};$.fn[U]=function(c){if(!c||"object"===typeof c){return H.init.apply(this,arguments)}if("string"===typeof c&&H[c]){return H[c].apply(this,Array.prototype.slice.call(arguments,1))}$.error("Method "+String(c)+" does not exist on jQuery."+U)}})();(function(){$.fn.jSignature("addPlugin","instance","UndoButton",function(b){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[b]){var c=this.settings[b];"function"!==typeof c&&(c=function(){var m=$('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),l=m.width();m.css("left",Math.round((this.canvas.width-l)/2));l!==m.width()&&m.width(l);return m});var d=c.call(this),f=this;f.events.subscribe("jSignature.change",function(){f.dataEngine.data.length?d.show():d.hide()});var g=this,h=(this.events.topics.hasOwnProperty("jSignature.undo")?b:"jSignature")+".undo";d.bind("click",function(){g.events.publish(h)});g.events.subscribe(h,function(){var l=g.dataEngine.data;l.length&&(l.pop(),g.resetCanvas(l))})}})})})();(function(){for(var c={},d={},f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),A=f.length/2,b=A-1;-1<b;b--){c[f[b]]=f[b+A],d[f[b+A]]=f[b]}var g=function(r){for(var r=r.split(""),q=r.length,m=1;m<q;m++){r[m]=c[r[m]]}return r.join("")},l=function(q){for(var t=[],m=0,u=1,v=q.length,x,e,r=0;r<v;r++){x=Math.round(q[r]),e=x-m,m=x,0>e&&0<u?(u=-1,t.push("Z")):0<e&&0>u&&(u=1,t.push("Y")),x=Math.abs(e),x>=A?t.push(g(x.toString(A))):t.push(x.toString(A))}return t.join("")},s=function(v){for(var t=[],v=v.split(""),q=v.length,u,x=1,y=[],m=0,r=0;r<q;r++){u=v[r],u in c||"Z"===u||"Y"===u?(0!==y.length&&(y=parseInt(y.join(""),A)*x+m,t.push(y),m=y),"Z"===u?(x=-1,y=[]):"Y"===u?(x=1,y=[]):y=[u]):y.push(d[u])}t.push(parseInt(y.join(""),A)*x+m);return t},h=function(t){for(var q=[],m=t.length,r,u=0;u<m;u++){r=t[u],q.push(l(r.x)),q.push(l(r.y))}return q.join("_")},w=function(t){for(var q=[],t=t.split("_"),m=t.length/2,r=0;r<m;r++){q.push({x:s(t[2*r]),y:s(t[2*r+1])})}return q},f=function(m){return["image/jsignature;base30",h(m)]},b=function(r,q,m){"string"===typeof r&&("image/jsignature;base30"===r.substring(0,23).toLowerCase()&&(r=r.substring(24)),m(w(r)))};if(null==this.jQuery){throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...")}var p=this.jQuery.fn.jSignature;p("addPlugin","export","base30",f);p("addPlugin","export","image/jsignature;base30",f);p("addPlugin","import","base30",b);p("addPlugin","import","image/jsignature;base30",b);this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:g,compressstrokeleg:l,uncompressstrokeleg:s,compressstrokes:h,uncompressstrokes:w,charmap:c})}).call("undefined"!==typeof window?window:this);(function(){function c(e,h){this.x=e;this.y=h;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var m=function(p){return Math.round(p/Math.abs(p))};this.resizeTo=function(p){if(0===this.x&&0===this.y){this._length=0}else{if(0===this.x){this._length=p,this.y=p*m(this.y)}else{if(0===this.y){this._length=p,this.x=p*m(this.x)}else{var q=Math.abs(this.y/this.x),r=Math.sqrt(Math.pow(p,2)/(1+Math.pow(q,2))),q=q*r;this._length=p;this.x=r*m(this.x);this.y=q*m(this.y)}}}return this};this.angleTo=function(p){var q=this.getLength()*p.getLength();return 0===q?0:Math.acos(Math.min(Math.max((this.x*p.x+this.y*p.y)/q,-1),1))/Math.PI}}function f(e,h){this.x=e;this.y=h;this.getVectorToCoordinates=function(m,p){return new c(m-this.x,p-this.y)};this.getVectorFromCoordinates=function(m,p){return this.getVectorToCoordinates(m,p).reverse()};this.getVectorToPoint=function(m){return new c(m.x-this.x,m.y-this.y)};this.getVectorFromPoint=function(m){return this.getVectorToPoint(m).reverse()}}function g(e,h){var m=Math.pow(10,h);return Math.round(e*m)/m}function E(h,p,r){var p=p+1,t=new f(h.x[p-1],h.y[p-1]),q=new f(h.x[p],h.y[p]),q=t.getVectorToPoint(q),m=new f(h.x[p-2],h.y[p-2]),t=m.getVectorToPoint(t);return t.getLength()>r?(r=2<p?(new f(h.x[p-3],h.y[p-3])).getVectorToPoint(m):new c(0,0),h=0.35*t.getLength(),m=t.angleTo(r.reverse()),p=q.angleTo(t.reverse()),r=(new c(r.x+t.x,r.y+t.y)).resizeTo(Math.max(0.05,m)*h),q=(new c(t.x+q.x,t.y+q.y)).reverse().resizeTo(Math.max(0.05,p)*h),q=new c(t.x+q.x,t.y+q.y),["c",g(r.x,2),g(r.y,2),g(q.x,2),g(q.y,2),g(t.x,2),g(t.y,2)]):["l",g(t.x,2),g(t.y,2)]}function b(h,p){var r=h.x.length-1,t=new f(h.x[r],h.y[r]),q=new f(h.x[r-1],h.y[r-1]),t=q.getVectorToPoint(t);if(1<r&&t.getLength()>p){var r=(new f(h.x[r-2],h.y[r-2])).getVectorToPoint(q),q=t.angleTo(r.reverse()),m=0.35*t.getLength(),r=(new c(r.x+t.x,r.y+t.y)).resizeTo(Math.max(0.05,q)*m);return["c",g(r.x,2),g(r.y,2),g(t.x,2),g(t.y,2),g(t.x,2),g(t.y,2)]}return["l",g(t.x,2),g(t.y,2)]}function s(h,m,p){for(var m=["M",g(h.x[0]-m,2),g(h.y[0]-p,2)],p=1,q=h.x.length-1;p<q;p++){m.push.apply(m,E(h,p,1))}0<q?m.push.apply(m,b(h,p,1)):0===q&&m.push.apply(m,["l",1,1]);return m.join(" ")}function A(H){var y=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],z,F=H.length,t,v=[],x=[],u=t=z=0,q=0,e=[];if(0!==F){for(z=0;z<F;z++){u=H[z];q=[];t={x:[],y:[]};for(var r=void 0,G=void 0,r=0,G=u.x.length;r<G;r++){q.push({x:u.x[r],y:u.y[r]})}q=simplify(q,0.7,!0);r=0;for(G=q.length;r<G;r++){t.x.push(q[r].x),t.y.push(q[r].y)}e.push(t);v=v.concat(t.x);x=x.concat(t.y)}H=Math.min.apply(null,v)-1;F=Math.max.apply(null,v)+1;v=Math.min.apply(null,x)-1;x=Math.max.apply(null,x)+1;u=0>H?0:H;q=0>v?0:v;z=F-H;t=x-v}y.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+z.toString()+'" height="'+t.toString()+'">');z=0;for(F=e.length;z<F;z++){t=e[z],y.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+s(t,u,q)+'"/>')}y.push("</svg>");return y.join("")}function C(e){return[d,A(e)]}function w(e){return[l,B(A(e))]}var D=window;"use strict";("undefined"!=typeof exports?exports:D).simplify=function(V,R,S){R=void 0!==R?R*R:1;if(!S){for(var T=V.length,L,O=V[0],P=[O],S=1;S<T;S++){L=V[S];var M=L.x-O.x,J=L.y-O.y;M*M+J*J>R&&(P.push(L),O=L)}V=(O!==L&&P.push(L),P)}L=V;var S=L.length,T=new ("undefined"!=typeof Uint8Array?Uint8Array:Array)(S),O=0,P=S-1,K,I,U=[],N=[],F=[];for(T[O]=T[P]=1;P;){J=0;for(M=O+1;M<P;M++){K=L[M];var Q=L[O],G=L[P],H=Q.x,z=Q.y,Q=G.x-H,y=G.y-z,x=void 0;if(0!==Q||0!==y){x=((K.x-H)*Q+(K.y-z)*y)/(Q*Q+y*y),1<x?(H=G.x,z=G.y):0<x&&(H+=Q*x,z+=y*x)}K=(Q=K.x-H,y=K.y-z,Q*Q+y*y);K>J&&(I=M,J=K)}J>R&&(T[I]=1,U.push(O),N.push(I),U.push(I),N.push(P));O=U.pop();P=N.pop()}for(M=0;M<S;M++){T[M]&&F.push(L[M])}return V=F,V};if("function"!==typeof B){var B=function(z){var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),x,y,u,t,r=0,q=0,p="",p=[];do{x=z.charCodeAt(r++),y=z.charCodeAt(r++),u=z.charCodeAt(r++),t=x<<16|y<<8|u,x=t>>18&63,y=t>>12&63,u=t>>6&63,t&=63,p[q++]=v[x]+v[y]+v[u]+v[t]}while(r<z.length);p=p.join("");z=z.length%3;return(z?p.slice(0,z-3):p)+"===".slice(z||3)}}var d="image/svg+xml",l="image/svg+xml;base64";if("undefined"===typeof $){throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...")}D=$.fn.jSignature;D("addPlugin","export","svg",C);D("addPlugin","export",d,C);D("addPlugin","export","svgbase64",w);D("addPlugin","export",l,w)})();(function(){var v="_",r={},l={},u="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),h=u.length/2,e="Z",q="Y";for(var m=h-1;m>-1;m--){r[u[m]]=u[m+h];l[u[m+h]]=u[m]}var p=function(A){var z=A.split(""),x=z.length;for(var y=1;y<x;y++){z[y]=r[z[y]]}return z.join("")},d=function(C){var G=[],D=0,E=0,F=1,z=C.length,B,y,x;for(var A=0;A<z;A++){B=Math.round(C[A]);y=B-D;D=B;if(y<0&&F>0){F=-1;G.push(e)}else{if(y>0&&F<0){F=1;G.push(q)}}x=Math.abs(y);if(x>=h){G.push(p(x.toString(h)))}else{G.push(x.toString(h))}}return G.join("")},c=function(C){var G=[],D=C.split(""),y=D.length,x,z=1,E=[],F=0,B;for(var A=0;A<y;A++){x=D[A];if(x in r||x===e||x===q){if(E.length!==0){B=parseInt(E.join(""),h)*z+F;G.push(B);F=B}if(x===e){z=-1;E=[]}else{if(x===q){z=1;E=[]}else{E=[x]}}}else{E.push(l[x])}}G.push(parseInt(E.join(""),h)*z+F);return G},t=function(A){var z=[],x=A.length,B;for(var y=0;y<x;y++){B=A[y];z.push(d(B.x));z.push(d(B.y))}return z.join(v)},f=function(A){var z=[],B=A.split(v),x=B.length/2;for(var y=0;y<x;y++){z.push({x:c(B[y*2]),y:c(B[y*2+1])})}return z},w="image/jsignature;base30",s=function(x){return[w,t(x)]},g=function(y,z,x){if(typeof y!=="string"){return}if(y.substring(0,w.length).toLowerCase()===w){y=y.substring(w.length+1)}x(f(y))},b=function(x){var y=x.fn.jSignature;y("addPlugin","export","base30",s);y("addPlugin","export",w,s);y("addPlugin","import","base30",g);y("addPlugin","import",w,g)};if(this.jQuery==null){throw new Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...")}b(this.jQuery);if(this.jSignatureDebug){this.jSignatureDebug.base30={remapTailChars:p,compressstrokeleg:d,uncompressstrokeleg:c,compressstrokes:t,uncompressstrokes:f,charmap:r}}}).call(typeof window!=="undefined"?window:this);(function(){(function(v,u){function A(C,B){var E=C.x-B.x,D=C.y-B.y;return E*E+D*D}function z(C,B,I){var H=B.x,G=B.y,F=I.x-H,E=I.y-G,D;if(F!==0||E!==0){D=((C.x-H)*F+(C.y-G)*E)/(F*F+E*E),D>1?(H=I.x,G=I.y):D>0&&(H+=F*D,G+=E*D)}return F=C.x-H,E=C.y-G,F*F+E*E}function y(C,B){var H,G=C.length,F,E=C[0],D=[E];for(H=1;H<G;H++){F=C[H],A(F,E)>B&&(D.push(F),E=F)}return E!==F&&D.push(F),D}function x(O,N){var M=O.length,L=typeof Uint8Array!=u+""?Uint8Array:Array,K=new L(M),J=0,I=M-1,H,G,F,E,D=[],C=[],B=[];K[J]=K[I]=1;while(I){G=0;for(H=J+1;H<I;H++){F=z(O[H],O[J],O[I]),F>G&&(E=H,G=F)}G>N&&(K[E]=1,D.push(J),C.push(E),D.push(E),C.push(I)),J=D.pop(),I=C.pop()}for(H=0;H<M;H++){K[H]&&B.push(O[H])}return B}"use strict";var w=typeof exports!=u+""?exports:v;w.simplify=function(B,E,D){var C=E!==u?E*E:1;return D||(B=y(B,C)),B=x(B,C),B}})(window);function f(u,w){this.x=u;this.y=w;this.reverse=function(){return new this.constructor(this.x*-1,this.y*-1)};this._length=null;this.getLength=function(){if(!this._length){this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}return this._length};var v=function(x){return Math.round(x/Math.abs(x))};this.resizeTo=function(A){if(this.x===0&&this.y===0){this._length=0}else{if(this.x===0){this._length=A;this.y=A*v(this.y)}else{if(this.y===0){this._length=A;this.x=A*v(this.x)}else{var B=Math.abs(this.y/this.x),z=Math.sqrt(Math.pow(A,2)/(1+Math.pow(B,2))),C=B*z;this._length=A;this.x=z*v(this.x);this.y=C*v(this.y)}}}return this};this.angleTo=function(x){var y=this.getLength()*x.getLength();if(y===0){return 0}else{return Math.acos(Math.min(Math.max((this.x*x.x+this.y*x.y)/y,-1),1))/Math.PI}}}function g(u,v){this.x=u;this.y=v;this.getVectorToCoordinates=function(w,z){return new f(w-this.x,z-this.y)};this.getVectorFromCoordinates=function(w,z){return this.getVectorToCoordinates(w,z).reverse()};this.getVectorToPoint=function(w){return new f(w.x-this.x,w.y-this.y)};this.getVectorFromPoint=function(w){return this.getVectorToPoint(w).reverse()}}function s(w,u){var v=Math.pow(10,u);return Math.round(w*v)/v}function c(K,H,A){H+=1;var w=new g(K.x[H-1],K.y[H-1]),C=new g(K.x[H],K.y[H]),x=w.getVectorToPoint(C);var I=new g(K.x[H-2],K.y[H-2]),E=I.getVectorToPoint(w),z,J=2;if(E.getLength()>A){if(H>2){z=(new g(K.x[H-3],K.y[H-3])).getVectorToPoint(I)}else{z=new f(0,0)}var u=0.05,y=E.getLength()*0.35,G=E.angleTo(z.reverse()),F=x.angleTo(E.reverse()),v=new f(z.x+E.x,z.y+E.y).resizeTo(Math.max(u,G)*y),B=(new f(E.x+x.x,E.y+x.y)).reverse().resizeTo(Math.max(u,F)*y),D=new f(E.x+B.x,E.y+B.y);return["c",s(v.x,J),s(v.y,J),s(D.x,J),s(D.y,J),s(E.x,J),s(E.y,J)]}else{return["l",s(E.x,J),s(E.y,J)]}}function t(E,z){var C=E.x.length-1;var w=new g(E.x[C],E.y[C]),D=new g(E.x[C-1],E.y[C-1]),A=D.getVectorToPoint(w),F=2;if(C>1&&A.getLength()>z){var y=(new g(E.x[C-2],E.y[C-2])).getVectorToPoint(D),B=A.angleTo(y.reverse()),u=0.05,x=A.getLength()*0.35,v=new f(y.x+A.x,y.y+A.y).resizeTo(Math.max(u,B)*x);return["c",s(v.x,F),s(v.y,F),s(A.x,F),s(A.y,F),s(A.x,F),s(A.y,F)]}else{return["l",s(A.x,F),s(A.y,F)]}}function d(z,A,y){var v=["M",s((z.x[0]-A),2),s((z.y[0]-y),2)],w=1,u=z.x.length-1,x=1;for(;w<u;w++){v.push.apply(v,c(z,w,x))}if(u>0){v.push.apply(v,t(z,w,x))}else{if(u===0){v.push.apply(v,["l",1,1])}}return v.join(" ")}function m(x){var y=[],v={x:[],y:[]},w,u;for(w=0,u=x.x.length;w<u;w++){y.push({x:x.x[w],y:x.y[w]})}y=simplify(y,0.7,true);for(w=0,u=y.length;w<u;w++){v.x.push(y[w].x);v.y.push(y[w].y)}return v}function r(y){var K=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],z,v=y.length,J,u=[],D=[],G=0,E=0,x=0,w=0,I,C,H,A,F=1,B=[];if(v!==0){for(z=0;z<v;z++){J=m(y[z]);B.push(J);u=u.concat(J.x);D=D.concat(J.y)}I=Math.min.apply(null,u)-F;C=Math.max.apply(null,u)+F;H=Math.min.apply(null,D)-F;A=Math.max.apply(null,D)+F;x=I<0?0:I;w=H<0?0:H;G=C-I;E=A-H}K.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+G.toString()+'" height="'+E.toString()+'">');for(z=0,v=B.length;z<v;z++){J=B[z];K.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+d(J,x,w)+'"/>')}K.push("</svg>");return K.join("")}if(typeof q!=="function"){var q=function(C){var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",H=y.split(""),x,w,v,G,F,E,D,I,B=0,J=0,A="",z=[];do{x=C.charCodeAt(B++);w=C.charCodeAt(B++);v=C.charCodeAt(B++);I=x<<16|w<<8|v;G=I>>18&63;F=I>>12&63;E=I>>6&63;D=I&63;z[J++]=H[G]+H[F]+H[E]+H[D]}while(B<C.length);A=z.join("");var u=C.length%3;return(u?A.slice(0,u-3):A)+"===".slice(u||3)}}var e="image/svg+xml";function p(u){return[e,r(u)]}var h="image/svg+xml;base64";function l(u){return[h,q(r(u))]}function b(u){var v=u.fn.jSignature;v("addPlugin","export","svg",p);v("addPlugin","export",e,p);v("addPlugin","export","svgbase64",l);v("addPlugin","export",h,l)}if(typeof $==="undefined"){throw new Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...")}b($)})();(function(){var d="jSignature";function e(g,l,h){var f=g.call(this);(function(p,m,q){p.events.subscribe(q+".change",function(){if(p.dataEngine.data.length){m.show()}else{m.hide()}})})(this,f,l);(function(q,m,r){var p=r+".undo";m.bind("click",function(){q.events.publish(p)});q.events.subscribe(p,function(){var s=q.dataEngine.data;if(s.length){s.pop();q.resetCanvas(s)}})})(this,f,this.events.topics.hasOwnProperty(l+".undo")?h:l)}function b(g){var f="jSignature";this.events.subscribe(f+".attachingEventHandlers",function(){if(this.settings[g]){var h=this.settings[g];if(typeof h!=="function"){h=function(){var m="position:absolute;display:none;margin:0 !important;top:auto",l=$('<input type="button" value="Undo last stroke" style="'+m+'" />').appendTo(this.$controlbarLower);var p=l.width();l.css("left",Math.round((this.canvas.width-p)/2));if(p!==l.width()){l.width(p)}return l}}e.call(this,h,f,g)}})}var c=function(){$.fn[d]("addPlugin","instance","UndoButton",b)};c()})();(function(){var d="jSignature";function e(h,g,f){(function(l,p,m){p.bind("click",function(){p.hide()});l.events.subscribe(m+".change",function(){if(l.dataEngine.data.length){p.hide()}else{p.show()}})})(this,h,g)}function b(g){var f="jSignature";this.events.subscribe(f+".attachingEventHandlers",function(){var h=function(){var q="data:image/gif;base64,R0lGODlhtABJAOf/AAABAAACAAEEAAIFAQQHAgUIBAcJBQoJAAgLBwwLAAoMCA0MAA8OAwwPCxMQAA8RDRURABYSARITERMVBBQVExcXABgYAhYYFRkaBBwbABkaGB0cAR4dAhocGRsdGh8fBSIgAB0fHB4gHSAhHyQjBSckACIjISgmASQlIyooBSYnJSwpAC0qAC4rAS8rAikqKCssKjEuBTMvAC0uLDUwAjcyBS8xLzg0Bjs1ATIzMTw3Azk5BDQ2MzY3NTs7Bjw8Bzg5Nz49ADo7OUA/AkJABEJBBTw+O0RCBj5APUVECEdFAUFCQElGAkpIBERGQ0xKBk5LB09MCEdJRlJOAlNPA0pLSVRQBFZSBk1PTFdTB1hUCVtVAE9RTlxXAl5YBFJUUVRVU2BaBmFbCFZXVWJcCVZYVVlbWWZgAmhhBGliBVxeW15gXWxlCW1mC2BiX25nDHBoAXJqA2NlYnRrBmZnZXFuCGhpZ3NwCnRxDHVyAHdzAWxta3l1A3p2BW9xbnx4CX55DIB7AHN1coJ8AYN+A3Z4dXh6d4eBCYiCDImDDnt9eoyFAI2GAo6HA36AfZCJBoCCf4KEgZOLDJWND4WHhJiQAYiKh5qSBZ2UCouNip+VDqGXAI6QjaSaA5CSj6ecB5SWk6ieC6qfDq2hAJeZlq+jAJmbmLCkAqynBJyem66oCZ2fnLCqDaCin7StALKsEKOloriwA7qyCaeppry0DamrqL+2AL21EMG4AKyuq8O6Aq6wrca8CbCyr7O1ssm/EcvBAM3DALa4tc/EAri6t7q8udLHCdPIDr2/vNXKEtjMANrNAMDCvtvPAsLEwd3QB8PFwsXHxN/SDcfJxuHUEuTWAOXXAOfYAMvNyejaBc3PzOrcC9DSz+zdEOjgE+viANPV0uzjAO3kAO7lANfZ1vDnBvLoC9nb2PPpD/brAPTqEtze2/ftAPnuAPrvAN/h3vvwAPzxBeHk4P7yCeXn5Ofp5unr6Ovt6u7w7fHz8PP18vX49Pn7+Pv9+v7//P///yH5BAEKAP8ALAAAAAC0AEkAAAj+AP8JHEhQoL+DCAsqXMiwocOHECNKnEixosWHCDNq9Hexo8ePIEOKhHiwXiQVFy6M+EKJ2L2NHEfKnEmz5sWDoAgE2MmT50pLxfDBtEm0qNGQBzntpGJLnLhqqgAxqdAzgIkxmZDlG3q0q9evBqHt1DSvrFmz1VD1URKhqgozmZht3Qi2rl2QB8EEGHS2r19qo/QcadtThRpO0OZqvMu4cUN/8ggs8Oa3cmVpovAQYVAVxhpP0fZxdUy6rr9ZAaxYXm053rJPdYIsqDrDDahpoumW3m3zoKAAiVgLXx1P2ac5O2bzJGBDDils/Ebznt7x4JIAt4ZrZ93u2KY3OJT+7ySQgw4pbdF1U19P0l+DAOK2yxfezpgmNjUM9DTQw04qbuktxt6ABPlDTgAnzKegdu0Ec0kaNOjEkwFA7NEKOAFmROB6/sASwBYLhrgdO8BUckYMEu5kgBB+XNiPdBvadZAfATQi4o3ysfPLJGK4UJUCRvgBCzkwxRSjVwcZEQAuODY5Hzq8SOIFC1U1gIQgs5xT5JFF+dOPAgGY4+SYCpqDSyNdnFDVA0sUUss6W3I5kj/gBMACmXiGWI4ti2hBQlUSOGFILu/EKedNrQQQBoOjeEHCCTggUk2eeYpDSyJXgFAVBVIosos8hh6KkT97BCDJcMrQUFUABPBV1ij+kuASDqVOhiMLIlRwUNUFVTjSCz2hilqgP0AEwItw3nAmwyeyGCPLGZzNKk5PJMARizq0OulNLINEsUFVHWABiS/1wHioP/wYQAC2rNURwAbs9IXOpGUhEl5PCzShSrZkbuPKIE1YAC4XkQhjj7kE+sNNADIM10UAOmz3RAAuELaAX7h4EYQYyfAb4jVRTVWVCCy5hDBv/qQSwBnDfbITFLzEw1o8beHSjix1kGUWOmhUlUV8HouYVh9JEOYTGEAJpV5pB9kRQCXaLUIYBnrQ61cwARgQr1/WUBkAEYPgsJMMMs8jjhixBB0iYHoQAUFVJpSRlWIaNnYQDwEEs13+OYhQtdOpfjESwA+VlePjAqiUFU8lEBhA2Tx/BBDBNWrjiNkdm7llBidynUwUugYY0M587GiSwk6b+MVEAH/41c7qBhx7VjfSmJXFTnNY1s4zlcvn2nGyVfXCYdDo4/mc2ARQQ4jtTBEAB6Ob1c5ssvilyU6fCFfDTgsA3RcgAYjS+4LtKNMJcuLt5BlouR3UJSkBsMFaNY1E3xc1O1Fz1jE7odOXOBNg3XDeph9EVMZ5YhgfjrrznXstpzbEcF9NDiKHAOjMMnkIQO78soydUM4sowgACfwSuQ+UbTXd+FsALLC1s2hhZasJRgWyp0AG2Qc/+mFVLiQ4k4PkIAD+xmDN9QjQCfvNgx3OO0JfBhEAKvjlT3yJxzV4MYpYKINdZZFFADAQjxhY0C8Tc1Vl4BAAPdSQfMHAA6t2wcM57UMyRnSdFXaygUFIAhF/+BYBZGeWK+ylL1gLQDW8UYJVVYAJ35jHIpo4D1QEIAUnLIuaLugXL7piNaJg0hktw0QC9KKNSJlGAHAwnHZ84garcoHezhKPAFbvLJUIwA7mUY309SSIL2TEPOLho0tKTydpq8y04GMZl4FoHrwAAR4GYUdVdOOMnfQFKD/iD1AEAA7yAUYf0JAFQMTCfq7AwRHmGABVeG8eTCRCWcTRjXCUgx3HKGBZ/qTJUzDMfs/+2EnHKqOKANBgNTsIAA3fsCoCMOET/hsf+AwgjGnexB9uCEAnxjSHVQVAmWXRgyxd9wM7jS6FASiH4nwEuHm8ImtxNIsa72CZcuzkcVF4JBSsEIRv7YQBzxxfH7IWQSN55CAzCIAyxsQOUSxiDle4gXIWMDpXBKACH1zn6rBTln6C4CwhXMAHGxGAG6yGCAFIXGW0iAGz+IiGZflFG2o2D2kwgQiJ2Ce/NGqAYjiUIge5ADFpFY9njOIXZVHHtzbQh1GoQg8YYFXqyrLTKbBSVVooSxoC8IbVtKV2lWHiFcryjZ1g9izt+GAbejKFofLrDllDxl0lkte9Vu4ZNu3+SQReWZYg/PEswNhJ9WyL1r5cg1W8CEYwjrEMb0RvdVBr5LuEY9smyGA8tPCLLS5xjWpYI6XyqagBVOvTihykA0JVoDk2oYQayOCgWJwHOoDpl9GWQB2c4R0/LbqTCaRAP8soCxkXxZpvMWkUbWGAac2iqZ58YA6rVFBFFcCM1Y6KDhrc5Gq0yIAWmkUcVAmD5FZDxgq4gAUpOMEG0rcBswagDso451nMsRNrlOUaqwPB445IX4qNYkEEVQA0HOwQOgVgAQmW8FmWEYHWVcZlO2nCaqgkvr6UQxoa5q8yqrIAEhBBDJOI3kktAFoqya8s0mDVNr6xDWBcAqwB+ED+iNgQAAVEg8cMOYgaJMdHIZvFwn45wk4mYZltvNQyvC2LyxaQ2FVpcrT8NYsjSyxoO/nlGo3Y14LiMdkGTAPOC0HXF3aCg0ocA7t29m0MIpBTv7jsn5Z5G2bPEIA2zKMd1aBiI+Zwh6396cZnwdrFJNtqSsWD1Q3ABqYVgi5H6JV7OoBDJ5QBajujQ6SWYbUZK5NCppaFyazJpwGgXRZ0xPROkgwArvMUDzEE4AHC7i5r0VULN8wgRT/2wRw+oYxIhno1p7OFZXBBsbK0QyefrYwkdlKDJkxBC10IoEBfvJNS56kdXgiABLQx7IJoZB/R8MQaYEDlINThE8+w973+y4IHKoD6elkoizX6x5rbWdQCTZ4HVxFEBC/ooRKqCEaz5wNxiXOj4sTeiD6gwQk1vKAqDCACHkYR8JGvhomAKEtud43vAExBQgsYRDAi+TD6qnNM7diCz4H+mI3kgxmZMIMKqhKBI+hhFPpzul+OsQV6hYNVbfgFnsvCjp08IxheS0Mcv7UIo87BCjhIrGPJ1I4XUgAcZG+PRvCBDEuMwQRsV0IfUGE1uZ+F1eNJgRYG8YnoGQOlR3TXh+wXZteaReRNasccLwB5dcsEJvggBiW+IIKqHBIQqoiq3F+xBaP9rdGoLgsTI9xocFeuHVQIwAWIZPsJbuQewqAEFzz+UBULNAEQr9iG3OszikFsQQmmdVkd+hLxALwyEQFQ8vjaEVMNaKn6XdpIPXwBCSyAtycbAAWDEAsO53m8kFB3ZlslUBYVlUAK1A4T0wH35xgwQQ+94AhVcGw8sQFTQAixkEie5xfhQARpkFEBwAQz1jvs0AQB0AFwgn9gUSTykAuKIAUSUBUgYAWIIAsqFoLzcAsqQgRwoAm/kIL8wg6rEwKFAoN3USTvkAuG4AQ32BMgkAWLcAs9OHKvoCZVwQI7R1RJEAAisIQbUiTrUAuFsATv0RMlsAWMgAvcNnLPIAlioANtEQFiojbqoGcjACpMiDIwcQ6zIAhIACY9kQL+XRAreeh03rCIaoMOYGUCfigs/1Ak5AALfmAEhsgTLOAFknCAPsgv1bAIPhIAKFAuf1iGG9EP4NAKewAEOcQTLoBlv5BeoRgi3TAJAbUTDeAGxBAglBhnG8EP3LAKdtADscgqMXAGlQAMe3eLliEOmqBnKlIGu9A+qRiMlTiM2mAKdJAD8EYANJAGl6Bz0NgX5vAJTyAhBIAFs0A32vhTw4gNpCAHNgBvBlADbKAJxvCFm8QOqqAF4uEEq6A0kRePPbYR+zANoOBuVIYDbbAJn2Zn7RALYsAZO2EEoICKB4mQeKWQGWd0VJZsy+aPYxIPuMAGRpMDmeCHHemR1GS+ds5QdGuHL/JGb7DXJMBQB7H1ApBwfy8Jkz1kdsiQCWWAAh33cSGHI8fwB3+yEyZgCD9XN0LJHrhXDJYABpjXE0m3dE3HGtIwCKXYgn5waVRZlVwCE/ege7zHdm4Hd5UBaduzExJAB8jwIgmBlggJE/YgDJHABf/HExGgeaigDJVgW7yoBsKQIXrZmNuoEfvnCFigARZlAGCQC9jomJppcRshD72gCFXQAVUAC/C4maaZaUWSl6e5mgkZlBYREAA7",p=$('<img style="position:absolute !important; top: auto; min-width:90px !important; max-width:180px !important;width:10% !important;border:none !important;padding: 0 0 0 100px !important;margin:0 !important;box-shadow:0 0 0 !important;" />');try{p[0].src=q;return p}catch(m){return $()}};if(this.settings[g]&&typeof this.settings[g].renderer==="function"){h=this.settings[g].renderer}var l=h();if(l.length){l.appendTo(this.$controlbarUpper);e.call(this,l,f,g)}})}var c=function(){$.fn[d]("addPlugin","instance","SignHere",b)};c()})();var CommonOpinions={config:{status:"",mode:"select"},init:function(){this.doSearch()},setState:function(b){this.config.status=b},setMode:function(b){this.config.mode=b},bindEvent:function(b){b.on("click","li",function(){var c=arguments.callee.caller.arguments[0]||window.event;c.stopPropagation();if(CommonOpinions.config.mode=="select"){CommonOpinions.addOpinion($(this),c)}}).on("click",".del",function(){var c=arguments.callee.caller.arguments[0]||window.event;c.stopPropagation();CommonOpinions.doDelete($(this))}).on("click",".editSub",function(){var g=arguments.callee.caller.arguments[0]||window.event;g.stopPropagation();CommonOpinions.setState("edit");var d=$(this).parents("#commonOpinions");var c=d.find(".edit");c.show();var f=$(this).siblings(".text");var h=c.find("input");h.attr("_id",f.attr("id")).val(f.text()).focus()}).on("click",".addBtn",function(){var d=arguments.callee.caller.arguments[0]||window.event;d.stopPropagation();CommonOpinions.setState("new");var c=$(this).parents("#commonOpinions");c.find("ul li i").hide();$(this).hide();c.find(".editBtn").hide();c.find(".edit").show();var f=c.find(".edit").find("input");f.val("").focus()}).on("click",".editBtn",function(){var d=arguments.callee.caller.arguments[0]||window.event;d.stopPropagation();CommonOpinions.setMode("edit");CommonOpinions.setState("new");$(this).hide();var c=$(this).parents("#commonOpinions");c.find(">ul").addClass("editOpinions");c.find("ul li i").hide();c.find(".addBtn").hide();c.find(".editSub,.del").show();c.find(".edit").show()}).on("click",".cancel",function(){var d=arguments.callee.caller.arguments[0]||window.event;d.stopPropagation();CommonOpinions.setMode("select");var c=$(this).parents("#commonOpinions");c.find(">ul").removeClass("editOpinions");c.find(".addBtn,.editBtn").show();c.find(".edit").hide();c.find(".editSub, .del").hide()}).on("click",".save",function(){var c=arguments.callee.caller.arguments[0]||window.event;c.stopPropagation();CommonOpinions.doSave($(this));CommonOpinions.setState("new")}).on("click","input",function(){var c=arguments.callee.caller.arguments[0]||window.event;c.stopPropagation()}).on("keydown",function(){var c=arguments.callee.caller.arguments[0]||window.event;c.stopPropagation();if(c&&c.keyCode==13){CommonOpinions.doSave($(c.target))}});$(document).click(function(){b.hide()});$("#fieldset_remark_usual").append(b).on("click",function(){var c=arguments.callee.caller.arguments[0]||window.event;c.stopPropagation();b.toggle()})},addOpinion:function(d,e){var c=$("textarea[name=_attitude]");var f=d.find(".text").text();if(f){var h=c.val().length;if((h+f.length)>140){showMessage("danger","字符长度不能超过140个!");return false}}var g=c.offset();var b=$('<div style="z-index:10;width:100%;">'+f+"</div>");b.fly({start:{left:e.pageX,top:e.pageY},end:{left:g.left+10,top:g.top+10,width:0,height:0},onEnd:function(){var l=c.val();if(!l){c.val(f)}else{c.val(c.val()+","+f)}$("#textarea_counter .count").html(c.val().length)}})},doSearch:function(){var b={userId:WebUser.id};$.ajax({url:contextPath+"/portal/usersetup/getCommonOpinion.action",data:b,dataType:"json",success:function(d){if(d&&d.status==1){var e={list:d.data};var c=$(template("commonOpitions-tmpl",e));CommonOpinions.bindEvent(c)}}})},doCheck:function(d){var e="";var c=d.parents("#commonOpinions");var f=c.find("input");var b=f.val().length;if(b&&b>140){e="字符长度不能超过140个!"}else{if(b==0){e="意见不能为空!"}}return e},doSave:function(e){var b=this.doCheck(e);if(b!=""){showMessage("danger",b);return false}var d=e.parents("#commonOpinions");var f=d.find("input");var c=this.config.status;if(c=="new"){this.doCreate(e)}else{if(c=="edit"){this.doUpdate(e)}}f.removeAttr("_id").val("")},doUpdate:function(c){var b=c.parents("#commonOpinions");var g=b.find("input");var f=g.attr("_id");var d=b.find("input").val();var e={userId:WebUser.id,id:f,opinion:d};$.ajax({url:contextPath+"/portal/usersetup/updateCommonOpinion.action",data:e,dataType:"json",success:function(h){if(h&&h.status==1){b.find("ul li #"+f).text(d)}}})},doCreate:function(c){var b=c.parents("#commonOpinions");var d={userId:WebUser.id,opinion:b.find("input").val()};$.ajax({url:contextPath+"/portal/usersetup/addCommonOpinion.action",data:d,dataType:"json",success:function(e){if(e&&e.status==1){var f=e.data;if(CommonOpinions.config.mode=="select"){f.showVal="none"}b.find(".edit").before($(template("commonOpitionsNew-tmpl",e.data)))}}})},doDelete:function(c){var b=c.parents("#commonOpinions");var e=c.parent().find("a.text").attr("id");var d={userId:WebUser.id,id:e};$.ajax({url:contextPath+"/portal/usersetup/deleteCommonOpinion.action",data:d,dataType:"json",success:function(f){if(f&&f.status==1){c.parent().remove()}}})}};var FlowPanel={init:function(){if($("input[activityType='5']").size()==0){return}CommonOpinions.init();if($("input[activityType='5']")){FlowPanel.refreshFlowPanel("init")}$("#flowHtmlForm textarea[name='_attitude']").bind("input oninput",function(){$("#textarea_counter .count").html($(this).val().length)})},refreshFlowPanel:function(c,f){var l=jQuery("#_formHtml > #dy_refreshObj");var h=l.attr("formid");var q=l.attr("docid");var d=l.attr("userid");var p=l.attr("flowid");var m=jQuery("#auditorList");if(m.size()==0||(m.size()>0&&m.val().indexOf(d)>0)){}else{}try{var b=contextPath+"/portal/dynaform/document/refreshFlowPanelHTML.action";var e=dy_getValuesMap(true);e.formid=h;e.docid=q;e.stateid=$("input[name='content.stateid']").val();e.userid=d;e.flowid=p;e.actionType=c;jQuery.ajax({type:"POST",url:b,data:e,cache:false,dataType:"text",async:true,success:function(y){try{var x=jQuery("#flowHtmlText").html(y);var r=jQuery("#_currid");if(r.size()>0&&r.val()==""){r.val(jQuery("#_currentNodeId").val())}switch(c){case"commitTo":x.find("#fieldset_return_to").remove();break;case"returnTo":x.find("#fieldset_commit_to").remove();break;case"init":default:var v=$("#isComplete").val();if(v==""||v=="false"){FlowPanel._renderButtons()}x.find("fieldset").hide()}if(f){var u=FlowPanel._checkHideSubmitPanel();if(u){if(confirm("确认提交")){FlowPanel.flowCommitTo()}}else{var w=$("#fieldset_commit_to");var t=$("#flowprocessDiv");if(w.is(":hidden")||w.size()==0){t.css({opacity:"0.2"}).slideDown(150).fadeTo(200,1)}else{t.slideUp(150)}}}}catch(s){alert("refreshFlowPanel.callback(): "+s.message)}},error:function(r,t,s){if("timeout"==t){FlowPanel.refreshFlowPanel(c)}else{OBPM.message.showError("刷新流程面板失败:"+t)}}})}catch(g){alert("refreshFlowPanel: "+g.message)}},_checkIsSelectCirculator:function(){var c=document.getElementById("_circulator");var b=document.getElementById("_flowType").value;return true},_checkToPerson:function(){var f=document.getElementsByName("_nextids");var e="";if(document.getElementById("_flowType")!=null){e=document.getElementById("_flowType").value}for(var d=0;d<f.length;d++){var g=f[d].value;var c=document.getElementById("isToPerson");if((c&&c.value=="true")&&f[d].checked){var b=false;if(document.getElementById("input_"+d)&&document.getElementById("input_"+d).value==""){b=true}else{b=false}if(e=="80"){if(b){alert(Multilingual.specifyAuditor);return false}}}}return true},_checkHideSubmitPanel:function(){var e=document.getElementsByName("_nextids");var d="";if(document.getElementById("_flowType")!=null){d=document.getElementById("_flowType").value}var c=document.getElementById("isToPerson");var b=e.length>1?true:false;var c=c&&c.value=="true"?true:false;if(d=="80"){if(!c&&!b){return true}}return false},flowCommitTo:function(){if(jQuery("#signature_box").is(":visible")||true){var l=$sigdiv.jSignature("getData","image");if(l&&l.length==2){var b='{"type":"'+l[0]+'","data":"'+l[1]+'"}';$("input[name='_signature']").val(b)}}if(!FlowPanel._checkIsSelectCirculator()){return}var e=document.getElementsByName("_nextids");var g="";if(document.getElementById("isToPerson")!=null){g=document.getElementById("isToPerson").value}var c=false;var f="";if(e!=null){if(!FlowPanel._checkToPerson()){return}for(var d=0;d<e.length;d++){if(e[d].type!="select-one"){if(e[d].checked){c=true;break}}else{if(e[d].value!=null&&e[d].value!=""){c=true;break}}}if(c){if(document.getElementById("_flowType")){document.getElementById("_flowType").value="80"}var h=jQuery("input[activityType='5']").attr("actid");FlowPanel._biuldsubFlowApproverInfoStr();Activity.doExecute(h,5)}else{alert(Multilingual.chooseaction)}}else{alert(Multilingual.noaction)}},flowReturnTo:function(){if(jQuery("#back").val()==""){alert("请选择需要回退的结点！");return}if(jQuery("#signature_box").is(":visible")){var d=$sigdiv.jSignature("getData","image");if(d&&d.length==2){var b='{"type":"'+d[0]+'","data":"'+d[1]+'"}';$("input[name='_signature']").val(b)}}if(document.getElementById("_flowType")){document.getElementById("_flowType").value="81"}var c=jQuery("input[activityType='5']").attr("actid");if(toggleButton("button_act")||toggleButton("btn_act_returnto")){return false}Activity.doExecute(c,5)},freeFlowStartUp:function(d){if($("input[name='nextUserId']").val()==""){OBPM.message.showError("请选择审批人！");return}if(jQuery("#signature_box").is(":visible")){var c=$sigdiv.jSignature("getData","image");if(c&&c.length==2){var b='{"type":"'+c[0]+'","data":"'+c[1]+'"}';$("input[name='_signature']").val(b)}}if(document.getElementById("_flowType")){document.getElementById("_flowType").value="1"}Activity.doExecute(d,5)},freeFlowCommitTo:function(d){if($("input[name='nextUserId']").val()==""){OBPM.message.showError("请选择审批人！");return}if(jQuery("#signature_box").is(":visible")){var c=$sigdiv.jSignature("getData","image");if(c&&c.length==2){var b='{"type":"'+c[0]+'","data":"'+c[1]+'"}';$("input[name='_signature']").val(b)}}if(document.getElementById("_flowType")){document.getElementById("_flowType").value="80"}Activity.doExecute(d,5)},freeFlowBackOff:function(d){if($("input[name='nextUserId']").val()==""){OBPM.message.showError("请选择审批人！");return}if(jQuery("#signature_box").is(":visible")){var c=$sigdiv.jSignature("getData","image");if(c&&c.length==2){var b='{"type":"'+c[0]+'","data":"'+c[1]+'"}';$("input[name='_signature']").val(b)}}if(document.getElementById("_flowType")){document.getElementById("_flowType").value="81"}Activity.doExecute(d,5)},freeFlowComplete:function(b){if(document.getElementById("_flowType")){document.getElementById("_flowType").value="7"}Activity.doExecute(b,5)},_biuldsubFlowApproverInfoStr:function(){var b="";if(subFlowApproverInfo.length>0){b+="["}for(var c=0;c<subFlowApproverInfo.length;c++){b+=subFlowApproverInfo[c]+","}if(b.length>0){b=b.substring(0,b.length-1);b+="]";jQuery("input[name='_subFlowApproverInfo']").val(b)}},_biuldCirculatorInfoStr:function(){var b="";if(circulatorInfos.length>0){b+="["}for(var c=0;c<circulatorInfos.length;c++){b+=circulatorInfos[c]+","}if(b.length>0){b=b.substring(0,b.length-1);b+="]";jQuery("input[name='_circulatorInfo']").val(b)}},_renderButtons:function(){var f=jQuery;var g=f("input[activityType='5']");if(document.getElementById("_handup")){var m=jQuery("input[moduleType='handup']").attr("buttonname");var b=jQuery("input[moduleType='handup']").attr("nodertId");var h="<a class='vbtn btn btn-warning' id='act_flow_retracement' name='button_act' title="+Multilingual.suspend+"  onclick='ev_flowHandup(\""+b+"\")' ><i class='fa fa-pause'></i> "+m+"</a>";var c=f(h);g.after(c)}else{if(document.getElementById("_recover")){var m=jQuery("input[moduleType='recover']").attr("buttonname");var b=jQuery("input[moduleType='recover']").attr("nodertId");var h="<a class='vbtn btn btn-success' id='act_flow_retracement' name='button_act' title="+Multilingual.recover+"  onclick='ev_flowRecover(\""+b+"\")' ><i class='fa fa-play'></i> "+m+"</a>";var c=f(h);g.after(c)}}if(document.getElementById("btn_retracement")&&!document.getElementById("act_flow_retracement")){var h="<a class='vbtn btn btn-danger' id='act_flow_retracement' name='button_act' title="+Multilingual.workflowRetracement+" onclick='doRetracement()' ><i class='fa fa-reply-all'></i> "+Multilingual.workflowRetracement+"</a>";var c=f(h);g.after(c)}if(document.getElementById("btn_addAuditor")&&!document.getElementById("act_flow_addAuditor")){var h="<a class='vbtn btn btn-default' id='act_flow_addAuditor' name='button_act' title="+Multilingual.addAuditor+" onclick='addAuditor()' ><i class='fa fa-pencil'></i> "+Multilingual.workflowAddAuditor+"</a>";var c=f(h);g.after(c)}if(document.getElementById("btn_editAuditor")&&!document.getElementById("act_flow_editAuditor")){var h="<a class='vbtn btn btn-primary' id='act_flow_editAuditor' name='button_act' title="+Multilingual.editAuditor+" onclick='editAuditor()' ><i class='fa fa-user'></i> "+Multilingual.editAuditor+"</a>";var c=f(h);g.after(c)}if(document.getElementById("btn_editFlow")&&!document.getElementById("act_flow_editFlow")){var h="<a class='vbtn btn btn-warning' id='act_flow_editFlow' name='button_act' title="+Multilingual.workflowAdjustment+" onclick='editFlowByFrontUser()' ><i class='fa fa-wrench'></i> "+Multilingual.workflowAdjustment+" </a>";var c=f(h);g.after(c)}if(document.getElementById("btn_termination")&&!document.getElementById("act_flow_termination")){var h="<a class='vbtn btn btn-danger' id='act_flow_termination' name='button_act' title="+Multilingual.flowTerminate+" onclick='terminateFlow()' ><i class='fa fa-stop'></i> "+Multilingual.flowTerminate+" </a>";var c=f(h);g.after(c)}if(document.getElementById("btn_back")&&!document.getElementById("act_flow_back")){var h="<a class='8 vbtn btn btn-warning' id='act_flow_back' href='##' name='button_act' title='回退'><i class='fa fa-reply-all'></i> 回退 </a>";var c=f(h);c.click(function(){var r=f("#fieldset_return_to");var q=f("#flowprocessDiv");if(r.is(":hidden")||r.size()==0){FlowPanel.refreshFlowPanel("returnTo");var p=f("<button type='button' name='btn_act_returnto' class='btn btn-danger'><span>"+Multilingual.rejectConfirm+"</button>").click(function(){FlowPanel.flowReturnTo()});f("#div_button_place").empty().append(p);q.css({opacity:"0.2"}).slideDown(150).fadeTo(200,1)}else{q.slideUp(150)}FlowPanel.flowResizeHeight()});g.eq(0).after(c)}if(document.getElementById("btn_flow_reminder")&&!document.getElementById("act_flow_reminder")){var h="<a class='9 vbtn btn btn-primary' id='act_flow_reminder' name='button_act' title="+Multilingual.reminder+"><i class='fa fa-fire'></i> "+Multilingual.reminder+" </a> ";var c=f(h);var e=f("#btn_flow_reminder");var l=e.data("nodes");for(var d=0;d<l.length;d++){f('<lable><input type="checkbox" name="_nodertIds" value="'+l[d].nodertId+'" checked="checked" />'+l[d].nodeName+"</lable>").appendTo(f(".flow-reminder-panel-node-list"))}f(".flow-reminder-panel-attitude textarea[name='_reminderContent']").bind("input oninput",function(){f("#flow-reminder-counter .flow-reminder-num").html(f(".flow-reminder-panel-attitude textarea[name='_reminderContent']").val().length)});f("#btn-flow-reminder").on("click",function(p){if(f("input[name='_nodertIds']:checked").length<=0){alert(Multilingual.nodeNeedReminders);return}if(f("textarea[name='_reminderContent']").val().length<=0){alert(Multilingual.theNoteReminders);return}else{if(f("textarea[name='_reminderContent']").val().length>200){alert(Multilingual.noteTooLong);return}}unbindBeforeUnload();document.forms[0].action=contextPath+"/portal/dynaform/document/flowReminder.action";if(toggleButton("button_act")){return false}makeAllFieldAble();document.forms[0].submit();showLoading();layer.closeAll()});c.click(function(){var p=(f("#act").width()/3)*2;layer.open({type:1,title:false,content:f("#flow-reminder-panel"),area:p+"px",offset:"27px",shade:0,yes:function(r,q){},cancel:function(q){layer.close(q)}})});g.after(c)}f.each(g,function(v,A){var r=f(A).attr("flowshowtype");var C="/portal/share/images/act/act_5.gif";if(f(A).attr("icon")!=null&&isNaN(f(A).attr("icon"))){C="/lib/icon"+f(A).attr("icon")}var D=f(A).val();var E="btn-primary";switch(f(A).attr("colorType")){case"primary":E="btn-primary";break;case"success":E="btn-success";break;case"info":E="btn-info";break;case"warning":E="btn-warning";break;case"danger":E="btn-danger";break;default:break}var t;var s=f(A).attr("workflowtype");if(s==0){if(document.getElementById("btn_commit")&&!document.getElementById("act_flow_submit"+v)){var x="<a class='5 vbtn btn "+E+"' href='#' id='act_flow_submit"+v+"' name='button_act' title='"+D+"'><i class='fa fa-clock-o'></i> "+D+"</a>";t=f(x);t.click(function(){var I=f("#fieldset_commit_to");var H=f("#flowprocessDiv");FlowPanel.refreshFlowPanel("commitTo");var G=f("<button type='button' class='btn btn-primary' name='btn_act_committo'>"+Multilingual.confirmTo+"</button>").click(function(){FlowPanel.flowCommitTo();if(r=="ST02"){layer.closeAll()}FlowPanel.flowResizeHeight()});f("#div_button_place").empty().append(G);if(r=="ST02"){var F=f("#act").width()-30;layer.open({type:1,title:false,content:H,area:F+"px",offset:"27px",shade:0.3,shadeClose:true,cancel:function(J){layer.close(J)}})}else{if(r=="ST03"){FlowPanel.refreshFlowPanel("commitTo",true)}else{if(I.is(":hidden")||I.size()==0){H.css({opacity:"0.2"}).slideDown(150).fadeTo(200,1)}else{H.slideUp(150)}}}if(r!="ST02"){FlowPanel.flowResizeHeight()}});f(A).after(t)}}else{if(s==1){var B=false;var q=jQuery("#auditorList").val();var z=WebUser.id;if(q){var u=JSON.parse(q);for(var y in u){if(y==z){B=true;break}}}else{B=true}if(B){var w=f("input[name='content.stateid']").val();var p=f(this).attr("actid");if(w){var x="<a class='5 vbtn btn btn-primary' href='#' id='act_flow_commitTo' name='button_act' title='"+D+" _提交流程' _flowType = '80' ><i class='fa fa-clock-o'></i> "+D+"</a>";t=f(x);t.click(function(){var F="commit";FlowProcess.renderFreePanel(p,F)});f(A).after(t);var x="<a class='10 vbtn btn btn-warning' href='#' id='act_flow_backOff' name='button_act' title='"+D+"_回退流程' _flowType = '80' ><i class='fa fa-clock-o'></i> 回退</a>";t=f(x);t.click(function(){var F="back";FlowProcess.renderFreePanel(p,F)});f(A).after(t);var x="<a class='10 vbtn btn btn-success' href='#' id='act_flow_complete' name='button_act' title='"+D+"_结束流程' _flowType = '7' ><i class='fa fa-clock-o'></i> 结束流程</a>";t=f(x);t.click(function(){var F="end";FlowProcess.renderFreePanel(p,F)});f(A).after(t)}else{var x="<a class='10 vbtn btn btn-primary' href='#' id='act_flow_startup' name='button_act' title='"+D+"_发起流程' _flowType = '1' ><i class='fa fa-clock-o'></i> "+D+"</a>";t=f(x);t.click(function(){var F="start";FlowProcess.renderFreePanel(p,F)});f(A).after(t)}}}}})},showUserSelectOnSubFlow:function(c,e){var g=jQuery("input[activityType='5']").attr("applicationid");var d=contextPath+"/portal/share/user/selectApprover4Subflow.jsp?application="+g;d+="&docid="+e.docid+"&instanceId="+e.instanceId+"&numberSetingType="+e.numberSetingType+"&instanceTotal="+e.instanceTotal+"&nodeid="+e.nextNodeId+"&flowid="+e.flowid;var b=getSubFlowApproverInfo(e.nextNodeId);var f="";OBPM.dialog.show({width:700,height:500,url:d,args:{value:f,readonly:e.readonly,numberSetingType:e.numberSetingType,instanceTotal:e.instanceTotal,nodeid:e.nextNodeId,jsonStr:b},title:Multilingual.userSelect,ok:null,cancel:null,button:null,close:function(p){if(p!=null){FlowPanel._addSubFlowApproverInfo(subFlowApproverInfoAll,e.nextNodeId,JSON.stringify(p));var h=JSON.parse(p.approver);var m="";for(var l=0;l<h.length;l++){if(l!=0){m+=","}m+=h[l].names;delete h[l].names}jQuery("input[name="+e.textField+"]").val(m);p.approver=h;FlowPanel._addSubFlowApproverInfo(subFlowApproverInfo,e.nextNodeId,JSON.stringify(p))}}})},_addSubFlowApproverInfo:function(e,g,f){var b=true;for(var d=0;d<e.length;d++){var c=e[d];if(c.indexOf(g)>0){e[d]=f;b=false;break}}if(b){e.push(f)}},showUserSelect:function(e,d){var l=jQuery("input[activityType='5']").attr("applicationid");var c=contextPath+"/portal/share/user/selectbyflow.jsp?application="+l;c+="&docid="+d.docid+"&nodeid="+d.nextNodeId+"&flowid="+d.flowid;var m=document.getElementById(d.valueField);var g="";if(m){g=m.value}var b=document.getElementById(d.hiddenIds).value;var h;var f;if(skinType=="H5"){h="icons_4";f="../H5/resource/component/artDialog"}else{h="";f=""}OBPM.dialog.show({width:682,height:500,url:c,icon:h,path:f,args:{value:g,readonly:d.readonly,applicationid:l,defValue:b},title:Multilingual.flowUserSelect,ok:null,cancel:null,button:null,close:function(C){selectFlag=true;var y=C;var A=document.getElementById(d.textField);if(A){if(y){isToPerson=true;if(y[0]&&y.length>0){var z="";var r="";var x=document.getElementById(d.nextNodeId);var u=document.getElementById("submitTo").value;if(u==null||u==""){u="["}else{if(u.lastIndexOf("]")!=-1){u=u.substr(0,u.lastIndexOf("]"));u=u+","}}var s=u.indexOf(d.nextNodeId)+d.nextNodeId.length+34;if(u.indexOf(d.nextNodeId)>0){var v=u.substr(0,s);var q=u.substr(s+1,u.length);if(q.substr(q.length-1,q.length)==","){q=q.substr(0,q.length-1)}var p=q.substr(q.indexOf("]",0)-1,q.length);u=v;for(var w=0;w<y.length;w++){z+=y[w].value+";";r+=y[w].text+";";u+="'"+y[w].value+"',"}u=u.substring(0,u.length-2);u+=p;document.getElementById(d.hiddenIds).value=z.substring(0,z.lastIndexOf(";"))}else{u+='{"nodeid":\''+d.nextNodeId+'\',"isToPerson":\'true\',"userids":"[';var t="";for(var w=0;w<y.length;w++){z+=y[w].value+";";r+=y[w].text+";";t+="'"+y[w].value+"',"}t=t.substring(0,t.length-1);u+=t+']"}';document.getElementById(d.hiddenIds).value=z.substring(0,z.lastIndexOf(";"))}document.getElementById("submitTo").value=u+"]";m.value=z.substring(0,z.lastIndexOf(";"));var B=r.substring(0,r.lastIndexOf(";"));A.value=B;A.title=B}else{m.value="";A.value="";A.title="";document.getElementById("submitTo").value="";document.getElementById(d.hiddenIds).value="";isToPerson=false}}else{}if(d.callback){d.callback(m.name)}}}})},flowResizeHeight:function(){setTimeout(function(){var e=$(window).height();var b=$("#activityTable").outerHeight();var c=$("#flowprocessDiv").is(":visible")?$("#flowprocessDiv").outerHeight():0;var d=$("#_contentTable");d.height(e-b-c-30);d.getNiceScroll().resize()},450)}};var circulatorInfos=[];function selectCirculator(b,e){var d=contextPath+"/portal/share/user/selectCirculatorByFlow.jsp?application="+application;d+="&docid="+e.docid+"&nodeid="+e.nextNodeId+"&flowid="+e.flowid;var c=document.getElementById(e.valueField);var f="";if(c){f=c.value}OBPM.dialog.show({width:682,height:500,url:d,args:{parentObj:window,targetid:"_circulatorInfo",receivername:e.textField,defValue:e.defValue,limitSum:e.limitSum,selectMode:e.selectMode},title:Multilingual.flowUserSelect,ok:null,cancel:null,button:null,close:function(g){selectFlag=true;var p=g;var r=document.getElementById(e.textField);if(r){if(p){var h="";var m="";for(var l=0;l<p.length;l++){h+='"'+p[l].value+'",';m+=p[l].text+";"}if(h.length>0){h=h.substring(0,h.length-1);h="["+h+"]";var q="{circulator:"+h+"}";circulatorInfos[0]=q;biuldCirculatorInfoStr()}var s=(m==""?m:m.substring(0,m.length-1));r.value=s;r.title=s}else{if(p==""){r.value="";r.title="";circulatorInfos[0]="";document.getElementById("_circulatorInfo").value=""}}}}})}function leng(e){var d=0;var b=[];for(var c in e){b.push(c)}return b}function showUserSelectOnSubFlow(b,c){FlowPanel.showUserSelectOnSubFlow(b,c)}function showUserSelect(b,c){FlowPanel.showUserSelect(b,c)}function ev_setFlowType(b,c,d){}function getSubFlowApproverInfo(d){for(var c=0;c<subFlowApproverInfoAll.length;c++){var b=subFlowApproverInfoAll[c];if(b.indexOf(d)>0){return b}}return""}function addCirculatorInfo(e,g,f){var b=true;for(var d=0;d<e.length;d++){var c=e[d];if(c.indexOf(g)>0){e[d]=f;b=false;break}}if(b){e.push(f)}}function biuldCirculatorInfoStr(){var b="";if(circulatorInfos.length>0){b+="["}for(var c=0;c<circulatorInfos.length;c++){b+=circulatorInfos[c]+","}if(b.length>0){b=b.substring(0,b.length-1);b+="]";jQuery("input[name='_circulatorInfo']").val(b)}}function checkIsSelectCirculator(){var c=document.getElementById("_circulator");var b=document.getElementById("_flowType").value;return true}var FlowProcess={bindEvent:function(){var b=$("#flowprocessDiv");b.on("click",".flow-submit__user",function(){var d=$(this);var e=$("#nextUser");var c=$("#nextUserId");c.val("");e.val("");d.siblings(".flow-submit__user-select-box").show();d.remove()});b.on("click",".flow-submit__user-select-box",function(){var e=$(this).parents("fieldset");var c=e.attr("actType");var d={actType:c,selectMode:"selectOne",textField:"nextUser",valueField:"nextUserId",readonly:false};FlowProcess.util.showUserSelect("freeFlow",d,function(w){var h=$("#nextUser");var q=$("#nextUserId");var m=h.parent();var f=h.siblings(".flow-submit__user-select-box");if(w&&h.size()>0&&q.size()>0){f.hide();var v="";var t="";for(var p=0;p<w.length;p++){var r=Common.Util.getAvatar(w[0].value);var u=w[p].text;var s=w[p].value;if(r&&r!=""){var l='<img class="avatar" src="'+r+'">'}else{var l='<div class="noAvatar">'+(w[p].text).substr(0,2)+"</div>"}var g='<div class="flow-submit__user"><div class="flow-submit__user-avatar" style="background: #A2A2A2;">'+l+'<i class="fa fa-minus-square"></i></div><div class="flow-submit__user-name">'+u+"</div></div>";f.before($(g));h.val(u);q.val(s)}}else{if(m.find(".flow-submit__user").size()>0){return false}f.show()}})})},renderFreePanel:function(g,e){var b=$("#flowprocessDiv");var d=$("#flowHtmlText");var h=$("#fieldset_freeFlow_"+e);if(h.is(":hidden")||h.size()==0){if(e=="start"){var c='<fieldset id="fieldset_freeFlow_'+e+'" acttype="start"><legend>提交至</legend><div class="flow-submit__user-panel" data-type="nodeItem" style="padding: 10px;"><div class="flow-submit__user-select-box"><div class="flow-submit__user-avatar flow-submit__user-select"></div></div><input type="hidden" id="nextUserId" name="nextUserId" /><input type="hidden" id="nextUser" name="nextUser" /></div></fieldset>';d.html(c);var f=$("<button type='button' class='btn btn-primary' name='btn_act_startup' >确认发起</button>").click(function(){FlowPanel.freeFlowStartUp(g)})}else{if(e=="back"){var c='<fieldset id="fieldset_freeFlow_'+e+'" acttype="back"><legend>提交至</legend><div class="flow-submit__user-panel" data-type="nodeItem" style="padding: 10px;"><div class="flow-submit__user-select-box"><div class="flow-submit__user-avatar flow-submit__user-select"></div></div><input type="hidden" id="nextUserId" name="nextUserId" /><input type="hidden" id="nextUser" name="nextUser" /></div></fieldset>';d.html(c);var f=$("<button type='button' class='btn btn-warning' name='btn_act_startup' >确认回退</button>").click(function(){FlowPanel.freeFlowBackOff(g)})}else{if(e=="end"){var c='<fieldset id="fieldset_freeFlow_'+e+'" acttype="end" style="position: relative;"><legend>提交至</legend><div data-type="nodeItem"><img src="'+contextPath+'/portal/H5/resource/images/icon_freeflow_end.png" style="position: absolute;left: 50%;top: 50%;margin-top: -33px;margin-left: -33px;"></div></fieldset>';d.html(c);var f=$("<button type='button' class='btn btn-success' name='btn_act_complete' _flowType = '7' >确认结束</button>").click(function(){FlowPanel.freeFlowComplete(g)})}else{if(e=="commit"){var c='<fieldset id="fieldset_freeFlow_'+e+'" acttype="commit"><legend>提交至</legend><div class="flow-submit__user-panel" data-type="nodeItem" style="padding: 10px;"><div class="flow-submit__user-select-box"><div class="flow-submit__user-avatar flow-submit__user-select"></div></div><input type="hidden" id="nextUserId" name="nextUserId" /><input type="hidden" id="nextUser" name="nextUser" /></div></fieldset>';d.html(c);var f=$("<button type='button' class='btn btn-primary' name='btn_act_startup' >"+Multilingual.commit+"</button>").click(function(){FlowPanel.freeFlowCommitTo(g)})}}}}$("#div_button_place").empty().append(f);b.css({opacity:"0.2"}).slideDown("fast").fadeTo(200,1)}else{b.slideUp("fast")}},util:{showUserSelect:function(g,d,l){var m=$("input[activityType='5']").attr("applicationid");if(g=="freeFlow"){if(d.actType=="start"||d.actType=="commit"){var c=contextPath+"/portal/H5/resource/component/dialog/selectUserByAll.jsp?application="+m}else{var c=contextPath+"/portal/H5/resource/component/dialog/selectUser4Free.jsp?application="+m}}var e=$("#"+d.valueField);var h="";if(e){h=e.val()}var b="";var f={parentObj:window,targetid:d.valueField,receivername:d.textField,selectMode:d.selectMode,stateId:$("input[name='content.stateid']").val()};OBPM.dialog.show({width:682,height:500,url:c,args:f,title:Multilingual.flowUserSelect,ok:null,cancel:null,button:null,close:function(p){if(l&&typeof l=="function"){l(p)}}})}}};(function(){var b=function(c){this.elem=c};b.prototype={defaults:{texts:["此处水印文字"],width:300,height:250,textRotate:-30,textColor:"#d2d2d2",textFont:'16px "Helvetica Neue","Microsoft Yahei"'},options:{canvas:[]},init:function(w){$.extend(this.options,this.defaults,w);var m=$("body"),t=this.__createCanvas(m),s=this.__createCanvas(m),e=this.__createCanvas(m),g=this.options,p=g.texts.length;g.deg=g.textRotate*Math.PI/180;this.__calcTextSize(m);var v=Math.ceil(screen.width/g.txts.length/g.width);g.canvasWidth=g.canvasWidth*v;var l=[];while(v--){l=l.concat(g.txts)}g.txts=l;var h=g.maxWidth*Math.abs(Math.sin(g.deg))+Math.cos(g.deg)*g.textHeight;if(h>g.height){g.height=h}var r=this.__setCanvasStyle(t,g.canvasWidth,g.height);var q=this.__setCanvasStyle(s,g.canvasWidth,g.height);var u=this.__setCanvasStyle(e,g.canvasWidth,g.height*2,true);this.__drawText(r,g.txts);this.__drawText(q,g.txts.reverse());var d=g.width*Math.cos(g.deg);var c=parseInt(-d*Math.tan(g.deg)+g.height);u.drawImage(t,0,0,g.canvasWidth,g.height);u.drawImage(s,0,g.height,g.canvasWidth,g.height);var f=e.toDataURL("image/png");$(this.elem).css("backgroundImage","url("+f+")");$(this.elem).css("backgroundPosition","0 -"+c+"px")},__createCanvas:function(d){var c=document.createElement("canvas");d.append(c);this.options.canvas.push(c);return c},__calcTextSize:function(g){var d=[],f=0,c=0,e=this.options;$.each(e.texts,function(h,q){var l=$('<span style="font:'+e.textFont+';visibility: hidden;display: inline-block;"> '+q+"</span>").appendTo(g);var p=l[0].offsetWidth,m=l[0].offsetHeight;l.remove();d.push({txt:q,width:p,height:m});f=Math.max(f,p);e.textHeight=m;var r=Math.cos(e.deg)*p;c+=(e.width<r?r:e.width)-m*Math.sin(e.deg)});e.txts=d;e.maxWidth=f;e.canvasWidth=c},__setCanvasStyle:function(e,d,p,m){e.width=d;e.height=p;e.style.display="none";var q=e.getContext("2d");if(!m){var c=this.options.deg,h=Math.abs(Math.sin(c));q.rotate(c);var f=h*this.options.height-this.options.textHeight*h;var l=-f*Math.cos(c),g=-f*h;q.translate(l,g*h);q.font=this.options.textFont;q.fillStyle=this.options.textColor;q.textAlign="left";q.textBaseline="Middle"}return q},__drawText:function(c,d){var e=this.options;$.each(d,function(g,h){var m=(e.maxWidth-h.width)/2;var f=e.width*Math.cos(e.deg)*g,l=-f*Math.tan(e.deg)+e.height;c.fillText(h.txt,f+m,l)})},__destory:function(){$.each(this.options.canvas,function(d,c){c.remove();c=null})}};$.fn.watermark=function(c){new b(this).init(c)}})(jQuery);